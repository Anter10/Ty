{"version":3,"sources":["ado_view_every_day_login.js"],"names":["cc","Class","extends","Component","properties","nodeWatchVideoToggle","Node","nodeShareToggle","onLoad","isWatchVideo","isShare","director","getScene","_name","tywx","ado","Utils","hideGameClub","an","AdManager","getAdNodeByTag","hideAdNode","start","showWXBanner","commonScaleIn","root","onDestroy","showGameClub","showAdNode","hideWXBanner","NotificationCenter","trigger","Events","ADO_EVENT_DESTROY_EVERY_DAY_LOGIN","btnClose","node","destroy","motai","info","rewad","itemTouched","idx","console","log","changeWatchVideoStat","active","btn_get_label","getChildByName","getComponent","Label","string","changeShareStat","btn_get_label_shadow","getReward","self","showWXModal","window","wx","showShareMenu","withShareTicket","shareConfig","Constants","ShareConfig","EVERY_DAY_GIFT_DOUBLE_SHARE","msg","getRandomShareConfigByShareTag","shareContent","sharePicUrl","sharePointId","shareSchemeId","ShareInterface","share","res","JSON","stringify","shareTickets","undefined","length","share2GroupByTicket","showOpenRedPacket","data","showWXVideo","success","fail","error_callback","btnGetRewardWithoutShareAndVideo","is_double","loader","loadRes","err","prefab","prefabNode","instantiate","game","addPersistRootNode","x","y","showUI","init","EveryDataLoginInfo","i","child_name","node_icon","mask","node_count","label_count","bg","amount","amounts","formatCashFen2Yuan","count"],"mappings":"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","file":"ado_view_every_day_login.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nodeWatchVideoToggle: cc.Node,\n        nodeShareToggle: cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.isWatchVideo = true;\n        this.isShare = true;\n        if(cc.director.getScene()._name === 'gamestart'){\n            tywx.ado.Utils.hideGameClub();\n            let an = tywx.AdManager.getAdNodeByTag('GAME_START');\n            if(an) an.hideAdNode();\n        } else if (cc.director.getScene()._name === 'gamemain') {\n            //tywx.ado.Utils.hideWXBanner();\n        }\n    },\n\n    start () {\n        tywx.ado.Utils.showWXBanner();\n        tywx.ado.Utils.commonScaleIn(this.root);\n    },\n    onDestroy(){\n        if(cc.director.getScene()._name === 'gamestart'){\n            tywx.ado.Utils.showGameClub();\n            let an = tywx.AdManager.getAdNodeByTag('GAME_START');\n            if(an) an.showAdNode();\n            tywx.ado.Utils.hideWXBanner();\n        } else if (cc.director.getScene()._name === 'gamemain') {\n            tywx.ado.Utils.showWXBanner();\n        }\n        tywx.NotificationCenter.trigger(tywx.ado.Events.ADO_EVENT_DESTROY_EVERY_DAY_LOGIN,null);\n    },\n\n    // update (dt) {},\n    btnClose(){\n        this.node.destroy();\n    },\n    motai(){\n        if(this.info.rewad) this.node.destroy();\n    },\n    itemTouched(idx){\n        console.log('itemTouched', idx);\n    },\n    changeWatchVideoStat(){\n        this.isWatchVideo = !this.isWatchVideo;\n        if(!this.isWatchVideo){\n            this.nodeShareToggle.active = true;\n            this.nodeWatchVideoToggle.active = false;\n            this.isShare = true;\n            let btn_get_label = this.root.getChildByName('btn_reward_double').getChildByName('label_reward').getComponent(cc.Label);\n            if(btn_get_label){\n                btn_get_label.string = '加倍领取';\n            }\n        }\n    },\n    changeShareStat(){\n        this.isShare = !this.isShare;\n        let btn_get_label = this.root.getChildByName('btn_reward_double').getChildByName('label_reward').getComponent(cc.Label);\n        let btn_get_label_shadow = this.root.getChildByName('btn_reward_double').getChildByName('label_reward_shadow').getComponent(cc.Label);\n        if(!this.isShare) {\n            if(btn_get_label){\n                btn_get_label.string = '视频加倍';\n                btn_get_label_shadow.string = '视频加倍';\n            }\n        }\n        else{\n            if(btn_get_label){\n                btn_get_label.string = '加倍领取';\n                btn_get_label_shadow.string = '加倍领取';\n            }\n        }\n    },\n    getReward(){\n        let self = this;\n        if(this.info.rewad){\n            console.log('已经领取奖励');\n            tywx.ado.Utils.showWXModal(\n                '已经领取奖励',\n                '提示',\n                false);\n        }\n        else{\n            if(this.isShare){\n                window.wx.showShareMenu({withShareTicket: true});\n                let shareConfig = tywx.ado.Constants.ShareConfig.EVERY_DAY_GIFT_DOUBLE_SHARE;\n                let msg = tywx.ado.Utils.getRandomShareConfigByShareTag(shareConfig[0]);\n                if(!msg){\n                    msg = {};\n                    msg.shareContent = \"你知道 +1 吗？\";\n                    msg.sharePicUrl = \"https://marketqn.nalrer.cn/teris/share_image/jiayi/jy03.jpg\";\n                    msg.sharePointId = \"766\";\n                    msg.shareSchemeId = \"1155\";\n                }\n                if(msg){\n                    tywx.ShareInterface.share(\n                        msg.shareContent,\n                        msg.sharePicUrl,\n                        msg.sharePointId,\n                        msg.shareSchemeId,\n                        (res) => {\n                            console.log(\"分享成功后的数据\"+JSON.stringify(res));\n                            // * is share to group\n                            if(shareConfig && shareConfig[1]){\n                                // * froce share to group\n                                if (res.shareTickets !== undefined && res.shareTickets.length > 0) {\n                                    tywx.ado.Utils.share2GroupByTicket(\n                                        shareConfig[0], \n                                        res, \n                                        ()=>{ // * success callback\n                                            self.showOpenRedPacket(true);\n                                        },\n                                        ()=>{ // * failed callback\n                                            tywx.ado.Utils.showWXModal('请分享到不同群');\n                                            //self.errorCallBack && self.errorCallBack(null);                                           \n                                        }\n                                    );\n                                }\n                                else{\n                                    // * failed\n                                    tywx.ado.Utils.showWXModal('请分享到群');\n                                    //self.errorCallBack && self.errorCallBack(null);\n                                }\n                            }\n                            else{\n                                // * success\n                                self.showOpenRedPacket(true);\n                            }                          \n                         \n                        },\n                        function(data){\n                            console.log(\"分享成功后的数2据\"+JSON.stringify(data));\n                            //self.errorCallBack && self.errorCallBack(data);\n                        }\n                    );\n               }\n            }\n            else{\n                tywx.ado.Utils.showWXVideo({\n                    success:()=>{\n                        self.showOpenRedPacket(true);\n                    },\n                    fail:()=>{},\n                    error_callback:()=>{\n                        self.showOpenRedPacket(true);\n                    }\n                });\n            }\n            \n        }\n    },\n    btnGetRewardWithoutShareAndVideo(){\n        this.showOpenRedPacket();\n    },\n    showOpenRedPacket(is_double = false){\n        this.node.destroy();\n        cc.loader.loadRes('prefabs/OpenRedPackView_2', function (err, prefab) {\n            if (!err) {\n                var prefabNode = cc.instantiate(prefab);\n                cc.game.addPersistRootNode(prefabNode);\n                prefabNode.x = 360;\n                prefabNode.y = 720;\n                tywx.ado.Utils.hideWXBanner();\n                prefabNode.getComponent('OpenRedPackView_2').showUI();\n                prefabNode.getComponent('OpenRedPackView_2').init(is_double);\n            }\n        });\n    },\n    init(){\n        let info = tywx.ado.EveryDataLoginInfo;\n        this.root = this.node.getChildByName('root');\n        this.info = info;\n        let btn_get_label = this.root.getChildByName('btn_reward_double').getChildByName('label_reward').getComponent(cc.Label);\n        let btn_get_label_shadow = this.root.getChildByName('btn_reward_double').getChildByName('label_reward_shadow').getComponent(cc.Label);\n        if(btn_get_label){\n            btn_get_label.string = info.rewad ? '已领取' : '加倍领取';\n            btn_get_label_shadow.string = info.rewad ? '已领取' : '加倍领取';\n            this.root.getChildByName('toggle_share').active = !info.rewad;\n            this.root.getChildByName('btn_reward').active = !info.rewad;\n        }\n        for(let i = 0; i < 7; i++){\n            let child_name = `node_icon_${i}`;\n            let node_icon = this.root.getChildByName(child_name);\n            if(node_icon){\n                let mask = node_icon.getChildByName('mask');\n                let node_count = node_icon.getChildByName('label_count');\n                let label_count = node_count.getComponent(cc.Label);\n                let bg = node_icon.getChildByName('sprite_icon');\n                let amount = info.amounts[i] >= 0 ? info.amounts[i] : -info.amounts[i];\n                label_count.string = `¥${tywx.ado.Utils.formatCashFen2Yuan(amount)}`;\n                if (i === info.count - 1){\n                    mask.active = false;\n                    node_count.active = info.rewad;\n                }\n                else{\n                    mask.active = true;\n                    bg.active = false;\n                    if(i > info.count - 1){\n                        node_count.active = false;\n                    }\n                    else{\n                        node_count.active = true;\n                    }\n                }\n            }\n        }\n    }\n});\n"]}