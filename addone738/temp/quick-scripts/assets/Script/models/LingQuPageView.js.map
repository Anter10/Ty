{"version":3,"sources":["LingQuPageView.js"],"names":["cc","Class","extends","Component","properties","pagePrefab","default","type","Prefab","userItem","pageView","PageView","nextBut","Sprite","upBut","onLoad","pageIndex","page","instantiate","tywx","LOGE","hindex","item","y","x","addChild","addPage","node","active","nextPage","totalpage","getPages","length","curindex","getCurrentPageIndex","scrollToPage","upPage","update"],"mappings":"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","file":"LingQuPageView.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["/*\n    游戏中的邀请领取界面:\n    created by gyc on 2018-08-014.\n    final changed by gyc on 2018-08-15.\n*/\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pagePrefab:{\n            default: null,\n            type: cc.Prefab,\n        },\n        userItem:{\n            default: null,\n            type: cc.Prefab,\n        },\n        pageView:{\n            default: null,\n            type: cc.PageView,\n        },\n        nextBut:{\n            default: null,\n            type: cc.Sprite,\n        },\n        upBut:{\n            default: null,\n            type: cc.Sprite,\n        },\n    },\n \n    /*\n        调用: 节点渲染完成后调用\n        功能: 完成部分逻辑的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    onLoad:function(){\n       for(var pageIndex = 0; pageIndex < 5; pageIndex ++){\n           var page = cc.instantiate(this.pagePrefab);\n           tywx.LOGE(\"添加了新的view \");\n         \n           for(var hindex = 0; hindex < 6; hindex ++ ){\n                var item = cc.instantiate(this.userItem);\n                if(hindex < 3){\n                   item.y = -120;\n                   item.x = hindex * 215  - 215;\n                }else{\n                   item.y = 190;\n                   item.x = (hindex - 3) * 215 - 215;\n                }\n                page.addChild(item);\n           }\n           this.pageView.addPage(page);\n       }\n\n       this.upBut.node.active = false;\n    },\n\n   \n    /*\n        调用: 点击下一页按钮的时候调用\n        功能: 跳转到一页\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */ \n    nextPage:function(){\n        var totalpage = this.pageView.getPages().length;\n        var curindex = this.pageView.getCurrentPageIndex()\n        if(curindex < totalpage){\n           this.upBut.node.active = true;\n           if(curindex == totalpage - 2){\n              this.nextBut.node.active = false;\n           }else{\n              this.nextBut.node.active = true;\n           }\n           this.pageView.scrollToPage(curindex + 1, 0.2);\n        }else{\n           this.nextBut.node.active = false;\n        }\n    },\n\n    /*\n        调用: 点击上一页按钮的时候调用\n        功能: 跳转到上一页\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */ \n    upPage:function(){\n        var totalpage = this.pageView.getPages().length;\n        var curindex = this.pageView.getCurrentPageIndex()\n        tywx.LOGE(\"当前页面 = \"+curindex);\n        if(curindex > 0){\n           this.nextBut.node.active = true;\n           if(curindex == 1){\n              this.upBut.node.active = false;\n           }else{\n              this.upBut.node.active = true;\n           }\n           this.pageView.scrollToPage(curindex - 1, 0.2);\n        }else{\n           this.upBut.node.active = false;\n           this.nextBut.node.active = true;\n        }\n    },\n\n    /*\n        调用: 每帧调用\n        功能: 完成及时性的一些逻辑\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */ \n    update:function(){\n        if(this.pageView.getCurrentPageIndex() == 0){\n           this.upBut.node.active = false;\n        }else if(this.pageView.getCurrentPageIndex() == this.pageView.getPages().length - 1){\n           this.nextBut.node.active = false;\n        }else{\n           this.upBut.node.active = true;\n           this.nextBut.node.active = true;\n        }\n    }\n\n});\n"]}