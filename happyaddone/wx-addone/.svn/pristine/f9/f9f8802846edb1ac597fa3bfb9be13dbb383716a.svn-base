{"version":3,"sources":["gamestart.js"],"names":["config","require","tywx","publicwx","curscene","gamestart","cc","Class","extends","Component","properties","startButton","default","type","Button","backButton","audioCtr","Prefab","userItem","gameScore","Label","historyLabel","phbNameLabel","phb","phbback","Sprite","helpback","giftback","Node","method","phbSprite","phbShareBtn","shareBtn","groupBtn","phbView","helpview","giftview","helpViewPre","contentView","addInMyMini","shouZHiNode","icon","requestTimes","haveStoreGameData","start","tex","Texture2D","window","sharedCanvas","width","height","showPhb","_updateSubDomainCanvas","openDataContext","wx","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","ctor","update","delayTime","onLoad","postMessage","MAIN_MENU_NUM","ado","loadProgress","Utils","showGameClub","game","cw","ch","is_ipx","console","log","y","playSZAni","getComponent","setShareConfig","Constants","ShareConfig","RANK_SHARE","JSON","stringify","view","getDevicePixelRatio","getVisibleSize","PropagateInterface","getShareConfigInfo","msg","ShareInterface","getRandomOnShareAppMessageInfo","setOnShareAppMessageInfo","title","imageUrl","sharePointId","shareSchemeId","shareComponent","setErrorCall","data","setSuccessCall","FIRST_PAGE_SHARE","groupBtnComponent","self","setShareGroupCall","active","hideGameClub","shareTicket","shareTickets","string","Timer","setTimer","score","loadItem","length","node","x","tx","on","event","hideBack","givePlayerItems","requestConfigInfo","stime","scale","stopAllActions","scaletime","tscale","scaleBoom","scaleTo","scaleSmaller","delay","seq","sequence","rep","repeatForever","runAction","onDestroy","destroyWXBanner","showPlayMethod","helpviewpre","destroy","instantiate","parent","helpviewscript","setCloseCall","showBack","showGiftView","showFriendPhbView","hidePhbView","loadFinishCallBack","setScore","Math","abs","_configUrl","SystemInfo","cdnPath","that","successcb","ret","v","version","uid","parseInt","UserInfo","userId","c","cb","d","k","undefined","Configs","failcb","HttpUtil","httpGet","opacity","Util","getItemFromLocalStorage","setItemToLocalStorage","giveitems","djIndex","GameCenterConfig","allitem","titem","id","num","initGivePlayerItemNumber","push","showBanner","createAndShowWXBanner","schedule","bannerRefresh","WXAdConfig","bannerRefreshTime","startGame","showGoonProgress","director","loadScene","goonProgressGame","reset","resetProgerss","auditing","hasgononstate","showWXModal","RECOVER_GAME_SHARE","groupSucCall","succall","failcall","shareMiniApp","shareconfig","shareGroupCallBack","successCallBack","errorCallBack","IsWechatPlatform","showShareMenu","withShareTicket","getRandomShareConfigByShareTag","shareContent","sharePicUrl","share","res","LOGE","share2GroupByTicket"],"mappings":"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","file":"gamestart.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n   游戏开始界面\n   created by gyc on 2018-08-02.\n   final changed time by gyc on  2018-08-03\n*/\nvar config = require(\"AddOneConfig\")\ntywx.publicwx = true;\n// 记录下当前的场景 用于异步调用\nvar curscene = null;\nvar gamestart = cc.Class({\n    extends: cc.Component,\n    properties: {\n        startButton: {\n            default: null,\n            type: cc.Button,\n        },\n        backButton: {\n            default: null,\n            type: cc.Button,\n        },\n        audioCtr: {\n            default: null,\n            type: cc.Prefab,\n        },\n        userItem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        gameScore: {\n            default: null,\n            type: cc.Label,\n        },\n        historyLabel: {\n            default: null,\n            type: cc.Label,\n        },\n\n        phbNameLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        phb: {\n            default: null,\n            type: cc.Button,\n        },\n        phbback: {\n            default: null,\n            type: cc.Sprite,\n        },\n        helpback: {\n            default: null,\n            type: cc.Sprite,\n        },\n        giftback: {\n            default: null,\n            type: cc.Node,\n        },\n        method: {\n            default: null,\n            type: cc.Button,\n        },\n        phbSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        phbShareBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        shareBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        groupBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        phbView: {\n            default: null,\n            type: cc.Node,\n        },\n\n        helpview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        giftview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        helpViewPre: {\n            default: null,\n            type: cc.Prefab,\n        },\n        contentView: {\n            default: null,\n            type: cc.Node,\n        },\n\n         addInMyMini: {\n             default: null,\n             type: cc.Node,\n         },\n\n          shouZHiNode: {\n              default: null,\n              type: cc.Node,\n          },\n\n        icon: cc.Sprite,\n        //! 请求次数上线\n        requestTimes: 3,\n        // 当前是否有保存的游戏数据\n        haveStoreGameData: -1,\n        \n    },\n\n\n    start() {\n        //是否发布微信版本\n        if (tywx.publicwx) {\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 635;\n            window.sharedCanvas.height = 60 * 30;\n        }\n        this.showPhb = false;\n    },\n\n    /**\n     * 刷新子域的canvas\n     */\n    _updateSubDomainCanvas: function () {\n        if (!this.tex) {\n            return;\n        }\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        // tywx.ado.Utils.createAndSaveImg2WXAlbum({});\n        this.phbSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function () {\n\n    },\n\n    update: function (delayTime) {\n        if (tywx.publicwx) {\n            //    this._updateSubDomainCanvas();   \n        }\n    },\n\n    /*\n        调用: 界面加载完成后的回调。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        wx.postMessage({\n            method: \"load_data\",\n            MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n        });\n        this.haveStoreGameData = tywx.ado.loadProgress();\n        tywx.ado.Utils.showGameClub();\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9;\n        if (is_ipx) {\n            console.log(\"iphone x start game\");\n            this.addInMyMini.y = this.addInMyMini.y - 45;\n        }\n        this.playSZAni(this.shouZHiNode, 1,1.2);\n        // ! Modify by luning [06-09-18] 交叉导流icon,这个版本隐藏\n        //tywx.AdManager.showAd(cc.v2(100, 100),'GAME_START');\n\n        // this.contentView.height = 60 * 30; \n        this.phbShareBtn.getComponent(\"ShareButton\").setShareConfig(tywx.ado.Constants.ShareConfig.RANK_SHARE);\n        console.log(\"当前屏幕尺寸  \" + JSON.stringify(cc.view.getDevicePixelRatio()) + JSON.stringify(cc.view.getVisibleSize()));\n        tywx.PropagateInterface.getShareConfigInfo(); //! 获取所有分享点信息\n        if (tywx.publicwx) {\n            var msg = tywx.ShareInterface.getRandomOnShareAppMessageInfo();\n            if (msg) {\n                tywx.ShareInterface.setOnShareAppMessageInfo(msg.title, msg.imageUrl, msg.sharePointId, msg.shareSchemeId);\n                console.log(\"当前获得的分享信息 = \" + JSON.stringify(msg))\n            }\n            // 设置分享组件的回调和数据\n            var shareComponent = this.shareBtn.getComponent(\"ShareButton\");\n\n            if (shareComponent) {\n                shareComponent.setErrorCall(function (data) {\n                    console.log(\"分享失败后处理的回调函数 \", data);\n                })\n\n                shareComponent.setSuccessCall(function (data) {\n                    console.log(\"分享成功后处理的回调函数 \", data);\n                })\n\n                shareComponent.setShareConfig(tywx.ado.Constants.ShareConfig.FIRST_PAGE_SHARE);\n            }\n\n            // 设置群组排行榜组件的回调和数据\n            var groupBtnComponent = this.groupBtn.getComponent(\"ShareButton\");\n            var self = this;\n\n            if (groupBtnComponent) {\n                groupBtnComponent.setShareConfig(tywx.ado.Constants.ShareConfig.RANK_SHARE);\n                groupBtnComponent.setShareGroupCall(function (data) {\n                    console.log(\"群分享当前的文档\")\n                    if (self.showPhb) {\n                        self.phbView.active = false;\n                        self.showPhb = false;\n                        tywx.ado.Utils.showGameClub();\n                    } else {\n                        self.phbView.active = true;\n                        self.showPhb = true;\n                        tywx.ado.Utils.hideGameClub();\n                        window.wx.postMessage({\n                            method: 2,\n                            MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n                            shareTicket: data.shareTickets[0]\n                        });\n                        // 开一个线程监听次时间段用户是否有点击\n                        self.phbNameLabel.string = \"群排行榜\";\n                        tywx.Timer.setTimer(self, function () {\n                            self._updateSubDomainCanvas();\n                        }, 1, 11, 0);\n                    }\n\n\n                })\n\n                groupBtnComponent.setErrorCall(function (data) {\n                    console.log(\"分享失败后处理的回调函数 \", data);\n                })\n\n            }\n\n        }\n        var score = tywx.ado.Utils.loadItem(\"ADDONE_SCORE2\", 0);\n        if (score != null) {\n            this.gameScore.string = score;\n            let length = (score + \"\").length;\n            // 根据当前的分数来调整显示\n            if (length < 2) {\n                this.historyLabel.node.x = this.historyLabel.node.x + 50;\n                this.gameScore.node.x = this.gameScore.node.x + 50;\n            } else if (length > 5) {\n                var tx = 25 + (length - 6) * 25;\n                this.historyLabel.node.x = this.historyLabel.node.x - tx;\n                this.gameScore.node.x = this.gameScore.node.x - tx;\n            }\n        } else {\n            console.log(\"当前分数不存在\")\n        }\n        //  游戏的点击逻辑\n        this.phbback.node.on('touchstart', function (event) {\n            return true;\n        }, this);\n\n        var self = this;\n\n        curscene = this;\n\n        curscene.hideBack()\n        this.givePlayerItems();\n        console.log(\"本地的项目配置 = \" + JSON.stringify(config))\n        this.requestConfigInfo();\n        // 开一个线程监听次时间段用户是否有点击\n\n        tywx.Timer.setTimer(self, function () {\n            self._updateSubDomainCanvas();\n        }, 1, 11, 0);\n\n        // ! 菜单不显示banner\n        //this.showBanner();\n    },\n\n     /**\n      * @description: 第一个星星产生一个放大缩小的动画 并且产生提示动画\n      */\n     playSZAni: function (node, stime, scale) {\n         node.stopAllActions();\n         var scaletime = !stime ? 0.2 : stime;\n         var tscale = !scale ? 1.2 : scale;\n         var scaleBoom = cc.scaleTo(scaletime, tscale);\n         var scaleSmaller = cc.scaleTo(scaletime, 1);\n         var delay = cc.delayTime(scaletime);\n         var seq = cc.sequence(scaleBoom, scaleSmaller, delay);\n         var rep = cc.repeatForever(seq);\n         node.runAction(rep);\n    },\n\n    onDestroy() {\n        tywx.ado.Utils.hideGameClub();\n        tywx.ado.Utils.destroyWXBanner();\n    },\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    showPlayMethod: function () {\n        if (this.helpviewpre != null) {\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n        }\n        // 添加帮助\n        this.helpviewpre = cc.instantiate(this.helpViewPre);\n\n        this.helpview.active = !this.helpview.active ? true : false;\n        if (this.helpview.active == true) {\n            this.helpviewpre.parent = this.helpview;\n            this.helpviewpre.x = -360;\n            this.helpviewpre.y = 0;\n            this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n            // console.log(\"this.helpviewscript.setCloseCall\" + this.helpviewscript.setCloseCall);\n            this.helpviewscript.setCloseCall(function () {\n                curscene.showPlayMethod();\n            });\n            tywx.ado.Utils.hideGameClub();\n            curscene.showBack();\n        } else {\n            curscene.hideBack();\n            tywx.ado.Utils.showGameClub();\n        }\n    },\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n\n    showGiftView: function () {\n        this.giftview.active = !this.giftview.active ? true : false;\n        if (this.giftview.active == true) {\n            curscene.showBack()\n        } else {\n            curscene.hideBack()\n        }\n    },\n\n    /*\n        调用: 点击排行榜的时候调用\n        功能: 展示玩家微信好友在游戏中的排名\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    showFriendPhbView: function () {\n        console.log(\"Hellocd\")\n        var self = this;\n        if (this.showPhb) {\n            this.phbView.active = false;\n            curscene.hideBack()\n            tywx.ado.Utils.showGameClub();\n            this.showPhb = false;\n        } else {\n            curscene.showBack()\n            tywx.ado.Utils.hideGameClub();\n            this.phbView.active = true;\n            this.showPhb = true;\n            if (tywx.publicwx) {\n                console.log(\"Hellocd\")\n                wx.postMessage({\n                    method: 1,\n                    MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n                });\n            }\n            // 开一个线程监听次时间段用户是否有点击\n            self.phbNameLabel.string = \"好友排行榜\";\n            tywx.Timer.setTimer(self, function () {\n                self._updateSubDomainCanvas();\n            }, 1, 11, 0);\n        }\n\n    },\n\n    /*\n        调用: 点击返回按钮\n        功能: 隐藏排行榜\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    hidePhbView: function () {\n        console.log(\"çç.showPhb = \" + typeof (curscene.phbView))\n        if (curscene.showPhb) {\n            curscene.phbView.active = false;\n            curscene.showPhb = false;\n            tywx.ado.Utils.showGameClub();\n            curscene.hideBack()\n        } else {\n            curscene.phbView.active = true;\n            curscene.showBack()\n            tywx.ado.Utils.hideGameClub();\n            curscene.showPhb = true;\n        }\n\n    },\n\n    /*\n        调用: 进入游戏的时候调用\n        功能: 清除当前界面占用的内存\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    loadFinishCallBack: function () {\n        if (this.node) {\n            // this.node.destroy();\n        }\n    },\n\n    /*\n        调用: 进入小游戏的时候开始调用\n        功能: 显示玩家的最高得分\n        参数: [\n            score: 玩家当前的最高得分\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    setScore: function (score) {\n        if (score != null) {\n            this.gameScore.string = Math.abs(score);\n        }\n    },\n\n\n\n    /**\n     * 请求获取配置信息\n     */\n    requestConfigInfo: function () {\n\n        this.requestTimes--;\n        var _configUrl = tywx.SystemInfo.cdnPath + 'config/addone2.json';\n        var that = this;\n\n        console.log('请求的CDN地址 = ' + _configUrl);\n\n        var successcb = function (ret) {\n            console.log(\"服务器读到的配置:\" + JSON.stringify(ret));\n            that.requestTimes = 3;\n            var v = tywx.SystemInfo.version;\n            var uid = parseInt(tywx.UserInfo.userId);\n            var c, cb, d;\n            c = ret['' + v];\n            cb = ret['' + v + '_ABTEST'];\n            d = ret['default'];\n            if (!d) {\n                //没找到缺省服务器配置...\n                console.log('No default server config, use local config...');\n                d = config;\n            }\n            if (!c) {\n                //没找到版本对应配置，使用缺省配置...\n                config = d;\n                console.log(_configUrl + 'use default config...');\n            } else {\n                //AB测试...\n                if (cb) {\n                    if (uid % 2 == 0) {\n                        config = c;\n                        console.log(_configUrl + 'use ' + v + '_A server config...');\n                    } else {\n                        config = cb;\n                        console.log(_configUrl + 'use ' + v + '_B server config...');\n                    }\n                } else {\n                    config = c;\n                    console.log(_configUrl + 'use ' + v + ' server config...');\n                }\n                //把缺省配置中的配置项复制到当前配置...\n                for (var k in d) {\n                    if (config[k] === undefined)\n                        config[k] = d[k];\n                }\n            }\n            tywx.ado.Configs = config;\n            tywx.config = config;\n            console.log('CONFIG ' + JSON.stringify(config));\n        };\n\n        var failcb = function (ret) {\n            if (that.requestTimes > 0) {\n                that.requestConfigInfo();\n            } else {\n                tywx.ado.Configs = config;\n                tywx.config = config;\n            }\n        };\n\n        tywx.HttpUtil.httpGet({\n            'url': _configUrl\n        }, successcb, failcb);\n    },\n\n\n    /**\n     * 显示排行榜黑色排行榜\n     */\n    showBack: function () {\n        this.phbback.node.active = true;\n        this.phbback.node.opacity = 165;\n    },\n\n\n    /**\n     * 隐藏排行榜黑色背景\n     */\n    hideBack: function () {\n        this.phbback.node.active = false;\n        this.phbback.node.opacity = 0;\n    },\n\n    /**\n     * 初始化的时候给玩家三个道具\n     * 参数: 无\n     */\n    givePlayerItems: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadgiveitem\", 0)) === 0) {\n            tywx.Util.setItemToLocalStorage(\"hadgiveitem\", 1);\n            var giveitems = [];\n            for (var djIndex = 0; djIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; djIndex++) {\n                var titem = {};\n                titem.id = tywx.ado.Constants.GameCenterConfig.allitem[djIndex].id;\n                titem.num = tywx.ado.Constants.GameCenterConfig.initGivePlayerItemNumber;\n                giveitems.push(titem);\n            }\n            tywx.Util.setItemToLocalStorage(\"allitems\", JSON.stringify(giveitems));\n        }\n    },\n    showBanner() {\n        tywx.ado.Utils.createAndShowWXBanner();\n        this.schedule(this.bannerRefresh, tywx.ado.Constants.WXAdConfig.bannerRefreshTime);\n    },\n    bannerRefresh() {\n        tywx.ado.Utils.createAndShowWXBanner();\n    },\n\n    /*\n            调用: 点击开始游戏的时候调用\n            功能: 进入游戏界面\n            参数: [\n                无\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需要\n        */\n    startGame: function () {\n        if (this.haveStoreGameData != -1) {\n            this.showGoonProgress();\n        } else {\n            cc.director.loadScene(\"gamemain\");\n        }\n    },\n\n    /**\n     * @description 继续游戏进度的分享回调\n     */\n    goonProgressGame: function (reset) {\n        if (reset){\n            tywx.ado.resetProgerss();\n        }\n        \n        cc.director.loadScene(\"gamemain\");\n    },\n\n    /**\n     * @description 弹出游戏的选择是否继续进度的对话框\n     */\n    showGoonProgress: function () {\n        if (tywx.config.auditing == true) {\n            cc.director.loadScene(\"gamemain\");\n            return;\n        }\n        var self = this;\n        self.hasgononstate = false;\n        tywx.ado.Utils.showWXModal(\"分享继续之前的进度\", '继续游戏', true,\n            // 确定\n            function () {\n                var config = tywx.ado.Constants.ShareConfig.RECOVER_GAME_SHARE;\n                var groupSucCall = function () {\n                    self.goonProgressGame();\n                };\n                var succall = function () {\n                    self.hasgononstate = true;\n                };\n\n                var failcall = function () {\n                    self.hasgononstate = true;\n                };\n\n                self.shareMiniApp(config, groupSucCall, succall, failcall);\n            },\n            // 取消\n            function () {\n                self.goonProgressGame(true);\n            })\n    },\n\n\n    /**\n     * @description 非分享按钮的分享 （手动分享）\n     * @param {Object} shareconfig 分享配置信息\n     * @param {Function} shareGroupCallBack 分享到群成功的回调\n     * @param {Function} successCallBack 分享成功的回调\n     * @param {Function} errorCallBack 分享失败的回调\n     */\n    shareMiniApp: function (shareconfig, shareGroupCallBack, successCallBack, errorCallBack) {\n        console.log(\"当前的分享配置  = \" + JSON.stringify(shareconfig));\n        var self = this;\n        if (tywx.IsWechatPlatform()) {\n            window.wx.showShareMenu({\n                withShareTicket: true\n            });\n            let msg = tywx.ado.Utils.getRandomShareConfigByShareTag(shareconfig[0]);\n            if (!msg) {\n                msg = {};\n                msg.shareContent = \"你知道\" + \"1 吗？\";\n                msg.sharePicUrl = \"https://marketqn.nalrer.cn/teris/share_image/jiayi/jy03.jpg\";\n                msg.sharePointId = \"766\";\n                msg.shareSchemeId = \"1155\";\n            }\n            if (msg) {\n                tywx.ShareInterface.share(\n                    msg.shareContent,\n                    msg.sharePicUrl,\n                    msg.sharePointId,\n                    msg.shareSchemeId,\n                    (res) => {\n                        tywx.LOGE(\"分享成功后的数据\" + JSON.stringify(res));\n                        // * is share to group\n                        if (shareconfig && shareconfig[1]) {\n                            // * froce share to group\n                            if (res.shareTickets !== undefined && res.shareTickets.length > 0) {\n                                if (shareconfig[0] === tywx.ado.Constants.ShareConfig.RANK_SHARE[0]) {\n                                    shareGroupCallBack && shareGroupCallBack(res);\n                                } else {\n                                    tywx.ado.Utils.share2GroupByTicket(\n                                        shareconfig[0],\n                                        res,\n                                        () => { // * success callback\n                                            shareGroupCallBack && shareGroupCallBack(res);\n                                        },\n                                        () => { // * failed callback\n                                            // tywx.ado.Utils.showWXModal('请分享到不同群', \"\", false, function () {\n                                                // if (self.hasgononstate) {\n                                                    self.goonProgressGame();\n                                                    // self.showGoonProgress()\n                                                    // self.hasgononstate = false;\n                                                // }\n                                            // });\n                                            // errorCallBack && errorCallBack(null);\n                                        }\n                                    );\n                                }\n                            } else {\n                                // * failed\n                                tywx.ado.Utils.showWXModal('请分享到群', \"\", false, function () {\n                                    if (self.hasgononstate) {\n                                        self.showGoonProgress()\n                                        self.hasgononstate = false;\n                                    }\n                                });\n                                errorCallBack && errorCallBack(null);\n                            }\n                        } else {\n                            // * success\n                            successCallBack && successCallBack(res);\n                        }\n\n                    },\n                    function (data) {\n                        tywx.LOGE(\"分享成功后的数2据\" + JSON.stringify(data));\n                        errorCallBack && errorCallBack(data);\n                    }\n                );\n            }\n        }\n    },\n\n});\n"]}