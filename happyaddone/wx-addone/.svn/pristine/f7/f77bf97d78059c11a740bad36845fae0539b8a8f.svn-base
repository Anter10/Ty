{"version":3,"sources":["LuckBox.js"],"names":["cc","Class","extends","Component","properties","luckboard","default","type","Node","luckitem","Prefab","luckitems","allframe","SpriteFrame","mflqBtn","close","getComponent","selected","tywx","ado","Utils","showWXBanner","node","active","lqCall","onLoad","allitem","Constants","GameCenterConfig","row","column","bottom","padingleft","margin","width","itemindex","length","item","itemsceipt","setParent","setItem","selectitem","self","mflq","config","auditing","setReactCall","setSuccessCall","gamecenter","lingQuItem","produceItem","setShareGroupCall","setShareConfig","ShareConfig","FREE_GIFT_SHARE","hideOtherSelected","selectItem","tdata","getData","id","unselected","data","produceitem","name","num"],"mappings":"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","file":"LuckBox.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        luckboard: {\n            default: null,\n            type: cc.Node,\n        },\n        luckitem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        luckitems: {\n            default: [],\n            type: cc.Node,\n        },\n        allframe:{\n            default: [],\n            type: cc.SpriteFrame,\n        },\n        mflqBtn:{\n            default: null,\n            type: cc.Node,\n        }\n\n    },\n\n\n    close: function () {\n        this.luckitems[0].getComponent(\"luckitem\").selected();\n        tywx.ado.Utils.showWXBanner();\n        this.node.active = false;\n    },\n\n    lqCall: function () {\n          \n    },\n\n    onLoad() {\n        // 显示当前的所有道具\n        var allitem = tywx.ado.Constants.GameCenterConfig.allitem;\n        var [row, column, bottom, padingleft, margin, width] = [0, 0, 120, 60, 80, 162];\n        // console.log(\"道具数据 = \"+JSON.stringify(allitem));\n        for (var itemindex = 0; itemindex < allitem.length; itemindex++) {\n            var item = this.luckitems[itemindex];\n            let itemsceipt = item.getComponent(\"luckitem\");\n            itemsceipt.setParent(this);\n            itemsceipt.setItem(allitem[itemindex],this.allframe[itemindex]);\n            if(itemindex == 0){\n              this.selectitem = itemsceipt;\n            }\n        }\n        this.selectitem.selected();\n        \n        var self = this;\n         // 设置免费领取的回调\n         let mflq = this.mflqBtn.getComponent(\"ShareButton\");\n         if (tywx.config.auditing == true) {\n             mflq.setReactCall(true);\n         } else {\n             mflq.setReactCall(false);\n         }\n         mflq.setSuccessCall(function () {\n            tywx.gamecenter.lingQuItem(false,self.produceItem());\n            self.close();\n         });\n         mflq.setShareGroupCall(function () {\n            tywx.gamecenter.lingQuItem(false, self.produceItem());\n            self.close();\n         });\n         mflq.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n    },\n\n    hideOtherSelected: function(selectItem){\n        for (var itemindex = 0; itemindex < this.luckitems.length; itemindex++) {\n            var item = this.luckitems[itemindex];\n            let itemsceipt = item.getComponent(\"luckitem\");\n            var tdata = itemsceipt.getData();\n            // console.log(\"tdata = \"+JSON.stringify(tdata));\n            if(tdata != \"undefined\" && tdata.id != selectItem.getData().id){\n                itemsceipt.unselected();\n            }\n        }\n        this.selectitem = selectItem;\n    },\n    produceItem:function(){\n        var data = this.selectitem.getData();\n        var produceitem = {};\n        produceitem.id = data.id;\n        produceitem.name = data.name;\n        produceitem.num = 1;\n        return produceitem;\n    }\n\n});\n"]}