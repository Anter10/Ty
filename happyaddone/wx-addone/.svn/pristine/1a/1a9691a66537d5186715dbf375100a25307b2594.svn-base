{"version":3,"sources":["../../../../assets/Script/assets/Script/gamemain.js"],"names":["config","require","gezi","mask","maxzorder","gezi_map","gamemain","cc","Class","extends","Component","properties","scoreLabel","default","type","Label","showalertmsg","num","allpngs","Prefab","showNumberPrefab","celltile","stars","Node","stopView","tupojilu","fuHuo","fuHuoBtn","stopV","stopButton","pjlView","openboxview","itemview","yyview","goodEft","coolEft","awesEft","unbeliveEft","chuiziEft","loseScoreLabel","GameOver","loseShareButtton","pjlShareButtton","musicBtn","itemhelpview","loseRestartGameBtn","friendsNode","mergeAniNode","helpview","pjlScoreLabel","ljnumberLabel","itemframes","SpriteFrame","maxscoreLabel","recoverNumberLabel","curmaxnumberLabel","openBoxIconSprite","Sprite","paimingSprite","effect","djitem","gameOut","friendIcon","stopViewBack","tupoJIluAni","helpViewPre","mflqBtn","hpHelpTips","gameOutRoot","luckboxroot","cellUpView","addScoreLabelPools","NodePool","addScoreNode","bg","restart","Button","score","point","tywx","ado","Constants","GameCenterConfig","maxphy_value","g_mask_samecnt","g_clickid","gamestate","gamestatetime","maxnum","lianjiNumber","g_gezi","g_mask","allitems","curtimeawaypre","isShowFIcon","recoverNumber","hadShowPjl","allOpenItems","produceItem","isRestartGame","showboxNumber","prepoint","allAudio","AudioSource","hadClickScreen","curUsingItemData","isUsingItem","refreshingMask","hasProduceNewScore","hadAddNum","allmergecellIds","showAddTime","hadProducetantenNUmber","startDropTime","curGiveScore","hadshowlqbox","curshowxhgs","allxhggz","alljzxhgid","allshowshareids","twocellexchange","playjjaniing","curmaxNumber","curPreStorePData","ryBox","ryBoxBack","ryBoxBtn","isitemhelphide","setCurMaxNumber","addJHCell","cell","length","console","log","clearJHCell","exchangeTWOCell","addXHGId","id","dealAddStoreMaxNum","starNum","hadXHGId","ti","addXHGCell","dealXhgCells","mai","getAllmask","getComponent","setCurNum","showHG","getIDData","onLoad","pos","convertToWorldSpace","position","JSON","stringify","pos1","view","getVisibleSize","width","height","gamecenter","inGame","curcount","i","scoreNodeLabel","instantiate","put","setShareConfig","ShareConfig","POJILU_SHARE","string","self","tmp_lbid","tnum","geziNumber","node","cellt","script","setClickCall","data","palyAudioByIndex","SOUNDS","POPUPCLOSE","touchEndCallback","push","parent","p","setId","tmp_g","getAllgz","tmp_m","publicwx","tex","Texture2D","prerandomnumber","initgame","on","event","showItem","LOGE","fhBtnShow","fhbut","fhcall","recoverGame","hycall","fhsbCallBack","errorcall","setShareGroupCall","setSuccessCall","setErrorCall","RECOVER_GAME_SHARE","Timer","setTimer","showMinFriend","macro","REPEAT_FOREVER","hideMinFriend","gameState","waitclick","dealPlayerNoClickScreen","hideView","Utils","showWXBanner","active","dealPlayerClickScreen","mflq","auditing","setReactCall","lingQuBox","FREE_GIFT_SHARE","showNumberNode","setCloseCall","showmflqBtn","getShareComponent","setStoreSucCallBack","lingQuItem","firstShowHelpView","changeTexture","game","canvas","cw","ch","is_ipx","y","showBanner","isIpx","onDestroy","outGame","destroyWXBanner","addxhgNumber","removexhgNumber","thn","splice","showmsm2","showmsm1","hasShowxhgNum","setWaitClickState","gameover","combo_level","good","dealLianJiNumber","hideWXBanner","showCDAni","playAni","pjlCallBack","showRYBoxButton","ruyiScore","animation","Animation","play","setWaitNum","waitnum","allcellids","resetAllMask","checkmaskbyid","minCanRemoveNumber","stopAllActions","delay","delayTime","letUserClickTime","idindex","call","callFunc","cellid","precellid","stopDaijiEff","playDaijiEff","seq","sequence","rep","repeatForever","runAction","ci","showPlayMethod","helpviewpre","destroy","x","helpviewscript","setIsGame","showUseHpHelp","setStartGameCall","itemIndex","allitem","item","itemsceipt","setData","canupdate","showAlert","showOneHpEf","drawPhyPoint","itemhelpscript","showNum","value","showChuiZi","updateItemByData","dealAllItems","xx1Icon","getNumberOfRunningActions","newVec2","v2","new1Vec2","tmove","moveTo","Math","abs","itmindex","tdata","storeAllItem","addRecoverNumber","maxrnum","msg","wx","showToast","title","icon","duration","showAlertMSG","ty","pri_pos","rc","move","moveBy","showTouchEffect","touchpos","caiDaiAni","zIndex","removeCall","ani","showStopView","showSubStopView","stopCall","items","Util","getItemFromLocalStorage","undefined","parse","e","titemIndex","storitem","openitemIndex","topenitem","getData","produceItems","tindex","randomFrom","itemid","itemnum","itemname","randomNum","random","box_rate","sub1","name","add2","chui","lowerValue","upperValue","floor","ctor","getAllPathByitemValue","usingitem","setnum","settoblock","block","effectid","effecttime","setMaxNumber","checkclick","showWXToast","curaddnum","showAnimationWhenScoreBiggerThanTen","mpos","useCZClick","maxScoreShow","scale","anim","finishCallback","stop","tid","step","refreshbymask","drop_time","dodrop","merge_delay_time","animateState","wrapMode","WrapMode","Normal","update","dt","tickmove","tickeffect","star","star1","draw","_updateSubDomainCanvas","sc","getMergeTime","baseScore","label_id","speed_keep","gezi_pitch","actiontime_keep","id_keep","id_dest","from","adjustmove","domove","addGetScoreLabelOnTile","gameOverCallBack","finalDealMask","dealDoMove","playMergeAnimation","dealLianJiLogic","audioIndex","COMBO","playZhEff","LOGD","mt","merge_time","ret","bfound","j","playGood","GOOD","cool","playCool","COOL","awesome","playAwesome","AWESOME","unbelive","playUnbelive","UNBLIEVEABLE","fileName","AudioManager","playSound","showBox","animationState","setItemToLocalStorage","scaleX","scaleY","produceHPAni","starIndex","show","hide","stime","scaletime","tscale","scaleBoom","scaleTo","scaleSmaller","visibleControllButton","vis","commonScaleIn","storeScore","resetProgerss","maxscore","parseInt","loadItem","showOverFriendsPH","postMessage","method","window","sharedCanvas","flushPHBView","showPjlScore","closePjlView","hadstorephotonumber","tmp_progress","loadProgress","life","getrandomnum","needcheck","changenumbymask","startDropAnimation","allpos","startGameDropTime","reset","findtopinmask","tmpid1","tmpid2","checkmaskleft","checkmaskdownleft","checkmaskdownright","checkmaskright","checkmaskupleft","checkmaskupright","checkDirPaths","bj","add","initGameMaxNum","topid","disy","disx","dis","posx","posy","spx","gezi_h_s","spy","gezi_size","adjustdrop","settoblockvalue","getPjNumberName","luck","sjs","ttindex","sindex","luck_block","tgl","rate","allids","total","gzindex","tcellIndex","pjNumber","fudu","backFirstPage","saveProgress","director","loadScene","destroyFinish","saveItem","backCall","logWithColor","bpos","rest","screen","getVisibleSizeInPixel","isrestart","printMaskMsg","gzIndex","showMSG","openDataContext","getOpenDataContext","initWithElement","handleLoadedTexture","spriteFrame","dontsetnull","giveitem","findata","itemdata","djIndex","dj","cl","arr","ran","is_show","frameindex","restartGame","loseRestartGame","startNewGame","cmergeAniNode","mergeAni","isIPHX","animState","speed","getLabel","label","size","get","labelScrpt","setNumber","tiles","shownum","tileIndex","dealAddNumber","scalesm","mtop","spawn","scalex","scaley","prenum","needaddstore","hadShowShareLJ","moreThanEightNumber","mergeMaxNumberBaseScore","showScript","init","setShowNumber","storePhoto","ds","dcs","rate_width","rate_height","d_x","d_y","rate_x","rate_y","w","h","toTempFilePath","destWidth","destHeight","success","res","saveImage2PhoneByUrl","tempFilePath","fail","t","createAndcreateAndShowWXBanner","schedule","bannerRefresh","WXAdConfig","bannerRefreshTime","showRyBox","getCommenItemNode","getChildByName"],"mappings":"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","file":"gamemain.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n    游戏的逻辑UI\n    游戏的操作的主要逻辑在这个module里面编写\n    created by gyc on 2018-08-01.\n*/\n\n// 倒入游戏涉及到的module\nvar config = require(\"AddOneConfig\")\nvar gezi = require(\"GeZi\")\nvar mask = require(\"GeZiMask\")\nvar maxzorder = 999;\nvar gezi_map = [\n    0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, // 4\n    0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, // 5\n    0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, // 6\n    1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, // 7\n    0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, // 6\n    0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, // 5\n    0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0 // 4\n];\nvar gamemain = cc.Class({\n    extends: cc.Component,\n    properties: {\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        showalertmsg: {\n            default: null,\n            type: cc.Label\n        },\n        num: {\n            default: [],\n            type: cc.Label\n        },\n        allpngs: {\n            default: [],\n            type: cc.Prefab\n        },\n        showNumberPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        celltile: {\n            default: null,\n            type: cc.Prefab\n        },\n        stars: {\n            default: [],\n            type: cc.Node\n        },\n        stopView: {\n            default: null,\n            type: cc.Node\n        },\n        tupojilu: {\n            default: null,\n            type: cc.Node\n        },\n\n        fuHuo: {\n            default: null,\n            type: cc.Node\n        },\n        fuHuoBtn: {\n            default: null,\n            type: cc.Node\n        },\n        stopV: {\n            default: null,\n            type: cc.Node\n        },\n        stopButton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlView: {\n            default: null,\n            type: cc.Node\n        },\n        openboxview: {\n            default: null,\n            type: cc.Node\n        },\n        itemview: {\n            default: null,\n            type: cc.Node\n        },\n\n        yyview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        goodEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        coolEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        awesEft: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        unbeliveEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        chuiziEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        loseScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n\n\n        GameOver: {\n            default: null,\n            type: cc.Label\n        },\n        loseShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        musicBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n        itemhelpview: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        loseRestartGameBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n        friendsNode: {\n            default: null,\n            type: cc.Node\n        },\n        mergeAniNode: {\n            default: null,\n            type: cc.Prefab\n        },\n\n        helpview: {\n            default: null,\n            type: cc.Node\n        },\n        pjlScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n        ljnumberLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n        itemframes: {\n            default: [],\n            type: cc.SpriteFrame,\n        },\n\n        maxscoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n        recoverNumberLabel: {\n            default: null,\n            type: cc.Label\n        },\n\n        // 本局最大数的label\n        curmaxnumberLabel: {\n            default: null,\n            type: cc.Label\n        },\n        openBoxIconSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        // 排名的Sprite\n        paimingSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n\n        effect: {\n            default: null,\n            type: cc.Prefab,\n        },\n        djitem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        gameOut: {\n            default: null,\n            type: cc.Sprite,\n        },\n        friendIcon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        stopViewBack: {\n            default: null,\n            type: cc.Sprite,\n        },\n        tupoJIluAni: {\n            default: null,\n            type: cc.Prefab,\n        },\n        helpViewPre: {\n            default: null,\n            type: cc.Prefab,\n        },\n        mflqBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        // 血量提示tip\n        hpHelpTips: {\n            default: null,\n            type: cc.Node,\n        },\n\n        gameOutRoot: {\n            default: null,\n            type: cc.Node,\n        },\n\n        luckboxroot: {\n            default: null,\n            type: cc.Node,\n        },\n\n        cellUpView: {\n            default: null,\n            type: cc.Node,\n        },\n        addScoreLabelPools: {\n            default: null,\n            type: cc.NodePool,\n        },\n\n        addScoreNode: {\n            default: null,\n            type: cc.Prefab,\n        },\n\n\n\n        // 游戏的背景\n        bg: cc.Node,\n        // 重新开始的按钮\n        restart: cc.Button,\n        // 当前玩家得分\n        score: 0,\n        // 玩家当前体力 默认为最大值\n        point: tywx.ado.Constants.GameCenterConfig.maxphy_value,\n        // 当前点击的块ID\n        g_mask_samecnt: 0,\n        //点击的格子ID\n        g_clickid: -1,\n        //游戏状态-无，等待点击，移动，下落等\n        gamestate: 'null',\n        //游戏状态的计时\n        gamestatetime: 0,\n        //当前最大值\n        maxnum: 5,\n        //此次点击产生的连击数\n        lianjiNumber: 1,\n        // 存放每个格子的数组\n        g_gezi: [],\n        // 存放每个mask的数组\n        g_mask: [],\n        // 玩家当前道具\n        allitems: [],\n        // 此时距离上次点击屏幕有多长时间\n        curtimeawaypre: 10,\n        // 控制隐藏好友\n        isShowFIcon: false,\n        // 此局复活次数\n        recoverNumber: 0,\n        // 此局是否展示过破纪录\n        hadShowPjl: false,\n        // 此局是否展示过破纪录\n        allOpenItems: [],\n        // 此次连接产生的道具\n        produceItem: null,\n        // 此局是否是进入游戏后的重新开始的局\n        isRestartGame: false,\n        // 显示宝箱的数量\n        showboxNumber: 0,\n        // 上一次的生命值\n        prepoint: 0,\n        // 所有音效\n        allAudio: {\n            default: [],\n            type: cc.AudioSource,\n        },\n        // 时间段内玩家是否有点击过屏幕 true: 有点击 false: 没有点击 \n        hadClickScreen: false,\n        // 当前处于使用状态的道具ID\n        curUsingItemData: null,\n        // 是哦用道具不消耗生命\n        isUsingItem: false,\n        // 当前是否在刷新mask\n        refreshingMask: false,\n        // 此次点击是否有分数产生\n        hasProduceNewScore: false,\n        // 此次是否已经加过num\n        hadAddNum: false,\n        // 当前需要合并的所有块的ID\n        allmergecellIds: [],\n        // 显示加分时间\n        showAddTime: 0.1,\n        // 此次点击是否产生过大于10的分享\n        hadProducetantenNUmber: false,\n        // 开始动画时间\n        startDropTime: 0,\n        // 当前奖励分数\n        curGiveScore: 0,\n        // 是否已经弹出过领取界面\n        hadshowlqbox: false,\n        // 记录当前数字显示过小皇冠\n        curshowxhgs: [],\n        // 记录已经标示有小皇冠的格子\n        allxhggz: [],\n        // 所有禁用小皇冠ID\n        alljzxhgid: [],\n        // 所有展示过分享领奖的数字\n        allshowshareids: [],\n        // 交换道具的使用\n        twocellexchange: [],\n        // 打开宝箱之前禁止操作盘面\n        playjjaniing: false,\n        // 本局合出来的最大数\n        curmaxNumber: 5,\n        // 之前存储的进度数据\n        curPreStorePData: null,\n        // 领取如意box的按钮\n        ryBox: cc.Node,\n        ryBoxBack: cc.Sprite,\n        // 如意宝箱的按钮\n        ryBoxBtn: cc.Node,\n        // 控制帮助显示广告\n        isitemhelphide: false,\n    },\n\n    /**\n     * @description 设置当前合出的最大数\n     * @param {Number} maxnum 设置的最大数\n     */\n    setCurMaxNumber: function (maxnum) {\n        if (maxnum > this.curmaxNumber) {\n            this.curmaxNumber = maxnum;\n        }\n    },\n\n    /**\n     * @description 添加交换对象\n     * @param {celltile} cell 格子对象\n     */\n    addJHCell: function (cell) {\n        if (this.twocellexchange.length < 2) {\n            this.twocellexchange[this.twocellexchange.length] = cell;\n        } else {\n            console.log(\"交换格子数不对\");\n        }\n    },\n\n    /**\n     * @description 清空交换对象\n     */\n    clearJHCell: function () {\n        this.twocellexchange = [];\n    },\n\n    /**\n     * @description 使用交换道具的时候调用\n     */\n    exchangeTWOCell: function () {\n        if (this.twocellexchange.length == 2) {\n\n\n            // 交换完成后检查是否有合并\n        } else {\n            console.log(\"请选择交换对象\");\n        }\n    },\n\n    /**\n     * @description 添加展示过小皇冠的number\n     * @param {Number} id 对应的数字\n     */\n    addXHGId: function (id) {\n        this.alljzxhgid[this.alljzxhgid.length] = id;\n    },\n\n    // 处理当前保存的最大值以下的小皇冠ID\n    dealAddStoreMaxNum: function () {\n        console.log(\"游戏初始化的时候的最大值= \" + starNum);\n        for (var starNum = 7; starNum <= this.curmaxNumber; starNum++) {\n            if (starNum % 2 == 0) {\n                this.addXHGId(starNum);\n                this.allshowshareids[this.allshowshareids.length] = starNum;\n            }\n        }\n    },\n\n    /**\n     * @description 判断给定给的数字是否显示过皇冠\n     * @param {Number } id 数字\n     */\n    hadXHGId: function (id) {\n        for (var ti = 0; ti < this.alljzxhgid.length; ti++) {\n            if (this.alljzxhgid[ti] == id) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    /**\n     * @description 添加小皇冠的cell\n     * @param {celltile} cell 格子对象\n     */\n    addXHGCell: function (cell) {\n        this.allxhggz[this.allxhggz.length] = cell;\n    },\n\n    /**\n     * @description 处理小皇冠的显示\n     */\n    dealXhgCells: function () {\n        for (var mai = 0; mai < this.getAllmask().length; mai++) {\n            if (this.allpngs[mai]) {\n                this.allpngs[mai].getComponent(\"celltile\").setCurNum(this.getAllmask()[mai].num);\n                this.allpngs[mai].getComponent(\"celltile\").showHG();\n            }\n\n        }\n    },\n\n    /**\n     * @description 得到对应格子的数据\n     * @param {Number} id 对应格子的ID\n     */\n    getIDData: function (id) {\n        return this.getAllmask()[id];\n    },\n\n    /**\n     * @description: 场景加载完成后的一些UI逻辑处理 \n     */\n    onLoad: function () {\n        this.pos = this.gameOutRoot.convertToWorldSpace(this.gameOutRoot.position);\n        console.log(JSON.stringify(this.pos1) + \" v= \" + JSON.stringify(cc.view.getVisibleSize()) + \"尺寸= \" + this.gameOutRoot.width + \" z = \" + this.gameOutRoot.height + \" 坐标 = \" + JSON.stringify(this.pos))\n        tywx.gamecenter = this;\n        tywx.ado.inGame(this);\n        this.addScoreLabelPools = new cc.NodePool();\n        var curcount = 15;\n        for (let i = 0; i < curcount; ++i) {\n            let scoreNodeLabel = cc.instantiate(this.addScoreNode); // 创建节点\n            this.addScoreLabelPools.put(scoreNodeLabel); // 通过 putInPool 接口放入对象池\n        }\n        this.pjlShareButtton.getComponent(\"ShareButton\").setShareConfig(tywx.ado.Constants.ShareConfig.POJILU_SHARE);\n        // 初始分数显示为0\n        this.scoreLabel.string = this.score;\n        var self = this;\n\n        var tmp_lbid = -1;\n        this.tnum = [];\n        // 循环生成初始游戏\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            tmp_lbid = -1;\n            if (gezi_map[i] == 1) {\n                var node = new cc.Node(\"node\");\n                var cellt = cc.instantiate(this.celltile);\n                var script = cellt.getComponent(\"celltile\");\n               \n                script.setClickCall(function (data, celltile) {\n                    self.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.POPUPCLOSE);\n                    if (!self.playjjaniing) {\n                        self.touchEndCallback(data, celltile);\n                    }\n\n                });\n                this.allpngs.push(cellt);\n                cellt.parent = this.yyview;\n                cellt.position = cc.p(0, 0);\n                node.position = cc.p(0, 0);\n                node.parent = this.node;\n\n                this.tnum.push(1);\n                tmp_lbid = this.tnum.length - 1;\n                script.setId(i);\n                // console.log(\"当前的格子changdu  \" + this.tnum.length);\n                // cellt.active = false;\n            }else{\n                this.allpngs.push(null);\n            }\n\n             var tmp_g = new gezi(i, this, tmp_lbid);\n             this.getAllgz().push(tmp_g);\n             var tmp_m = new mask(i, this);\n             this.getAllmask().push(tmp_m);\n        }\n\n        console.log(\"格子图片总数 = \" + this.allpngs.length);\n        if (tywx.publicwx) {\n            this.tex = new cc.Texture2D();\n        }\n        var self = this;\n        // 游戏的点击逻辑\n        // this.node.on('touchend', function ( event ) {\n        //     if(self.stopView.active == false){\n        //         var mpos = event.touch.getLocation();\n        //         self.touchEndCallback(mpos.x,mpos.y);\n        //     }\n        // });\n        // 前一个产生的随机数\n        this.prerandomnumber = 0;\n        // 初始游戏\n        this.initgame();\n\n        this.isRestartGame = false;\n        //   // 游戏的点击逻辑\n        this.stopViewBack.node.on('touchstart', function (event) {\n            return true;\n        });\n\n        this.gameOut.node.on('touchstart', function (event) {\n            return true;\n        });\n\n        this.ryBoxBack.node.on('touchstart', function (event) {\n            return true;\n        });\n\n\n\n        // var effect = cc.instantiate(this.effect);\n        // this.node.parent.addChild(effect);\n        // effect.x = 140;\n        // effect.y = 90;\n        this.showItem();\n        // 设置复活按钮的点击回调\n        tywx.LOGE(\"dddds\" + JSON.stringify(config));\n        this.fhBtnShow();\n        let fhbut = this.fuHuo.getComponent(\"ShareButton\");\n        if (fhbut) {\n            var fhcall = function () {\n                self.recoverGame();\n            }\n            var hycall = function () {\n                self.fhsbCallBack();\n            }\n\n            var errorcall = function () {\n                self.fhsbCallBack();\n            }\n            // 设置分享到组的成功回调\n            fhbut.setShareGroupCall(fhcall);\n            // 设置分享到好友的回调\n            fhbut.setSuccessCall(hycall);\n            // 设置分享失败后的回调\n            fhbut.setErrorCall(hycall);\n            fhbut.setShareConfig(tywx.ado.Constants.ShareConfig.RECOVER_GAME_SHARE);\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.showMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 0);\n\n        // // 开启一个进程循环隐藏即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.hideMinFriend();\n        }, 15, cc.macro.REPEAT_FOREVER, 5);\n\n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function () {\n            if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                this.hadClickScreen = false;\n                self.dealPlayerNoClickScreen();\n            }\n        }, 15, 0, 15);\n\n        this.node.on('touchend', function (event) {\n            self.itemhelpview.getComponent(\"ItemHelp\").hideView();\n            self.curUsingItemData = null;\n            if (self.isitemhelphide == true) {\n                tywx.ado.Utils.showWXBanner();\n                self.isitemhelphide = false;\n            }\n            self.itemhelpview.active = false;\n            self.dealPlayerClickScreen();\n            self.hadClickScreen = true;\n        });\n\n        // 设置免费领取的回调\n        let mflq = this.mflqBtn.getComponent(\"ShareButton\");\n        if (tywx.config.auditing == true) {\n            mflq.setReactCall(true);\n        } else {\n            mflq.setReactCall(false);\n        }\n        mflq.setSuccessCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareGroupCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n\n        this.showNumberNode = cc.instantiate(this.showNumberPrefab);\n        this.showNumberNode.active = false;\n        this.showNumberNode.parent = this.node;\n\n        this.showNumberNode.getComponent(\"MoreTanNumber\").setCloseCall(function () {\n            self.hadshowlqbox = false;\n        });\n\n        var showmflqBtn = this.showNumberNode.getComponent(\"MoreTanNumber\").getShareComponent();\n        showmflqBtn.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n        if (tywx.config.auditing == true) {\n            showmflqBtn.setReactCall(true);\n        } else {\n            showmflqBtn.setReactCall(false);\n        }\n        showmflqBtn.setSuccessCall(function () {\n            // console.log(\"Helloc\");\n            self.lingQuBox();\n            self.showNumberNode.active = false;\n            self.stopView.active = false;\n            self.hadshowlqbox = false;\n        });\n        showmflqBtn.setShareGroupCall(function () {\n            self.lingQuBox();\n            self.showNumberNode.active = false;\n            self.stopView.active = false;\n            self.hadshowlqbox = false;\n        });\n        // 设置保存照片成功后的回调\n        this.showNumberNode.getComponent(\"MoreTanNumber\").setStoreSucCallBack(function () {\n            self.lingQuItem(true);\n            // console.log(\"当前已经领取成功\");\n        });\n        // this.showAnimationWhenScoreBiggerThanTen(14);\n        this.firstShowHelpView();\n        self.friendIcon.node.active = true;\n        this.musicBtn.getComponent(\"Audio\").changeTexture();\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9;\n        if (is_ipx) {\n            this.friendIcon.node.y = this.friendIcon.node.y + 40;\n            this.yyview.y = this.yyview.y - 30;\n        }\n\n        this.showBanner();\n        // ! Modify by luning [07-09-2018] 矫正道具位置\n        if (tywx.ado.Utils.isIpx()) {\n            console.log('// ! Modify by luning [07-09-2018] ipxipxipxipx');\n            //this.itemview.parent.position.y += 500;\n        }\n    },\n\n    /**\n     * @description 退出游戏\n     */\n    onDestroy() {\n        // this.printMaskMsg();\n        tywx.ado.outGame();\n\n        tywx.ado.Utils.destroyWXBanner();\n    },\n\n    /**\n     * @description 复活按钮的显示控制\n     */\n    fhBtnShow: function () {\n        // console.log(\"当前的版本信息 =\" + tywx.SystemInfo.version + JSON.stringify(config));\n        if (tywx.config.auditing == true) {\n            this.fuHuo.active = false;\n            this.loseRestartGameBtn.active = true;\n        } else {\n            this.fuHuo.active = true;\n            // this.loseRestartGameBtn.active = false;\n        }\n    },\n\n    /**\n     * @description 添加小皇冠显示过的格子数据\n     * @param {Number} num 格子显示的数字\n     * @param {Number} id 格子的ID\n     */\n    addxhgNumber: function (num, id) {\n        this.curshowxhgs[this.curshowxhgs.length] = {\n            id: id,\n            num: num\n        };\n    },\n\n    /**\n     * @description 根据数字移除格子的数据\n     * @param {Number} num 移除显示的格子数字\n     */\n    removexhgNumber: function (num) {\n        // console.log(\"当前的ID是1 = \" + JSON.stringify(this.curshowxhgs));\n        for (var thn = 0; thn < this.curshowxhgs.length; thn++) {\n            if (this.curshowxhgs[thn].num == num) {\n                this.curshowxhgs.splice(thn, 1);\n                break;\n            }\n        }\n        // console.log(\"当前的ID是2 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    /**\n     * @description 测试日志方法2\n     */\n    showmsm2: function () {\n        //  console.log(\"showmsm2 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    /**\n     * @description 测试日志方法1\n     */\n    showmsm1: function () {\n        // console.log(\"showmsm1 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    /**\n     * @description 判断当前的数字是否显示小皇冠\n     * @param {Number} num 显示的数字\n     * @param {Number} id 显示格子的ID\n     */\n    hasShowxhgNum: function (num, id) {\n        if (this.curshowxhgs.length == 0) {\n            return false;\n        }\n        for (var ti = 0; ti < this.curshowxhgs.length; ti++) {\n            if (num == this.curshowxhgs[ti].num) {\n                // if ((Math.abs(id - this.curshowxhgs[ti].id) == 5 || Math.abs(id - this.curshowxhgs[ti].id) == 0)){\n                return true;\n                // }else{\n\n                //    return true;\n                // }\n            }\n        }\n        return false;\n    },\n\n    /**\n     * @description 设置游戏状态\n     * @param {Number}\n     */\n    setWaitClickState: function () {\n        //  if (this.waitnum && this.hasShowxhgNum(this.waitnum) == false) {\n        //     this.addxhgNumber(this.waitnum);\n        //     this.waitnum = null;\n        //  }\n        // this.curshowxhgs = [];\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.gameover) {\n            return;\n        }\n        if (this.point <= 0) {\n            return;\n        }\n        // 判断连接数的大小 如果连接数大于不同的值则产生不同的效果\n        if (this.gamestate != tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n\n            if (this.lianjiNumber >= tywx.config.combo_level.good[0] && this.point > 0) {\n                if (!this.hadshowlqbox) {\n                    this.dealLianJiNumber();\n                } else {\n                    this.playjjaniing = false;\n                    if (this.hadshowlqbox) {\n                        tywx.ado.Utils.hideWXBanner();\n                        this.showNumberNode.active = true;\n                        this.showCDAni();\n                        this.showNumberNode.getComponent(\"MoreTanNumber\").playAni();\n                        this.hadshowlqbox = false;\n                    }\n                }\n            } else {\n                if (this.hadshowlqbox) {\n                    tywx.ado.Utils.hideWXBanner();\n                    this.showNumberNode.active = true;\n                    this.showCDAni();\n                    this.showNumberNode.getComponent(\"MoreTanNumber\").playAni();\n                    this.hadshowlqbox = false;\n                } else if (this.hadShowPjl == false && this.point > 0 && this.hasProduceNewScore == true) {\n                    this.hasProduceNewScore = false;\n                    this.pjlCallBack();\n                }\n            }\n            this.showRYBoxButton();\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n        }\n\n    },\n\n    /**\n     * 显示如意宝箱\n     */\n    showRYBoxButton: function () {\n        if (this.score >= tywx.config.ruyiScore && this.ryBoxBtn.active == false) {\n            if (tywx.config.auditing == true) {\n                this.ryBoxBtn.active = false;\n            } else {\n                this.ryBoxBtn.active = true;\n                var animation = this.ryBoxBtn.getComponent(cc.Animation);\n                animation.play(\"daiji\");\n            }\n        } else if (this.score < tywx.config.ruyiScore) {\n            this.ryBoxBtn.active = false;\n        }\n    },\n\n    /**\n     * @description 设置当前待处理的显示Number\n     */\n    setWaitNum: function (waitnum) {\n        this.waitnum = waitnum;\n    },\n\n    /**\n     * @description 处理玩家没有点击屏幕的状态\n     */\n    dealPlayerNoClickScreen: function () {\n        if (this.hadClickScreen == false) {\n            var self = this;\n            this.hadClickScreen = true;\n            // 得到当前点击可以消除的格子\n            var allcellids = [];\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + 1;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                }\n            }\n\n            // for(var ci = 0; ci < allcellids.length; ci ++){\n            //     if(this.allpngs[allcellids[ci]] != null){\n            //        this.allpngs[allcellids[ci]].getComponent(\"celltile\").playDaijiEff();\n            //     }\n            // }\n\n            if (allcellids.length > 0) {\n                // console.log(\" 所有可连接的ID = \" + JSON.stringify(allcellids));\n                self.node.stopAllActions();\n                var delay = cc.delayTime(tywx.ado.Constants.GameCenterConfig.letUserClickTime);\n                var idindex = 0;\n                var call = cc.callFunc(function () {\n                    var cellid = allcellids[idindex];\n                    // console.log(idindex + \" = 当前的ID信息 = \" + cellid);\n                    if (idindex > 0) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid] && (self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff());\n                    }\n\n\n                    if (idindex - 1 >= 0) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid] && (self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff());\n                    } else {\n                        var precellid = allcellids[allcellids.length - 1];\n                        self.allpngs[precellid] && (self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff());\n                    }\n                    self.allpngs[cellid] && (self.allpngs[cellid].getComponent(\"celltile\").playDaijiEff());\n                    if (idindex == allcellids.length - 1) {\n                        idindex = 0;\n                    } else {\n                        idindex = idindex + 1;\n                    }\n                });\n                var seq = cc.sequence(call, delay);\n                var rep = cc.repeatForever(seq);\n                self.node.runAction(rep);\n            }\n\n\n        }\n    },\n\n\n    /**\n     * @description 处理玩家当前的点击屏幕的逻辑\n     */\n    dealPlayerClickScreen: function () {\n        // if(this.hadClickScreen == false){\n        var self = this;\n        this.node.stopAllActions();\n        for (var ci = 0; ci < tywx.ado.Constants.GameCenterConfig.geziNumber; ci++) {\n            if (this.allpngs[ci] != null) {\n                this.allpngs[ci].getComponent(\"celltile\").stopDaijiEff();\n            }\n        }\n        this.hadClickScreen = true;\n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function () {\n            if (self.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                self.hadClickScreen = false;\n                self.dealPlayerNoClickScreen();\n            }\n        }, 5, 0, 15);\n        // }\n    },\n\n\n\n    /**\n     * @description 显示游戏帮助界面\n     */\n    showPlayMethod: function () {\n        if (this.helpviewpre != null) {\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n        }\n        // 添加帮助界面\n        this.helpviewpre = cc.instantiate(this.helpViewPre);\n        this.helpviewpre.x = 360;\n        this.helpviewpre.y = 0;\n        this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n        var self = this;\n        this.helpviewscript.setIsGame(1);\n        this.helpviewscript.setCloseCall(function () {\n            //  self.showSubStopView();\n            self.helpview.active = !self.helpview.active ? true : false;\n            self.showUseHpHelp(true);\n            // console.log(\"当前的新手帮助\")\n        });\n\n        this.helpviewscript.setStartGameCall(function () {\n            self.helpview.active = !self.helpview.active ? true : false;\n            self.showUseHpHelp(true);\n        });\n        this.helpviewpre.parent = this.helpview;\n        self.helpview.active = !self.helpview.active ? true : false;\n    },\n\n    /**\n     * @description 复活成功后的回调调用\n     */\n    fhsbCallBack: function () {\n        // this.showAlert(\"请分享到不同的群\");\n        // this.visibleControllButton(false);\n        // this.initgame();\n    },\n\n    /**\n     * @description 显示当前玩家的道具\n     */\n    showItem: function () {\n        tywx.LOGE(\"当局 = \")\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9;\n\n        for (var itemIndex = 0; itemIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; itemIndex++) {\n            var item = cc.instantiate(this.djitem);\n            let itemsceipt = item.getComponent(\"DjItem\");\n            itemsceipt.setData(tywx.ado.Constants.GameCenterConfig.allitem[itemIndex]);\n            item.parent = this.itemview;\n            var self = this;\n            itemsceipt.setClickCall(function (data, item) {\n                // 判断当前游戏是否是等待点击状态 不是则不能使用道具\n                if (self.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                    // 判断道具数量足不足\n                    if (data.num > 0) {\n                        var canupdate = true;\n                        if (data.id == 4) {\n                            if (self.point == tywx.ado.Constants.GameCenterConfig.maxphy_value) {\n                                self.showAlert(\"当前生命值已满。\");\n                                canupdate = false;\n                            } else {\n                                self.recoverGame();\n                            }\n                        } else if (data.id == 5) { // 加1血\n                            tywx.LOGE(\"当前徐良= \" + self.point + \",\" + tywx.ado.Constants.GameCenterConfig.maxphy_value);\n                            if (self.point < tywx.ado.Constants.GameCenterConfig.maxphy_value) {\n                                self.showOneHpEf(item);\n                                self.prepoint = self.point;\n                                self.point = self.point + 1;\n                                self.drawPhyPoint();\n                                canupdate = true;\n                            } else {\n                                canupdate = false;\n                                self.showAlert(\"血量充足\");\n                            }\n                        } else {\n                            // canupdate = self.getAllPathByitemValue(data);\n                            self.itemhelpview.active = true;\n                            tywx.ado.Utils.hideWXBanner();\n                            self.isitemhelphide = true;\n                            let itemhelpscript = self.itemhelpview.getComponent(\"ItemHelp\");\n                            if (data.id == 2 || data.id == 1) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showNum(data.value);\n                            } else if (data.id == 6) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showChuiZi();\n                            }\n                            canupdate = false;\n                        }\n                        // 显示\n                        if (canupdate == true) {\n                            data.num = data.num - 1;\n                            if (data.num < 0) {\n                                data.num = 0;\n                            }\n                            self.updateItemByData(data);\n                        }\n                    } else {\n                        self.showAlert(\"道具数量不足！\");\n                    }\n                }\n            });\n\n            item.x = 165 + (itemIndex * 125);\n            item.y = -55;\n            if (is_ipx) {\n                item.y = item.y + 70;\n                //                item.y = item.y + 30; \n            }\n            this.allOpenItems.push(item);\n        }\n        // 刷新道具显示\n        this.dealAllItems();\n    },\n\n\n    /**\n     * @description  使用1血特效\n     * @param {Object} item 具体的某个道具对象\n     */\n    showOneHpEf: function (item) {\n        if ((this.point != 5 || this.point != 1) && item.xx1Icon.node.getNumberOfRunningActions() == 0) {\n            var node = this.stars[this.point];\n            var newVec2 = node.convertToWorldSpace(cc.v2(node.x, node.y));\n            var new1Vec2 = item.xx1Icon.node.convertToWorldSpace(cc.v2(item.xx1Icon.node.x, item.xx1Icon.node.y));\n            var tmove = cc.moveTo(0.6, cc.p(newVec2.x - new1Vec2.x - node.x - 30, newVec2.y - Math.abs(new1Vec2.y) - node.y));\n            var seq = cc.sequence(tmove, cc.callFunc(function () {\n                item.xx1Icon.node.x = 0;\n                item.xx1Icon.node.y = 0;\n            }))\n            item.xx1Icon.node.runAction(seq);\n        }\n\n    },\n\n    /**\n     * @description 更新某个道具\n     * @param {Object} data 更新道具的数据\n     */\n    updateItemByData: function (data) {\n        if (data != null) {\n            tywx.LOGE(\"当前更新的数据 = \" + JSON.stringify(data));\n            for (var itmindex = 0; itmindex < this.allitems.length; itmindex++) {\n                var tdata = this.allitems[itmindex];\n                if (tdata.id == data.id) {\n                    tdata.num = data.num;\n                    this.allitems[itmindex] = tdata;\n                    this.storeAllItem();\n                    this.dealAllItems(this.allitems)\n                    break;\n                }\n            }\n        }\n    },\n    /**\n     * @description 添加已经复活次数\n     */\n    addRecoverNumber: function () {\n        this.recoverNumber = this.recoverNumber + 1;\n        // 如果恢复的次数等于2的话 隐藏恢复按钮\n        if (this.recoverNumber == tywx.ado.Constants.GameCenterConfig.maxrnum) {\n            this.fuHuo.active = false;\n        } else {\n            this.fhBtnShow();\n        }\n    },\n\n\n    /**\n     * @description 显示微信的的toast 提示框\n     * @param {String} msg 显示的文本信息\n     */\n    showAlert: function (msg) {\n        wx.showToast({\n            title: msg,\n            icon: 'success',\n            duration: 1500,\n        });\n\n    },\n    /**\n     * @description 显示向上弹出的文字提示\n     * @param {String} msg 显示的文本信息\n     */\n    showAlertMSG: function (msg) {\n        if (msg !== null && this.showalertmsg.node.getNumberOfRunningActions() === 0) {\n            this.showalertmsg.node.stopAllActions();\n            var self = this;\n            this.showalertmsg.node.active = true;\n            this.showalertmsg.string = msg;\n            var ty = self.showalertmsg.node.y;\n            let pri_pos = this.showalertmsg.node.position;\n            var rc = function () {\n                self.showalertmsg.node.active = false;\n                self.showalertmsg.node.y = ty - 160;\n                // 通过 tag 停止一个动作\n                self.showalertmsg.node.stopAllActions();\n                self.showalertmsg.node.position = pri_pos;\n            };\n            var move = cc.moveBy(2.5, cc.p(0, 260));\n\n            var call = cc.callFunc(rc);\n            var seq = cc.sequence(move, call);\n            this.showalertmsg.node.runAction(seq);\n        }\n        //tywx.ado.Utils.showWXToast(msg);\n    },\n\n\n    /**\n     * @description 点击方块产生特效\n     * @param {cc.v2} touchpos 当前点击的位置\n     */\n    showTouchEffect: function (touchpos) {\n\n    },\n\n    /**\n     * 显示通用的彩带\n     */\n    showCDAni: function () {\n        if (!this.caiDaiAni) {\n            this.caiDaiAni = cc.instantiate(this.tupoJIluAni);\n            this.caiDaiAni.parent = this.node;\n            this.caiDaiAni.zIndex = 100000000;\n        } else {\n            this.caiDaiAni.active = true;\n        }\n        var self = this;\n        let removeCall = function () {\n            self.caiDaiAni.active = false;\n        }\n\n        var ani = this.caiDaiAni.getComponent(cc.Animation);\n        ani.on('finished', removeCall, self);\n        //  console.log(ani + \"当前的彩带动画 = \" + this.caiDaiAni);\n        ani.play(\"tupojilu\");\n    },\n\n\n    /**\n     * @description 显示当前的暂停界面\n     */\n    showStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        if (this.stopView.active == false) {\n            this.stopV.active = false;\n            this.pjlView.active = false;\n            this.openboxview.active = false;\n            tywx.ado.Utils.showWXBanner();\n        } else {\n            tywx.ado.Utils.hideWXBanner();\n        }\n    },\n\n    /**\n     * @description 显示停止按钮控制的菜单\n     */\n    showSubStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        this.stopV.active = !this.stopV.active ? true : false;\n    },\n\n    /**\n     * @description 点击暂停按钮的时候调用 显示暂停界面\n     */\n    stopCall: function () {\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick && !this.playjjaniing) {\n            tywx.ado.Utils.hideWXBanner();\n            this.openboxview.active = false;\n            this.pjlView.active = false;\n            this.stopView.active = !this.stopView.active ? true : false;\n            this.stopV.active = !this.stopV.active ? true : false;\n        }\n    },\n\n\n    /**\n     * @description 处理并保存道具数据\n     * @param {Number} allitem 处理的道具数据\n     */\n    dealAllItems: function (allitem) {\n        // tywx.Util.setItemToLocalStorage(\"allitems\",JSON.stringify([{id:1, num:2}])); \n        var items = tywx.Util.getItemFromLocalStorage(\"allitems\", [])\n        tywx.LOGE(\"处理的道具数据 = \" + items)\n        // 刷新道具显示\n        if (items != null && items != undefined && items != []) {\n            try {\n                if (allitem) {\n                    this.allitems = allitem;\n                } else {\n                    this.allitems = JSON.parse(items);\n                }\n\n            } catch (e) {\n                this.allitems = this.allitems;\n            }\n            for (var titemIndex = 0; titemIndex < this.allitems.length; titemIndex++) {\n                var storitem = this.allitems[titemIndex];\n                tywx.LOGE(titemIndex + \"道具数据 = \" + JSON.stringify(items))\n                for (var openitemIndex = 0; openitemIndex < this.allOpenItems.length; openitemIndex++) {\n                    var topenitem = this.allOpenItems[openitemIndex].getComponent(\"DjItem\");\n                    var tdata = topenitem.getData();\n                    if (tdata.id == storitem.id) {\n                        tdata.num = storitem.num;\n                        topenitem.setData(tdata);\n                        break;\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * @description 产生对应的道具\n     * @param {Number} maxnum 产生的最大道具数量 暂时默认值都为1\n     */\n    produceItems: function (maxnum) {\n        // 随机道具的ID\n        var tindex = this.randomFrom(0, tywx.ado.Constants.GameCenterConfig.allitem.length - 1);\n        var itemid = tywx.ado.Constants.GameCenterConfig.allitem[tindex].id;\n        // 随机道具的数量\n\n        var itemnum = 1;\n        var itemname = \"-1\";\n        var randomNum = Math.random();\n        if (randomNum >= 1 - config.box_rate.sub1) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[0].id;\n            itemname = tywx.ado.Constants.GameCenterConfig.allitem[0].name;\n        } else if (randomNum < 1 - config.box_rate.sub1 && randomNum >= 1 - config.box_rate.sub1 - config.box_rate.add2) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[1].id;\n            itemname = tywx.ado.Constants.GameCenterConfig.allitem[1].name;\n        } else if (randomNum < 1 - config.box_rate.sub1 - config.box_rate.add2 && randomNum > config.box_rate.chui) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[2].id;\n            itemname = tywx.ado.Constants.GameCenterConfig.allitem[2].name;\n        } else if (randomNum <= config.box_rate.chui) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[3].id;\n            itemname = tywx.ado.Constants.GameCenterConfig.allitem[3].name;\n        }\n\n        this.produceItem = {\n            id: itemid,\n            num: itemnum,\n            name: itemname,\n        };\n        tywx.LOGE(\"当前产生的道具 \" + JSON.stringify(this.produceItem))\n\n    },\n\n\n    /**\n     * @description 产生指定范围的随机数\n     * @param {Number} lowerValue 最小值\n     * @param {Number} upperValue 最大值\n     */\n    randomFrom: function (lowerValue, upperValue) {\n        return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);\n    },\n\n    /**\n     * @description: 该类的构造函数 可用于自身变量的初始化\n     */\n    ctor: function () {\n        tywx.LOGE(\"helloc g\");\n        config = tywx.config != null ? tywx.config : config;\n    },\n\n    /**\n     * @description 得到当前的格子容器\n     * @returns {Table} 格子的数据\n     */\n    getAllgz: function () {\n        return this.g_gezi;\n    },\n\n    /**\n     * @description 得到当前的mask容器\n     * @returns {Table} mask数据 \n     */\n    getAllmask: function () {\n        return this.g_mask;\n    },\n\n    /**\n     * @description 根据这个值在格子中的数字进行和值运算 找出每个格子加上这个值是否可以连接\n     * @param {Data} 道具数据\n     */\n    getAllPathByitemValue: function (data) {\n\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.usingitem;\n            // 得出当前可连的所有路径\n            var allcellids = [];\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + data.value;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                    break;\n                }\n\n            }\n            this.resetAllMask();\n            //  tywx.LOGE(\"当前值可消除的mask\"+JSON.stringify(allcellids));\n            if (allcellids.length > 0) {\n                let i = allcellids[0];\n                var num = this.getAllgz()[i].num + data.value;\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n                this.getAllgz()[i].block.effectid = 0;\n                this.getAllgz()[i].block.effecttime = 0.5;\n                if (num > this.maxnum) {\n                    this.setMaxNumber(num);\n                }\n                this.g_clickid = allcellids[0];\n                this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                return true;\n            } else {\n                this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                tywx.ado.Utils.showWXToast(\"此块不能使用道具\")\n                return false;\n            }\n        }\n        return false;\n    },\n\n\n    /**\n     * 处理点击屏幕产生的逻辑(主要是判断出当前点击的位置在某个格子上)\n     * @param {Number} i 锤子作用的ID\n     * @param {celltile} celltile 格子对象\n     */\n    touchEndCallback: function (i, celltile) {\n        console.log(i + \"当前即将使用的道具谁 = \" + JSON.stringify(this.curUsingItemData))\n        if (this.getAllgz()[i] && this.getAllgz()[i].block && this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n           \n            var curaddnum = 1;\n            var tdata = this.curUsingItemData;\n            this.curUsingItemData = null;\n            if ((tdata != null && tdata.id != 6) || tdata == null) {\n                if (tdata != null) {\n                    curaddnum = tdata.value;\n                }\n                // 判断当前的游戏状态是否为等待点击状态\n                // 根据点击的点 来判断当前点击在那个格子上面\n                var num = this.getAllgz()[i].num + curaddnum;\n                this.setCurMaxNumber(num);\n                this.showAnimationWhenScoreBiggerThanTen(num);\n                if (num < 1) {\n                    this.showAlert(\"不能使用此道具\");\n                } else {\n\n                    if (tdata != null) {\n                        tdata.num = tdata.num - 1;\n                        if (tdata.num < 0) {\n                            tdata.num = 0;\n                        }\n                        this.isUsingItem = true;\n                        this.updateItemByData(tdata);\n                    } else {\n                        this.isUsingItem = false;\n                    }\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblock();\n                    this.getAllgz()[i].block.effectid = 0;\n                    this.getAllgz()[i].block.effecttime = 0.5;\n                    if (num > this.maxnum) {\n                        this.setMaxNumber(num);\n                    }\n                    // 记录下当前点击的格子 和切换当前的游戏状态为检查点击状态\n                    this.g_clickid = i;\n                    this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                    // 在方块上产生点击特效\n                    var mpos = {};\n                    this.showTouchEffect(mpos);\n                    // 终止此次点击的循环处理\n                }\n            } else {\n                if (tdata != null) {\n                    tdata.num = tdata.num - 1;\n                    if (tdata.num < 0) {\n                        tdata.num = 0;\n                    }\n                    this.isUsingItem = true;\n                    this.updateItemByData(tdata);\n                } else {\n                    this.isUsingItem = false;\n                }\n                this.useCZClick(i, celltile);\n            }\n        }\n\n    },\n\n    /**\n     * @description 设置最大值\n     * @param {Number} num 当前设置的最大数\n     */\n    setMaxNumber: function (num) {\n        this.maxnum = num;\n        this.maxScoreShow();\n    },\n\n    /**\n     * @description 使用锤子类型的道具\n     * @param {Number} id 锤子作用的ID\n     * @param {celltile} celltile 格子对象\n     */\n    useCZClick: function (id, celltile) {\n        var self = this;\n\n        self.chuiziEft.active = true;\n        self.chuiziEft.scale = 1.4;\n        self.chuiziEft.parent = celltile.node;\n        self.chuiziEft.x = 25;\n        self.chuiziEft.y = -30;\n        // self.chuiziEft.node.setLocalZOrder(1999);\n        var anim = this.chuiziEft.getComponent(cc.Animation);\n        var self = this;\n        var finishCallback = function () {\n            self.chuiziEft.active = false;\n            self.chuiziEft.parent = self.node;\n            anim.stop(\"chuiziza\");\n\n        }\n        var tid = id;\n        var call = cc.callFunc(function () {\n            self.getAllmask()[tid].step = 1;\n            self.refreshbymask();\n            self.lianjiNumber = 1;\n            self.gamestatetime = tywx.ado.Constants.GameCenterConfig.drop_time;\n            tywx.Timer.setTimer(self, function () {\n                self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.dodrop;\n                self.hadAddNum = false;\n                //pπ 开启一个进程循环显示即将超逾的玩家\n            }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n\n        })\n\n        var delay = cc.delayTime(0.5);\n        var seq = cc.sequence(delay, call);\n        celltile.node.runAction(seq);\n        // self.getAllmask(tid).step = 0;\n\n        // self.refreshbymask();\n        // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n\n\n        var animateState = anim.play(\"chuiziza\");\n        animateState.wrapMode = cc.WrapMode.Normal;\n        anim.on('finished', finishCallback, self);\n    },\n\n\n\n    /**\n     * @description 游戏的主体逻辑都在这个方法里面\n     * @param {Number} dt  刷新delay \n     */\n    update: function (dt) {\n        // this.showAddTime = this.showAddTime - dt;\n        if (this.startDropTime <= 0) {\n            if (this.getAllgz().length == tywx.ado.Constants.GameCenterConfig.geziNumber) {\n                for (var i = 0; i < this.getAllgz().length; i++) {\n                    if (this.getAllgz()[i].block) {\n                        this.getAllgz()[i].block.tickmove(dt);\n                        this.getAllgz()[i].block.tickeffect(dt, this.star, this.star1);\n                         if (this.allpngs[i]) {\n                            this.getAllgz()[i].draw(this.allpngs[i]);\n                         }\n                    }\n                }\n            }\n        }\n\n        this.dealXhgCells();\n\n\n        if (this.isShowFIcon) {\n            this._updateSubDomainCanvas();\n        }\n        switch (this.gamestate) {\n            /*case tywx.ado.Constants.GameCenterConfig.gameState.waitclick:{\n                if (this.hadShowPjl == false && this.point > 0) {\n                    this.pjlCallBack();\n                }\n                break;\n            }*/\n            case tywx.ado.Constants.GameCenterConfig.gameState.checkclick:\n                {\n                    this.resetAllMask();\n                    var sc = this.getAllgz()[this.g_clickid].num;\n                    this.lianjiNumber = 1;\n\n                    this.allmergecellIds = [];\n                    this.allmergecellIds[this.allmergecellIds.length] = this.g_clickid;\n                    this.checkmaskbyid(this.g_clickid, 0);\n\n                    if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                        this.gamestatetime = this.getMergeTime() + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n                        this.score += tywx.ado.Constants.GameCenterConfig.baseScore * this.g_mask_samecnt * 1;\n                        this.hasProduceNewScore = true;\n                        this.scoreLabel.string = this.score;\n                        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                            // 判断是否已经标记 \n                            if (this.getAllgz()[i].label_id >= 0 && this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                                this.getAllgz()[i].block.speed_keep = tywx.ado.Constants.GameCenterConfig.gezi_pitch * this.getAllmask()[i].step / this.getMergeTime();\n                                this.getAllgz()[i].block.actiontime_keep = this.getMergeTime() / this.getAllmask()[i].step;\n                                this.getAllgz()[i].block.id_keep = i;\n                                this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                                this.getAllgz()[i].block.adjustmove();\n                            }\n                        }\n                        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.domove;\n                        // console.log(\"当前可以连接的格子数ID是 = \" + this.allmergecellIds)\n                        this.showAddTime = 0.1;\n                        this.addGetScoreLabelOnTile(this.allmergecellIds, tywx.ado.Constants.GameCenterConfig.baseScore);\n                        // console.log(\"this.hadAddNum2 \" + this.hadAddNum);\n                        this.hadAddNum = false;\n                    } else {\n                        this.hasProduceNewScore = false;\n                        if (this.isUsingItem == true) {\n                            this.isUsingItem = false;\n                        } else {\n                            this.point--;\n                            this.drawPhyPoint();\n                        }\n                        // 判断游戏是否结束\n                        if (this.point <= 0) {\n                            this.gameOverCallBack()\n                        } else {\n                            // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n                            this.setWaitClickState();\n                            this.finalDealMask();\n                        }\n                        // if (this.hadShowPjl == false) {\n                        //     this.pjlCallBack();\n                        // }\n                    }\n                    break;\n                }\n                //格子组合移动，进入掉落状态\n            case tywx.ado.Constants.GameCenterConfig.gameState.domove:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        this.dealDoMove();\n                    }\n                    if (this.gamestatetime <= tywx.ado.Constants.GameCenterConfig.merge_delay_time) {\n                        if (this.hadAddNum == false) {\n                            this.playMergeAnimation();\n                            this.hadAddNum = true;\n                            this.allpngs[this.g_clickid] && (this.allpngs[this.g_clickid].zIndex = maxzorder++);\n                            var num = this.getAllgz()[this.g_clickid].num + 1;\n                            this.getAllgz()[this.g_clickid].setnum(num);\n                            this.setCurMaxNumber(num);\n                            this.getAllgz()[this.g_clickid].block.num = num;\n                            // this.allpngs[this.g_clickid].getComponent(\"celltile\").showHG(num);\n                            if (this.hadshowlqbox) {\n\n                            }\n                            this.showAnimationWhenScoreBiggerThanTen(num);\n                        }\n                    }\n\n                    break;\n                }\n                //格子掉落完，进入再次检查合并状态，或者等待点击状态\n            case tywx.ado.Constants.GameCenterConfig.gameState.dodrop:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        //console.log(\"dealLianJiLogic1\")\n                        this.dealLianJiLogic();\n                    }\n                    break;\n                }\n\n        }\n    },\n\n    /**\n     * @description 移动的逻辑处理\n     */\n    dealDoMove() {\n        //  this.star.node.active = false;\n        var self = this;\n        // console.log(\"dealDoMovedealDoMovedealDoMove 1\");\n        this.gamestatetime = this.getMergeTime() + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n        var num = this.getAllgz()[this.g_clickid].num;\n        this.getAllgz()[this.g_clickid].settoblock();\n        this.getAllgz()[this.g_clickid].block.effectid = 1;\n        this.getAllgz()[this.g_clickid].block.effecttime = 0.5;\n        if (num > this.maxnum) {\n            this.setMaxNumber(num);\n        }\n        if (this.allpngs[this.g_clickid]) {\n            var audioIndex = this.lianjiNumber % tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1;\n            // console.log(this.lianjiNumber + \"当前播放的音效下标 = \" + audioIndex);\n            if (audioIndex < 0) {\n                audioIndex = 0;\n            }\n            if (audioIndex > tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1) {\n                audioIndex = tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1;\n            }\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO[audioIndex]);\n            this.allpngs[this.g_clickid] && (this.allpngs[this.g_clickid].getComponent(\"celltile\").playZhEff());\n        }\n        //  tywx.LOGE(\"Hellocd\");\n        this.refreshbymask();\n        tywx.Timer.setTimer(self, function () {\n            self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.dodrop;\n            // 开启一个进程循环显示即将超逾的玩家\n        }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n\n\n    },\n\n\n    /**\n     * @description 产生最大数字的逻辑处理\n     */\n    maxScoreShow: function () {\n        tywx.LOGD(\"产生最大数字\", this.maxnum);\n    },\n\n    getMergeTime: function () {\n        var sc = this.g_mask_samecnt;\n        var mt = tywx.ado.Constants.GameCenterConfig.merge_time;\n        var ret = mt;\n        if (sc > 4) ret = mt + mt * (sc - 4) * 0.2;\n        //console.log(\"SC=\", sc, \"RET=\", ret);\n        return ret;\n    },\n\n    /**\n     * @description 掉落状态的逻辑处理\n     */\n    dealLianJiLogic: function () {\n        var bfound = false;\n        //console.log(\"dealLianJiLogic abc\")\n        for (var j = 0; j < tywx.ado.Constants.GameCenterConfig.geziNumber; j++) {\n            if (this.getAllgz()[j].label_id == -1)\n                continue;\n            this.resetAllMask();\n            var sc = this.getAllgz()[j].num;\n            this.allmergecellIds = [];\n            this.allmergecellIds[0] = 0;\n            this.checkmaskbyid(j, 0);\n            if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                this.gamestatetime = this.getMergeTime() + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n                this.lianjiNumber++;\n                this.score += tywx.ado.Constants.GameCenterConfig.baseScore * this.g_mask_samecnt * this.lianjiNumber;\n                this.scoreLabel.string = this.score;\n                for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                    if (this.getAllgz()[i].label_id >= 0 && this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                        this.getAllgz()[i].block.speed_keep = tywx.ado.Constants.GameCenterConfig.gezi_pitch * this.getAllmask()[i].step / this.getMergeTime();\n                        this.getAllgz()[i].block.actiontime_keep = this.getMergeTime() / this.getAllmask()[i].step;\n                        this.getAllgz()[i].block.id_keep = i;\n                        this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                        this.getAllgz()[i].block.adjustmove();\n                    }\n                }\n                bfound = true;\n                this.g_clickid = j;\n                this.allmergecellIds[0] = this.g_clickid;\n                if (this.point < 5) {\n                    this.point++;\n                }\n                this.drawPhyPoint();\n                var self = this;\n                // var num = this.getAllgz()[this.g_clickid].num + 1;\n                // this.getAllgz()[this.g_clickid].setnum(num);\n                // this.showAddTime = 0.1;\n                this.addGetScoreLabelOnTile(this.allmergecellIds, tywx.ado.Constants.GameCenterConfig.baseScore * this.lianjiNumber);\n                // console.log(\"当前可以连接的格子数ID是 = \" + this.allmergecellIds)\n\n                tywx.Timer.setTimer(self, function () {\n\n                    self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.domove;\n                    // console.log(\"this.hadAddNum1 \" + this.hadAddNum);\n                    self.hadAddNum = false;\n                    //pπ 开启一个进程循环显示即将超逾的玩家\n                }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n                break;\n            }\n\n        }\n\n        if (bfound == false) {\n            // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n            this.setWaitClickState();\n            this.finalDealMask();\n        }\n    },\n\n    /**\n     * @description: 展示相关的特效UI\n     */\n    dealLianJiNumber: function () {\n        this.playjjaniing = true;\n        if (this.lianjiNumber == tywx.config.combo_level.good[0]) {\n            this.playGood();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.GOOD);\n            this.showboxNumber = 1;\n        } else if (this.lianjiNumber == tywx.config.combo_level.cool[0]) {\n            this.playCool();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.COOL);\n            this.showboxNumber = 2;\n        } else if (this.lianjiNumber == tywx.config.combo_level.awesome[0]) {\n            this.playAwesome();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.AWESOME);\n            this.showboxNumber = 3;\n        } else if (this.lianjiNumber >= tywx.config.combo_level.unbelive[0]) {\n            this.playUnbelive();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.UNBLIEVEABLE);\n            this.showboxNumber = 4;\n        } else {\n            this.showboxNumber = 0;\n            this.playjjaniing = false;\n        }\n        this.ljnumberLabel.string = this.lianjiNumber;\n        //    else if(this.lianjiNumber > 1) {\n        //       this.showBox(1);  \n        //    }\n    },\n\n\n\n    /**\n     * @description: 播放特定的音效\n     */\n    palyAudioByIndex: function (fileName) {\n        tywx.ado.AudioManager.playSound(fileName);\n    },\n\n\n\n\n    /**\n     * @@description: 播放good特效\n     */\n    playGood: function () {\n        var self = this;\n        var animation = this.goodEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            } else {\n                this.playjjaniing = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n    /**\n     * @description: 播放good特效\n     */\n    playCool: function () {\n        var self = this;\n        var animation = this.coolEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            } else {\n                this.playjjaniing = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n\n    /**\n     * @description: 播放awesome特效\n     */\n    playAwesome: function () {\n        var self = this;\n        this.awesEft.active = true;\n        var animation = this.awesEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                this.awesEft.active = false;\n            } else {\n                this.playjjaniing = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"awesome\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n    /**\n     * @description: 播放awesome特效\n     */\n    playUnbelive: function () {\n        var self = this;\n        this.unbeliveEft.active = true;\n        var animation = this.unbeliveEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                self.unbeliveEft.active = false;\n            } else {\n                this.playjjaniing = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"unbli\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n    /**\n     * @description: 把宝箱数据存储到本地\n     */\n    storeAllItem: function () {\n        // console.log(\"当前存储的数据 = \"+JSON.stringify(this.allitems))\n        if (this.allitems) {\n            tywx.Util.setItemToLocalStorage(\"allitems\", JSON.stringify(this.allitems));\n        }\n    },\n\n\n    /**\n     * @description：展示相关的特效UI\n     */\n    drawPhyPoint: function () {\n        // var ctx = this.bg.getComponent(cc.Graphics);\n        // ctx.clear();\n        // for(var i = 0;i< this.point; i++){\n        //     let color = tywx.ado.Constants.GameCenterConfig.showphy_pros.colors[i];\n        //     ctx.fillColor = cc.color(color[0],color[1],color[2]);\n        //     var x = (tywx.ado.Constants.GameCenterConfig.swidth - ((tywx.ado.Constants.GameCenterConfig.showphy_pros.phy_num - (tywx.ado.Constants.GameCenterConfig.maxphy_value - this.point)) * tywx.ado.Constants.GameCenterConfig.gezi_pitch)) / 2 + (tywx.ado.Constants.GameCenterConfig.showphy_pros.width + 10) * i;\n        //     var y = 980;\n        //     var w = tywx.ado.Constants.GameCenterConfig.showphy_pros.width;\n        //     var h = tywx.ado.Constants.GameCenterConfig.showphy_pros.height;\n        //     ctx.roundRect(x,y,w,h,tywx.ado.Constants.GameCenterConfig.showphy_pros.radius);\n        //     ctx.fill();\n        // }\n        if (this.point > 1) {\n            this.stars[0].scaleX = 1;\n            this.stars[0].scaleY = 1;\n            this.stars[0].stopAllActions();\n        }\n        if (this.prepoint == this.point) {\n            return;\n        }\n        // 咋这里判断当前的血量是否为1 如果为1的话产生 动画提示和tips\n        if (this.point == 1) {\n            this.produceHPAni(this.stars[0]);\n        }\n        this.prepoint = this.point;\n        for (var starIndex = 0; starIndex < 5; starIndex++) {\n            if (this.point >= starIndex + 1) {\n                this.stars[starIndex].getComponent(\"LifeStar\").show();\n            } else {\n                this.stars[starIndex].getComponent(\"LifeStar\").hide();\n            }\n        }\n\n    },\n\n    /**\n     * @description: 第一个星星产生一个放大缩小的动画 并且产生提示动画\n     */\n    produceHPAni: function (node, stime, scale) {\n\n        node.stopAllActions();\n        var scaletime = !stime ? 0.2 : stime;\n        var tscale = !scale ? 1.2 : scale;\n        var scaleBoom = cc.scaleTo(scaletime, tscale);\n        var scaleSmaller = cc.scaleTo(scaletime, 1);\n        var delay = cc.delayTime(scaletime);\n        var seq = cc.sequence(scaleBoom, scaleSmaller, delay);\n        var rep = cc.repeatForever(seq);\n        node.runAction(rep);\n        this.showAlertMSG(\"血量要耗光啦~\");\n    },\n\n    /**\n     * @description: gameOver和restart按钮的显示隐藏控制\n     * @param vis Boolean 是否显示gameout界面\n     */\n    visibleControllButton: function (vis) {\n        this.gameOut.node.active = vis;\n        if (this.gameOut.node.active == true) {\n            tywx.ado.Utils.hideWXBanner();\n            tywx.ado.Utils.commonScaleIn(this.gameOutRoot);\n        } else {\n            tywx.ado.Utils.showWXBanner();\n        }\n    },\n\n    /**\n     * @description: 游戏结束的逻辑\n     */\n    gameOverCallBack: function () {\n        this.storeScore();\n        tywx.ado.resetProgerss();\n\n        this.produceHPAni(this.fuHuoBtn, 0.6, 1.1);\n        this.isShowFIcon = false;\n        this.friendIcon.node.active = false;\n        // 判断此次得分是否创纪录\n        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.gameover;\n        this.visibleControllButton(true);\n        // 刷新当前的显示得分\n        this.loseScoreLabel.string = this.score;\n        // 刷新最大得分显示\n        var maxscore = parseInt(tywx.ado.Utils.loadItem(\"ADDONE_SCORE2\", 0));\n        this.maxscoreLabel.string = \"最好成绩 \" + maxscore + \"\";\n        if (this.recoverNumber < tywx.ado.Constants.GameCenterConfig.maxrnum) {\n            this.recoverNumberLabel.string = tywx.ado.Constants.GameCenterConfig.maxrnum - this.recoverNumber;\n        } else {\n            this.recoverNumberLabel.string = 0;\n        }\n        console.log(\"当dd前的最大数\" + this.curmaxNumber);\n        this.curmaxnumberLabel.string = this.curmaxNumber + \"\";\n        // 刷新显示的排行榜\n        this.showOverFriendsPH();\n        this.showCDAni();\n    },\n\n    /**\n     * @description 发送数据给子域 绘制出当前的\n     */\n    showOverFriendsPH: function () {\n        this.isShowFIcon = false;\n        wx.postMessage({\n            method: 7,\n        });\n        // this.tex.releaseTexture();\n        window.sharedCanvas.width = 460;\n        window.sharedCanvas.height = 180;\n        var self = this;\n        // 开启一个进程循环隐藏即将超逾的玩家\n        var tindex = 0;\n        wx.postMessage({\n            method: 9,\n        });\n        this.paimingSprite.node.active = false;\n        tywx.Timer.setTimer(self, function () {\n            if (tindex == 0) {\n                wx.postMessage({\n                    method: 8,\n                });\n\n            }\n            tindex += 1;\n            console.log(\"当前刷新次数 \" + tindex);\n            self.flushPHBView();\n        }, 1, 5, 0);\n    },\n\n    /**\n     * @description: 展示破纪录界面\n     */\n    pjlCallBack: function () {\n        // 判断当前的得分是否超过了可显示的分数\n        if (this.score < tywx.ado.Constants.GameCenterConfig.showPjlScore) {\n            return;\n        }\n        // 判断此次得分是否创纪录\n        if (this.score > parseInt(tywx.ado.Utils.loadItem(\"ADDONE_SCORE2\", 0))) {\n            this.hadShowPjl = true;\n            this.visibleControllButton(false);\n            var delay = cc.delayTime(0.1);\n            var self = this;\n            var call = cc.callFunc(function () {\n                self.stopView.active = true;\n                tywx.ado.Utils.hideWXBanner();\n                self.pjlView.active = true;\n                self.openboxview.active = false;\n                self.stopV.active = false;\n                self.pjlView.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.1, 1.1),\n                        cc.scaleTo(0.2, 1)\n                    )\n                );\n            });\n            var seq = cc.sequence(delay, call);\n            tywx.LOGD(\"是否破纪录21212\");\n            this.node.runAction(seq);\n            // var animation = this.tupojilu.getComponent(cc.Animation);\n            // this.newPlayerEf.active = false;\n            // animation.stop(\"tupojilu\");\n            // 刷新破纪录的显示\n            this.pjlScoreLabel.string = this.score;\n        }\n    },\n\n\n    /**\n     * @description: 关闭破纪录界面\n     */\n    closePjlView: function () {\n        // 判断此次得分是否创纪录\n        tywx.ado.Utils.showWXBanner();\n        this.showStopView();\n        this.pjlView.active = false;\n    },\n\n\n    /**\n     * @description: 最后补充格子\n     */\n    finalDealMask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            this.getAllgz()[i].settoblock();\n        }\n    },\n\n\n    /**\n     * @description: 游戏初始化\n     * @param restart Boolean 是否为重新开始游戏的初始化\n     */\n    initgame: function (restart) {\n        this.storeScore();\n        this.hadstorephotonumber = false;\n        // ! 读取进度\n        var tmp_progress = restart ? -1 : tywx.ado.loadProgress();\n\n        this.curmaxNumber = tmp_progress === -1 ? 5 : tmp_progress.curmaxNumber;\n        this.score = tmp_progress === -1 ? 0 : tmp_progress.score;\n\n        this.playjjaniing = false;\n        this.allshowshareids = [];\n        this.alljzxhgid = [];\n        this.allxhggz = [];\n        this.curshowxhgs = [];\n        this.hasProduceNewScore = false;\n\n        this.hadProducetantenNUmber = false;\n        this.startDropTime = 0;\n        this.curGiveScore = 0;\n        this.hadshowlqbox = false;\n        wx.postMessage({\n            method: 9,\n        });\n        this.scoreLabel.string = this.score;\n        this.point = tmp_progress === -1 ? tywx.ado.Constants.GameCenterConfig.maxphy_value : tmp_progress.life;\n        this.drawPhyPoint();\n        this.maxnum = tywx.ado.Constants.GameCenterConfig.maxphy_value;\n        this.recoverNumber = 0;\n        this.fhBtnShow();\n        this.isRestartGame = true;\n        this.hadShowPjl = false;\n\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            if (this.getAllgz()[i] && this.getAllgz()[i].label_id >= 0) {\n                var num = tmp_progress === -1 ? this.getrandomnum() : tmp_progress.mask[i];\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n                // this.allpngs[i].getComponent(\"celltile\").setCurNum(this.getAllmask()[i].num);\n                this.allpngs[i] && this.allpngs[i].getComponent(\"celltile\").showHG();\n            }\n        }\n\n\n        var needcheck = tmp_progress === -1;\n\n        while (needcheck) {\n            needcheck = false;\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                if (this.getAllgz()[i] && this.getAllgz()[i].label_id >= 0) {\n                    this.resetAllMask();\n                    this.checkmaskbyid(i, 0);\n                    if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                        this.changenumbymask();\n                        needcheck = true;\n                    }\n                }\n            }\n        }\n\n        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n        this.visibleControllButton(false);\n\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\", 0)) == 1) {\n            this.showUseHpHelp(true);\n        }\n        if (restart) {\n            this.startDropAnimation();\n        }\n        this.dealPlayerClickScreen();\n        this.dealAddStoreMaxNum();\n    },\n\n    /**\n     * @description: 产生格子下落动画\n     */\n    startDropAnimation: function () {\n        var self = this;\n        var allpos = [];\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            this.allpngs[i] && (this.allpngs[i].active = false);\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                self.allpngs[i]  && (self.allpngs[i].active = true);\n                var ty = this.randomFrom(300, 660);\n                allpos[allpos.length] = ty;\n                self.allpngs[i] && (self.allpngs[i].y = self.allpngs[i].y + ty);\n            }\n            self.startDropTime = 0.2;\n            tywx.Timer.setTimer(self, function () {\n                self.startDropTime = 0;\n            }, 0, 0, tywx.ado.Constants.GameCenterConfig.startGameDropTime + 0.05);\n            for (var ti = 0; ti < tywx.ado.Constants.GameCenterConfig.geziNumber; ti++) {\n                var move = cc.moveBy(tywx.ado.Constants.GameCenterConfig.startGameDropTime, cc.p(0, -allpos[ti]));\n                self.allpngs[ti] && (self.allpngs[ti].runAction(move));\n            }\n        }, 0, 0, 0.2);\n    },\n\n    /**\n     * @description: 重置棋盘mask， 为重新探路做准备\n     */\n    resetAllMask: function () {\n        if (this.refreshingMask == false) {\n            this.refreshingMask = true;\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                if (this.getAllgz()[i].label_id >= 0) {\n                    this.getAllmask()[i].reset();\n                }\n            }\n            this.g_mask_samecnt = 1;\n            this.refreshingMask = false;\n        }\n\n    },\n    findtopinmask: function (id) {\n        var tmpid1 = id + 13;\n        var tmpid2 = id + 15;\n\n        if (tmpid1 >= 98 || tmpid2 >= 98)\n            return -1;\n\n        if (this.getAllgz()[tmpid1].label_id >= 0 && (this.getAllmask()[tmpid1].step == 9999999 || this.getAllmask()[tmpid1].step == 0)) {\n            return tmpid1;\n        }\n\n        if (this.getAllgz()[tmpid2].label_id >= 0 && (this.getAllmask()[tmpid2].step == 9999999 || this.getAllmask()[tmpid2].step == 0)) {\n            return tmpid2;\n        }\n\n        if (this.getAllgz()[tmpid1].label_id >= 0)\n            return this.findtopinmask(tmpid1);\n        if (this.getAllgz()[tmpid2].label_id >= 0)\n            return this.findtopinmask(tmpid2);\n\n    },\n    /**\n     * 递归寻找给定ID的格子 并在mask数组里面进行标记\n     * @param id Number 格子的ID\n     * @param step Number 当前找到第几步\n     */\n    checkmaskbyid: function (id, step) {\n        this.getAllmask()[id].step = step;\n        // 从左找\n        if (this.checkmaskleft(id, step) == true) {\n            this.checkmaskbyid(id - 2, step + 1);\n        }\n        if (this.checkmaskdownleft(id, step) == true) {\n            this.checkmaskbyid(id - 15, step + 1);\n        }\n        if (this.checkmaskdownright(id, step) == true) {\n            this.checkmaskbyid(id - 13, step + 1);\n        }\n        if (this.checkmaskright(id, step) == true) {\n            this.checkmaskbyid(id + 2, step + 1);\n        }\n        if (this.checkmaskupleft(id, step) == true) {\n            this.checkmaskbyid(id + 13, step + 1);\n        }\n        if (this.checkmaskupright(id, step) == true) {\n            this.checkmaskbyid(id + 15, step + 1);\n        }\n    },\n\n\n    checkmaskleft: function (id, step) {\n        if (!this.getAllmask()[id - 2]) {\n            return false;\n        }\n        if (this.getAllmask()[id].x < 2)\n            return false;\n\n        if (gezi_map[id - 2] == 0)\n            return false;\n\n        if (this.getAllmask()[id - 2].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id - 2].step <= step)\n            return false;\n\n        if (this.getAllmask()[id - 2].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id - 2].step = step;\n        this.getAllmask()[id - 2].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id - 2;\n        return true;\n    },\n\n    checkmaskright: function (id, step) {\n        if (!this.getAllmask()[id + 2]) {\n            return false;\n        }\n        if (this.getAllmask()[id].x >= 12)\n            return false;\n\n        if (gezi_map[id + 2] && gezi_map[id + 2] == 0)\n            return false;\n\n        if (this.getAllmask()[id + 2] && this.getAllmask()[id + 2].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id + 2] && this.getAllmask()[id + 2].step <= step)\n            return false;\n\n        if (this.getAllmask()[id + 2] && this.getAllmask()[id + 2].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id + 2].step = step;\n        this.getAllmask()[id + 2].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id + 2;\n        return true;\n    },\n\n    checkmaskdownleft: function (id, step) {\n        if (this.getAllmask()[id].y == 0)\n            return false;\n        if (!this.getAllmask()[id - 15]) {\n            return false;\n        }\n        if (gezi_map[id - 15] == 0)\n            return false;\n\n        if (this.getAllmask()[id - 15].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id - 15].step <= step)\n            return false;\n\n        if (this.getAllmask()[id - 15].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id - 15].step = step;\n        this.getAllmask()[id - 15].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id - 15;\n        return true;\n    },\n\n    checkmaskdownright: function (id, step) {\n        if (this.getAllmask()[id].y == 0)\n            return false;\n        if (!this.getAllmask()[id - 13]) {\n            return false;\n        }\n        if (gezi_map[id - 13] == 0)\n            return false;\n\n        if (this.getAllmask()[id - 13].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id - 13].step <= step)\n            return false;\n\n        if (this.getAllmask()[id - 13].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id - 13].step = step;\n        this.getAllmask()[id - 13].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id - 13;\n        return true;\n    },\n\n    checkmaskupleft: function (id, step) {\n        if (this.getAllmask()[id].y == 6)\n            return false;\n        if (!this.getAllmask()[id + 13]) {\n            return false;\n        }\n        if (gezi_map[id + 13] == 0)\n            return false;\n\n        if (this.getAllmask()[id + 13].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id + 13].step <= step)\n            return false;\n\n        if (this.getAllmask()[id + 13].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id + 13].step = step;\n        this.getAllmask()[id + 13].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id + 13;\n        return true;\n    },\n\n    checkmaskupright: function (id, step) {\n        if (this.getAllmask()[id].y == 6)\n            return false;\n        if (!this.getAllmask()[id + 15]) {\n            return false;\n        }\n        if (gezi_map[id + 15] == 0)\n            return false;\n\n        if (this.getAllmask()[id + 15].num != this.getAllmask()[id].num)\n            return false;\n\n        if (this.getAllmask()[id + 15].step <= step)\n            return false;\n\n        if (this.getAllmask()[id + 15].step == 9999999)\n            this.g_mask_samecnt++;\n\n        this.getAllmask()[id + 15].step = step;\n        this.getAllmask()[id + 15].from = id;\n\n        return true;\n    },\n\n    /**\n     * @description:  检查是否可以继续连接\n     * @param id Number 每个格子的ID\n     * @param step Number 此次寻找的步数\n     * @param bj Number 寻找边界\n     * @param add Number 叠加数 上下加减5 左右加减1\n     */\n    checkDirPaths: function (id, step, bj, add) {\n        if (Math.abs(add) == 4 && this.getAllmask()[id] != null && this.getAllmask()[id].y == bj) {\n            return false;\n        } else if (Math.abs(add) == 1 && this.getAllmask()[id] != null && this.getAllmask()[id].x == bj) {\n            return false;\n        }\n        if (this.getAllmask()[id] == null || this.getAllmask()[id + add] == null) {\n            return false;\n        }\n        if (this.getAllmask()[id + add].num != this.getAllmask()[id].num || this.getAllmask()[id + add].step <= step) {\n            return false;\n        }\n\n        if (this.getAllmask()[id + add].step == 9999999) {\n            this.g_mask_samecnt++;\n        }\n\n        this.getAllmask()[id + add].step = step;\n        this.getAllmask()[id + add].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id + add;\n        this.checkmaskbyid(id + add, step + 1, bj, add);\n    },\n\n\n    /**\n     * @description: 改变格子的数字 通过mask\n     */\n    changenumbymask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            if (this.getAllgz()[i].label_id >= 0 && this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                var num = this.getrandomnum();\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n            }\n        }\n    },\n\n    /**\n     * @description: 创建随机的新块 返回新快的显示\n     */\n    getrandomnum: function () {\n        var tnum = this.maxnum - 1;\n        if (tnum < tywx.ado.Constants.GameCenterConfig.initGameMaxNum)\n            tnum = tywx.ado.Constants.GameCenterConfig.initGameMaxNum;\n        var num = parseInt(Math.random() * 10000) % tnum + 1;\n        return num;\n    },\n\n    /**\n     * @description: 使用满血道具 或者分享游戏的时候调用\n     */\n    recoverGame: function () {\n        if (this.recoverNumber < tywx.ado.Constants.GameCenterConfig.maxrnum) {\n            this.point = tywx.ado.Constants.GameCenterConfig.maxphy_value;\n            this.drawPhyPoint();\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n            this.addRecoverNumber();\n            this.visibleControllButton(false);\n        } else {\n            this.showAlert(\"复活次数已达\" + tywx.ado.Constants.GameCenterConfig.maxrnum + \"次，不能继续复活。\");\n            this.initgame(true);\n        }\n\n    },\n\n    /**\n     * @description: 创建新的棋盘， 为掉落做准备\n     */\n    refreshbymask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            if (this.getAllgz()[i].label_id >= 0 && this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                this.getAllmask()[i].from = -1;\n                var topid = this.findtopinmask(i);\n\n\n                if (topid != -1) { //\n                    var disy = this.getAllmask()[i].y - this.getAllmask()[topid].y;\n                    var disx = this.getAllmask()[i].x - this.getAllmask()[topid].x;\n                    var dis = this.getAllmask()[topid].y - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[topid].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[topid].posy;\n                    this.getAllgz()[i].block.id_keep = topid;\n                    this.getAllgz()[i].block.id_dest = i;\n                    // this.getAllgz()[i].block.speed_keep = (dis * tywx.ado.Constants.GameCenterConfig.gezi_pitch) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    var spx = disx * tywx.ado.Constants.GameCenterConfig.gezi_h_s / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    var spy = (disy * tywx.ado.Constants.GameCenterConfig.gezi_size * 3 / 2) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    this.getAllgz()[i].block.adjustdrop(spx, spy);\n                    this.getAllmask()[topid].step = 8888;\n                    var num = this.getAllgz()[topid].num;\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                    this.getAllgz()[i].block.effectid = this.getAllgz()[topid].block.effectid;\n                    this.getAllgz()[i].block.effecttime = this.getAllgz()[topid].block.effecttime;\n                    this.getAllgz()[topid].block.effectid = -1;\n                    this.getAllgz()[topid].block.effecttime = 0;\n                } else {\n                    var dis = 7 - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[i].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[i].posy + dis * (tywx.ado.Constants.GameCenterConfig.gezi_size * 3 / 2);\n                    this.getAllgz()[i].block.id_keep = -1;\n                    this.getAllgz()[i].block.id_dest = i;\n                    // this.getAllgz()[i].block.speed_keep = (dis * tywx.ado.Constants.GameCenterConfig.gezi_pitch) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    var spy = -(dis * tywx.ado.Constants.GameCenterConfig.gezi_size * 3 / 2) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    this.getAllgz()[i].block.adjustdrop(0, spy);\n                    var num = this.getPjNumberName(i);\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                }\n            }\n        }\n    },\n\n\n    /**\n     * @description: 找出个格子的周围的数 算出平均数 来设置当前格子的数子\n     * @param id Number 给定的格子ID\n     */\n    getPjNumberName: function (id) {\n        var luck = false;\n        var sjs = Math.random();\n        var ttindex = 0;\n        for (var sindex = tywx.config.luck_block.score.length - 1; sindex > 0; sindex--) {\n            if (this.score >= tywx.config.luck_block.score[sindex]) {\n                ttindex = sindex;\n                break;\n            }\n        }\n        var tgl = tywx.config.luck_block.rate[ttindex];\n        if (sjs <= tgl) {\n            luck = true;\n        }\n \n        var allids = [id - 2, id + 2, id + 15, id - 15, id + 13, id - 13];\n        var total = 0;\n        var gzindex = 1;\n        for (var tcellIndex = 0; tcellIndex < allids.length; tcellIndex++) {\n            if (this.getAllmask()[tcellIndex] && this.getAllgz()[tcellIndex].block) {\n                total = total + this.getAllgz()[tcellIndex].block.num;\n                gzindex = gzindex + 1;\n            }\n        }\n        let pjNumber = parseInt(total / gzindex);\n        let fudu = luck ? 1.0 : 3.5;\n        let num = parseInt(pjNumber + fudu - 2 * fudu * Math.random());\n        if (num <= 0) num = 1;\n        //console.log(\"score=\", this.score, \"ttindex=\", ttindex, \"sjs=\", sjs, \"tgl=\", tgl, \"luck=\", luck, \"pjNumber=\", pjNumber, \"fudu=\", fudu, \"num=\", num);\n        return num;\n    },\n\n\n    /**\n     * @description： 点击返回首页的时候会调用\n     */\n    backFirstPage: function () {\n        tywx.ado.saveProgress();\n        this.storeScore();\n        cc.director.loadScene(\"gamestart\", this.destroyFinish);\n    },\n\n    /**\n     * @description: 存储当前的分数\n     */\n    storeScore: function () {\n        if (parseInt(tywx.ado.Utils.loadItem(\"ADDONE_SCORE2\", 0)) < this.score) {\n            tywx.ado.Utils.saveItem('ADDONE_SCORE2', this.score, false);\n        }\n    },\n\n    /**\n     * @description: 暂时没用的功能\n     */\n    backCall: function () {\n        this.showAlert(\"测试提示信息\");\n    },\n\n    /**\n     * @description: 开启玩家即将超逾的好友显示 开始更新update\n     */\n    showMinFriend: function () {\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.gameover) {\n            return;\n        }\n        window.sharedCanvas.width = 211;\n        window.sharedCanvas.height = 98;\n        tywx.ado.logWithColor('showMinFriend=====');\n        var self = this;\n        var bpos = cc.v2(this.stopButton.x, this.stopButton.y);\n        this.isShowFIcon = true;\n        var rest = self.isRestartGame;\n        var pos = this.friendsNode.convertToWorldSpace(cc.p(this.friendsNode.x, this.friendsNode.y))\n        var screen = cc.view.getVisibleSizeInPixel();\n        // console.log(\"y = \" + pos.y + \"x = \" + pos.x + \"screen = \" + JSON.stringify(screen));\n        wx.postMessage({\n            method: 5,\n            isrestart: rest,\n            score: self.score,\n            width: screen.width,\n            x: pos.x,\n            y: screen.height - pos.y - 90,\n        });\n        self.isRestartGame = false;\n    },\n\n    /**\n     * @description: 隐藏玩家即将超逾的好友显示 停止更新update\n     */\n    hideMinFriend: function () {\n        var self = this;\n        this.isShowFIcon = false;\n        return;\n    },\n\n    /**\n     * @description: 打印当前界面上的格子信息\n     */\n    printMaskMsg: function () {\n        for (var gzIndex = 0; gzIndex < tywx.ado.Constants.GameCenterConfig.geziNumber; gzIndex++) {\n            this.getAllmask()[gzIndex].showMSG();\n        }\n    },\n\n    /**\n     * @description： 首次弹出帮助界面\n     */\n    firstShowHelpView: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\", 0)) === 0) {\n            tywx.Util.setItemToLocalStorage(\"hadshowhelpview\", 1);\n            tywx.ado.Utils.hideWXBanner();\n            this.showPlayMethod();\n        }\n    },\n\n\n    /**\n     * @description: 刷新子域即将超越的玩家Canvas\n     */\n    _updateSubDomainCanvas: function () {\n        //return;\n        if (!this.tex || !tywx.publicwx) {\n            return;\n        }\n        if (this.isShowFIcon == true) {\n            var openDataContext = wx.getOpenDataContext();\n            var sharedCanvas = openDataContext.canvas;\n            this.tex.initWithElement(sharedCanvas);\n            this.tex.handleLoadedTexture();\n            this.friendIcon.spriteFrame = new cc.SpriteFrame(this.tex);\n            this.friendIcon.node.active = true;\n        }\n    },\n\n    /**\n     * @description 刷新显示gameover排行榜\n     */\n    flushPHBView: function () {\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        this.paimingSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n        this.paimingSprite.node.active = true;\n\n    },\n\n    /**\n     * @description: destroy当前场景的时候调用\n     */\n    destroyFinish: function () {\n        // if(this.node){\n        //    this.node.destroy();\n        // }\n    },\n\n    /**\n     * @description: 点击免费领取宝箱的时候调用\n     * @param {Boolean} dontsetnull 是否需要设置成领取一次\n     */\n    lingQuItem: function (dontsetnull, giveitem) {\n        if (giveitem) {\n            this.produceItem = giveitem;\n        }\n        // 查看当前ID的道具玩家是否存在\n        if (this.produceItem != null) {\n            if (this.allitems.length == 0) {\n                this.allitems[0] = this.produceItem;\n            } else {\n                // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                var findata = false;\n                for (var itemIndex = 0; itemIndex < this.allitems.length; itemIndex++) {\n                    var itemdata = this.allitems[itemIndex];\n                    // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                    if (itemdata.id == this.produceItem.id) {\n                        itemdata.num = itemdata.num + this.produceItem.num;\n                        findata = true;\n                        this.allitems[itemIndex] = itemdata;\n                        break;\n                    }\n                }\n                if (findata == false) {\n                    this.allitems[this.allitems.length] = this.produceItem;\n                }\n            }\n            // 组织显示得到的信息\n\n            var item = null;\n            for (var djIndex = 0; djIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; djIndex++) {\n                var dj = tywx.ado.Constants.GameCenterConfig.allitem[djIndex];\n                // tywx.LOGE(JSON.stringify(dj)+\"当前得到的宝箱数据  = \"+JSON.stringify(this.produceItem));\n                if (this.produceItem.id == dj.id) {\n                    item = dj;\n                    break;\n                }\n            }\n\n            if (item != null) {\n                this.showAlertMSG(\"领取成功 \" + item.name + \" 道具\");\n            }\n            if (!dontsetnull) {\n                this.produceItem = null;\n            }\n\n        }\n\n        this.storeAllItem();\n        this.dealAllItems(this.allitems);\n\n    },\n\n    /**\n     * 游戏中弹出的领取宝箱\n     */\n    lingQuBox: function () {\n        this.lingQuItem();\n        this.openboxview.active = false;\n        this.showStopView();\n    },\n\n\n    /**\n     * @description: 当条件达到某个值的时候显示领取宝箱\n     * @param maxnum Number 此次宝箱对应的连接数产生的值\n     */\n    showBox: function (maxnum) {\n        let cl = tywx.config.combo_level;\n        let arr = [cl.good[1], cl.cool[1], cl.awesome[1], cl.unbelive[1]];\n        let ran = Math.random();\n        let is_show = ran <= arr[maxnum - 1];\n        tywx.ado.logWithColor(`maxnum:${maxnum},ran:${ran},is_show:${is_show}`);\n        if (is_show) {\n            // 更新获得道具的item\n            this.showStopView();\n            this.produceItems(maxnum)\n            var frameindex = 0;\n            if (this.produceItem.id == 2) {\n                frameindex = 1;\n            } else if (this.produceItem.id == 5) {\n                frameindex = 2;\n            } else if (this.produceItem.id == 6) {\n                frameindex = 3;\n            }\n            this.openBoxIconSprite.spriteFrame = this.itemframes[frameindex];\n            this.pjlView.active = false;\n            this.stopV.active = false;\n            this.openboxview.active = true;\n            this.showCDAni();\n            tywx.ado.Utils.commonScaleIn(this.openboxview);\n        }\n        this.playjjaniing = false;\n    },\n\n\n    /**\n     * @description: 暂停界面的重新开始游戏\n     */\n    restartGame: function () {\n        this.initgame(true);\n        this.showSubStopView();\n    },\n\n\n    /**\n     * @description: 失败界面的重新开始游戏\n     */\n    loseRestartGame: function () {\n        this.initgame(true);\n        this.visibleControllButton(false);\n    },\n\n    /**\n     * @description: 点击失败界面上的关闭按钮调用 重新开始新的游戏\n     */\n    startNewGame: function () {\n        this.visibleControllButton(false)\n        this.initgame(true);\n    },\n\n    /**\n     * @description: 在置顶的块上播放组合动画\n     */\n    playMergeAnimation: function () {\n        //return;\n        if (this.g_clickid) {\n            var self = this;\n            if (!this.cmergeAniNode) {\n                this.cmergeAniNode = cc.instantiate(this.mergeAniNode);\n                var mergeAni = this.cmergeAniNode.getComponent(cc.Animation);\n                let removeCall = function () {\n                    self.cmergeAniNode.active = false;\n                }\n                this.cmergeAniNode.parent = this.cellUpView;\n                mergeAni.on('finished', removeCall, self);\n            }\n\n\n            if (this.isIPHX()) {\n                if (this.allpngs[this.g_clickid]) {\n                    this.cmergeAniNode.x = this.allpngs[this.g_clickid].x;\n                    this.cmergeAniNode.y = this.allpngs[this.g_clickid].y - 30;\n                }\n\n            } else {\n                if (this.allpngs[this.g_clickid]) {\n                    this.cmergeAniNode.position = this.allpngs[this.g_clickid].position;\n                }\n            }\n            this.cmergeAniNode.active = true;\n            var animState = this.cmergeAniNode.getComponent(cc.Animation).play(\"mergani\");\n            // 使动画播放速度加速\n            animState.speed = 1.3;\n        }\n    },\n\n    /**\n     * @description: 得到加分label\n     * @param num Number label显示的分数\n     */\n    getLabel: function (num) {\n        let label = null;\n        if (this.addScoreLabelPools.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n            label = this.addScoreLabelPools.get();\n        } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n            label = cc.instantiate(this.addScoreNode);\n        }\n        var labelScrpt = label.getComponent(\"AddScoreLabel\");\n        labelScrpt.setNumber(\"+\" + num);\n        return label;\n    },\n\n    /**\n     * @description: 在当前加分的每个格子上显示 加分\n     * @param tiles Table 此次连接对应的所有格子ID\n     * @param shownum Number 所加的分数\n     */\n    addGetScoreLabelOnTile: function (tiles, shownum) {\n\n        for (var tileIndex = 0; tileIndex < tiles.length; tileIndex++) {\n            var id = tiles[tileIndex];\n            this.dealAddNumber(id);\n            // var num = 10;\n            // if (id == this.g_clickid) {\n            //     num = tywx.ado.Constants.GameCenterConfig.baseScore * (this.getAllgz()[this.g_clickid].num);\n            //     console.log(id  + \"当前的下标 first \" + tileIndex + \" 分数 = \" + num);\n            // }else{\n            //     num = tywx.ado.Constants.GameCenterConfig.baseScore * tileIndex;\n            //     console.log(id  + \"当前的下标 second \" + tileIndex + \" 分数 = \" + num);\n            // }\n            let label = this.getLabel(shownum);\n            label.getComponent(\"addNode\");\n            var scaleBoom = cc.scaleTo(0.2, 1.3);\n            var scalesm = cc.scaleTo(0.2, 1);\n            var mtop = cc.moveBy(0.2, cc.p(0, 10));\n            var spawn = cc.spawn([scaleBoom, mtop]);\n            var self = this;\n            var call = cc.callFunc(function () {\n                label.scalex = 1;\n                label.scaley = 1;\n                self.addScoreLabelPools.put(label);\n                //console.log(\"移除没有4\")\n            })\n            // var pos = this.getPos(id);\n\n            label.parent = this.cellUpView;\n            if (this.allpngs[id]) {\n                label.x = this.allpngs[id].x;\n                label.y = this.allpngs[id].y - 10;\n            }\n            var seq = cc.sequence(spawn, scalesm, call);\n            label.runAction(seq);\n        }\n    },\n\n    /**\n     * @description: 判断合成的格子中是否有小皇冠的格子\n     * @param id number 格子ID\n     */\n    dealAddNumber: function (id) {\n        if (this.allpngs[id]  && this.allpngs[id].getComponent(\"celltile\").prenum != 0) {\n            this.addXHGId(this.allpngs[id].getComponent(\"celltile\").prenum);\n            // console.log(\"当前的小皇冠禁用ID = \" + JSON.stringify(this.alljzxhgid));\n        }\n    },\n\n    /**\n     * @description: 展示血量帮助提示\n     * @param needaddstore Boolean 用于扩展 暂时没用\n     */\n    showUseHpHelp: function (needaddstore) {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhpnum\", 0)) < 2) {\n            if (needaddstore) {\n                tywx.Util.setItemToLocalStorage(\"hadshowhpnum\", parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhpnum\", 0)) + 1);\n            }\n            this.hpHelpTips.active = true;\n            var delay = cc.delayTime(5);\n            var self = this;\n            var call = cc.callFunc(function () {\n                self.hpHelpTips.active = false;\n            });\n            var seq = cc.sequence(delay, call);\n            this.hpHelpTips.runAction(seq);\n        } else {\n            this.hpHelpTips.active = false;\n        }\n    },\n\n    /** \n     * @description: 显示当前给定的数字对应的奖励界面当分数超过10以后显示一个动画(合并完成后出现)\n     * @param num {Number} 格子的显示数字\n     */\n    showAnimationWhenScoreBiggerThanTen: function (num) {\n        // 产生大于10的效果\n        if (num % 2 == 0 && this.hadShowShareLJ(num) == false && num >= tywx.ado.Constants.GameCenterConfig.moreThanEightNumber && this.hadshowlqbox == false) {\n            this.produceItems(1);\n            this.allshowshareids[this.allshowshareids.length] = num;\n            if (num * tywx.ado.Constants.GameCenterConfig.mergeMaxNumberBaseScore > this.curGiveScore) {\n                this.curGiveScore = num * tywx.ado.Constants.GameCenterConfig.mergeMaxNumberBaseScore;\n                this.score = this.score + this.curGiveScore;\n                this.showAlertMSG(\"合出数字\" + num + \"奖励:\" + this.curGiveScore + \"分\");\n                this.scoreLabel.string = this.score;\n            }\n            this.hadshowlqbox = true;\n            let showScript = this.showNumberNode.getComponent(\"MoreTanNumber\");\n            showScript.init();\n            showScript.setShowNumber(num, this.score, this.produceItem.name);\n        }\n    },\n\n    isIPHX: function () {\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9;\n        return is_ipx;\n    },\n    /**\n     * @description 保存照片\n     */\n    storePhoto: function () {\n\n        //console.log(JSON.stringify(this.gameOutRoot.getContentSize()) + JSON.stringify(this.gameOutRoot.getContentSize(true)) + \" 尺寸 = \" + JSON.stringify(cc.winSize));\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // * 是否是2:1屏幕\n        let ds = cc.size(720, 1280);\n        let dcs = cc.size(516, 818);\n        let [rate_width, rate_height] = [dcs.width / ds.width, dcs.height / ds.height];\n        let [d_x, d_y] = [(ds.width - dcs.width) / 2, (ds.height - dcs.height) / 2 - 71];\n        let [rate_x, rate_y] = [d_x / ds.width, d_y / ds.height];\n\n        let w = cw * rate_width;\n        let h = is_ipx ? w * (dcs.height / dcs.width) : ch * rate_height;\n        let x = cw * rate_x;\n        let y = is_ipx ? (ch - h) / 2 - this.gameOutRoot.position.y : ch * rate_y;\n        var self = this;\n        canvas.toTempFilePath({\n            x: x,\n            y: y,\n            width: w,\n            height: h,\n            destWidth: 516,\n            destHeight: 818,\n            success: function success(res) {\n                //console.log(res);\n                tywx.ado.Utils.saveImage2PhoneByUrl(res.tempFilePath, function () {\n                    tywx.ado.Utils.showWXToast(\"保存图片成功\");\n                    // self.lingQuItem();\n                    // self.hadstorephotonumber = false;\n                }, function () {\n                    tywx.ado.Utils.showWXToast(\"保存图片失败\");\n                });\n            },\n            fail: function fail(res) {\n                tywx.ado.Utils.showWXToast(\"保存图片失败\");\n            }\n        });\n    },\n\n\n    /**\n     * @description: 判断当前数字是否显示过分享领奖\n     * @param num {Number} 格子的显示数字\n     */\n    hadShowShareLJ: function (num) {\n        for (var t = 0; t < this.allshowshareids.length; t++) {\n            if (num == this.allshowshareids[t]) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n\n\n    showBanner: function () {\n        tywx.ado.Utils.createAndcreateAndShowWXBanner();\n        this.schedule(this.bannerRefresh, tywx.ado.Constants.WXAdConfig.bannerRefreshTime);\n    },\n    bannerRefresh: function () {\n        tywx.ado.Utils.createAndcreateAndShowWXBanner();\n    },\n\n    showRyBox: function () {\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n            this.ryBox.active = true;\n            tywx.ado.Utils.hideWXBanner();\n            tywx.ado.Utils.commonScaleIn(this.luckboxroot);\n        }\n    },\n\n    getCommenItemNode() {\n        let parent = this.itemview.parent;\n        let ret = parent.getChildByName('commbottom');\n        return ret;\n    }\n\n});"]}