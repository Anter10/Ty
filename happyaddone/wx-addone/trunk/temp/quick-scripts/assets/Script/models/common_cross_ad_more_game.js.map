{"version":3,"sources":["common_cross_ad_more_game.js"],"names":["cc","Class","extends","Component","properties","onLoad","node","active","tywx","NotificationCenter","listen","EventType","GET_ADMANAGER_ICON_INFO_SUCCESS","onGetCrossAdInfoSuccess","AdManager","rawAdInfoList","length","onDestroy","ignoreScope","start","ado","Configs","auditing","cross_ad_more_game","ad_list","root","getChildByName","i","adNode","adConfig","adButton","on","Utils","jump2MiniProgramByConfig","getCrossAdConfigByAppId","appid","spriteIco","getComponent","Sprite","loader","load","SystemInfo","cdnPath","icon_url","err","texture","new_sprite_frame","SpriteFrame","spriteFrame","setContentSize","size","console","log","nodeName","label_name","Label","string","name"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASK;AACN,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACAC,aAAKC,kBAAL,CAAwBC,MAAxB,CAA+BF,KAAKG,SAAL,CAAeC,+BAA9C,EAA+E,KAAKC,uBAApF,EAA6G,IAA7G;AACA,YAAGL,KAAKM,SAAL,CAAeC,aAAf,CAA6BC,MAA7B,GAAsC,CAAzC,EAA4C;AACxC,iBAAKH,uBAAL;AACH;AACJ,KAfI;AAgBLI,aAhBK,uBAgBM;AACPT,aAAKC,kBAAL,CAAwBS,WAAxB,CAAoC,IAApC;AACH,KAlBI;AAoBLC,SApBK,mBAoBI,CAER,CAtBI;;;AAwBL;;AAEAN,2BA1BK,qCA0BoB;AACrB;AACA,YAAGL,KAAKY,GAAL,CAASC,OAAT,CAAiBC,QAAjB,IAA6B,CAACd,KAAKY,GAAL,CAASC,OAAT,CAAiBE,kBAAlD,EAAsE;AAClE,iBAAKjB,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA;AACH;;AAED,YAAIiB,UAAUhB,KAAKY,GAAL,CAASC,OAAT,CAAiBE,kBAA/B;AACA,YAAIE,OAAO,KAAKnB,IAAL,CAAUoB,cAAV,CAAyB,MAAzB,CAAX;AACA,aAAKpB,IAAL,CAAUC,MAAV,GAAmB,IAAnB;;AATqB,mCAUboB,CAVa;AAWjB,gBAAIC,SAASH,KAAKC,cAAL,aAA8BC,CAA9B,CAAb;AACA,gBAAIE,WAAWL,QAAQG,CAAR,CAAf;AACA,gBAAGE,YAAYD,MAAf,EAAsB;AACdE,2BAAWF,OAAOF,cAAP,CAAsB,UAAtB,CADG;;AAElBI,yBAASC,EAAT,CAAY,OAAZ,EAAqB,YAAY;AAC7BvB,yBAAKY,GAAL,CAASY,KAAT,CAAeC,wBAAf,CAAwCzB,KAAKY,GAAL,CAASY,KAAT,CAAeE,uBAAf,CAAuCL,SAASM,KAAhD,CAAxC;AACH,iBAFD;AAGA,oBAAIC,YAAYR,OAAOF,cAAP,CAAsB,QAAtB,EAAgCW,YAAhC,CAA6CrC,GAAGsC,MAAhD,CAAhB;AACAtC,mBAAGuC,MAAH,CAAUC,IAAV,CACIhC,KAAKiC,UAAL,CAAgBC,OAAhB,GAA0B,2BAA1B,GAAwDb,SAASc,QADrE,EAEI,UAACC,GAAD,EAAKC,OAAL,EAAe;AACf,wBAAG,CAACD,GAAJ,EAAQ;AACJ,4BAAIE,mBAAmB,IAAI9C,GAAG+C,WAAP,CAAmBF,OAAnB,CAAvB;AACAT,kCAAUY,WAAV,GAAwBF,gBAAxB;AACAV,kCAAU9B,IAAV,CAAe2C,cAAf,CAA8BjD,GAAGkD,IAAH,CAAQ,GAAR,EAAY,GAAZ,CAA9B;AACAC,gCAAQC,GAAR,CAAY,WAAZ;AACH;AACJ,iBATD;AAUA,oBAAIC,WAAWzB,OAAOF,cAAP,CAAsB,YAAtB,CAAf;AACA,oBAAI4B,aAAaD,SAAShB,YAAT,CAAsBrC,GAAGuD,KAAzB,CAAjB;AACA,oBAAGD,UAAH,EAAc;AACVA,+BAAWE,MAAX,GAAoB3B,SAAS4B,IAA7B;AACH;AACJ;AAlCgB;;AAUrB,aAAI,IAAI9B,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AAAA,gBAIdG,QAJc;;AAAA,kBAAlBH,CAAkB;AAyBzB;AACJ;AA9DI,CAAT","file":"common_cross_ad_more_game.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.active = false;\n        tywx.NotificationCenter.listen(tywx.EventType.GET_ADMANAGER_ICON_INFO_SUCCESS, this.onGetCrossAdInfoSuccess, this);\n        if(tywx.AdManager.rawAdInfoList.length > 0 ){\n            this.onGetCrossAdInfoSuccess();\n        }\n    },\n    onDestroy(){\n        tywx.NotificationCenter.ignoreScope(this);\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    onGetCrossAdInfoSuccess(){\n        // ! 审核状态不显示\n        if(tywx.ado.Configs.auditing || !tywx.ado.Configs.cross_ad_more_game) {\n            this.node.active = false;\n            return;\n        }\n\n        let ad_list = tywx.ado.Configs.cross_ad_more_game;\n        let root = this.node.getChildByName('root');\n        this.node.active = true;\n        for(let i = 0; i < 5; i++){\n            let adNode = root.getChildByName(`adNode_${i}`);\n            let adConfig = ad_list[i];\n            if(adConfig && adNode){\n                var adButton = adNode.getChildByName('adButton');\n                adButton.on('click', function () {\n                    tywx.ado.Utils.jump2MiniProgramByConfig(tywx.ado.Utils.getCrossAdConfigByAppId(adConfig.appid));\n                });\n                let spriteIco = adNode.getChildByName('adIcon').getComponent(cc.Sprite);\n                cc.loader.load(\n                    tywx.SystemInfo.cdnPath + 'share_image/jiayi/daoliu/' + adConfig.icon_url,\n                    (err,texture)=>{\n                    if(!err){\n                        let new_sprite_frame = new cc.SpriteFrame(texture);\n                        spriteIco.spriteFrame = new_sprite_frame;\n                        spriteIco.node.setContentSize(cc.size(120,120));\n                        console.log(\"刷新CDN图片成功\");\n                    }\n                });\n                let nodeName = adNode.getChildByName('label_name');\n                let label_name = nodeName.getComponent(cc.Label);\n                if(label_name){\n                    label_name.string = adConfig.name;\n                }\n            }\n        }\n    }\n});\n"]}