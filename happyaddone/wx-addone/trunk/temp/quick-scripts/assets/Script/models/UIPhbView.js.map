{"version":3,"sources":["UIPhbView.js"],"names":["config","require","tywx","publicwx","curscene","UIPhbView","cc","Class","extends","Component","properties","backButton","default","type","Button","phbView","Node","shareButton","phbSprite","Sprite","_updateSubDomainCanvas","start","tex","openDataContext","wx","getOpenDataContext","sharedCanvas","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","delayTime","curgotophbtype","postMessage","method","MAIN_MENU_NUM","window","director","loadScene","loadFinishCallBack","node","destroy","module","exports"],"mappings":";;;;;;;;;;AAAA;;;;;AAKA,IAAIA,SAASC,QAAQ,cAAR,CAAb;AACAC,KAAKC,QAAL,GAAgB,IAAhB;;AAEA,IAAIC,WAAW,IAAf;AACA,IAAIC,YAAYC,GAAGC,KAAH;AACZC,aAASF,GAAGG,SADA;AAEZC,gBAAY;;AAERC,oBAAY;AACRC,qBAAS,IADD;AAERC,kBAAMP,GAAGQ;AAFD,SAFJ;;AAORC,iBAAS;AACLH,qBAAS,IADJ;AAELC,kBAAMP,GAAGU;AAFJ,SAPD;;AAYRC,qBAAa;AACTL,qBAAS,IADA;AAETC,kBAAMP,GAAGU;AAFA,SAZL;;AAiBRE,mBAAWZ,GAAGa;;AAjBN,KAFA;AAsBZC,0BAtBY,oCAsBa;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEH,KAhCW;AAiCZC,SAjCY,mBAiCJ,CAEP;AAnCW,wDAsCY,kCAAY;AAChC,QAAI,CAAC,KAAKC,GAAV,EAAe;AACX;AACH;AACD,QAAIC,kBAAkBC,GAAGC,kBAAH,EAAtB;AACA,QAAIC,eAAeH,gBAAgBI,MAAnC;AACA,SAAKL,GAAL,CAASM,eAAT,CAAyBF,YAAzB;AACA,SAAKJ,GAAL,CAASO,mBAAT;AACA,SAAKX,SAAL,CAAeY,WAAf,GAA6B,IAAIxB,GAAGyB,WAAP,CAAmB,KAAKT,GAAxB,CAA7B;AACH,CA/CW,sCA4DN,gBAAY;AACdtB,aAASE,KAAKF,MAAL,IAAe,IAAf,GAAsBE,KAAKF,MAA3B,GAAoCA,MAA7C;AACH,CA9DW,wCAgEJ,gBAAUgC,SAAV,EAAqB;AACzB,QAAI9B,KAAKC,QAAT,EAAmB;AACf,aAAKiB,sBAAL;AACH;AACJ,CApEW,wCAiFJ,kBAAY;AAChB,QAAIlB,KAAK+B,cAAL,IAAuB,CAA3B,EAA8B;AAC1B,YAAI/B,KAAKC,QAAT,EAAmB;AACfqB,eAAGU,WAAH,CAAe;AACXC,wBAAQ,CADG;AAEXC,+BAAe;AAFJ,aAAf;AAIH;AACJ,KAPD,MAOO;AACHC,eAAOb,EAAP,CAAUU,WAAV,CAAsB;AAClBC,oBAAQ,CADU;AAElBC,2BAAe;AACf;AAHkB,SAAtB;AAKH;AAIJ,CAnGW,6CAkHC,uBAAY;AACrB9B,OAAGgC,QAAH,CAAYC,SAAZ,CAAsB,SAAtB,EAAiC,KAAKC,kBAAtC;AACH,CApHW,uCA0HL,iBAAY;AACf,SAAKC,IAAL,CAAUC,OAAV;AACH,CA5HW,cAAhB;;AAgIAC,OAAOC,OAAP,GAAiBvC,SAAjB","file":"UIPhbView.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["/*\n   游戏开始界面\n   created by gyc on 2018-08-02.\n   final changed time by gyc on  2018-08-03\n*/\nvar config = require(\"AddOneConfig\")\ntywx.publicwx = true;\n\nvar curscene = null;\nlet UIPhbView = cc.Class({\n    extends: cc.Component,\n    properties: {\n\n        backButton: {\n            default: null,\n            type: cc.Button,\n        },\n\n        phbView: {\n            default: null,\n            type: cc.Node,\n        },\n\n        shareButton: {\n            default: null,\n            type: cc.Node,\n        },\n\n        phbSprite: cc.Sprite,\n\n    },\n    _updateSubDomainCanvas() {\n        // let self = this;\n        // if (!self.tex) {\n        //     return;\n        // }\n        // openDataContext.postMessage({\n        //     method:1,\n\n        // });\n\n    },\n    start() {\n\n    },\n\n    // 刷新子域的纹理\n    _updateSubDomainCanvas: function () {\n        if (!this.tex) {\n            return;\n        }\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        this.phbSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function () {\n        config = tywx.config != null ? tywx.config : config;\n    },\n\n    update: function (delayTime) {\n        if (tywx.publicwx) {\n            this._updateSubDomainCanvas();\n        }\n    },\n\n    /*\n        调用: 界面加载完成后的回调。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        if (tywx.curgotophbtype == 1) {\n            if (tywx.publicwx) {\n                wx.postMessage({\n                    method: 1,\n                    MAIN_MENU_NUM: \"x1\",\n                });\n            }\n        } else {\n            window.wx.postMessage({\n                method: 2,\n                MAIN_MENU_NUM: \"x1\",\n                // shareTicket:  tywx.groupdata.shareTickets[0]\n            });\n        }\n\n\n\n    },\n\n\n\n    /*\n        调用: 点击返回按钮\n        功能: 隐藏排行榜\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    hidePhbView: function () {\n        cc.director.loadScene(\"phbview\", this.loadFinishCallBack);\n    },\n\n\n    /**\n     * 关闭排行榜的界面\n     */\n    close: function () {\n        this.node.destroy();\n    }\n\n});\n\nmodule.exports = UIPhbView;"]}