{"version":3,"sources":["UIPhbView.js"],"names":["config","require","tywx","publicwx","curscene","UIPhbView","cc","Class","extends","Component","properties","backButton","default","type","Button","phbView","Node","shareButton","phbSprite","Sprite","_updateSubDomainCanvas","start","tex","openDataContext","wx","getOpenDataContext","sharedCanvas","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","delayTime","curgotophbtype","postMessage","method","MAIN_MENU_NUM","window","shareTicket","groupdata","shareTickets","director","loadScene","loadFinishCallBack","node","destroy","module","exports"],"mappings":";;;;;;;;;;AAAA;;;;;AAKA,IAAIA,SAASC,QAAQ,cAAR,CAAb;AACAC,KAAKC,QAAL,GAAgB,IAAhB;;AAEA,IAAIC,WAAW,IAAf;AACA,IAAIC,YAAYC,GAAGC,KAAH;AACZC,aAASF,GAAGG,SADA;AAEZC,gBAAW;;AAEPC,oBAAW;AACPC,qBAAQ,IADD;AAEPC,kBAAMP,GAAGQ;AAFF,SAFJ;;AAOPC,iBAAQ;AACJH,qBAAS,IADL;AAEJC,kBAAKP,GAAGU;AAFJ,SAPD;;AAYPC,qBAAY;AACRL,qBAAS,IADD;AAERC,kBAAKP,GAAGU;AAFA,SAZL;;AAiBPE,mBAAUZ,GAAGa;;AAjBN,KAFC;AAsBZC,0BAtBY,oCAsBc;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEH,KAhCW;AAiCZC,SAjCY,mBAiCH,CAER;AAnCW,wDAsCY,kCAAW;AAC/B,QAAI,CAAC,KAAKC,GAAV,EAAe;AACX;AACH;AACD,QAAIC,kBAAkBC,GAAGC,kBAAH,EAAtB;AACA,QAAIC,eAAeH,gBAAgBI,MAAnC;AACA,SAAKL,GAAL,CAASM,eAAT,CAAyBF,YAAzB;AACA,SAAKJ,GAAL,CAASO,mBAAT;AACA,SAAKX,SAAL,CAAeY,WAAf,GAA6B,IAAIxB,GAAGyB,WAAP,CAAmB,KAAKT,GAAxB,CAA7B;AACH,CA/CW,sCA4DN,gBAAU;AACZtB,aAASE,KAAKF,MAAL,IAAe,IAAf,GAAoBE,KAAKF,MAAzB,GAAkCA,MAA3C;AACH,CA9DW,wCAgEJ,gBAASgC,SAAT,EAAmB;AACvB,QAAG9B,KAAKC,QAAR,EAAiB;AACd,aAAKiB,sBAAL;AACF;AACJ,CApEW,wCAiFL,kBAAU;AACb,QAAGlB,KAAK+B,cAAL,IAAuB,CAA1B,EAA4B;AACxB,YAAG/B,KAAKC,QAAR,EAAiB;AACbqB,eAAGU,WAAH,CAAe;AACXC,wBAAQ,CADG;AAEXC,+BAAe;AAFJ,aAAf;AAIH;AACJ,KAPD,MAOK;AACDC,eAAOb,EAAP,CAAUU,WAAV,CAAsB;AAClBC,oBAAQ,CADU;AAElBC,2BAAe,IAFG;AAGlBE,yBAAcpC,KAAKqC,SAAL,CAAeC,YAAf,CAA4B,CAA5B;AAHI,SAAtB;AAKH;AAIJ,CAnGW,6CAkHA,uBAAU;AACnBlC,OAAGmC,QAAH,CAAYC,SAAZ,CAAsB,SAAtB,EAAiC,KAAKC,kBAAtC;AAEH,CArHY,oDAkIO,8BAAU;AACxB,QAAG,KAAKC,IAAR,EAAa;AACV,aAAKA,IAAL,CAAUC,OAAV;AACF;AACL,CAtIW,cAAhB;;AA4IAC,OAAOC,OAAP,GAAiB1C,SAAjB","file":"UIPhbView.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["/*\n   游戏开始界面\n   created by gyc on 2018-08-02.\n   final changed time by gyc on  2018-08-03\n*/\nvar config = require(\"AddOneConfig\")\ntywx.publicwx = true;\n\nvar curscene = null;\nlet UIPhbView = cc.Class({\n    extends: cc.Component,\n    properties:{\n         \n        backButton:{\n            default:null,\n            type: cc.Button,\n        },\n        \n        phbView:{\n            default: null,\n            type:cc.Node,\n        },\n\n        shareButton:{\n            default: null,\n            type:cc.Node,\n        },\n\n        phbSprite:cc.Sprite,\n       \n    },\n    _updateSubDomainCanvas () {\n        // let self = this;\n        // if (!self.tex) {\n        //     return;\n        // }\n        // openDataContext.postMessage({\n        //     method:1,\n\n        // });\n         \n    },\n    start () {\n \n    },\n\n    // 刷新子域的纹理\n    _updateSubDomainCanvas: function() {\n        if (!this.tex) {\n            return;\n        }\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        this.phbSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function(){\n        config = tywx.config != null?tywx.config : config;\n    },\n\n    update: function(delayTime){\n        if(tywx.publicwx){\n           this._updateSubDomainCanvas();   \n        }\n    },\n\n    /*\n        调用: 界面加载完成后的回调。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad:function(){\n        if(tywx.curgotophbtype == 1){\n            if(tywx.publicwx){\n                wx.postMessage({\n                    method: 1,\n                    MAIN_MENU_NUM: \"x1\",\n                });\n            }\n        }else{\n            window.wx.postMessage({\n                method: 2,\n                MAIN_MENU_NUM: \"x1\",\n                shareTicket:  tywx.groupdata.shareTickets[0]\n          });\n        }\n       \n        \n       \n    },\n\n  \n\n    /*\n        调用: 点击返回按钮\n        功能: 隐藏排行榜\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n   hidePhbView: function(){\n       cc.director.loadScene(\"phbview\", this.loadFinishCallBack);\n        \n   },\n\n    /*\n        调用: 进入游戏的时候调用\n        功能: 清除当前界面占用的内存\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    loadFinishCallBack:function(){\n         if(this.node){\n            this.node.destroy();\n         }\n    },\n   \n  \n\n});\n\nmodule.exports = UIPhbView;"]}