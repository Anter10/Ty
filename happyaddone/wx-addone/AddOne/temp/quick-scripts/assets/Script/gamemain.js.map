{"version":3,"sources":["gamemain.js"],"names":["config","require","gezi","mask","gamemain","cc","Class","extends","Component","properties","scoreLabel","default","type","Label","showalertmsg","num","allpngs","Prefab","celltile","stars","Node","stopView","tupojilu","fuHuo","stopV","stopButton","pjlView","openboxview","itemview","Nodef","yyview","goodEft","coolEft","awesEft","unbeliveEft","chuiziEft","loseScoreLabel","GameOver","loseShareButtton","pjlShareButtton","musicBtn","itemhelpview","loseRestartGameBtn","helpview","pjlScoreLabel","effect","djitem","gameOut","Sprite","friendIcon","stopViewBack","helpViewPre","mflqBtn","bg","restart","Button","score","point","maxphy_value","g_mask_samecnt","g_clickid","gamestate","gamestatetime","maxnum","lianjiNumber","g_gezi","g_mask","allitems","curtimeawaypre","isShowFIcon","recoverNumber","hadShowPjl","allOpenItems","produceItem","isRestartGame","showboxNumber","prepoint","allAudio","AudioSource","hadClickScreen","curUsingItemData","isUsingItem","refreshingMask","hasProduceNewScore","onLoad","getComponent","setShareConfig","tywx","ado","Constants","ShareConfig","POJILU_SHARE","string","self","i","geziNumber","node","cellt","instantiate","script","setId","setClickCall","data","palyAudioByIndex","SOUNDS","POPUPCLOSE","touchEndCallback","push","parent","position","p","tmp_g","getAllgz","tmp_m","getAllmask","publicwx","tex","Texture2D","window","sharedCanvas","width","height","prerandomnumber","initgame","on","event","showItem","LOGE","JSON","stringify","fhBtnShow","fhbut","fhcall","recoverGame","hycall","fhsbCallBack","errorcall","setShareGroupCall","setSuccessCall","setErrorCall","RECOVER_GAME_SHARE","Timer","setTimer","showMinFriend","macro","REPEAT_FOREVER","hideMinFriend","gameState","waitclick","dealPlayerNoClickScreen","hideView","active","dealPlayerClickScreen","mflq","VCTR","SystemInfo","version","auditing","setReactCall","lingQuBox","FREE_GIFT_SHARE","firstShowHelpView","console","log","setWaitClickState","lianjiEffects","sgood","dealLianJiNumber","pjlCallBack","allcellids","resetAllMask","checkmaskbyid","minCanRemoveNumber","length","stopAllActions","delay","delayTime","letUserClickTime","idindex","call","callFunc","cellid","precellid","stopDaijiEff","playDaijiEff","seq","sequence","rep","repeatForever","runAction","ci","showPlayMethod","helpviewpre","destroy","x","y","helpviewscript","setCloseCall","itemIndex","allitem","item","itemsceipt","setData","canupdate","id","showAlert","showOneHpEf","drawPhyPoint","itemhelpscript","showNum","value","showChuiZi","updateItemByData","dealAllItems","xx1Icon","getNumberOfRunningActions","newVec2","convertToWorldSpace","v2","new1Vec2","tmove","moveTo","Math","abs","itmindex","tdata","storeAllItem","addRecoverNumber","maxrnum","checkFriendsScore","showTouchEveryTime","msg","wx","showToast","title","icon","duration","showAlertMSG","ty","pri_pos","rc","move","moveBy","showTouchEffect","touchpos","showStopView","showSubStopView","items","Util","getItemFromLocalStorage","undefined","parse","e","titemIndex","storitem","openitemIndex","topenitem","getData","produceItems","tindex","randomFrom","itemid","itemnum","randomNum","random","box_rate","sub1","add2","chui","lowerValue","upperValue","floor","ctor","getAllPathByitemValue","usingitem","setnum","settoblock","block","effectid","effecttime","setMaxNumber","checkclick","Utils","showWXToast","curaddnum","mpos","useCZClick","maxScoreShow","scale","anim","Animation","finishCallback","stop","tnumber","tid","trow","dis","posx","posy","gezi_pitch","id_keep","id_dest","speed_keep","move_time","adjustdrop","settoblockvalue","getrandomnum","dodrop","animateState","play","wrapMode","WrapMode","Normal","update","dt","tickmove","tickeffect","star","star1","draw","_updateSubDomainCanvas","sc","baseScore","step","actiontime_keep","from","adjustmove","domove","gameOverCallBack","finalDealMask","dealDoMove","dealLianJiLogic","audioIndex","COMBO","playZhEff","refreshbymask","LOGD","bfound","j","playGood","GOOD","cgood","playCool","COOL","bgood","playAwesome","AWESOME","maxgood","playUnbelive","UNBLIEVEABLE","fileName","AudioManager","playSound","animation","showBox","animationState","setItemToLocalStorage","starIndex","show","hide","visibleControllButton","vis","gameover","parseInt","scaleTo","closePjlView","storeScore","needcheck","changenumbymask","reset","checkDirPaths","bj","add","tnum","initGameMaxNum","topid","tmpid","luck","sjs","ttindex","sindex","luck_block","tgl","rate","getPjNumberName","allids","total","gzindex","tcellIndex","pjNumber","backFirstPage","director","loadScene","destroyFinish","postMessage","method","backCall","bpos","rest","isrestart","printMaskMsg","gzIndex","showMSG","openDataContext","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","findata","itemdata","djIndex","dj","name","arr","ran","is_show","logWithColor","restartGame","loseRestartGame","startNewGame"],"mappings":";;;;;;AAAA;;;;;;AAMA;AACA,IAAIA,SAASC,QAAQ,cAAR,CAAb;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,OAAOF,QAAQ,UAAR,CAAX;;AAGA,IAAIG,WAAWC,GAAGC,KAAH,CAAS;AACpBC,aAASF,GAAGG,SADQ;AAEpBC,gBAAY;AACRC,oBAAY;AACRC,qBAAS,IADD;AAERC,kBAAMP,GAAGQ;AAFD,SADJ;AAKRC,sBAAc;AACVH,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ;AAFC,SALN;AASRE,aAAK;AACDJ,qBAAS,EADR;AAEDC,kBAAMP,GAAGQ;AAFR,SATG;AAaRG,iBAAS;AACLL,qBAAS,EADJ;AAELC,kBAAMP,GAAGY;AAFJ,SAbD;AAiBRC,kBAAU;AACNP,qBAAS,IADH;AAENC,kBAAMP,GAAGY;AAFH,SAjBF;AAqBRE,eAAO;AACHR,qBAAS,EADN;AAEHC,kBAAMP,GAAGe;AAFN,SArBC;AAyBRC,kBAAU;AACNV,qBAAS,IADH;AAENC,kBAAMP,GAAGe;AAFH,SAzBF;AA6BRE,kBAAU;AACNX,qBAAS,IADH;AAENC,kBAAMP,GAAGe;AAFH,SA7BF;;AAkCRG,eAAO;AACHZ,qBAAS,IADN;AAEHC,kBAAMP,GAAGe;AAFN,SAlCC;AAsCRI,eAAO;AACHb,qBAAS,IADN;AAEHC,kBAAMP,GAAGe;AAFN,SAtCC;AA0CRK,oBAAY;AACRd,qBAAS,IADD;AAERC,kBAAMP,GAAGe;AAFD,SA1CJ;AA8CRM,iBAAS;AACLf,qBAAS,IADJ;AAELC,kBAAMP,GAAGe;AAFJ,SA9CD;AAkDRO,qBAAa;AACThB,qBAAS,IADA;AAETC,kBAAMP,GAAGe;AAFA,SAlDL;AAsDRQ,kBAAU;AACNjB,qBAAS,IADH;AAENC,kBAAMP,GAAGwB;AAFH,SAtDF;;AA2DRC,gBAAQ;AACJnB,qBAAS,IADL;AAEJC,kBAAMP,GAAGe;AAFL,SA3DA;;AAgERW,iBAAS;AACLpB,qBAAS,IADJ;AAELC,kBAAMP,GAAGe;AAFJ,SAhED;;AAqERY,iBAAS;AACLrB,qBAAS,IADJ;AAELC,kBAAMP,GAAGe;AAFJ,SArED;;AA0ERa,iBAAS;AACLtB,qBAAS,IADJ;AAELC,kBAAMP,GAAGe;AAFJ,SA1ED;;AAgFRc,qBAAa;AACTvB,qBAAS,IADA;AAETC,kBAAMP,GAAGe;AAFA,SAhFL;;AAqFRe,mBAAW;AACPxB,qBAAS,IADF;AAEPC,kBAAMP,GAAGe;AAFF,SArFH;;AA0FRgB,wBAAgB;AACZzB,qBAAS,IADG;AAEZC,kBAAMP,GAAGQ;AAFG,SA1FR;AA8FRwB,kBAAU;AACN1B,qBAAS,IADH;AAENC,kBAAMP,GAAGQ;AAFH,SA9FF;AAkGRyB,0BAAkB;AACd3B,qBAAS,IADK;AAEdC,kBAAMP,GAAGe;AAFK,SAlGV;AAsGRmB,yBAAiB;AACb5B,qBAAS,IADI;AAEbC,kBAAMP,GAAGe;AAFI,SAtGT;AA0GRoB,kBAAU;AACN7B,qBAAS,IADH;AAENC,kBAAMP,GAAGe;AAFH,SA1GF;;AA+GRqB,sBAAc;AACV9B,qBAAS,IADC;AAEVC,kBAAMP,GAAGe;AAFC,SA/GN;;AAqHRsB,4BAAoB;AAChB/B,qBAAS,IADO;AAEhBC,kBAAMP,GAAGe;AAFO,SArHZ;;AA2HRuB,kBAAU;AACNhC,qBAAS,IADH;AAENC,kBAAMP,GAAGe;AAFH,SA3HF;AA+HRwB,uBAAe;AACXjC,qBAAS,IADE;AAEXC,kBAAMP,GAAGQ;AAFE,SA/HP;AAmIRgC,gBAAQ;AACJlC,qBAAS,IADL;AAEJC,kBAAMP,GAAGY;AAFL,SAnIA;AAuIR6B,gBAAQ;AACJnC,qBAAS,IADL;AAEJC,kBAAMP,GAAGY;AAFL,SAvIA;AA2IR8B,iBAAS;AACLpC,qBAAS,IADJ;AAELC,kBAAMP,GAAG2C;AAFJ,SA3ID;AA+IRC,oBAAY;AACRtC,qBAAS,IADD;AAERC,kBAAMP,GAAG2C;AAFD,SA/IJ;AAmJRE,sBAAc;AACVvC,qBAAS,IADC;AAEVC,kBAAMP,GAAG2C;AAFC,SAnJN;AAuJRG,qBAAa;AACTxC,qBAAS,IADA;AAETC,kBAAMP,GAAGY;AAFA,SAvJL;AA2JRmC,iBAAS;AACLzC,qBAAS,IADJ;AAELC,kBAAMP,GAAGe;AAFJ,SA3JD;;AAiKR;AACAiC,YAAIhD,GAAGe,IAlKC;AAmKR;AACAkC,iBAASjD,GAAGkD,MApKJ;AAqKR;AACAC,eAAO,CAtKC;AAuKR;AACAC,eAAOzD,OAAO0D,YAxKN;AAyKR;AACAC,wBAAgB,CA1KR;AA2KR;AACAC,mBAAW,CAAC,CA5KJ;AA6KR;AACAC,mBAAW,MA9KH;AA+KR;AACAC,uBAAe,CAhLP;AAiLR;AACAC,gBAAQ,CAlLA;AAmLR;AACAC,sBAAc,CApLN;AAqLR;AACAC,gBAAQ,EAtLA;AAuLR;AACAC,gBAAQ,EAxLA;AAyLR;AACAC,kBAAU,EA1LF;AA2LR;AACAC,wBAAgB,EA5LR;AA6LR;AACAC,qBAAa,KA9LL;AA+LR;AACAC,uBAAe,CAhMP;AAiMR;AACAC,oBAAY,KAlMJ;AAmMR;AACAC,sBAAc,EApMN;AAqMR;AACAC,qBAAa,IAtML;AAuMR;AACAC,uBAAe,KAxMP;AAyMR;AACAC,uBAAe,CA1MP;AA2MR;AACAC,kBAAU,CA5MF;AA6MR;AACAC,kBAAU;AACNlE,qBAAS,EADH;AAENC,kBAAMP,GAAGyE;AAFH,SA9MF;AAkNR;AACAC,wBAAgB,KAnNR;AAoNR;AACAC,0BAAkB,IArNV;AAsNR;AACAC,qBAAa,KAvNL;AAwNR;AACAC,wBAAgB,KAzNR;AA0NR;AACAC,4BAAoB;AA3NZ,KAFQ;;AAgOpB;;;;;;;;;;;AAWAC,YAAQ,kBAAY;AAChB,aAAK7C,eAAL,CAAqB8C,YAArB,CAAkC,aAAlC,EAAiDC,cAAjD,CAAgEC,KAAKC,GAAL,CAASC,SAAT,CAAmBC,WAAnB,CAA+BC,YAA/F;AACA;AACA,aAAKjF,UAAL,CAAgBkF,MAAhB,GAAyB,KAAKpC,KAA9B;AACA,YAAIqC,OAAO,IAAX;AACA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,gBAAIE,OAAO,IAAI3F,GAAGe,IAAP,CAAY,MAAZ,CAAX;AACA,gBAAI6E,QAAQ5F,GAAG6F,WAAH,CAAe,KAAKhF,QAApB,CAAZ;AACA,gBAAIiF,SAASF,MAAMZ,YAAN,CAAmB,UAAnB,CAAb;AACAc,mBAAOC,KAAP,CAAaN,CAAb;AACAK,mBAAOE,YAAP,CAAoB,UAAUC,IAAV,EAAgBpF,QAAhB,EAA0B;AAC1C2E,qBAAKU,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAcC,UAApC;AACAZ,qBAAKa,gBAAL,CAAsBJ,IAAtB,EAA4BpF,QAA5B;AACH,aAHD;AAIA,iBAAKF,OAAL,CAAa2F,IAAb,CAAkBV,KAAlB;AACAA,kBAAMW,MAAN,GAAe,KAAK9E,MAApB;AACAmE,kBAAMY,QAAN,GAAiBxG,GAAGyG,CAAH,CAAK,CAAL,EAAQ,CAAR,CAAjB;AACAd,iBAAKa,QAAL,GAAgBxG,GAAGyG,CAAH,CAAK,CAAL,EAAQ,CAAR,CAAhB;AACAd,iBAAKY,MAAL,GAAc,KAAKZ,IAAnB;AACA,gBAAIe,QAAQ,IAAI7G,IAAJ,CAAS4F,CAAT,EAAY,IAAZ,CAAZ;AACA,iBAAKkB,QAAL,GAAgBL,IAAhB,CAAqBI,KAArB;AACA,gBAAIE,QAAQ,IAAI9G,IAAJ,CAAS2F,CAAT,EAAY,IAAZ,CAAZ;AACA,iBAAKoB,UAAL,GAAkBP,IAAlB,CAAuBM,KAAvB;AACH;AACD,YAAI1B,KAAK4B,QAAT,EAAmB;AACf,iBAAKC,GAAL,GAAW,IAAI/G,GAAGgH,SAAP,EAAX;AACAC,mBAAOC,YAAP,CAAoBC,KAApB,GAA4B,GAA5B;AACAF,mBAAOC,YAAP,CAAoBE,MAApB,GAA6B,IAA7B;AACH;AACD,YAAI5B,OAAO,IAAX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK6B,eAAL,GAAuB,CAAvB;AACA;AACA,aAAKC,QAAL;;AAEA,aAAKjD,aAAL,GAAqB,KAArB;AACA;AACA,aAAKxB,YAAL,CAAkB8C,IAAlB,CAAuB4B,EAAvB,CAA0B,YAA1B,EAAwC,UAAUC,KAAV,EAAiB;AACrD,mBAAO,IAAP;AACH,SAFD;;AAIA,aAAK9E,OAAL,CAAaiD,IAAb,CAAkB4B,EAAlB,CAAqB,YAArB,EAAmC,UAAUC,KAAV,EAAiB;AAChD,mBAAO,IAAP;AACH,SAFD;;AAMA;AACA;AACA;AACA;AACA,aAAKC,QAAL;AACA;AACAvC,aAAKwC,IAAL,CAAU,UAAUC,KAAKC,SAAL,CAAejI,MAAf,CAApB;AACA,aAAKkI,SAAL;AACA,YAAIC,QAAQ,KAAK5G,KAAL,CAAW8D,YAAX,CAAwB,aAAxB,CAAZ;AACA,YAAI8C,KAAJ,EAAW;AACP,gBAAIC,SAAS,SAATA,MAAS,GAAY;AACrBvC,qBAAKwC,WAAL;AACH,aAFD;AAGA,gBAAIC,SAAS,SAATA,MAAS,GAAY;AACrBzC,qBAAK0C,YAAL;AACH,aAFD;;AAIA,gBAAIC,YAAY,SAAZA,SAAY,GAAY;AACxB3C,qBAAK0C,YAAL;AACH,aAFD;AAGA;AACAJ,kBAAMM,iBAAN,CAAwBL,MAAxB;AACA;AACAD,kBAAMO,cAAN,CAAqBJ,MAArB;AACA;AACAH,kBAAMQ,YAAN,CAAmBL,MAAnB;AACAH,kBAAM7C,cAAN,CAAqBC,KAAKC,GAAL,CAASC,SAAT,CAAmBC,WAAnB,CAA+BkD,kBAApD;AACH;AACD;AACArD,aAAKsD,KAAL,CAAWC,QAAX,CAAoBjD,IAApB,EAA0B,YAAY;AAClCA,iBAAKkD,aAAL;AACH,SAFD,EAEG,EAFH,EAEO1I,GAAG2I,KAAH,CAASC,cAFhB,EAEgC,CAFhC;;AAIA;AACA1D,aAAKsD,KAAL,CAAWC,QAAX,CAAoBjD,IAApB,EAA0B,YAAY;AAClCA,iBAAKqD,aAAL;AACH,SAFD,EAEG,EAFH,EAEO7I,GAAG2I,KAAH,CAASC,cAFhB,EAEgC,CAFhC;;AAIA;AACA1D,aAAKsD,KAAL,CAAWC,QAAX,CAAoBjD,IAApB,EAA0B,YAAY;AAClC,gBAAI,KAAKhC,SAAL,IAAkB7D,OAAOmJ,SAAP,CAAiBC,SAAvC,EAAkD;AAC9CvD,qBAAKwD,uBAAL;AACA,qBAAKtE,cAAL,GAAsB,KAAtB;AACH;AACJ,SALD,EAKG,CALH,EAKM1E,GAAG2I,KAAH,CAASC,cALf,EAK+B,EAL/B;;AAOA,aAAKjD,IAAL,CAAU4B,EAAV,CAAa,UAAb,EAAyB,UAAUC,KAAV,EAAiB;AACtChC,iBAAKpD,YAAL,CAAkB4C,YAAlB,CAA+B,UAA/B,EAA2CiE,QAA3C;AACAzD,iBAAKb,gBAAL,GAAwB,IAAxB;AACAa,iBAAKpD,YAAL,CAAkB8G,MAAlB,GAA2B,KAA3B;AACA1D,iBAAK2D,qBAAL;AACA3D,iBAAKd,cAAL,GAAsB,IAAtB;AACH,SAND;;AAQA;AACA,YAAI0E,OAAO,KAAKrG,OAAL,CAAaiC,YAAb,CAA0B,aAA1B,CAAX;AACA,YAAIrF,OAAO0J,IAAP,CAAY,MAAMnE,KAAKoE,UAAL,CAAgBC,OAAlC,KAA8C5J,OAAO0J,IAAP,CAAY,MAAMnE,KAAKoE,UAAL,CAAgBC,OAAlC,EAA2CC,QAA3C,IAAuD,IAAzG,EAA+G;AAC3GJ,iBAAKK,YAAL,CAAkB,IAAlB;AACH,SAFD,MAEO;AACHL,iBAAKK,YAAL,CAAkB,KAAlB;AACH;AACDL,aAAKf,cAAL,CAAoB,YAAY;AAC5B7C,iBAAKkE,SAAL;AACH,SAFD;AAGAN,aAAKhB,iBAAL,CAAuB,YAAY;AAC/B5C,iBAAKkE,SAAL;AACH,SAFD;AAGAN,aAAKnE,cAAL,CAAoBC,KAAKC,GAAL,CAASC,SAAT,CAAmBC,WAAnB,CAA+BsE,eAAnD;AACA,aAAKC,iBAAL;AACApE,aAAK5C,UAAL,CAAgB+C,IAAhB,CAAqBuD,MAArB,GAA8B,IAA9B;AACH,KAxWmB;;AA0WpBrB,eAAW,qBAAY;AACnBgC,gBAAQC,GAAR,CAAY,cAAc5E,KAAKoE,UAAL,CAAgBC,OAA9B,GAAwC5B,KAAKC,SAAL,CAAejI,MAAf,CAApD;AACA,YAAIA,OAAO0J,IAAP,CAAY,MAAMnE,KAAKoE,UAAL,CAAgBC,OAAlC,KAA8C5J,OAAO0J,IAAP,CAAY,MAAMnE,KAAKoE,UAAL,CAAgBC,OAAlC,EAA2CC,QAA3C,IAAuD,IAAzG,EAA+G;AAC3G,iBAAKtI,KAAL,CAAWgI,MAAX,GAAoB,KAApB;AACA,iBAAK7G,kBAAL,CAAwB6G,MAAxB,GAAiC,IAAjC;AACH,SAHD,MAGO;AACH,iBAAKhI,KAAL,CAAWgI,MAAX,GAAoB,IAApB;AACA;AACH;AACJ,KAnXmB;;AAqXpB;;;;AAIAa,uBAAmB,6BAAY;AAC3B;AACA,YAAI,KAAKvG,SAAL,IAAkB7D,OAAOmJ,SAAP,CAAiBC,SAAvC,EAAkD;AAC9C,iBAAKvF,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBC,SAAlC;AACA,gBAAI,KAAKpF,YAAL,IAAqBhE,OAAOqK,aAAP,CAAqBC,KAA1C,IAAmD,KAAK7G,KAAL,GAAa,CAApE,EAAuE;AACnE,qBAAK8G,gBAAL;AACH,aAFD,MAEO;AACH,oBAAI,KAAKhG,UAAL,IAAmB,KAAnB,IAA4B,KAAKd,KAAL,GAAa,CAAzC,IAA8C,KAAK0B,kBAAL,IAA2B,IAA7E,EAAmF;AAC/E,yBAAKA,kBAAL,GAA0B,KAA1B;AACA,yBAAKqF,WAAL;AACH;AACJ;AACJ;AAEJ,KAvYmB;;AAyYpB;AACAnB,6BAAyB,mCAAY;AACjC,YAAI,KAAKtE,cAAL,IAAuB,KAA3B,EAAkC;AAC9B,gBAAIc,OAAO,IAAX;AACA,iBAAKd,cAAL,GAAsB,IAAtB;AACA;AACA,gBAAI0F,aAAa,EAAjB;AACA,iBAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,qBAAK4E,YAAL;AACA,qBAAKxD,UAAL,GAAkBpB,CAAlB,EAAqB/E,GAArB,GAA2B,KAAKmG,UAAL,GAAkBpB,CAAlB,EAAqB/E,GAArB,GAA2B,CAAtD;AACA,qBAAK4J,aAAL,CAAmB7E,CAAnB,EAAsB,CAAtB;AACA,oBAAI,KAAKnC,cAAL,IAAuB3D,OAAO4K,kBAAlC,EAAsD;AAClDH,+BAAWA,WAAWI,MAAtB,IAAgC/E,CAAhC;AACH;AACJ;;AAED;AACA;AACA;AACA;AACA;AACA,gBAAI2E,WAAWI,MAAX,GAAoB,CAAxB,EAA2B;AACvBhF,qBAAKG,IAAL,CAAU8E,cAAV;AACA,oBAAIC,QAAQ1K,GAAG2K,SAAH,CAAahL,OAAOiL,gBAApB,CAAZ;AACA,oBAAIC,UAAU,CAAd;AACA,oBAAIC,OAAO9K,GAAG+K,QAAH,CAAY,YAAY;AAC/B,wBAAIC,SAASZ,WAAWS,OAAX,CAAb;AACA3F,yBAAKwC,IAAL,CAAUmD,UAAU,eAAV,GAA4BG,MAAtC;AACA,wBAAIH,UAAU,CAAd,EAAiB;AACb,4BAAII,YAAYb,WAAWS,UAAU,CAArB,CAAhB;AACArF,6BAAK7E,OAAL,CAAasK,SAAb,EAAwBjG,YAAxB,CAAqC,UAArC,EAAiDkG,YAAjD;AACH;;AAED1F,yBAAK7E,OAAL,CAAaqK,MAAb,EAAqBhG,YAArB,CAAkC,UAAlC,EAA8CmG,YAA9C;AACAN,8BAAUA,UAAU,CAApB;AACA,wBAAIA,WAAWT,WAAWI,MAA1B,EAAkC;AAC9B,4BAAIS,YAAYb,WAAWS,UAAU,CAArB,CAAhB;AACArF,6BAAK7E,OAAL,CAAasK,SAAb,EAAwBjG,YAAxB,CAAqC,UAArC,EAAiDkG,YAAjD;AACAL,kCAAU,CAAV;AACH;AACJ,iBAfU,CAAX;AAgBA,oBAAIO,MAAMpL,GAAGqL,QAAH,CAAYP,IAAZ,EAAkBJ,KAAlB,CAAV;AACA,oBAAIY,MAAMtL,GAAGuL,aAAH,CAAiBH,GAAjB,CAAV;AACA5F,qBAAKG,IAAL,CAAU6F,SAAV,CAAoBF,GAApB;AACH;AAGJ;AACJ,KAzbmB;;AA4bpB;AACAnC,2BAAuB,iCAAY;AAC/B;AACA,aAAKxD,IAAL,CAAU8E,cAAV;AACA,aAAK,IAAIgB,KAAK,CAAd,EAAiBA,KAAK9L,OAAO+F,UAA7B,EAAyC+F,IAAzC,EAA+C;AAC3C,gBAAI,KAAK9K,OAAL,CAAa8K,EAAb,KAAoB,IAAxB,EAA8B;AAC1B,qBAAK9K,OAAL,CAAa8K,EAAb,EAAiBzG,YAAjB,CAA8B,UAA9B,EAA0CkG,YAA1C;AACH;AACJ;AACD;AACH,KAtcmB;;AA2cpB;;;;;;;;;;;;AAYAQ,oBAAgB,0BAAY;AACxB,YAAI,KAAKC,WAAL,IAAoB,IAAxB,EAA8B;AAC1B,iBAAKA,WAAL,CAAiBC,OAAjB;AACA,iBAAKD,WAAL,GAAmB,IAAnB;AACH;AACD;AACA,aAAKA,WAAL,GAAmB3L,GAAG6F,WAAH,CAAe,KAAK/C,WAApB,CAAnB;AACA,aAAK6I,WAAL,CAAiBE,CAAjB,GAAqB,GAArB;AACA,aAAKF,WAAL,CAAiBG,CAAjB,GAAqB,CAArB;AACA,aAAKC,cAAL,GAAsB,KAAKJ,WAAL,CAAiB3G,YAAjB,CAA8B,UAA9B,CAAtB;AACA,YAAIQ,OAAO,IAAX;AACA;AACA,aAAKuG,cAAL,CAAoBC,YAApB,CAAiC,YAAY;AACzC;AACAxG,iBAAKkG,cAAL;AACH,SAHD;AAIA,aAAKC,WAAL,CAAiBpF,MAAjB,GAA0B,KAAKjE,QAA/B;AACA,aAAKA,QAAL,CAAc4G,MAAd,GAAuB,CAAC,KAAK5G,QAAL,CAAc4G,MAAf,GAAwB,IAAxB,GAA+B,KAAtD;AACH,KAzemB;;AA2epB;AACAhB,kBAAc,wBAAY;AACtB;AACA;AACA;AACH,KAhfmB;;AAkfpB;AACAT,cAAU,oBAAY;AAClBvC,aAAKwC,IAAL,CAAU,OAAV;AACA,aAAK,IAAIuE,YAAY,CAArB,EAAwBA,YAAYtM,OAAOuM,OAAP,CAAe1B,MAAnD,EAA2DyB,WAA3D,EAAwE;AACpE,gBAAIE,OAAOnM,GAAG6F,WAAH,CAAe,KAAKpD,MAApB,CAAX;AACA,gBAAI2J,aAAaD,KAAKnH,YAAL,CAAkB,QAAlB,CAAjB;AACAoH,uBAAWC,OAAX,CAAmB1M,OAAOuM,OAAP,CAAeD,SAAf,CAAnB;AACAE,iBAAK5F,MAAL,GAAc,KAAKhF,QAAnB;AACA,gBAAIiE,OAAO,IAAX;AACA4G,uBAAWpG,YAAX,CAAwB,UAAUC,IAAV,EAAgBkG,IAAhB,EAAsB;AAC1C;AACA,oBAAI3G,KAAKhC,SAAL,IAAkB7D,OAAOmJ,SAAP,CAAiBC,SAAvC,EAAkD;AAC9C;AACA,wBAAI9C,KAAKvF,GAAL,GAAW,CAAf,EAAkB;AACd,4BAAI4L,YAAY,IAAhB;AACA,4BAAIrG,KAAKsG,EAAL,IAAW,CAAf,EAAkB;AACd,gCAAI/G,KAAKpC,KAAL,IAAczD,OAAO0D,YAAzB,EAAuC;AACnCmC,qCAAKgH,SAAL,CAAe,UAAf;AACAF,4CAAY,KAAZ;AACH,6BAHD,MAGO;AACH9G,qCAAKwC,WAAL;AACH;AACJ,yBAPD,MAOO,IAAI/B,KAAKsG,EAAL,IAAW,CAAf,EAAkB;AAAE;AACvBrH,iCAAKwC,IAAL,CAAU,WAAWlC,KAAKpC,KAAhB,GAAwB,GAAxB,GAA8BzD,OAAO0D,YAA/C;AACA,gCAAImC,KAAKpC,KAAL,GAAazD,OAAO0D,YAAxB,EAAsC;AAClCmC,qCAAKiH,WAAL,CAAiBN,IAAjB;AACA3G,qCAAKjB,QAAL,GAAgBiB,KAAKpC,KAArB;AACAoC,qCAAKpC,KAAL,GAAaoC,KAAKpC,KAAL,GAAa,CAA1B;AACAoC,qCAAKkH,YAAL;AACAJ,4CAAY,IAAZ;AACH,6BAND,MAMO;AACHA,4CAAY,KAAZ;AACA9G,qCAAKgH,SAAL,CAAe,MAAf;AACH;AACJ,yBAZM,MAYA;AACH;AACAhH,iCAAKpD,YAAL,CAAkB8G,MAAlB,GAA2B,IAA3B;AACA,gCAAIyD,iBAAiBnH,KAAKpD,YAAL,CAAkB4C,YAAlB,CAA+B,UAA/B,CAArB;AACA,gCAAIiB,KAAKsG,EAAL,IAAW,CAAX,IAAgBtG,KAAKsG,EAAL,IAAW,CAA/B,EAAkC;AAC9B/G,qCAAKb,gBAAL,GAAwBsB,IAAxB;AACA0G,+CAAeC,OAAf,CAAuB3G,KAAK4G,KAA5B;AACH,6BAHD,MAGO,IAAI5G,KAAKsG,EAAL,IAAW,CAAf,EAAkB;AACrB/G,qCAAKb,gBAAL,GAAwBsB,IAAxB;AACA0G,+CAAeG,UAAf;AACH;AACDR,wCAAY,KAAZ;AACH;AACD;AACA,4BAAIA,aAAa,IAAjB,EAAuB;AACnBrG,iCAAKvF,GAAL,GAAWuF,KAAKvF,GAAL,GAAW,CAAtB;AACA,gCAAIuF,KAAKvF,GAAL,GAAW,CAAf,EAAkB;AACduF,qCAAKvF,GAAL,GAAW,CAAX;AACH;AACD8E,iCAAKuH,gBAAL,CAAsB9G,IAAtB;AACH;AACJ,qBA1CD,MA0CO;AACHT,6BAAKgH,SAAL,CAAe,SAAf;AACH;AACJ;AACJ,aAlDD;AAmDAL,iBAAKN,CAAL,GAAS,MAAOI,YAAY,GAA5B;AACAE,iBAAKL,CAAL,GAAS,CAAC,EAAV;AACA,iBAAK3H,YAAL,CAAkBmC,IAAlB,CAAuB6F,IAAvB;AACH;AACD;AACA,aAAKa,YAAL;AACH,KApjBmB;;AAujBpB;AACAP,iBAAa,qBAAUN,IAAV,EAAgB;AACzB,YAAI,CAAC,KAAK/I,KAAL,IAAc,CAAd,IAAmB,KAAKA,KAAL,IAAc,CAAlC,KAAwC+I,KAAKc,OAAL,CAAatH,IAAb,CAAkBuH,yBAAlB,MAAiD,CAA7F,EAAgG;AAC5F,gBAAIvH,OAAO,KAAK7E,KAAL,CAAW,KAAKsC,KAAhB,CAAX;AACA,gBAAI+J,UAAUxH,KAAKyH,mBAAL,CAAyBpN,GAAGqN,EAAH,CAAM1H,KAAKkG,CAAX,EAAclG,KAAKmG,CAAnB,CAAzB,CAAd;AACA,gBAAIwB,WAAWnB,KAAKc,OAAL,CAAatH,IAAb,CAAkByH,mBAAlB,CAAsCpN,GAAGqN,EAAH,CAAMlB,KAAKc,OAAL,CAAatH,IAAb,CAAkBkG,CAAxB,EAA2BM,KAAKc,OAAL,CAAatH,IAAb,CAAkBmG,CAA7C,CAAtC,CAAf;AACA,gBAAIyB,QAAQvN,GAAGwN,MAAH,CAAU,GAAV,EAAexN,GAAGyG,CAAH,CAAK0G,QAAQtB,CAAR,GAAYyB,SAASzB,CAArB,GAAyBlG,KAAKkG,CAA9B,GAAkC,EAAvC,EAA2CsB,QAAQrB,CAAR,GAAY2B,KAAKC,GAAL,CAASJ,SAASxB,CAAlB,CAAZ,GAAmCnG,KAAKmG,CAAnF,CAAf,CAAZ;AACA,gBAAIV,MAAMpL,GAAGqL,QAAH,CAAYkC,KAAZ,EAAmBvN,GAAG+K,QAAH,CAAY,YAAY;AACjDoB,qBAAKc,OAAL,CAAatH,IAAb,CAAkBkG,CAAlB,GAAsB,CAAtB;AACAM,qBAAKc,OAAL,CAAatH,IAAb,CAAkBmG,CAAlB,GAAsB,CAAtB;AACH,aAH4B,CAAnB,CAAV;AAIAK,iBAAKc,OAAL,CAAatH,IAAb,CAAkB6F,SAAlB,CAA4BJ,GAA5B;AACH;AAEJ,KArkBmB;;AAukBpB;AACA2B,sBAAkB,0BAAU9G,IAAV,EAAgB;AAC9B,YAAIA,QAAQ,IAAZ,EAAkB;AACdf,iBAAKwC,IAAL,CAAU,eAAeC,KAAKC,SAAL,CAAe3B,IAAf,CAAzB;AACA,iBAAK,IAAI0H,WAAW,CAApB,EAAuBA,WAAW,KAAK7J,QAAL,CAAc0G,MAAhD,EAAwDmD,UAAxD,EAAoE;AAChE,oBAAIC,QAAQ,KAAK9J,QAAL,CAAc6J,QAAd,CAAZ;AACA,oBAAIC,MAAMrB,EAAN,IAAYtG,KAAKsG,EAArB,EAAyB;AACrBqB,0BAAMlN,GAAN,GAAYuF,KAAKvF,GAAjB;AACA,yBAAKoD,QAAL,CAAc6J,QAAd,IAA0BC,KAA1B;AACA,yBAAKC,YAAL;AACA,yBAAKb,YAAL,CAAkB,KAAKlJ,QAAvB;AACA;AACH;AACJ;AACJ;AACJ,KAtlBmB;AAulBpB;AACAgK,sBAAkB,4BAAY;AAC1B,aAAK7J,aAAL,GAAqB,KAAKA,aAAL,GAAqB,CAA1C;AACA;AACA,YAAI,KAAKA,aAAL,IAAsBtE,OAAOoO,OAAjC,EAA0C;AACtC,iBAAK7M,KAAL,CAAWgI,MAAX,GAAoB,KAApB;AACH,SAFD,MAEO;AACH,iBAAKrB,SAAL;AACH;AACJ,KAhmBmB;;AAkmBpB;AACAmG,uBAAmB,6BAAY,CAE9B,CArmBmB;;AAumBpB;;;;;;;;;;;AAWAC,wBAAoB,8BAAY,CAE/B,CApnBmB;;AAsnBpBzB,eAAW,mBAAU0B,GAAV,EAAe;AACtBC,WAAGC,SAAH,CAAa;AACTC,mBAAOH,GADE;AAETI,kBAAM,SAFG;AAGTC,sBAAU;AAHD,SAAb;AAMH,KA7nBmB;AA8nBpBC,kBAAc,sBAAUN,GAAV,EAAe;AACzB,YAAIA,QAAQ,IAAR,IAAgB,KAAKzN,YAAL,CAAkBkF,IAAlB,CAAuBuH,yBAAvB,OAAuD,CAA3E,EAA8E;AAC1E,iBAAKzM,YAAL,CAAkBkF,IAAlB,CAAuB8E,cAAvB;AACA,gBAAIjF,OAAO,IAAX;AACA,iBAAK/E,YAAL,CAAkBkF,IAAlB,CAAuBuD,MAAvB,GAAgC,IAAhC;AACA,iBAAKzI,YAAL,CAAkB8E,MAAlB,GAA2B2I,GAA3B;AACA,gBAAIO,KAAKjJ,KAAK/E,YAAL,CAAkBkF,IAAlB,CAAuBmG,CAAhC;AACA,gBAAI4C,UAAU,KAAKjO,YAAL,CAAkBkF,IAAlB,CAAuBa,QAArC;AACA,gBAAImI,KAAK,SAALA,EAAK,GAAY;AACjBnJ,qBAAK/E,YAAL,CAAkBkF,IAAlB,CAAuBuD,MAAvB,GAAgC,KAAhC;AACA1D,qBAAK/E,YAAL,CAAkBkF,IAAlB,CAAuBmG,CAAvB,GAA2B2C,KAAK,GAAhC;AACA;AACAjJ,qBAAK/E,YAAL,CAAkBkF,IAAlB,CAAuB8E,cAAvB;AACAjF,qBAAK/E,YAAL,CAAkBkF,IAAlB,CAAuBa,QAAvB,GAAkCkI,OAAlC;AACH,aAND;AAOA,gBAAIE,OAAO5O,GAAG6O,MAAH,CAAU,GAAV,EAAe7O,GAAGyG,CAAH,CAAK,CAAL,EAAQ,GAAR,CAAf,CAAX;;AAEA,gBAAIqE,OAAO9K,GAAG+K,QAAH,CAAY4D,EAAZ,CAAX;AACA,gBAAIvD,MAAMpL,GAAGqL,QAAH,CAAYuD,IAAZ,EAAkB9D,IAAlB,CAAV;AACA,iBAAKrK,YAAL,CAAkBkF,IAAlB,CAAuB6F,SAAvB,CAAiCJ,GAAjC;AACH;AACD;AACH,KAppBmB;;AAupBpB;;;;;;;;;;;AAWA0D,qBAAiB,yBAAUC,QAAV,EAAoB,CAEpC,CApqBmB;;AAsqBpB;;;;;;;;;;;AAWAC,kBAAc,wBAAY;AACtB,aAAKhO,QAAL,CAAckI,MAAd,GAAuB,CAAC,KAAKlI,QAAL,CAAckI,MAAf,GAAwB,IAAxB,GAA+B,KAAtD;AACA,YAAI,KAAKlI,QAAL,CAAckI,MAAd,IAAwB,KAA5B,EAAmC;AAC/B,iBAAK/H,KAAL,CAAW+H,MAAX,GAAoB,KAApB;AACA,iBAAK7H,OAAL,CAAa6H,MAAb,GAAsB,KAAtB;AACA,iBAAK5H,WAAL,CAAiB4H,MAAjB,GAA0B,KAA1B;AACH;AACJ,KAxrBmB;;AA0rBpB;;;;;;;;;;;AAWA+F,qBAAiB,2BAAY;AACzB,aAAKjO,QAAL,CAAckI,MAAd,GAAuB,CAAC,KAAKlI,QAAL,CAAckI,MAAf,GAAwB,IAAxB,GAA+B,KAAtD;AACA,aAAK/H,KAAL,CAAW+H,MAAX,GAAoB,CAAC,KAAK/H,KAAL,CAAW+H,MAAZ,GAAqB,IAArB,GAA4B,KAAhD;AACH,KAxsBmB;;AA2sBpB;;;;;;;;;;;AAWA8D,kBAAc,sBAAUd,OAAV,EAAmB;AAC7B;AACA,YAAIgD,QAAQhK,KAAKiK,IAAL,CAAUC,uBAAV,CAAkC,UAAlC,EAA8C,EAA9C,CAAZ;AACAlK,aAAKwC,IAAL,CAAU,eAAewH,KAAzB;AACA;AACA,YAAIA,SAAS,IAAT,IAAiBA,SAASG,SAA1B,IAAuCH,SAAS,EAApD,EAAwD;AACpD,gBAAI;AACA,oBAAIhD,OAAJ,EAAa;AACT,yBAAKpI,QAAL,GAAgBoI,OAAhB;AACH,iBAFD,MAEO;AACH,yBAAKpI,QAAL,GAAgB6D,KAAK2H,KAAL,CAAWJ,KAAX,CAAhB;AACH;AAEJ,aAPD,CAOE,OAAOK,CAAP,EAAU;AACR,qBAAKzL,QAAL,GAAgB,KAAKA,QAArB;AACH;AACD,iBAAK,IAAI0L,aAAa,CAAtB,EAAyBA,aAAa,KAAK1L,QAAL,CAAc0G,MAApD,EAA4DgF,YAA5D,EAA0E;AACtE,oBAAIC,WAAW,KAAK3L,QAAL,CAAc0L,UAAd,CAAf;AACAtK,qBAAKwC,IAAL,CAAU8H,aAAa,SAAb,GAAyB7H,KAAKC,SAAL,CAAesH,KAAf,CAAnC;AACA,qBAAK,IAAIQ,gBAAgB,CAAzB,EAA4BA,gBAAgB,KAAKvL,YAAL,CAAkBqG,MAA9D,EAAsEkF,eAAtE,EAAuF;AACnF,wBAAIC,YAAY,KAAKxL,YAAL,CAAkBuL,aAAlB,EAAiC1K,YAAjC,CAA8C,QAA9C,CAAhB;AACA,wBAAI4I,QAAQ+B,UAAUC,OAAV,EAAZ;AACA,wBAAIhC,MAAMrB,EAAN,IAAYkD,SAASlD,EAAzB,EAA6B;AACzBqB,8BAAMlN,GAAN,GAAY+O,SAAS/O,GAArB;AACAiP,kCAAUtD,OAAV,CAAkBuB,KAAlB;AACA;AACH;AACJ;AACJ;AACJ;AACJ,KApvBmB;;AAsvBpB;;;;;;;;;;;AAWAiC,kBAAc,sBAAUnM,MAAV,EAAkB;AAC5B;AACA,YAAIoM,SAAS,KAAKC,UAAL,CAAgB,CAAhB,EAAmBpQ,OAAOuM,OAAP,CAAe1B,MAAf,GAAwB,CAA3C,CAAb;AACA,YAAIwF,SAASrQ,OAAOuM,OAAP,CAAe4D,MAAf,EAAuBvD,EAApC;AACA;;AAEA,YAAI0D,UAAU,CAAd;AACA,YAAIC,YAAYzC,KAAK0C,MAAL,EAAhB;AACA,YAAID,aAAa,IAAIvQ,OAAOyQ,QAAP,CAAgBC,IAArC,EAA2C;AACvCL,qBAASrQ,OAAOuM,OAAP,CAAe,CAAf,EAAkBK,EAA3B;AACH,SAFD,MAEO,IAAI2D,YAAY,IAAIvQ,OAAOyQ,QAAP,CAAgBC,IAAhC,IAAwCH,aAAa,IAAIvQ,OAAOyQ,QAAP,CAAgBC,IAApB,GAA2B1Q,OAAOyQ,QAAP,CAAgBE,IAApG,EAA0G;AAC7GN,qBAASrQ,OAAOuM,OAAP,CAAe,CAAf,EAAkBK,EAA3B;AACH,SAFM,MAEA,IAAI2D,YAAY,IAAIvQ,OAAOyQ,QAAP,CAAgBC,IAApB,GAA2B1Q,OAAOyQ,QAAP,CAAgBE,IAAvD,IAA+DJ,YAAYvQ,OAAOyQ,QAAP,CAAgBG,IAA/F,EAAqG;AACxGP,qBAASrQ,OAAOuM,OAAP,CAAe,CAAf,EAAkBK,EAA3B;AACH,SAFM,MAEA,IAAI2D,aAAavQ,OAAOyQ,QAAP,CAAgBG,IAAjC,EAAuC;AAC1CP,qBAASrQ,OAAOuM,OAAP,CAAe,CAAf,EAAkBK,EAA3B;AACH;;AAED,aAAKnI,WAAL,GAAmB;AACfmI,gBAAIyD,MADW;AAEftP,iBAAKuP;AAFU,SAAnB;AAIA/K,aAAKwC,IAAL,CAAU,aAAaC,KAAKC,SAAL,CAAe,KAAKxD,WAApB,CAAvB;AAEH,KAzxBmB;;AA2xBpB;;;;;;;;;;;;AAYA2L,gBAAY,oBAAUS,UAAV,EAAsBC,UAAtB,EAAkC;AAC1C,eAAOhD,KAAKiD,KAAL,CAAWjD,KAAK0C,MAAL,MAAiBM,aAAaD,UAAb,GAA0B,CAA3C,IAAgDA,UAA3D,CAAP;AACH,KAzyBmB;;AA8yBpB;;;;;;;;;;;AAWAG,UAAM,gBAAY;AACdzL,aAAKwC,IAAL,CAAU,UAAV;AACA/H,iBAASuF,KAAKvF,MAAL,IAAe,IAAf,GAAsBuF,KAAKvF,MAA3B,GAAoCA,MAA7C;AACH,KA5zBmB;;AA8zBpB;;;;;;;;;;;AAWAgH,cAAU,oBAAY;AAClB,eAAO,KAAK/C,MAAZ;AACH,KA30BmB;;AA60BpB;;;;;;;;;;;AAWAiD,gBAAY,sBAAY;AACpB,eAAO,KAAKhD,MAAZ;AACH,KA11BmB;;AA81BpB;;;;;;;;;;;;AAYA+M,2BAAuB,+BAAU3K,IAAV,EAAgB;;AAEnC,YAAI,KAAKzC,SAAL,IAAkB7D,OAAOmJ,SAAP,CAAiBC,SAAvC,EAAkD;AAC9C,iBAAKvF,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiB+H,SAAlC;AACA;AACA,gBAAIzG,aAAa,EAAjB;AACA,iBAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,qBAAK4E,YAAL;AACA,qBAAKxD,UAAL,GAAkBpB,CAAlB,EAAqB/E,GAArB,GAA2B,KAAKmG,UAAL,GAAkBpB,CAAlB,EAAqB/E,GAArB,GAA2BuF,KAAK4G,KAA3D;AACA,qBAAKvC,aAAL,CAAmB7E,CAAnB,EAAsB,CAAtB;AACA,oBAAI,KAAKnC,cAAL,IAAuB3D,OAAO4K,kBAAlC,EAAsD;AAClDH,+BAAWA,WAAWI,MAAtB,IAAgC/E,CAAhC;AACA;AACH;AAEJ;AACD,iBAAK4E,YAAL;AACA;AACA,gBAAID,WAAWI,MAAX,GAAoB,CAAxB,EAA2B;AACvB,oBAAI/E,KAAI2E,WAAW,CAAX,CAAR;AACA,oBAAI1J,MAAM,KAAKiG,QAAL,GAAgBlB,EAAhB,EAAmB/E,GAAnB,GAAyBuF,KAAK4G,KAAxC;AACA,qBAAKlG,QAAL,GAAgBlB,EAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,qBAAKiG,QAAL,GAAgBlB,EAAhB,EAAmBsL,UAAnB;AACA,qBAAKpK,QAAL,GAAgBlB,EAAhB,EAAmBuL,KAAnB,CAAyBC,QAAzB,GAAoC,CAApC;AACA,qBAAKtK,QAAL,GAAgBlB,EAAhB,EAAmBuL,KAAnB,CAAyBE,UAAzB,GAAsC,GAAtC;AACA,oBAAIxQ,MAAM,KAAKgD,MAAf,EAAuB;AACnB,yBAAKyN,YAAL,CAAkBzQ,GAAlB;AACH;AACD,qBAAK6C,SAAL,GAAiB6G,WAAW,CAAX,CAAjB;AACA,qBAAK5G,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBsI,UAAlC;AACA,uBAAO,IAAP;AACH,aAbD,MAaO;AACH,qBAAK5N,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBsI,UAAlC;AACAlM,qBAAKC,GAAL,CAASkM,KAAT,CAAeC,WAAf,CAA2B,UAA3B;AACA,uBAAO,KAAP;AACH;AACJ;AACD,eAAO,KAAP;AACH,KAh5BmB;;AAm5BpB;;;;;;;;;;;;AAYAjL,sBAAkB,0BAAUZ,CAAV,EAAa5E,QAAb,EAAuB;AACrC,YAAI,KAAK2C,SAAL,IAAkB7D,OAAOmJ,SAAP,CAAiBC,SAAvC,EAAkD;AAC9C7D,iBAAKwC,IAAL,CAAU,kBAAkBC,KAAKC,SAAL,CAAe,KAAKjD,gBAApB,CAA5B;AACA,gBAAI4M,YAAY,CAAhB;AACA,gBAAI3D,QAAQ,KAAKjJ,gBAAjB;AACA,iBAAKA,gBAAL,GAAwB,IAAxB;AACA,gBAAKiJ,SAAS,IAAT,IAAiBA,MAAMrB,EAAN,IAAY,CAA9B,IAAoCqB,SAAS,IAAjD,EAAuD;AACnD,oBAAIA,SAAS,IAAb,EAAmB;AACf2D,gCAAY3D,MAAMf,KAAlB;AACH;AACD;AACA;AACA,oBAAInM,MAAM,KAAKiG,QAAL,GAAgBlB,CAAhB,EAAmB/E,GAAnB,GAAyB6Q,SAAnC;AACA,oBAAI7Q,MAAM,CAAV,EAAa;AACT,yBAAK8L,SAAL,CAAe,SAAf;AACH,iBAFD,MAEO;;AAEH,wBAAIoB,SAAS,IAAb,EAAmB;AACfA,8BAAMlN,GAAN,GAAYkN,MAAMlN,GAAN,GAAY,CAAxB;AACA,4BAAIkN,MAAMlN,GAAN,GAAY,CAAhB,EAAmB;AACfkN,kCAAMlN,GAAN,GAAY,CAAZ;AACH;AACD,6BAAKkE,WAAL,GAAmB,IAAnB;AACA,6BAAKmI,gBAAL,CAAsBa,KAAtB;AACH,qBAPD,MAOO;AACH,6BAAKhJ,WAAL,GAAmB,KAAnB;AACH;AACD,yBAAK+B,QAAL,GAAgBlB,CAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,yBAAKiG,QAAL,GAAgBlB,CAAhB,EAAmBsL,UAAnB;AACA,yBAAKpK,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBC,QAAzB,GAAoC,CAApC;AACA,yBAAKtK,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBE,UAAzB,GAAsC,GAAtC;AACA,wBAAIxQ,MAAM,KAAKgD,MAAf,EAAuB;AACnB,6BAAKyN,YAAL,CAAkBzQ,GAAlB;AACH;AACD;AACA,yBAAK6C,SAAL,GAAiBkC,CAAjB;AACA,yBAAKjC,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBsI,UAAlC;AACA;AACA,wBAAII,OAAO,EAAX;AACA,yBAAK1C,eAAL,CAAqB0C,IAArB;AACA;AACH;AACJ,aApCD,MAoCO;AACH,oBAAI5D,SAAS,IAAb,EAAmB;AACfA,0BAAMlN,GAAN,GAAYkN,MAAMlN,GAAN,GAAY,CAAxB;AACA,wBAAIkN,MAAMlN,GAAN,GAAY,CAAhB,EAAmB;AACfkN,8BAAMlN,GAAN,GAAY,CAAZ;AACH;AACD,yBAAKkE,WAAL,GAAmB,IAAnB;AACA,yBAAKmI,gBAAL,CAAsBa,KAAtB;AACH,iBAPD,MAOO;AACH,yBAAKhJ,WAAL,GAAmB,KAAnB;AACH;AACD,qBAAK6M,UAAL,CAAgBhM,CAAhB,EAAmB5E,QAAnB;AACH;AACJ;AAEJ,KAx9BmB;;AA09BpB;AACAsQ,kBAAc,sBAAUzQ,GAAV,EAAe;AACzB,aAAKgD,MAAL,GAAchD,GAAd;AACA,aAAKgR,YAAL;AACH,KA99BmB;;AAg+BpB;AACAD,gBAAY,oBAAUlF,EAAV,EAAc1L,QAAd,EAAwB;AAChC,YAAI2E,OAAO,IAAX;;AAEAA,aAAK1D,SAAL,CAAeoH,MAAf,GAAwB,IAAxB;AACA1D,aAAK1D,SAAL,CAAe6P,KAAf,GAAuB,GAAvB;AACAnM,aAAK1D,SAAL,CAAeyE,MAAf,GAAwB1F,SAAS8E,IAAjC;AACAH,aAAK1D,SAAL,CAAe+J,CAAf,GAAmB,EAAnB;AACArG,aAAK1D,SAAL,CAAegK,CAAf,GAAmB,CAAC,EAApB;AACA;AACA,YAAI8F,OAAO,KAAK9P,SAAL,CAAekD,YAAf,CAA4BhF,GAAG6R,SAA/B,CAAX;AACA,YAAIrM,OAAO,IAAX;AACA,YAAIsM,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7BtM,iBAAK1D,SAAL,CAAeoH,MAAf,GAAwB,KAAxB;AACA1D,iBAAK1D,SAAL,CAAeyE,MAAf,GAAwBf,KAAKG,IAA7B;AACAiM,iBAAKG,IAAL,CAAU,UAAV;AAEH,SALD;;AAOA,YAAIjH,OAAO9K,GAAG+K,QAAH,CAAY,YAAY;AAC/B,gBAAIiH,UAAUxM,KAAKuK,UAAL,CAAgB,CAAhB,EAAmBvK,KAAK9B,MAAxB,CAAd;AACA,gBAAIuO,MAAM1F,EAAV;AACA,iBAAK,IAAI2F,OAAO,CAAhB,EAAmBA,OAAO,CAA1B,EAA6BA,MAA7B,EAAqC;AACjC,oBAAID,MAAMtS,OAAO+F,UAAP,GAAoB,CAA9B,EAAiC;AAC7B;AACH,iBAFD,MAEO;AACH,wBAAIuM,MAAM,CAAN,IAAWtS,OAAO+F,UAAP,GAAoB,CAAnC,EAAsC;AAClC,4BAAIyM,MAAM,IAAI3M,KAAKqB,UAAL,GAAkBoL,GAAlB,EAAuBnG,CAArC;AACAtG,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BoB,IAA3B,GAAkC5M,KAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBG,IAAvD;AACA5M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BqB,IAA3B,GAAkC7M,KAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBI,IAArB,GAA4BF,MAAMxS,OAAO2S,UAA3E;AACA9M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BuB,OAA3B,GAAqC,CAAC,CAAtC;AACA/M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BwB,OAA3B,GAAqCP,GAArC;AACAzM,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2ByB,UAA3B,GAAyCN,MAAMxS,OAAO2S,UAAd,GAA4B3S,OAAO+S,SAA3E;AACAlN,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2B2B,UAA3B;AACA,4BAAIjS,MAAM8E,KAAKmB,QAAL,GAAgBsL,MAAM,CAAtB,EAAyBjB,KAAzB,CAA+BtQ,GAAzC;AACA;AACA;AACA8E,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBnB,MAArB,CAA4BpQ,GAA5B;AACA8E,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBW,eAArB;AACH,qBAbD,MAaO;AACH,4BAAIlS,MAAM8E,KAAKqN,YAAL,EAAV;AACArN,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBnB,MAArB,CAA4BpQ,GAA5B;AACA,4BAAIyR,MAAM,IAAI3M,KAAKqB,UAAL,GAAkBoL,GAAlB,EAAuBnG,CAArC;AACAtG,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BoB,IAA3B,GAAkC5M,KAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBG,IAAvD;AACA5M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BqB,IAA3B,GAAkC7M,KAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBI,IAArB,GAA4BF,MAAMxS,OAAO2S,UAA3E;AACA9M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BuB,OAA3B,GAAqC,CAAC,CAAtC;AACA/M,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2BwB,OAA3B,GAAqCP,GAArC;AACAzM,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2ByB,UAA3B,GAAyCN,MAAMxS,OAAO2S,UAAd,GAA4B3S,OAAO+S,SAA3E;AACAlN,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBjB,KAArB,CAA2B2B,UAA3B;AACAnN,6BAAKmB,QAAL,GAAgBsL,GAAhB,EAAqBW,eAArB;AACA;AACH;AACDX,0BAAMA,MAAM,CAAZ;AACH;AACJ;AACDzM,iBAAK7B,YAAL,GAAoB,CAApB;AACA6B,iBAAK/B,aAAL,GAAqB9D,OAAO+S,SAA5B;AACAlN,iBAAKhC,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBgK,MAAlC;AACH,SAvCU,CAAX;;AAyCA,YAAIpI,QAAQ1K,GAAG2K,SAAH,CAAa,GAAb,CAAZ;AACA,YAAIS,MAAMpL,GAAGqL,QAAH,CAAYX,KAAZ,EAAmBI,IAAnB,CAAV;AACAjK,iBAAS8E,IAAT,CAAc6F,SAAd,CAAwBJ,GAAxB;AACA;;AAEA;AACA;;;AAGA,YAAI2H,eAAenB,KAAKoB,IAAL,CAAU,UAAV,CAAnB;AACAD,qBAAaE,QAAb,GAAwBjT,GAAGkT,QAAH,CAAYC,MAApC;AACAvB,aAAKrK,EAAL,CAAQ,UAAR,EAAoBuK,cAApB,EAAoCtM,IAApC;AACH,KAxiCmB;;AA0iCpB;;;;;;;;;;;AAWA4N,YAAQ,gBAAUC,EAAV,EAAc;;AAElB,aAAK,IAAI5N,IAAI,CAAb,EAAgBA,IAAI,KAAKkB,QAAL,GAAgB6D,MAApC,EAA4C/E,GAA5C,EAAiD;AAC7C,iBAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBsC,QAAzB,CAAkCD,EAAlC;AACA,iBAAK1M,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBuC,UAAzB,CAAoCF,EAApC,EAAwC,KAAKG,IAA7C,EAAmD,KAAKC,KAAxD;AACA,iBAAK9M,QAAL,GAAgBlB,CAAhB,EAAmBiO,IAAnB,CAAwB,KAAK/S,OAAL,CAAa8E,CAAb,CAAxB;AACH;;AAED,YAAI,KAAKzB,WAAT,EAAsB;AAClB,iBAAK2P,sBAAL;AACH;AACD,gBAAQ,KAAKnQ,SAAb;AACI;;;;;;AAMA,iBAAK7D,OAAOmJ,SAAP,CAAiBsI,UAAtB;AACI;AACI,yBAAK/G,YAAL;AACA,wBAAIuJ,KAAK,KAAKjN,QAAL,GAAgB,KAAKpD,SAArB,EAAgC7C,GAAzC;AACA,yBAAKiD,YAAL,GAAoB,CAApB;AACA,yBAAK2G,aAAL,CAAmB,KAAK/G,SAAxB,EAAmC,CAAnC;AACA,wBAAI,KAAKD,cAAL,IAAuB3D,OAAO4K,kBAAlC,EAAsD;AAClD,6BAAK9G,aAAL,GAAqB9D,OAAO+S,SAA5B;AACA,6BAAKvP,KAAL,IAAcxD,OAAOkU,SAAP,IAAoB,KAAKvQ,cAAL,GAAsB,CAA1C,IAA+CsQ,EAA7D;AACA,6BAAK9O,kBAAL,GAA0B,IAA1B;AACA,6BAAKzE,UAAL,CAAgBkF,MAAhB,GAAyB,KAAKpC,KAA9B;AACA,6BAAK,IAAIsC,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC;AACA,gCAAI,KAAKoB,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,OAA7B,IAAwC,KAAKjN,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,CAAzE,EAA4E;AACxE,qCAAKnN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyByB,UAAzB,GAAsC9S,OAAO2S,UAAP,GAAoB,KAAKzL,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAAzC,GAAgDnU,OAAO+S,SAA7F;AACA,qCAAK/L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyB+C,eAAzB,GAA2CpU,OAAO+S,SAAP,GAAmB,KAAK7L,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAAnF;AACA,qCAAKnN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBuB,OAAzB,GAAmC9M,CAAnC;AACA,qCAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBwB,OAAzB,GAAmC,KAAK3L,UAAL,GAAkBpB,CAAlB,EAAqBuO,IAAxD;AACA,qCAAKrN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBiD,UAAzB;AACH;AACJ;AACD,6BAAKzQ,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBoL,MAAlC;AACH,qBAhBD,MAgBO;AACH,6BAAKpP,kBAAL,GAA0B,KAA1B;AACA,4BAAI,KAAKF,WAAL,IAAoB,IAAxB,EAA8B;AAC1B,iCAAKA,WAAL,GAAmB,KAAnB;AACH,yBAFD,MAEO;AACH,iCAAKxB,KAAL;AACA,iCAAKsJ,YAAL;AACH;AACD;AACA,4BAAI,KAAKtJ,KAAL,IAAc,CAAlB,EAAqB;AACjB,iCAAK+Q,gBAAL;AACH,yBAFD,MAEO;AACH;AACA,iCAAKpK,iBAAL;AACA,iCAAKqK,aAAL;AACH;AACD;AACA;AACA;AACH;AACD;AACH;AACD;AACJ,iBAAKzU,OAAOmJ,SAAP,CAAiBoL,MAAtB;AACI;AACI,yBAAKzQ,aAAL,IAAsB4P,EAAtB;AACA,wBAAI,KAAK5P,aAAL,IAAsB,CAA1B,EAA6B;AACzB,6BAAK4Q,UAAL;AACH;AACD;AACH;AACD;AACJ,iBAAK1U,OAAOmJ,SAAP,CAAiBgK,MAAtB;AACI;AACI,yBAAKrP,aAAL,IAAsB4P,EAAtB;AACA,wBAAI,KAAK5P,aAAL,IAAsB,CAA1B,EAA6B;AACzB,6BAAK6Q,eAAL;AACH;AACD;AACH;;AApET;AAuEH,KAvoCmB;;AAyoCpB;;;;;;;;;;;AAWAD,cAppCoB,wBAopCP;AACT;;AAEA,aAAK5Q,aAAL,GAAqB9D,OAAO+S,SAA5B;AACA,YAAIhS,MAAM,KAAKiG,QAAL,GAAgB,KAAKpD,SAArB,EAAgC7C,GAAhC,GAAsC,CAAhD;AACA,aAAKiG,QAAL,GAAgB,KAAKpD,SAArB,EAAgCuN,MAAhC,CAAuCpQ,GAAvC;AACA,aAAKiG,QAAL,GAAgB,KAAKpD,SAArB,EAAgCwN,UAAhC;AACA,aAAKpK,QAAL,GAAgB,KAAKpD,SAArB,EAAgCyN,KAAhC,CAAsCC,QAAtC,GAAiD,CAAjD;AACA,aAAKtK,QAAL,GAAgB,KAAKpD,SAArB,EAAgCyN,KAAhC,CAAsCE,UAAtC,GAAmD,GAAnD;AACA,YAAIxQ,MAAM,KAAKgD,MAAf,EAAuB;AACnB,iBAAKyN,YAAL,CAAkBzQ,GAAlB;AACH;AACD,YAAI,KAAKC,OAAL,CAAa,KAAK4C,SAAlB,CAAJ,EAAkC;AAC9B,gBAAIgR,aAAa,KAAK5Q,YAAL,GAAoB,CAArC;AACA,gBAAI4Q,aAAa5U,OAAOwG,MAAP,CAAcqO,KAAd,CAAoBhK,MAApB,GAA6B,CAA9C,EAAiD;AAC7C+J,6BAAa5U,OAAOwG,MAAP,CAAcqO,KAAd,CAAoBhK,MAApB,GAA6B,CAA1C;AACH;AACD,gBAAI+J,aAAa,CAAjB,EAAoB;AAChBA,6BAAa,CAAb;AACH;AACD,iBAAKrO,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAcqO,KAAd,CAAoBD,UAApB,CAAtB;AACA,iBAAK5T,OAAL,CAAa,KAAK4C,SAAlB,EAA6ByB,YAA7B,CAA0C,UAA1C,EAAsDyP,SAAtD;AACH;AACD;AACA,aAAKC,aAAL;AACA,aAAKlR,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBgK,MAAlC;AAEH,KA/qCmB;;;AAkrCpB;;;;;;;;;;;AAWApB,kBAAc,wBAAY;AACtBxM,aAAKyP,IAAL,CAAU,QAAV,EAAoB,KAAKjR,MAAzB;AACH,KA/rCmB;;AAisCpB;;;;;;;;;;;AAWA4Q,qBAAiB,2BAAY;AACzB,YAAIM,SAAS,KAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIlV,OAAO+F,UAA3B,EAAuCmP,GAAvC,EAA4C;AACxC,iBAAKxK,YAAL;AACA,gBAAIuJ,KAAK,KAAKjN,QAAL,GAAgBkO,CAAhB,EAAmBnU,GAA5B;AACA,iBAAK4J,aAAL,CAAmBuK,CAAnB,EAAsB,CAAtB;AACA,gBAAI,KAAKvR,cAAL,IAAuB3D,OAAO4K,kBAAlC,EAAsD;AAClD,qBAAK9G,aAAL,GAAqB9D,OAAO+S,SAA5B;AACA,qBAAK/O,YAAL;AACA,qBAAKR,KAAL,IAAcxD,OAAOkU,SAAP,GAAmBD,EAAnB,IAAyB,KAAKtQ,cAAL,GAAsB,CAA/C,CAAd;AACA,qBAAKjD,UAAL,CAAgBkF,MAAhB,GAAyB,KAAKpC,KAA9B;AACA,qBAAK,IAAIsC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AACzB,wBAAI,KAAKoB,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,OAA7B,IAAwC,KAAKjN,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,CAAzE,EAA4E;AACxE,6BAAKnN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyByB,UAAzB,GAAsC9S,OAAO2S,UAAP,GAAoB,KAAKzL,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAAzC,GAAgDnU,OAAO+S,SAA7F;AACA,6BAAK/L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyB+C,eAAzB,GAA2CpU,OAAO+S,SAAP,GAAmB,KAAK7L,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAAnF;AACA,6BAAKnN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBuB,OAAzB,GAAmC9M,CAAnC;AACA,6BAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBwB,OAAzB,GAAmC,KAAK3L,UAAL,GAAkBpB,CAAlB,EAAqBuO,IAAxD;AACA,6BAAKrN,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBiD,UAAzB;AACH;AACJ;AACDW,yBAAS,IAAT;AACA,qBAAKrR,SAAL,GAAiBsR,CAAjB;AACA,qBAAKrR,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBoL,MAAlC;AACA,oBAAI,KAAK9Q,KAAL,GAAa,CAAjB,EACI,KAAKA,KAAL;AACJ,qBAAKsJ,YAAL;AACA;AACH;AAEJ;;AAED,YAAIkI,UAAU,KAAd,EAAqB;AACjB;AACA,iBAAK7K,iBAAL;AACA,iBAAKqK,aAAL;AACH;AACJ,KAhvCmB;;AAkvCpB;;;;;;;;;;;;;;;;;;AAkBAlK,sBAAkB,4BAAY;AAC1B,YAAI,KAAKvG,YAAL,IAAqBhE,OAAOqK,aAAP,CAAqBC,KAA9C,EAAqD;AACjD,iBAAK6K,QAAL;AACA,iBAAK5O,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAc4O,IAApC;AACA,iBAAKzQ,aAAL,GAAqB,CAArB;AACH,SAJD,MAIO,IAAI,KAAKX,YAAL,IAAqBhE,OAAOqK,aAAP,CAAqBgL,KAA9C,EAAqD;AACxD,iBAAKC,QAAL;AACA,iBAAK/O,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAc+O,IAApC;AACA,iBAAK5Q,aAAL,GAAqB,CAArB;AACH,SAJM,MAIA,IAAI,KAAKX,YAAL,IAAqBhE,OAAOqK,aAAP,CAAqBmL,KAA9C,EAAqD;AACxD,iBAAKC,WAAL;AACA,iBAAKlP,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAckP,OAApC;AACA,iBAAK/Q,aAAL,GAAqB,CAArB;AACH,SAJM,MAIA,IAAI,KAAKX,YAAL,IAAqBhE,OAAOqK,aAAP,CAAqBsL,OAA9C,EAAuD;AAC1D,iBAAKC,YAAL;AACA,iBAAKrP,gBAAL,CAAsBvG,OAAOwG,MAAP,CAAcqP,YAApC;AACA,iBAAKlR,aAAL,GAAqB,CAArB;AACH,SAJM,MAIA;AACH,iBAAKA,aAAL,GAAqB,CAArB;AACH;;AAED;AACA;AACA;AACH,KA5xCmB;;AAgyCpB;;;;;;;;;;;AAWA4B,sBAAkB,0BAAUuP,QAAV,EAAoB;AAClCvQ,aAAKC,GAAL,CAASuQ,YAAT,CAAsBC,SAAtB,CAAgCF,QAAhC;AACH,KA7yCmB;;AAkzCpB;AACAX,cAAU,oBAAY;AAClB,YAAItP,OAAO,IAAX;AACA,YAAIoQ,YAAY,KAAKlU,OAAL,CAAasD,YAAb,CAA0BhF,GAAG6R,SAA7B,CAAhB;;AAEA,YAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7B,gBAAItM,KAAKlB,aAAL,GAAqB,CAAzB,EAA4B;AACxBkB,qBAAKqQ,OAAL,CAAa,KAAKvR,aAAlB;AACAkB,qBAAKlB,aAAL,GAAqB,CAArB;AACH;AACJ,SALD;AAMAsR,kBAAUrO,EAAV,CAAa,UAAb,EAAyBuK,cAAzB,EAAyCtM,IAAzC;AACA,YAAIsQ,iBAAiBF,UAAU5C,IAAV,CAAe,WAAf,CAArB;AACH,KA/zCmB;;AAi0CpB;AACAiC,cAAU,oBAAY;AAClB,YAAIzP,OAAO,IAAX;AACA,YAAIoQ,YAAY,KAAKjU,OAAL,CAAaqD,YAAb,CAA0BhF,GAAG6R,SAA7B,CAAhB;;AAEA,YAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7B,gBAAItM,KAAKlB,aAAL,GAAqB,CAAzB,EAA4B;AACxBkB,qBAAKqQ,OAAL,CAAa,KAAKvR,aAAlB;AACAkB,qBAAKlB,aAAL,GAAqB,CAArB;AACH;AACJ,SALD;AAMAsR,kBAAUrO,EAAV,CAAa,UAAb,EAAyBuK,cAAzB,EAAyCtM,IAAzC;AACA,YAAIsQ,iBAAiBF,UAAU5C,IAAV,CAAe,WAAf,CAArB;AACH,KA90CmB;;AAi1CpB;AACAoC,iBAAa,uBAAY;AACrB,YAAI5P,OAAO,IAAX;AACA,aAAK5D,OAAL,CAAasH,MAAb,GAAsB,IAAtB;AACA,YAAI0M,YAAY,KAAKhU,OAAL,CAAaoD,YAAb,CAA0BhF,GAAG6R,SAA7B,CAAhB;AACA,YAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7B,gBAAItM,KAAKlB,aAAL,GAAqB,CAAzB,EAA4B;AACxBkB,qBAAKqQ,OAAL,CAAa,KAAKvR,aAAlB;AACAkB,qBAAKlB,aAAL,GAAqB,CAArB;AACA,qBAAK1C,OAAL,CAAasH,MAAb,GAAsB,KAAtB;AACH;AACJ,SAND;AAOA0M,kBAAUrO,EAAV,CAAa,UAAb,EAAyBuK,cAAzB,EAAyCtM,IAAzC;AACA,YAAIsQ,iBAAiBF,UAAU5C,IAAV,CAAe,SAAf,CAArB;AACA8C,uBAAe7C,QAAf,GAA0BjT,GAAGkT,QAAH,CAAYC,MAAtC;AACH,KAh2CmB;;AAk2CpB;AACAoC,kBAAc,wBAAY;AACtB,YAAI/P,OAAO,IAAX;AACA,aAAK3D,WAAL,CAAiBqH,MAAjB,GAA0B,IAA1B;AACA,YAAI0M,YAAY,KAAK/T,WAAL,CAAiBmD,YAAjB,CAA8BhF,GAAG6R,SAAjC,CAAhB;AACA,YAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC7B,gBAAItM,KAAKlB,aAAL,GAAqB,CAAzB,EAA4B;AACxBkB,qBAAKqQ,OAAL,CAAa,KAAKvR,aAAlB;AACAkB,qBAAKlB,aAAL,GAAqB,CAArB;AACAkB,qBAAK3D,WAAL,CAAiBqH,MAAjB,GAA0B,KAA1B;AACH;AACJ,SAND;AAOA0M,kBAAUrO,EAAV,CAAa,UAAb,EAAyBuK,cAAzB,EAAyCtM,IAAzC;AACA,YAAIsQ,iBAAiBF,UAAU5C,IAAV,CAAe,OAAf,CAArB;AACA8C,uBAAe7C,QAAf,GAA0BjT,GAAGkT,QAAH,CAAYC,MAAtC;AACH,KAj3CmB;;AAu3CpB;;;;;;;;;;;AAWAtF,kBAAc,wBAAY;AACtB;AACA,YAAI,KAAK/J,QAAT,EAAmB;AACfoB,iBAAKiK,IAAL,CAAU4G,qBAAV,CAAgC,UAAhC,EAA4CpO,KAAKC,SAAL,CAAe,KAAK9D,QAApB,CAA5C;AACH;AACJ,KAv4CmB;;AA04CpB;;;;;;;;;;;AAWA4I,kBAAc,wBAAY;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI,KAAKnI,QAAL,IAAiB,KAAKnB,KAA1B,EAAiC;AAC7B;AACH;AACD,aAAKmB,QAAL,GAAgB,KAAKnB,KAArB;AACA,aAAK,IAAI4S,YAAY,CAArB,EAAwBA,YAAY,CAApC,EAAuCA,WAAvC,EAAoD;AAChD,gBAAI,KAAK5S,KAAL,IAAc4S,YAAY,CAA9B,EAAiC;AAC7B,qBAAKlV,KAAL,CAAWkV,SAAX,EAAsBhR,YAAtB,CAAmC,UAAnC,EAA+CiR,IAA/C;AACH,aAFD,MAEO;AACH,qBAAKnV,KAAL,CAAWkV,SAAX,EAAsBhR,YAAtB,CAAmC,UAAnC,EAA+CkR,IAA/C;AACH;AACJ;AAEJ,KA96CmB;;AAg7CpB;;;;;;;;;;;AAWAC,2BAAuB,+BAAUC,GAAV,EAAe;AAClC,aAAK1T,OAAL,CAAaiD,IAAb,CAAkBuD,MAAlB,GAA2BkN,GAA3B;AACH,KA77CmB;;AA+7CpB;;;;;;;;;;;AAWAjC,sBAAkB,4BAAY;AAC1B;AACA,aAAK3Q,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBuN,QAAlC;AACA,aAAKF,qBAAL,CAA2B,IAA3B;AACA;AACA,aAAKpU,cAAL,CAAoBwD,MAApB,GAA6B,KAAKpC,KAAlC;AACH,KAh9CmB;;AAk9CpB;;;;;;;;;;;AAWAgH,iBAAa,uBAAY;AACrB;AACA,YAAI,KAAKhH,KAAL,GAAamT,SAASpR,KAAKiK,IAAL,CAAUC,uBAAV,CAAkC,UAAlC,EAA8C,CAA9C,CAAT,CAAjB,EAA6E;AACzE;AACA,iBAAKlL,UAAL,GAAkB,IAAlB;AACA,iBAAKiS,qBAAL,CAA2B,KAA3B;AACA,gBAAIzL,QAAQ1K,GAAG2K,SAAH,CAAa,GAAb,CAAZ;AACA,gBAAInF,OAAO,IAAX;AACA,gBAAIsF,OAAO9K,GAAG+K,QAAH,CAAY,YAAY;AAC/BvF,qBAAKxE,QAAL,CAAckI,MAAd,GAAuB,IAAvB;AACA1D,qBAAKnE,OAAL,CAAa6H,MAAb,GAAsB,IAAtB;AACA1D,qBAAKnE,OAAL,CAAamK,SAAb,CACIxL,GAAGqL,QAAH,CACIrL,GAAGuW,OAAH,CAAW,GAAX,EAAgB,GAAhB,CADJ,EAEIvW,GAAGuW,OAAH,CAAW,GAAX,EAAgB,CAAhB,CAFJ,CADJ;AAMH,aATU,CAAX;AAUA,gBAAInL,MAAMpL,GAAGqL,QAAH,CAAYX,KAAZ,EAAmBI,IAAnB,CAAV;AACA5F,iBAAKyP,IAAL,CAAU,YAAV;AACA,iBAAKhP,IAAL,CAAU6F,SAAV,CAAoBJ,GAApB;AACA;AACA;AACA;AACA;AACA,iBAAK7I,aAAL,CAAmBgD,MAAnB,GAA4B,KAAKpC,KAAjC;AACH;AACJ,KAx/CmB;;AA2/CpB;;;;;;;;;;;AAWAqT,kBAAc,wBAAY;AACtB;AACA,aAAKxH,YAAL;AACA,aAAK3N,OAAL,CAAa6H,MAAb,GAAsB,KAAtB;AACH,KA1gDmB;;AA6gDpBkL,mBAAe,yBAAY;AACvB,aAAK,IAAI3O,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,iBAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBsL,UAAnB;AACH;AACJ,KAjhDmB;;AAohDpB;;;;;;;;;;;AAWAzJ,cAAU,oBAAY;AAClB,aAAKmP,UAAL;AACA,aAAK3R,kBAAL,GAA0B,KAA1B;AACA,aAAK3B,KAAL,GAAa,CAAb;AACA,aAAK9C,UAAL,CAAgBkF,MAAhB,GAAyB,KAAKpC,KAA9B;AACA,aAAKC,KAAL,GAAazD,OAAO0D,YAApB;AACA,aAAKqJ,YAAL;AACA,aAAKhJ,MAAL,GAAc/D,OAAO0D,YAArB;AACA,aAAKY,aAAL,GAAqB,CAArB;AACA,aAAK4D,SAAL;AACA,aAAKxD,aAAL,GAAqB,IAArB;AACA,aAAKH,UAAL,GAAkB,KAAlB;AACA,aAAK,IAAIuB,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,gBAAI/E,MAAM,KAAKmS,YAAL,EAAV;AACA,iBAAKlM,QAAL,GAAgBlB,CAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,iBAAKiG,QAAL,GAAgBlB,CAAhB,EAAmBsL,UAAnB;AACH;;AAED,YAAI2F,YAAY,IAAhB;;AAEA,eAAOA,aAAa,IAApB,EAA0B;AACtBA,wBAAY,KAAZ;AACA,iBAAK,IAAIjR,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,qBAAK4E,YAAL;AACA,qBAAKC,aAAL,CAAmB7E,CAAnB,EAAsB,CAAtB;AACA,oBAAI,KAAKnC,cAAL,IAAuB,CAA3B,EAA8B;AAC1B,yBAAKqT,eAAL;AACAD,gCAAY,IAAZ;AACH;AACJ;AACJ;;AAED,aAAKlT,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBC,SAAlC;AACA,aAAKoN,qBAAL,CAA2B,KAA3B;AACH,KAjkDmB;;AAmkDpB;;;;;;;;;;;AAWA9L,kBAAc,wBAAY;AACtB,YAAI,KAAKxF,cAAL,IAAuB,KAA3B,EAAkC;AAC9B,iBAAKA,cAAL,GAAsB,IAAtB;AACA,iBAAK,IAAIY,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,qBAAKoB,UAAL,GAAkBpB,CAAlB,EAAqBmR,KAArB;AACH;AACD,iBAAKtT,cAAL,GAAsB,CAAtB;AACA,iBAAKuB,cAAL,GAAsB,KAAtB;AACH;AAEJ,KAxlDmB;;AA2lDpB;;;;;;;;;;;;AAYAyF,mBAAe,uBAAUiC,EAAV,EAAcuH,IAAd,EAAoB;AAC/B,aAAKjN,UAAL,GAAkB0F,EAAlB,EAAsBuH,IAAtB,GAA6BA,IAA7B;AACA;AACA,aAAK+C,aAAL,CAAmBtK,EAAnB,EAAuBuH,IAAvB,EAA6B,CAA7B,EAAgC,CAAC,CAAjC;AACA,aAAK+C,aAAL,CAAmBtK,EAAnB,EAAuBuH,IAAvB,EAA6B,CAA7B,EAAgC,CAAC,CAAjC;AACA,aAAK+C,aAAL,CAAmBtK,EAAnB,EAAuBuH,IAAvB,EAA6B,CAA7B,EAAgC,CAAhC;AACA,aAAK+C,aAAL,CAAmBtK,EAAnB,EAAuBuH,IAAvB,EAA6B,CAA7B,EAAgC,CAAhC;AACH,KA9mDmB;;AAgnDpB;;;;;;;;;;;;;;AAcA+C,mBAAe,uBAAUtK,EAAV,EAAcuH,IAAd,EAAoBgD,EAApB,EAAwBC,GAAxB,EAA6B;AACxC,YAAItJ,KAAKC,GAAL,CAASqJ,GAAT,KAAiB,CAAjB,IAAsB,KAAKlQ,UAAL,GAAkB0F,EAAlB,KAAyB,IAA/C,IAAuD,KAAK1F,UAAL,GAAkB0F,EAAlB,EAAsBT,CAAtB,IAA2BgL,EAAtF,EAA0F;AACtF,mBAAO,KAAP;AACH,SAFD,MAEO,IAAIrJ,KAAKC,GAAL,CAASqJ,GAAT,KAAiB,CAAjB,IAAsB,KAAKlQ,UAAL,GAAkB0F,EAAlB,KAAyB,IAA/C,IAAuD,KAAK1F,UAAL,GAAkB0F,EAAlB,EAAsBV,CAAtB,IAA2BiL,EAAtF,EAA0F;AAC7F,mBAAO,KAAP;AACH;AACD,YAAI,KAAKjQ,UAAL,GAAkB0F,EAAlB,KAAyB,IAAzB,IAAiC,KAAK1F,UAAL,GAAkB0F,KAAKwK,GAAvB,KAA+B,IAApE,EAA0E;AACtE,mBAAO,KAAP;AACH;AACD,YAAI,KAAKlQ,UAAL,GAAkB0F,KAAKwK,GAAvB,EAA4BrW,GAA5B,IAAmC,KAAKmG,UAAL,GAAkB0F,EAAlB,EAAsB7L,GAAzD,IAAgE,KAAKmG,UAAL,GAAkB0F,KAAKwK,GAAvB,EAA4BjD,IAA5B,IAAoCA,IAAxG,EAA8G;AAC1G,mBAAO,KAAP;AACH;;AAED,YAAI,KAAKjN,UAAL,GAAkB0F,KAAKwK,GAAvB,EAA4BjD,IAA5B,IAAoC,OAAxC,EAAiD;AAC7C,iBAAKxQ,cAAL;AACH;;AAED,aAAKuD,UAAL,GAAkB0F,KAAKwK,GAAvB,EAA4BjD,IAA5B,GAAmCA,IAAnC;AACA,aAAKjN,UAAL,GAAkB0F,KAAKwK,GAAvB,EAA4B/C,IAA5B,GAAmCzH,EAAnC;AACA,aAAKjC,aAAL,CAAmBiC,KAAKwK,GAAxB,EAA6BjD,OAAO,CAApC,EAAuCgD,EAAvC,EAA2CC,GAA3C;AACH,KAlpDmB;;AAqpDpB;;;;;;;;;;;AAWAJ,qBAAiB,2BAAY;AACzB,aAAK,IAAIlR,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,gBAAI,KAAKoB,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,OAA7B,IAAwC,KAAKjN,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,CAAzE,EAA4E;AACxE,oBAAIpT,MAAM,KAAKmS,YAAL,EAAV;AACA,qBAAKlM,QAAL,GAAgBlB,CAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,qBAAKiG,QAAL,GAAgBlB,CAAhB,EAAmBsL,UAAnB;AACH;AACJ;AACJ,KAxqDmB;;AA0qDpB;;;;;;;;;;;AAWA8B,kBAAc,wBAAY;AACtB,YAAImE,OAAO,KAAKtT,MAAL,GAAc,CAAzB;AACA,YAAIsT,OAAOrX,OAAOsX,cAAlB,EACID,OAAOrX,OAAOsX,cAAd;;AAEJ,YAAIvW,MAAM4V,SAAS7I,KAAK0C,MAAL,KAAgB,KAAzB,IAAkC6G,IAAlC,GAAyC,CAAnD;AACA;AACA;AACA;AACA;AACA;AACA,eAAOtW,GAAP;AACH,KAjsDmB;;AAmsDpB;;;;;;;;;;;AAWAsH,iBAAa,uBAAY;AACrB,YAAI,KAAK/D,aAAL,GAAqBtE,OAAOoO,OAAhC,EAAyC;AACrC,iBAAK3K,KAAL,GAAazD,OAAO0D,YAApB;AACA,iBAAKqJ,YAAL;AACA,iBAAKlJ,SAAL,GAAiB7D,OAAOmJ,SAAP,CAAiBC,SAAlC;AACA,iBAAK+E,gBAAL;AACA,iBAAKqI,qBAAL,CAA2B,KAA3B;AACH,SAND,MAMO;AACH,iBAAK3J,SAAL,CAAe,WAAW7M,OAAOoO,OAAlB,GAA4B,WAA3C;AACA,iBAAKzG,QAAL;AACH;AAEJ,KA1tDmB;;AA4tDpB;;;;;;;;;;;AAWAoN,mBAAe,yBAAY;AACvB,aAAK,IAAIjP,IAAI,CAAb,EAAgBA,IAAI9F,OAAO+F,UAA3B,EAAuCD,GAAvC,EAA4C;AACxC,gBAAI,KAAKoB,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,OAA7B,IAAwC,KAAKjN,UAAL,GAAkBpB,CAAlB,EAAqBqO,IAArB,IAA6B,CAAzE,EAA4E;AACxE,qBAAKjN,UAAL,GAAkBpB,CAAlB,EAAqBuO,IAArB,GAA4B,CAAC,CAA7B;AACA,oBAAIkD,QAAQ,CAAC,CAAb;AACA,oBAAIC,QAAQ1R,IAAI,CAAhB;AACA,uBAAO0R,QAAQxX,OAAO+F,UAAtB,EAAkC;AAC9B,wBAAI,KAAKmB,UAAL,GAAkBsQ,KAAlB,EAAyBrD,IAAzB,IAAiC,OAAjC,IAA4C,KAAKjN,UAAL,GAAkBsQ,KAAlB,EAAyBrD,IAAzB,IAAiC,CAAjF,EAAoF;AAChFoD,gCAAQC,KAAR;AACA;AACH;AACDA,6BAAS,CAAT;AACH;;AAED,oBAAIC,OAAO,KAAX;AACA,oBAAIC,MAAM5J,KAAK0C,MAAL,EAAV;AACA,oBAAImH,UAAU,CAAd;AACA,qBAAK,IAAIC,SAAS,CAAlB,EAAqBA,SAAS5X,OAAO6X,UAAP,CAAkBrU,KAAlB,CAAwBqH,MAAxB,GAAiC,CAA/D,EAAkE+M,QAAlE,EAA4E;AACxE,wBAAI,KAAKpU,KAAL,IAAcxD,OAAO6X,UAAP,CAAkBrU,KAAlB,CAAwBoU,MAAxB,CAAlB,EAAmD;AAC/CD,kCAAUC,MAAV;AACA;AACH;AACJ;AACD,oBAAIE,MAAM9X,OAAO6X,UAAP,CAAkBE,IAAlB,CAAuBJ,OAAvB,CAAV;AACA,oBAAID,OAAOI,GAAX,EAAgB;AACZL,2BAAO,IAAP;AACH;;AAED,oBAAIF,SAAS,CAAC,CAAd,EAAiB;AAAE;AACf,wBAAI/E,MAAM,KAAKtL,UAAL,GAAkBqQ,KAAlB,EAAyBpL,CAAzB,GAA6B,KAAKjF,UAAL,GAAkBpB,CAAlB,EAAqBqG,CAA5D;AACA,yBAAKnF,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBoB,IAAzB,GAAgC,KAAKzL,QAAL,GAAgBuQ,KAAhB,EAAuB9E,IAAvD;AACA,yBAAKzL,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBqB,IAAzB,GAAgC,KAAK1L,QAAL,GAAgBuQ,KAAhB,EAAuB7E,IAAvD;AACA,yBAAK1L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBuB,OAAzB,GAAmC2E,KAAnC;AACA,yBAAKvQ,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBwB,OAAzB,GAAmC/M,CAAnC;AACA,yBAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyByB,UAAzB,GAAuCN,MAAMxS,OAAO2S,UAAd,GAA4B3S,OAAO+S,SAAzE;AACA,yBAAK/L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyB2B,UAAzB;AACA,yBAAKhM,QAAL,GAAgBuQ,KAAhB,EAAuBpD,IAAvB,GAA8B,GAA9B;AACA,wBAAIpT,MAAM,CAAC,CAAX;AACA,wBAAI0W,IAAJ,EAAU;AACN1W,8BAAM,KAAKiG,QAAL,GAAgBuQ,KAAhB,EAAuBxW,GAA7B;AACH,qBAFD,MAEO;AACHA,8BAAM,KAAKiX,eAAL,CAAqBlS,CAArB,CAAN;AACH;AACD,yBAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,yBAAKiG,QAAL,GAAgBlB,CAAhB,EAAmBmN,eAAnB;AACA,yBAAKjM,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBC,QAAzB,GAAoC,KAAKtK,QAAL,GAAgBuQ,KAAhB,EAAuBlG,KAAvB,CAA6BC,QAAjE;AACA,yBAAKtK,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBE,UAAzB,GAAsC,KAAKvK,QAAL,GAAgBuQ,KAAhB,EAAuBlG,KAAvB,CAA6BE,UAAnE;AACA,yBAAKvK,QAAL,GAAgBuQ,KAAhB,EAAuBlG,KAAvB,CAA6BC,QAA7B,GAAwC,CAAC,CAAzC;AACA,yBAAKtK,QAAL,GAAgBuQ,KAAhB,EAAuBlG,KAAvB,CAA6BE,UAA7B,GAA0C,CAA1C;AACH,iBArBD,MAqBO;AACH,wBAAIiB,MAAM,IAAI,KAAKtL,UAAL,GAAkBpB,CAAlB,EAAqBqG,CAAnC;AACA,yBAAKnF,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBoB,IAAzB,GAAgC,KAAKzL,QAAL,GAAgBlB,CAAhB,EAAmB2M,IAAnD;AACA,yBAAKzL,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBqB,IAAzB,GAAgC,KAAK1L,QAAL,GAAgBlB,CAAhB,EAAmB4M,IAAnB,GAA0BF,MAAMxS,OAAO2S,UAAvE;AACA,yBAAK3L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBuB,OAAzB,GAAmC,CAAC,CAApC;AACA,yBAAK5L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyBwB,OAAzB,GAAmC/M,CAAnC;AACA,yBAAKkB,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyByB,UAAzB,GAAuCN,MAAMxS,OAAO2S,UAAd,GAA4B3S,OAAO+S,SAAzE;AACA,yBAAK/L,QAAL,GAAgBlB,CAAhB,EAAmBuL,KAAnB,CAAyB2B,UAAzB;AACA,wBAAIjS,MAAM,CAAC,CAAX;AACA,wBAAI0W,IAAJ,EAAU;AACN1W,8BAAM,KAAKiX,eAAL,CAAqBlS,CAArB,CAAN;AACA/E,8BAAM4V,SAAS5V,MAAM,GAAN,GAAY,MAAM+M,KAAK0C,MAAL,EAA3B,CAAN;AACA,4BAAIzP,OAAO,CAAX,EAAcA,MAAM,CAAN;AACjB,qBAJD,MAIO;AACHA,8BAAM,KAAKmS,YAAL,EAAN;AACH;AACD,yBAAKlM,QAAL,GAAgBlB,CAAhB,EAAmBqL,MAAnB,CAA0BpQ,GAA1B;AACA,yBAAKiG,QAAL,GAAgBlB,CAAhB,EAAmBmN,eAAnB;AACH;AACJ;AACJ;AACJ,KA7yDmB;;AA+yDpB;AACA+E,qBAAiB,yBAAUpL,EAAV,EAAc;AAC3B,YAAIqL,SAAS,CAACrL,KAAK,CAAN,EAASA,KAAK,CAAd,EAAiBA,KAAK,CAAtB,EAAyBA,KAAK,CAA9B,EAAiCA,KAAK,CAAtC,EAAyCA,KAAK,CAA9C,EAAiDA,KAAK,CAAtD,EAAyDA,KAAK,CAA9D,CAAb;AACA,YAAIsL,QAAQ,CAAZ;AACA,YAAIC,UAAU,CAAd;AACA,aAAK,IAAIC,aAAa,CAAtB,EAAyBA,aAAaH,OAAOpN,MAA7C,EAAqDuN,YAArD,EAAmE;AAC/D,gBAAI,KAAKlR,UAAL,GAAkBkR,UAAlB,CAAJ,EAAmC;AAC/BF,wBAAQA,QAAQ,KAAKlR,QAAL,GAAgBoR,UAAhB,EAA4B/G,KAA5B,CAAkCtQ,GAAlD;AACAoX,0BAAUA,UAAU,CAApB;AACH;AACJ;AACD,YAAIE,WAAWH,QAAQC,OAAvB;AACA;AACA,eAAOxB,SAAS0B,QAAT,CAAP;AACH,KA7zDmB;AA8zDpB;;;;;;;;;;;AAWAC,mBAAe,yBAAY;AACvB,aAAKxB,UAAL;AACAzW,WAAGkY,QAAH,CAAYC,SAAZ,CAAsB,WAAtB,EAAmC,KAAKC,aAAxC;AACH,KA50DmB;;AA80DpB3B,gBAAY,sBAAY;AACpB,YAAIH,SAASpR,KAAKiK,IAAL,CAAUC,uBAAV,CAAkC,UAAlC,EAA8C,CAA9C,CAAT,IAA6D,KAAKjM,KAAtE,EAA6E;AACzE+B,iBAAKiK,IAAL,CAAU4G,qBAAV,CAAgC,UAAhC,EAA4C,KAAK5S,KAAjD;AACH;AACD,YAAI+B,KAAK4B,QAAT,EAAmB;AACfqH,eAAGkK,WAAH,CAAe;AACXC,wBAAQ,CADG;AAEXnV,uBAAO,KAAKA;AAFD,aAAf;AAIH;AACJ,KAx1DmB;;AA01DpBoV,cAAU,oBAAY;AAClB;AACA,aAAK/L,SAAL,CAAe,QAAf;AACA;AACH,KA91DmB;;AAg2DpB;;;;;;;;;;;AAWA9D,mBAAe,yBAAY;AACvB,YAAIlD,OAAO,IAAX;AACA,YAAIgT,OAAOxY,GAAGqN,EAAH,CAAM,KAAKjM,UAAL,CAAgByK,CAAtB,EAAyB,KAAKzK,UAAL,CAAgB0K,CAAzC,CAAX;AACA,aAAK9H,WAAL,GAAmB,IAAnB;AACA,YAAIyU,OAAOjT,KAAKnB,aAAhB;AACA8J,WAAGkK,WAAH,CAAe;AACXC,oBAAQ,CADG;AAEXI,uBAAWD,IAFA;AAGXtV,mBAAOqC,KAAKrC,KAHD;AAIXiP,kBAAMoG,KAAK3M,CAJA;AAKXwG,kBAAMmG,KAAK1M,CAAL,GAAS;AALJ,SAAf;AAOAtG,aAAKnB,aAAL,GAAqB,KAArB;AACH,KAx3DmB;;AA03DpB;;;;;;;;;;;AAWAwE,mBAAe,yBAAY;AACvB,YAAIrD,OAAO,IAAX;AACA;;AAEA,aAAKxB,WAAL,GAAmB,KAAnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK2U,YAAL;AACH,KAj5DmB;AAk5DpB;AACAA,kBAAc,wBAAY;AACtB,aAAK,IAAIC,UAAU,CAAnB,EAAsBA,UAAU,EAAhC,EAAoCA,SAApC,EAA+C;AAC3C,iBAAK/R,UAAL,GAAkB+R,OAAlB,EAA2BC,OAA3B;AACH;AACJ,KAv5DmB;;AAy5DpB;AACAjP,uBAAmB,6BAAY;AAC3B,YAAI0M,SAASpR,KAAKiK,IAAL,CAAUC,uBAAV,CAAkC,iBAAlC,EAAqD,CAArD,CAAT,MAAsE,CAA1E,EAA6E;AACzElK,iBAAKiK,IAAL,CAAU4G,qBAAV,CAAgC,iBAAhC,EAAmD,CAAnD;AACA,iBAAKrK,cAAL;AACH;AACJ,KA/5DmB;;AAi6DpB;;;;;;;;;;;AAWAiI,4BAAwB,kCAAY;AAChC,YAAI,CAAC,KAAK5M,GAAN,IAAa,CAAC7B,KAAK4B,QAAvB,EAAiC;AAC7B;AACH;AACD,YAAI,KAAK9C,WAAL,IAAoB,IAAxB,EAA8B;AAC1B,gBAAI8U,kBAAkB3K,GAAG4K,kBAAH,EAAtB;AACA,gBAAI7R,eAAe4R,gBAAgBE,MAAnC;AACA,iBAAKjS,GAAL,CAASkS,eAAT,CAAyB/R,YAAzB;AACA,iBAAKH,GAAL,CAASmS,mBAAT;AACA,iBAAKtW,UAAL,CAAgBuW,WAAhB,GAA8B,IAAInZ,GAAGoZ,WAAP,CAAmB,KAAKrS,GAAxB,CAA9B;AACA,iBAAKnE,UAAL,CAAgB+C,IAAhB,CAAqBuD,MAArB,GAA8B,IAA9B;AACH;;AAED;;AAEA;AAEH,KA77DmB;;AA+7DpB;;;;;;;;;;;AAWAkP,mBAAe,yBAAY;AACvB;AACA;AACA;AACH,KA98DmB;;AAg9DpB;;;;;;;;;;;AAWA1O,eAAW,qBAAY;;AAEnB;AACA,YAAI,KAAKtF,WAAL,IAAoB,IAAxB,EAA8B;AAC1B,gBAAI,KAAKN,QAAL,CAAc0G,MAAd,IAAwB,CAA5B,EAA+B;AAC3B,qBAAK1G,QAAL,CAAc,CAAd,IAAmB,KAAKM,WAAxB;AACH,aAFD,MAEO;AACH;AACA,oBAAIiV,UAAU,KAAd;AACA,qBAAK,IAAIpN,YAAY,CAArB,EAAwBA,YAAY,KAAKnI,QAAL,CAAc0G,MAAlD,EAA0DyB,WAA1D,EAAuE;AACnE,wBAAIqN,WAAW,KAAKxV,QAAL,CAAcmI,SAAd,CAAf;AACA;AACA,wBAAIqN,SAAS/M,EAAT,IAAe,KAAKnI,WAAL,CAAiBmI,EAApC,EAAwC;AACpC+M,iCAAS5Y,GAAT,GAAe4Y,SAAS5Y,GAAT,GAAe,KAAK0D,WAAL,CAAiB1D,GAA/C;AACA2Y,kCAAU,IAAV;AACA,6BAAKvV,QAAL,CAAcmI,SAAd,IAA2BqN,QAA3B;AACA;AACH;AACJ;AACD,oBAAID,WAAW,KAAf,EAAsB;AAClB,yBAAKvV,QAAL,CAAc,KAAKA,QAAL,CAAc0G,MAA5B,IAAsC,KAAKpG,WAA3C;AACH;AACJ;AACD;;AAEA,gBAAI+H,OAAO,IAAX;AACA,iBAAK,IAAIoN,UAAU,CAAnB,EAAsBA,UAAU5Z,OAAOuM,OAAP,CAAe1B,MAA/C,EAAuD+O,SAAvD,EAAkE;AAC9D,oBAAIC,KAAK7Z,OAAOuM,OAAP,CAAeqN,OAAf,CAAT;AACA;AACA,oBAAI,KAAKnV,WAAL,CAAiBmI,EAAjB,IAAuBiN,GAAGjN,EAA9B,EAAkC;AAC9BJ,2BAAOqN,EAAP;AACA;AACH;AACJ;;AAED,gBAAIrN,QAAQ,IAAZ,EAAkB;AACd,qBAAKqC,YAAL,CAAkB,SAASrC,KAAKsN,IAAhC;AACH;AACD,iBAAKrV,WAAL,GAAmB,IAAnB;AACH;;AAED,aAAKyJ,YAAL;AACA,aAAKb,YAAL,CAAkB,KAAKlJ,QAAvB;AACA,aAAKxC,WAAL,CAAiB4H,MAAjB,GAA0B,KAA1B;AACA,aAAK8F,YAAL;AACH,KAxgEmB;;AA0gEpB;;;;;;;;;;;AAWA6G,aAAS,iBAAUnS,MAAV,EAAkB;AACvB,YAAIgW,MAAM,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,CAAV;AACA,YAAIC,MAAMlM,KAAK0C,MAAL,EAAV;AACA,YAAIyJ,UAAUD,OAAOD,IAAIhW,SAAS,CAAb,CAArB;AACAwB,aAAKC,GAAL,CAAS0U,YAAT,aAAgCnW,MAAhC,aAA8CiW,GAA9C,iBAA6DC,OAA7D;AACA,YAAIA,OAAJ,EAAa;AACT,iBAAK5K,YAAL;AACA,iBAAKa,YAAL,CAAkBnM,MAAlB;AACA,iBAAKpC,WAAL,CAAiB4H,MAAjB,GAA0B,IAA1B;AACH;AACJ,KA/hEmB;;AAiiEpB;;;;;;;;;;;AAWA4Q,iBAAa,uBAAY;AACrB,aAAKxS,QAAL;AACA,aAAK2H,eAAL;AACH,KA/iEmB;;AAijEpB;;;;;;;;;;;AAWA8K,qBAAiB,2BAAY;AACzB,aAAKzS,QAAL;AACA,aAAK6O,qBAAL,CAA2B,KAA3B;AACH,KA/jEmB;;AAikEpB;;;;;;;;;;;AAWA6D,kBAAc,wBAAY;AACtB,aAAK7D,qBAAL,CAA2B,KAA3B;AACA,aAAK7O,QAAL;AACH;;AA/kEmB,CAAT,CAAf","file":"gamemain.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n    游戏的逻辑UI\n    游戏的操作的主要逻辑在这个module里面编写\n    created by gyc on 2018-08-01.\n*/\n\n// 倒入游戏涉及到的module\nvar config = require(\"AddOneConfig\")\nvar gezi = require(\"GeZi\")\nvar mask = require(\"GeZiMask\")\n\n\nvar gamemain = cc.Class({\n    extends: cc.Component,\n    properties: {\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        showalertmsg: {\n            default: null,\n            type: cc.Label\n        },\n        num: {\n            default: [],\n            type: cc.Label\n        },\n        allpngs: {\n            default: [],\n            type: cc.Prefab\n        },\n        celltile: {\n            default: null,\n            type: cc.Prefab\n        },\n        stars: {\n            default: [],\n            type: cc.Node\n        },\n        stopView: {\n            default: null,\n            type: cc.Node\n        },\n        tupojilu: {\n            default: null,\n            type: cc.Node\n        },\n\n        fuHuo: {\n            default: null,\n            type: cc.Node\n        },\n        stopV: {\n            default: null,\n            type: cc.Node\n        },\n        stopButton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlView: {\n            default: null,\n            type: cc.Node\n        },\n        openboxview: {\n            default: null,\n            type: cc.Node\n        },\n        itemview: {\n            default: null,\n            type: cc.Nodef\n        },\n\n        yyview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        goodEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        coolEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        awesEft: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        unbeliveEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        chuiziEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        loseScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        GameOver: {\n            default: null,\n            type: cc.Label\n        },\n        loseShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        musicBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n        itemhelpview: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        loseRestartGameBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        helpview: {\n            default: null,\n            type: cc.Node\n        },\n        pjlScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        effect: {\n            default: null,\n            type: cc.Prefab,\n        },\n        djitem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        gameOut: {\n            default: null,\n            type: cc.Sprite,\n        },\n        friendIcon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        stopViewBack: {\n            default: null,\n            type: cc.Sprite,\n        },\n        helpViewPre: {\n            default: null,\n            type: cc.Prefab,\n        },\n        mflqBtn: {\n            default: null,\n            type: cc.Node,\n        },\n\n\n        // 游戏的背景\n        bg: cc.Node,\n        // 重新开始的按钮\n        restart: cc.Button,\n        // 当前玩家得分\n        score: 0,\n        // 玩家当前体力 默认为最大值\n        point: config.maxphy_value,\n        // 当前点击的块ID\n        g_mask_samecnt: 0,\n        //点击的格子ID\n        g_clickid: -1,\n        //游戏状态-无，等待点击，移动，下落等\n        gamestate: 'null',\n        //游戏状态的计时\n        gamestatetime: 0,\n        //当前最大值\n        maxnum: 5,\n        //此次点击产生的连击数\n        lianjiNumber: 1,\n        // 存放每个格子的数组\n        g_gezi: [],\n        // 存放每个mask的数组\n        g_mask: [],\n        // 玩家当前道具\n        allitems: [],\n        // 此时距离上次点击屏幕有多长时间\n        curtimeawaypre: 10,\n        // 控制隐藏好友\n        isShowFIcon: false,\n        // 此局复活次数\n        recoverNumber: 0,\n        // 此局是否展示过破纪录\n        hadShowPjl: false,\n        // 此局是否展示过破纪录\n        allOpenItems: [],\n        // 此次连接产生的道具\n        produceItem: null,\n        // 此局是否是进入游戏后的重新开始的局\n        isRestartGame: false,\n        // 显示宝箱的数量\n        showboxNumber: 0,\n        // 上一次的生命值\n        prepoint: 0,\n        // 所有音效\n        allAudio: {\n            default: [],\n            type: cc.AudioSource,\n        },\n        // 时间段内玩家是否有点击过屏幕 true: 有点击 false: 没有点击 \n        hadClickScreen: false,\n        // 当前处于使用状态的道具ID\n        curUsingItemData: null,\n        // 是哦用道具不消耗生命\n        isUsingItem: false,\n        // 当前是否在刷新mask\n        refreshingMask: false,\n        // 此次点击是否有分数产生\n        hasProduceNewScore: false,\n    },\n\n    /*\n        调用: 场景加载完成后的回调\n        功能: 场景加载完成后的一些UI逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        this.pjlShareButtton.getComponent(\"ShareButton\").setShareConfig(tywx.ado.Constants.ShareConfig.POJILU_SHARE);\n        // 初始分数显示为0\n        this.scoreLabel.string = this.score;\n        var self = this;\n        // 循环生成初始游戏\n        for (var i = 0; i < config.geziNumber; i++) {\n            var node = new cc.Node(\"node\");\n            var cellt = cc.instantiate(this.celltile);\n            var script = cellt.getComponent(\"celltile\");\n            script.setId(i);\n            script.setClickCall(function (data, celltile) {\n                self.palyAudioByIndex(config.SOUNDS.POPUPCLOSE);\n                self.touchEndCallback(data, celltile);\n            })\n            this.allpngs.push(cellt);\n            cellt.parent = this.yyview;\n            cellt.position = cc.p(0, 0);\n            node.position = cc.p(0, 0);\n            node.parent = this.node;\n            var tmp_g = new gezi(i, this);\n            this.getAllgz().push(tmp_g);\n            var tmp_m = new mask(i, this);\n            this.getAllmask().push(tmp_m);\n        }\n        if (tywx.publicwx) {\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 720;\n            window.sharedCanvas.height = 1280;\n        }\n        var self = this;\n        // 游戏的点击逻辑\n        // this.node.on('touchend', function ( event ) {\n        //     if(self.stopView.active == false){\n        //         var mpos = event.touch.getLocation();\n        //         self.touchEndCallback(mpos.x,mpos.y);\n        //     }\n        // });\n        // 前一个产生的随机数\n        this.prerandomnumber = 0;\n        // 初始游戏\n        this.initgame();\n\n        this.isRestartGame = false;\n        //   // 游戏的点击逻辑\n        this.stopViewBack.node.on('touchstart', function (event) {\n            return true;\n        });\n\n        this.gameOut.node.on('touchstart', function (event) {\n            return true;\n        });\n\n\n\n        // var effect = cc.instantiate(this.effect);\n        // this.node.parent.addChild(effect);\n        // effect.x = 140;\n        // effect.y = 90;\n        this.showItem();\n        // 设置复活按钮的点击回调\n        tywx.LOGE(\"dddds\" + JSON.stringify(config));\n        this.fhBtnShow();\n        let fhbut = this.fuHuo.getComponent(\"ShareButton\");\n        if (fhbut) {\n            var fhcall = function () {\n                self.recoverGame();\n            }\n            var hycall = function () {\n                self.fhsbCallBack();\n            }\n\n            var errorcall = function () {\n                self.fhsbCallBack();\n            }\n            // 设置分享到组的成功回调\n            fhbut.setShareGroupCall(fhcall);\n            // 设置分享到好友的回调\n            fhbut.setSuccessCall(hycall);\n            // 设置分享失败后的回调\n            fhbut.setErrorCall(hycall);\n            fhbut.setShareConfig(tywx.ado.Constants.ShareConfig.RECOVER_GAME_SHARE);\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.showMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 5);\n\n        // // 开启一个进程循环隐藏即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.hideMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 7);\n\n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function () {\n            if (this.gamestate == config.gameState.waitclick) {\n                self.dealPlayerNoClickScreen();\n                this.hadClickScreen = false;\n            }\n        }, 5, cc.macro.REPEAT_FOREVER, 15);\n\n        this.node.on('touchend', function (event) {\n            self.itemhelpview.getComponent(\"ItemHelp\").hideView();\n            self.curUsingItemData = null;\n            self.itemhelpview.active = false;\n            self.dealPlayerClickScreen();\n            self.hadClickScreen = true;\n        });\n\n        // 设置免费领取的回调\n        let mflq = this.mflqBtn.getComponent(\"ShareButton\");\n        if (config.VCTR[\"v\" + tywx.SystemInfo.version] && config.VCTR[\"v\" + tywx.SystemInfo.version].auditing == true) {\n            mflq.setReactCall(true);\n        } else {\n            mflq.setReactCall(false);\n        }\n        mflq.setSuccessCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareGroupCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n        this.firstShowHelpView();\n        self.friendIcon.node.active = true;\n    },\n\n    fhBtnShow: function () {\n        console.log(\"当前的版本信息 =\" + tywx.SystemInfo.version + JSON.stringify(config));\n        if (config.VCTR[\"v\" + tywx.SystemInfo.version] && config.VCTR[\"v\" + tywx.SystemInfo.version].auditing == true) {\n            this.fuHuo.active = false;\n            this.loseRestartGameBtn.active = true;\n        } else {\n            this.fuHuo.active = true;\n            // this.loseRestartGameBtn.active = false;\n        }\n    },\n\n    /**\n     * 设置游戏状态\n     * 参数: state {Type: umber}\n     */\n    setWaitClickState: function () {\n        // 判断连接数的大小 如果连接数大于不同的值则产生不同的效果\n        if (this.gamestate != config.gameState.waitclick) {\n            this.gamestate = config.gameState.waitclick;\n            if (this.lianjiNumber >= config.lianjiEffects.sgood && this.point > 0) {\n                this.dealLianJiNumber();\n            } else {\n                if (this.hadShowPjl == false && this.point > 0 && this.hasProduceNewScore == true) {\n                    this.hasProduceNewScore = false;\n                    this.pjlCallBack();\n                }\n            }\n        }\n\n    },\n\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerNoClickScreen: function () {\n        if (this.hadClickScreen == false) {\n            var self = this;\n            this.hadClickScreen = true;\n            // 得到当前点击可以消除的格子\n            var allcellids = [];\n            for (var i = 0; i < config.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + 1;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                }\n            }\n\n            // for(var ci = 0; ci < allcellids.length; ci ++){\n            //     if(this.allpngs[allcellids[ci]] != null){\n            //        this.allpngs[allcellids[ci]].getComponent(\"celltile\").playDaijiEff();\n            //     }\n            // }\n            if (allcellids.length > 0) {\n                self.node.stopAllActions();\n                var delay = cc.delayTime(config.letUserClickTime);\n                var idindex = 0;\n                var call = cc.callFunc(function () {\n                    var cellid = allcellids[idindex];\n                    tywx.LOGE(idindex + \" = 当前的ID信息 = \" + cellid);\n                    if (idindex > 0) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                    }\n\n                    self.allpngs[cellid].getComponent(\"celltile\").playDaijiEff();\n                    idindex = idindex + 1;\n                    if (idindex == allcellids.length) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                        idindex = 0;\n                    }\n                });\n                var seq = cc.sequence(call, delay);\n                var rep = cc.repeatForever(seq);\n                self.node.runAction(rep);\n            }\n\n\n        }\n    },\n\n\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerClickScreen: function () {\n        // if(this.hadClickScreen == false){\n        this.node.stopAllActions();\n        for (var ci = 0; ci < config.geziNumber; ci++) {\n            if (this.allpngs[ci] != null) {\n                this.allpngs[ci].getComponent(\"celltile\").stopDaijiEff();\n            }\n        }\n        // }\n    },\n\n\n\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n\n    showPlayMethod: function () {\n        if (this.helpviewpre != null) {\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n        }\n        // 添加帮助界面\n        this.helpviewpre = cc.instantiate(this.helpViewPre);\n        this.helpviewpre.x = 360;\n        this.helpviewpre.y = 0;\n        this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n        var self = this;\n        //  this.helpviewscript.setIsGame(1);\n        this.helpviewscript.setCloseCall(function () {\n            //  self.showSubStopView();\n            self.showPlayMethod();\n        });\n        this.helpviewpre.parent = this.helpview;\n        this.helpview.active = !this.helpview.active ? true : false;\n    },\n\n    // 复活调用\n    fhsbCallBack: function () {\n        // this.showAlert(\"请分享到不同的群\");\n        // this.visibleControllButton(false);\n        // this.initgame();\n    },\n\n    // 显示当前的道具\n    showItem: function () {\n        tywx.LOGE(\"当局 = \")\n        for (var itemIndex = 0; itemIndex < config.allitem.length; itemIndex++) {\n            var item = cc.instantiate(this.djitem);\n            let itemsceipt = item.getComponent(\"DjItem\");\n            itemsceipt.setData(config.allitem[itemIndex]);\n            item.parent = this.itemview;\n            var self = this;\n            itemsceipt.setClickCall(function (data, item) {\n                // 判断当前游戏是否是等待点击状态 不是则不能使用道具\n                if (self.gamestate == config.gameState.waitclick) {\n                    // 判断道具数量足不足\n                    if (data.num > 0) {\n                        var canupdate = true;\n                        if (data.id == 4) {\n                            if (self.point == config.maxphy_value) {\n                                self.showAlert(\"当前生命值已满。\");\n                                canupdate = false;\n                            } else {\n                                self.recoverGame();\n                            }\n                        } else if (data.id == 5) { // 加1血\n                            tywx.LOGE(\"当前徐良= \" + self.point + \",\" + config.maxphy_value);\n                            if (self.point < config.maxphy_value) {\n                                self.showOneHpEf(item);\n                                self.prepoint = self.point;\n                                self.point = self.point + 1;\n                                self.drawPhyPoint();\n                                canupdate = true;\n                            } else {\n                                canupdate = false;\n                                self.showAlert(\"血量充足\");\n                            }\n                        } else {\n                            // canupdate = self.getAllPathByitemValue(data);\n                            self.itemhelpview.active = true;\n                            let itemhelpscript = self.itemhelpview.getComponent(\"ItemHelp\");\n                            if (data.id == 2 || data.id == 1) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showNum(data.value);\n                            } else if (data.id == 6) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showChuiZi();\n                            }\n                            canupdate = false;\n                        }\n                        // 显示\n                        if (canupdate == true) {\n                            data.num = data.num - 1;\n                            if (data.num < 0) {\n                                data.num = 0;\n                            }\n                            self.updateItemByData(data);\n                        }\n                    } else {\n                        self.showAlert(\"道具数量不足！\");\n                    }\n                }\n            });\n            item.x = 165 + (itemIndex * 125);\n            item.y = -50;\n            this.allOpenItems.push(item);\n        }\n        // 刷新道具显示\n        this.dealAllItems();\n    },\n\n\n    // 使用1血特效\n    showOneHpEf: function (item) {\n        if ((this.point != 5 || this.point != 1) && item.xx1Icon.node.getNumberOfRunningActions() == 0) {\n            var node = this.stars[this.point];\n            var newVec2 = node.convertToWorldSpace(cc.v2(node.x, node.y));\n            var new1Vec2 = item.xx1Icon.node.convertToWorldSpace(cc.v2(item.xx1Icon.node.x, item.xx1Icon.node.y));\n            var tmove = cc.moveTo(0.6, cc.p(newVec2.x - new1Vec2.x - node.x - 30, newVec2.y - Math.abs(new1Vec2.y) - node.y));\n            var seq = cc.sequence(tmove, cc.callFunc(function () {\n                item.xx1Icon.node.x = 0;\n                item.xx1Icon.node.y = 0;\n            }))\n            item.xx1Icon.node.runAction(seq);\n        }\n\n    },\n\n    // 更新某个道具\n    updateItemByData: function (data) {\n        if (data != null) {\n            tywx.LOGE(\"当前更新的数据 = \" + JSON.stringify(data));\n            for (var itmindex = 0; itmindex < this.allitems.length; itmindex++) {\n                var tdata = this.allitems[itmindex];\n                if (tdata.id == data.id) {\n                    tdata.num = data.num;\n                    this.allitems[itmindex] = tdata;\n                    this.storeAllItem();\n                    this.dealAllItems(this.allitems)\n                    break;\n                }\n            }\n        }\n    },\n    // 添加复活次数\n    addRecoverNumber: function () {\n        this.recoverNumber = this.recoverNumber + 1;\n        // 如果恢复的次数等于2的话 隐藏恢复按钮\n        if (this.recoverNumber == config.maxrnum) {\n            this.fuHuo.active = false;\n        } else {\n            this.fhBtnShow();\n        }\n    },\n\n    // 隔多久检查一下当前分数要超越的玩家\n    checkFriendsScore: function () {\n\n    },\n\n    /*\n        调用: 一段时间没有点击屏幕后调用\n        功能: 提示玩家点击某个方块可以消除\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEveryTime: function () {\n\n    },\n\n    showAlert: function (msg) {\n        wx.showToast({\n            title: msg,\n            icon: 'success',\n            duration: 1500,\n        });\n\n    },\n    showAlertMSG: function (msg) {\n        if (msg !== null && this.showalertmsg.node.getNumberOfRunningActions() === 0) {\n            this.showalertmsg.node.stopAllActions();\n            var self = this;\n            this.showalertmsg.node.active = true;\n            this.showalertmsg.string = msg;\n            var ty = self.showalertmsg.node.y;\n            let pri_pos = this.showalertmsg.node.position;\n            var rc = function () {\n                self.showalertmsg.node.active = false;\n                self.showalertmsg.node.y = ty - 160;\n                // 通过 tag 停止一个动作\n                self.showalertmsg.node.stopAllActions();\n                self.showalertmsg.node.position = pri_pos;\n            };\n            var move = cc.moveBy(2.5, cc.p(0, 260));\n\n            var call = cc.callFunc(rc);\n            var seq = cc.sequence(move, call);\n            this.showalertmsg.node.runAction(seq);\n        }\n        //tywx.ado.Utils.showWXToast(msg);\n    },\n\n\n    /*\n        调用: 点击的时候调用\n        功能: 点击方块产生特效\n        参数: [\n            touchpos: 当前触摸点的位置 type:{}\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEffect: function (touchpos) {\n\n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        if (this.stopView.active == false) {\n            this.stopV.active = false;\n            this.pjlView.active = false;\n            this.openboxview.active = false;\n        }\n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showSubStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        this.stopV.active = !this.stopV.active ? true : false;\n    },\n\n\n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            allitem: 给定的显示道具数据\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要 \n    */\n    dealAllItems: function (allitem) {\n        // tywx.Util.setItemToLocalStorage(\"allitems\",JSON.stringify([{id:1, num:2}])); \n        var items = tywx.Util.getItemFromLocalStorage(\"allitems\", [])\n        tywx.LOGE(\"处理的道具数据 = \" + items)\n        // 刷新道具显示\n        if (items != null && items != undefined && items != []) {\n            try {\n                if (allitem) {\n                    this.allitems = allitem;\n                } else {\n                    this.allitems = JSON.parse(items);\n                }\n\n            } catch (e) {\n                this.allitems = this.allitems;\n            }\n            for (var titemIndex = 0; titemIndex < this.allitems.length; titemIndex++) {\n                var storitem = this.allitems[titemIndex];\n                tywx.LOGE(titemIndex + \"道具数据 = \" + JSON.stringify(items))\n                for (var openitemIndex = 0; openitemIndex < this.allOpenItems.length; openitemIndex++) {\n                    var topenitem = this.allOpenItems[openitemIndex].getComponent(\"DjItem\");\n                    var tdata = topenitem.getData();\n                    if (tdata.id == storitem.id) {\n                        tdata.num = storitem.num;\n                        topenitem.setData(tdata);\n                        break;\n                    }\n                }\n            }\n        }\n    },\n\n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    produceItems: function (maxnum) {\n        // 随机道具的ID\n        var tindex = this.randomFrom(0, config.allitem.length - 1);\n        var itemid = config.allitem[tindex].id;\n        // 随机道具的数量\n\n        var itemnum = 1;\n        var randomNum = Math.random();\n        if (randomNum >= 1 - config.box_rate.sub1) {\n            itemid = config.allitem[0].id;\n        } else if (randomNum < 1 - config.box_rate.sub1 && randomNum >= 1 - config.box_rate.sub1 - config.box_rate.add2) {\n            itemid = config.allitem[1].id;\n        } else if (randomNum < 1 - config.box_rate.sub1 - config.box_rate.add2 && randomNum > config.box_rate.chui) {\n            itemid = config.allitem[2].id;\n        } else if (randomNum <= config.box_rate.chui) {\n            itemid = config.allitem[3].id;\n        }\n\n        this.produceItem = {\n            id: itemid,\n            num: itemnum\n        };\n        tywx.LOGE(\"当前产生的道具 \" + JSON.stringify(this.produceItem))\n\n    },\n\n    /*\n        调用: 产生随机数的地方调用\n        功能: 产生指定范围的随机数\n        参数: [\n            lowerValue: 范围的最小值\n            upperValue: 范围的最大值\n        ]\n        返回值:[\n            无\n        ]\n        思路: 通用方法\n    */\n    randomFrom: function (lowerValue, upperValue) {\n        return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);\n    },\n\n\n\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function () {\n        tywx.LOGE(\"helloc g\");\n        config = tywx.config != null ? tywx.config : config;\n    },\n\n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的格子容器\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllgz: function () {\n        return this.g_gezi;\n    },\n\n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的mask容器\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllmask: function () {\n        return this.g_mask;\n    },\n\n\n\n    /*  \n        调用:点击使用道具的时候调用\n        功能:给定一个值 根据这个值在格子中的数字进行和值运算 找出每个格子加上这个值是否可以连接\n        参数: [\n            data: 道具数据 type:Table.\n        ]\n        返回值: [\n            true || false: true可以使用 false不可使用道具\n        ]\n        思路: 逻辑需要\n    */\n\n    getAllPathByitemValue: function (data) {\n\n        if (this.gamestate == config.gameState.waitclick) {\n            this.gamestate = config.gameState.usingitem;\n            // 得出当前可连的所有路径\n            var allcellids = [];\n            for (var i = 0; i < config.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + data.value;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                    break;\n                }\n\n            }\n            this.resetAllMask();\n            //  tywx.LOGE(\"当前值可消除的mask\"+JSON.stringify(allcellids));\n            if (allcellids.length > 0) {\n                let i = allcellids[0];\n                var num = this.getAllgz()[i].num + data.value;\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n                this.getAllgz()[i].block.effectid = 0;\n                this.getAllgz()[i].block.effecttime = 0.5;\n                if (num > this.maxnum) {\n                    this.setMaxNumber(num);\n                }\n                this.g_clickid = allcellids[0];\n                this.gamestate = config.gameState.checkclick;\n                return true;\n            } else {\n                this.gamestate = config.gameState.checkclick;\n                tywx.ado.Utils.showWXToast(\"此块不能使用道具\")\n                return false;\n            }\n        }\n        return false;\n    },\n\n\n    /*\n        调用: 当点击屏幕的时候调用\n        功能: 处理点击屏幕产生的逻辑(主要是判断出当前点击的位置在某个格子上)\n        参数: [\n            x: 点击的X坐标\n            y: 点击点的Y坐标\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互接口\n    */\n    touchEndCallback: function (i, celltile) {\n        if (this.gamestate == config.gameState.waitclick) {\n            tywx.LOGE(\"当前即将使用的道具谁 = \" + JSON.stringify(this.curUsingItemData))\n            var curaddnum = 1;\n            var tdata = this.curUsingItemData;\n            this.curUsingItemData = null;\n            if ((tdata != null && tdata.id != 6) || tdata == null) {\n                if (tdata != null) {\n                    curaddnum = tdata.value;\n                }\n                // 判断当前的游戏状态是否为等待点击状态\n                // 根据点击的点 来判断当前点击在那个格子上面\n                var num = this.getAllgz()[i].num + curaddnum;\n                if (num < 1) {\n                    this.showAlert(\"不能使用此道具\");\n                } else {\n\n                    if (tdata != null) {\n                        tdata.num = tdata.num - 1;\n                        if (tdata.num < 0) {\n                            tdata.num = 0;\n                        }\n                        this.isUsingItem = true;\n                        this.updateItemByData(tdata);\n                    } else {\n                        this.isUsingItem = false;\n                    }\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblock();\n                    this.getAllgz()[i].block.effectid = 0;\n                    this.getAllgz()[i].block.effecttime = 0.5;\n                    if (num > this.maxnum) {\n                        this.setMaxNumber(num);\n                    }\n                    // 记录下当前点击的格子 和切换当前的游戏状态为检查点击状态\n                    this.g_clickid = i;\n                    this.gamestate = config.gameState.checkclick;\n                    // 在方块上产生点击特效\n                    var mpos = {};\n                    this.showTouchEffect(mpos);\n                    // 终止此次点击的循环处理\n                }\n            } else {\n                if (tdata != null) {\n                    tdata.num = tdata.num - 1;\n                    if (tdata.num < 0) {\n                        tdata.num = 0;\n                    }\n                    this.isUsingItem = true;\n                    this.updateItemByData(tdata);\n                } else {\n                    this.isUsingItem = false;\n                }\n                this.useCZClick(i, celltile);\n            }\n        }\n\n    },\n\n    // 设置最大值\n    setMaxNumber: function (num) {\n        this.maxnum = num;\n        this.maxScoreShow();\n    },\n\n    // 使用锤子类型的道具\n    useCZClick: function (id, celltile) {\n        var self = this;\n\n        self.chuiziEft.active = true;\n        self.chuiziEft.scale = 1.4;\n        self.chuiziEft.parent = celltile.node;\n        self.chuiziEft.x = 25;\n        self.chuiziEft.y = -30;\n        // self.chuiziEft.node.setLocalZOrder(1999);\n        var anim = this.chuiziEft.getComponent(cc.Animation);\n        var self = this;\n        var finishCallback = function () {\n            self.chuiziEft.active = false;\n            self.chuiziEft.parent = self.node;\n            anim.stop(\"chuiziza\");\n\n        }\n\n        var call = cc.callFunc(function () {\n            var tnumber = self.randomFrom(1, self.maxnum);\n            var tid = id;\n            for (var trow = 0; trow < 5; trow++) {\n                if (tid > config.geziNumber - 1) {\n                    break;\n                } else {\n                    if (tid + 5 <= config.geziNumber - 1) {\n                        var dis = 5 - self.getAllmask()[tid].y;\n                        self.getAllgz()[tid].block.posx = self.getAllgz()[tid].posx;\n                        self.getAllgz()[tid].block.posy = self.getAllgz()[tid].posy + dis * config.gezi_pitch;\n                        self.getAllgz()[tid].block.id_keep = -1;\n                        self.getAllgz()[tid].block.id_dest = tid;\n                        self.getAllgz()[tid].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                        self.getAllgz()[tid].block.adjustdrop();\n                        var num = self.getAllgz()[tid + 5].block.num;\n                        // self.getAllgz()[tid]\n                        // \n                        self.getAllgz()[tid].setnum(num);\n                        self.getAllgz()[tid].settoblockvalue();\n                    } else {\n                        var num = self.getrandomnum();\n                        self.getAllgz()[tid].setnum(num);\n                        var dis = 5 - self.getAllmask()[tid].y;\n                        self.getAllgz()[tid].block.posx = self.getAllgz()[tid].posx;\n                        self.getAllgz()[tid].block.posy = self.getAllgz()[tid].posy + dis * config.gezi_pitch;\n                        self.getAllgz()[tid].block.id_keep = -1;\n                        self.getAllgz()[tid].block.id_dest = tid;\n                        self.getAllgz()[tid].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                        self.getAllgz()[tid].block.adjustdrop();\n                        self.getAllgz()[tid].settoblockvalue();\n                        break;\n                    }\n                    tid = tid + 5;\n                }\n            }\n            self.lianjiNumber = 1;\n            self.gamestatetime = config.move_time;\n            self.gamestate = config.gameState.dodrop;\n        })\n\n        var delay = cc.delayTime(0.6);\n        var seq = cc.sequence(delay, call);\n        celltile.node.runAction(seq);\n        // self.getAllmask(tid).step = 0;\n\n        // self.refreshbymask();\n        // this.gamestate = config.gameState.checkclick;\n\n\n        var animateState = anim.play(\"chuiziza\");\n        animateState.wrapMode = cc.WrapMode.Normal;\n        anim.on('finished', finishCallback, self);\n    },\n\n    /*\n        调用: 每一帧都调用\n        功能: 游戏的主体逻辑都在这个方法里面\n        参数: [\n            dt: 系统渲染的时间\n        ]\n        返回值:[\n            无\n        ]\n        思路: 每一帧都调用适合处理这个游戏的玩法和操作  \n    */\n    update: function (dt) {\n\n        for (var i = 0; i < this.getAllgz().length; i++) {\n            this.getAllgz()[i].block.tickmove(dt);\n            this.getAllgz()[i].block.tickeffect(dt, this.star, this.star1);\n            this.getAllgz()[i].draw(this.allpngs[i]);\n        }\n\n        if (this.isShowFIcon) {\n            this._updateSubDomainCanvas();\n        }\n        switch (this.gamestate) {\n            /*case config.gameState.waitclick:{\n                if (this.hadShowPjl == false && this.point > 0) {\n                    this.pjlCallBack();\n                }\n                break;\n            }*/\n            case config.gameState.checkclick:\n                {\n                    this.resetAllMask();\n                    var sc = this.getAllgz()[this.g_clickid].num;\n                    this.lianjiNumber = 1;\n                    this.checkmaskbyid(this.g_clickid, 0);\n                    if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                        this.gamestatetime = config.move_time;\n                        this.score += config.baseScore * (this.g_mask_samecnt - 1) * sc;\n                        this.hasProduceNewScore = true;\n                        this.scoreLabel.string = this.score;\n                        for (var i = 0; i < config.geziNumber; i++) {\n                            // 判断是否已经标记 \n                            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                                this.getAllgz()[i].block.speed_keep = config.gezi_pitch * this.getAllmask()[i].step / config.move_time;\n                                this.getAllgz()[i].block.actiontime_keep = config.move_time / this.getAllmask()[i].step;\n                                this.getAllgz()[i].block.id_keep = i;\n                                this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                                this.getAllgz()[i].block.adjustmove();\n                            }\n                        }\n                        this.gamestate = config.gameState.domove;\n                    } else {\n                        this.hasProduceNewScore = false;\n                        if (this.isUsingItem == true) {\n                            this.isUsingItem = false;\n                        } else {\n                            this.point--;\n                            this.drawPhyPoint();\n                        }\n                        // 判断游戏是否结束\n                        if (this.point <= 0) {\n                            this.gameOverCallBack()\n                        } else {\n                            // this.gamestate = config.gameState.waitclick;\n                            this.setWaitClickState();\n                            this.finalDealMask();\n                        }\n                        // if (this.hadShowPjl == false) {\n                        //     this.pjlCallBack();\n                        // }\n                    }\n                    break;\n                }\n                //格子组合移动，进入掉落状态\n            case config.gameState.domove:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        this.dealDoMove()\n                    }\n                    break;\n                }\n                //格子掉落完，进入再次检查合并状态，或者等待点击状态\n            case config.gameState.dodrop:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        this.dealLianJiLogic();\n                    }\n                    break;\n                }\n\n        }\n    },\n\n    /*\n        调用: 处于移动状态的时候调用\n        功能: 移动的逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealDoMove() {\n        //  this.star.node.active = false;\n\n        this.gamestatetime = config.move_time;\n        var num = this.getAllgz()[this.g_clickid].num + 1;\n        this.getAllgz()[this.g_clickid].setnum(num);\n        this.getAllgz()[this.g_clickid].settoblock();\n        this.getAllgz()[this.g_clickid].block.effectid = 1;\n        this.getAllgz()[this.g_clickid].block.effecttime = 0.5;\n        if (num > this.maxnum) {\n            this.setMaxNumber(num);\n        }\n        if (this.allpngs[this.g_clickid]) {\n            var audioIndex = this.lianjiNumber + 1;\n            if (audioIndex > config.SOUNDS.COMBO.length - 1) {\n                audioIndex = config.SOUNDS.COMBO.length - 1;\n            }\n            if (audioIndex < 0) {\n                audioIndex = 0;\n            }\n            this.palyAudioByIndex(config.SOUNDS.COMBO[audioIndex]);\n            this.allpngs[this.g_clickid].getComponent(\"celltile\").playZhEff();\n        }\n        //  tywx.LOGE(\"Hellocd\");\n        this.refreshbymask();\n        this.gamestate = config.gameState.dodrop;\n\n    },\n\n\n    /*\n        调用: 产生最大数字的时候调用\n        功能: 产生最大数字的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 逻辑需要\n    */\n    maxScoreShow: function () {\n        tywx.LOGD(\"产生最大数字\", this.maxnum);\n    },\n\n    /*\n        调用: 游戏处于掉落状态的时候调用\n        功能: 掉落状态的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealLianJiLogic: function () {\n        var bfound = false;\n        for (var j = 0; j < config.geziNumber; j++) {\n            this.resetAllMask();\n            var sc = this.getAllgz()[j].num;\n            this.checkmaskbyid(j, 0);\n            if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                this.gamestatetime = config.move_time;\n                this.lianjiNumber++;\n                this.score += config.baseScore * sc * (this.g_mask_samecnt - 1);\n                this.scoreLabel.string = this.score;\n                for (var i = 0; i < 25; i++) {\n                    if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                        this.getAllgz()[i].block.speed_keep = config.gezi_pitch * this.getAllmask()[i].step / config.move_time;\n                        this.getAllgz()[i].block.actiontime_keep = config.move_time / this.getAllmask()[i].step;\n                        this.getAllgz()[i].block.id_keep = i;\n                        this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                        this.getAllgz()[i].block.adjustmove();\n                    }\n                }\n                bfound = true;\n                this.g_clickid = j;\n                this.gamestate = config.gameState.domove;\n                if (this.point < 5)\n                    this.point++;\n                this.drawPhyPoint();\n                break;\n            } \n\n        }\n\n        if (bfound == false) {\n            // this.gamestate = config.gameState.waitclick;\n            this.setWaitClickState();\n            this.finalDealMask();\n        }\n    },\n\n    /*\n        调用: 当玩家点击一次交付结束后调用\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 多元化游戏元素\n            sgood:3,   // cool \n            cgood:4,   // good\n            bgood:5,   // awesome\n            maxgood:6, // unbelive\n       \n        UNBLIEVEABLE: 'sounds/unblieveable.mp3',\t\n    },\n    */\n    dealLianJiNumber: function () {\n        if (this.lianjiNumber == config.lianjiEffects.sgood) {\n            this.playGood();\n            this.palyAudioByIndex(config.SOUNDS.GOOD);\n            this.showboxNumber = 1;\n        } else if (this.lianjiNumber == config.lianjiEffects.cgood) {\n            this.playCool();\n            this.palyAudioByIndex(config.SOUNDS.COOL);\n            this.showboxNumber = 2;\n        } else if (this.lianjiNumber == config.lianjiEffects.bgood) {\n            this.playAwesome();\n            this.palyAudioByIndex(config.SOUNDS.AWESOME);\n            this.showboxNumber = 3;\n        } else if (this.lianjiNumber >= config.lianjiEffects.maxgood) {\n            this.playUnbelive();\n            this.palyAudioByIndex(config.SOUNDS.UNBLIEVEABLE);\n            this.showboxNumber = 4;\n        } else {\n            this.showboxNumber = 0;\n        }\n\n        //    else if(this.lianjiNumber > 1) {\n        //       this.showBox(1);  \n        //    }\n    },\n\n\n\n    /*\n            调用: 出动画的时候\n            功能: 播放特定的音效\n            参数: [\n                index: 音效的下标 type: Number\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n    palyAudioByIndex: function (fileName) {\n        tywx.ado.AudioManager.playSound(fileName);\n    },\n\n\n\n\n    // 播放good特效\n    playGood: function () {\n        var self = this;\n        var animation = this.goodEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n    // 播放good特效\n    playCool: function () {\n        var self = this;\n        var animation = this.coolEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n\n    // 播放awesome特效\n    playAwesome: function () {\n        var self = this;\n        this.awesEft.active = true;\n        var animation = this.awesEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                this.awesEft.active = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"awesome\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n    // 播放awesome特效\n    playUnbelive: function () {\n        var self = this;\n        this.unbeliveEft.active = true;\n        var animation = this.unbeliveEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                self.unbeliveEft.active = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"unbli\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n\n\n\n\n    /*\n            调用: 当宝箱数据有更新的时候存储\n            功能: 存储宝箱数据到本地\n            参数: [\n                无\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n    storeAllItem: function () {\n        // console.log(\"当前存储的数据 = \"+JSON.stringify(this.allitems))\n        if (this.allitems) {\n            tywx.Util.setItemToLocalStorage(\"allitems\", JSON.stringify(this.allitems));\n        }\n    },\n\n\n    /*\n        调用: 1: 游戏初始的时候调用，2: 每次点击的时候没有连接的时候调用，3: 重新开始游戏的时候调用。\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏元素需求\n    */\n    drawPhyPoint: function () {\n        // var ctx = this.bg.getComponent(cc.Graphics);\n        // ctx.clear();\n        // for(var i = 0;i< this.point; i++){\n        //     let color = config.showphy_pros.colors[i];\n        //     ctx.fillColor = cc.color(color[0],color[1],color[2]);\n        //     var x = (config.swidth - ((config.showphy_pros.phy_num - (config.maxphy_value - this.point)) * config.gezi_pitch)) / 2 + (config.showphy_pros.width + 10) * i;\n        //     var y = 980;\n        //     var w = config.showphy_pros.width;\n        //     var h = config.showphy_pros.height;\n        //     ctx.roundRect(x,y,w,h,config.showphy_pros.radius);\n        //     ctx.fill();\n        // }\n        if (this.prepoint == this.point) {\n            return;\n        }\n        this.prepoint = this.point;\n        for (var starIndex = 0; starIndex < 5; starIndex++) {\n            if (this.point >= starIndex + 1) {\n                this.stars[starIndex].getComponent(\"LifeStar\").show();\n            } else {\n                this.stars[starIndex].getComponent(\"LifeStar\").hide();\n            }\n        }\n\n    },\n\n    /*\n        调用: 1: 游戏重新开始的时候需要隐藏，2: 游戏结束的时候需要显示\n        功能: gameOver和restart按钮的显示隐藏控制\n        参数: [\n            vis: false: 隐藏元素，true: 显示元素\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    visibleControllButton: function (vis) {\n        this.gameOut.node.active = vis;\n    },\n\n    /*\n        调用: 1: 游戏结束的时候需要显示\n        功能: 游戏结束的逻辑\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    gameOverCallBack: function () {\n        // 判断此次得分是否创纪录\n        this.gamestate = config.gameState.gameover;\n        this.visibleControllButton(true);\n        // 刷新当前的显示得分\n        this.loseScoreLabel.string = this.score;\n    },\n\n    /*\n        调用: 1: 刷新当前得分的时候\n        功能: 展示破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    pjlCallBack: function () {\n        // 判断此次得分是否创纪录\n        if (this.score > parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0))) {\n            // console.log(typeof this.score + \"\" + typeof tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)+ \" \" + this.score+\"是否破纪录= \"+parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)));\n            this.hadShowPjl = true;\n            this.visibleControllButton(false);\n            var delay = cc.delayTime(0.3);\n            var self = this;\n            var call = cc.callFunc(function () {\n                self.stopView.active = true;\n                self.pjlView.active = true;\n                self.pjlView.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.1, 1.1),\n                        cc.scaleTo(0.2, 1)\n                    )\n                );\n            });\n            var seq = cc.sequence(delay, call);\n            tywx.LOGD(\"是否破纪录21212\");\n            this.node.runAction(seq);\n            // var animation = this.tupojilu.getComponent(cc.Animation);\n            // this.newPlayerEf.active = false;\n            // animation.stop(\"tupojilu\");\n            // 刷新破纪录的显示\n            this.pjlScoreLabel.string = this.score;\n        }\n    },\n\n\n    /*\n        调用: 点击展示破纪录画面时候的关闭按钮调用\n        功能: 关闭破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    closePjlView: function () {\n        // 判断此次得分是否创纪录\n        this.showStopView();\n        this.pjlView.active = false;\n    },\n\n\n    finalDealMask: function () {\n        for (var i = 0; i < config.geziNumber; i++) {\n            this.getAllgz()[i].settoblock();\n        }\n    },\n\n\n    /*\n        调用: 1: 游戏开始的时候调用 2: 游戏重新开始的时候调用\n        功能: 游戏初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    initgame: function () {\n        this.storeScore();\n        this.hasProduceNewScore = false;\n        this.score = 0;\n        this.scoreLabel.string = this.score;\n        this.point = config.maxphy_value;\n        this.drawPhyPoint();\n        this.maxnum = config.maxphy_value;\n        this.recoverNumber = 0;\n        this.fhBtnShow();\n        this.isRestartGame = true;\n        this.hadShowPjl = false;\n        for (var i = 0; i < config.geziNumber; i++) {\n            var num = this.getrandomnum();\n            this.getAllgz()[i].setnum(num);\n            this.getAllgz()[i].settoblock();\n        }\n\n        var needcheck = true;\n\n        while (needcheck == true) {\n            needcheck = false;\n            for (var i = 0; i < config.geziNumber; i++) {\n                this.resetAllMask();\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= 3) {\n                    this.changenumbymask();\n                    needcheck = true;\n                }\n            }\n        }\n\n        this.gamestate = config.gameState.waitclick;\n        this.visibleControllButton(false)\n    },\n\n    /*\n        调用: 1: 游戏处于检查点击的时候调用 2: 游戏开始的时候调用 3: 处理格子连接的时候调用\n        功能: 重置棋盘mask，为重新探路做准备\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    resetAllMask: function () {\n        if (this.refreshingMask == false) {\n            this.refreshingMask = true\n            for (var i = 0; i < config.geziNumber; i++) {\n                this.getAllmask()[i].reset();\n            }\n            this.g_mask_samecnt = 1;\n            this.refreshingMask = false;\n        }\n\n    },\n\n\n    /*\n        调用: 1: 处理游戏点击的时候调用 2:游戏格子连接的时候调用\n        功能: 递归寻找给定ID的格子 并在mask数组里面进行标记\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要 通过mask标记来找出每次连接的格子\n    */\n    checkmaskbyid: function (id, step) {\n        this.getAllmask()[id].step = step;\n        // 从左找\n        this.checkDirPaths(id, step, 0, -1);\n        this.checkDirPaths(id, step, 0, -5);\n        this.checkDirPaths(id, step, 4, 1);\n        this.checkDirPaths(id, step, 4, 5);\n    },\n\n    /*\n        调用: 1: checkmaskbyid寻找可连的点\n        功能: 检查是否可以继续连接\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n            bj: 寻找边界 type: Number\n            add: 叠加数 上下加减5 左右加减1 type: Number\n        ]\n        返回值:[\n           无\n        ]\n        思路: 根据递归寻找下一个点的连接情况\n    */\n    checkDirPaths: function (id, step, bj, add) {\n        if (Math.abs(add) == 4 && this.getAllmask()[id] != null && this.getAllmask()[id].y == bj) {\n            return false\n        } else if (Math.abs(add) == 1 && this.getAllmask()[id] != null && this.getAllmask()[id].x == bj) {\n            return false\n        }\n        if (this.getAllmask()[id] == null || this.getAllmask()[id + add] == null) {\n            return false;\n        }\n        if (this.getAllmask()[id + add].num != this.getAllmask()[id].num || this.getAllmask()[id + add].step <= step) {\n            return false;\n        }\n\n        if (this.getAllmask()[id + add].step == 9999999) {\n            this.g_mask_samecnt++;\n        }\n\n        this.getAllmask()[id + add].step = step;\n        this.getAllmask()[id + add].from = id;\n        this.checkmaskbyid(id + add, step + 1, bj, add)\n    },\n\n\n    /*\n        调用: 游戏初始的时候调用\n        功能: 改变格子的数字 通过mask\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    changenumbymask: function () {\n        for (var i = 0; i < config.geziNumber; i++) {\n            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                var num = this.getrandomnum();\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n            }\n        }\n    },\n\n    /*\n         调用: 1, 游戏初始的时候调用 2, 改变格子的数字的时候调用\n         功能: 创建随机的新块 返回新快的显示\n         参数: [\n            无\n         ]\n         返回值:[\n            num: 返回格子的显示数组\n         ]\n         思路: 游戏逻辑需要\n     */\n    getrandomnum: function () {\n        var tnum = this.maxnum - 1;\n        if (tnum < config.initGameMaxNum)\n            tnum = config.initGameMaxNum;\n\n        var num = parseInt(Math.random() * 10000) % tnum + 1;\n        // if(this.prerandomnumber == num){\n        //     return this.getrandomnum();\n        // }else{\n        //     this.prerandomnumber = num;\n        // }\n        return num;\n    },\n\n    /*\n        调用: 使用满血道具 或者分享游戏的时候调用\n        功能: 复活游戏\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    recoverGame: function () {\n        if (this.recoverNumber < config.maxrnum) {\n            this.point = config.maxphy_value;\n            this.drawPhyPoint();\n            this.gamestate = config.gameState.waitclick;\n            this.addRecoverNumber();\n            this.visibleControllButton(false);\n        } else {\n            this.showAlert(\"复活次数已达\" + config.maxrnum + \"次，不能继续复活。\")\n            this.initgame();\n        }\n\n    },\n\n    /*\n        调用: 游戏处于移动状态的时候调用\n        功能: 创建新的棋盘，为掉落做准备\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    refreshbymask: function () {\n        for (var i = 0; i < config.geziNumber; i++) {\n            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                this.getAllmask()[i].from = -1;\n                var topid = -1;\n                var tmpid = i + 5;\n                while (tmpid < config.geziNumber) {\n                    if (this.getAllmask()[tmpid].step == 9999999 || this.getAllmask()[tmpid].step == 0) {\n                        topid = tmpid;\n                        break;\n                    }\n                    tmpid += 5;\n                }\n\n                var luck = false;\n                var sjs = Math.random();\n                var ttindex = 0;\n                for (var sindex = 1; sindex < config.luck_block.score.length - 1; sindex++) {\n                    if (this.score >= config.luck_block.score[sindex]) {\n                        ttindex = sindex;\n                        break;\n                    }\n                }\n                var tgl = config.luck_block.rate[ttindex];\n                if (sjs <= tgl) {\n                    luck = true;\n                }\n\n                if (topid != -1) { //\n                    var dis = this.getAllmask()[topid].y - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[topid].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[topid].posy;\n                    this.getAllgz()[i].block.id_keep = topid;\n                    this.getAllgz()[i].block.id_dest = i;\n                    this.getAllgz()[i].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    this.getAllgz()[topid].step = 888;\n                    var num = -1;\n                    if (luck) {\n                        num = this.getAllgz()[topid].num;\n                    } else {\n                        num = this.getPjNumberName(i);\n                    }\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                    this.getAllgz()[i].block.effectid = this.getAllgz()[topid].block.effectid;\n                    this.getAllgz()[i].block.effecttime = this.getAllgz()[topid].block.effecttime;\n                    this.getAllgz()[topid].block.effectid = -1;\n                    this.getAllgz()[topid].block.effecttime = 0;\n                } else {\n                    var dis = 5 - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[i].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[i].posy + dis * config.gezi_pitch;\n                    this.getAllgz()[i].block.id_keep = -1;\n                    this.getAllgz()[i].block.id_dest = i;\n                    this.getAllgz()[i].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    var num = -1;\n                    if (luck) {\n                        num = this.getPjNumberName(i);\n                        num = parseInt(num + 2.0 - 4.0 * Math.random());\n                        if (num <= 0) num = 1;\n                    } else {\n                        num = this.getrandomnum();\n                    }\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                }\n            }\n        }\n    },\n\n    // 找出个格子的周围的数 算出平均数 来设置当前格子的数子\n    getPjNumberName: function (id) {\n        var allids = [id - 1, id + 4, id + 5, id + 6, id + 1, id - 6, id - 5, id - 4];\n        var total = 0;\n        var gzindex = 1;\n        for (var tcellIndex = 0; tcellIndex < allids.length; tcellIndex++) {\n            if (this.getAllmask()[tcellIndex]) {\n                total = total + this.getAllgz()[tcellIndex].block.num;\n                gzindex = gzindex + 1;\n            }\n        }\n        let pjNumber = total / gzindex;\n        // console.log(\"当前格子产生的平均数 = \"+parseInt(pjNumber));\n        return parseInt(pjNumber);\n    },\n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 返回首页\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    backFirstPage: function () {\n        this.storeScore();\n        cc.director.loadScene(\"gamestart\", this.destroyFinish);\n    },\n\n    storeScore: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)) < this.score) {\n            tywx.Util.setItemToLocalStorage(\"maxscore\", this.score);\n        }\n        if (tywx.publicwx) {\n            wx.postMessage({\n                method: 4,\n                score: this.score,\n            });\n        }\n    },\n\n    backCall: function () {\n        //    this.showMinFriend();\n        this.showAlert(\"测试提示信息\")\n        // this.getAllPathByitemValue({value:2});\n    },\n\n    /*\n        调用: 单独开启的线程调用\n        功能: 开启玩家即将超逾的好友显示 开始更新update\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showMinFriend: function () {\n        var self = this;\n        var bpos = cc.v2(this.stopButton.x, this.stopButton.y);\n        this.isShowFIcon = true;\n        var rest = self.isRestartGame;\n        wx.postMessage({\n            method: 5,\n            isrestart: rest,\n            score: self.score,\n            posx: bpos.x,\n            posy: bpos.y - 30,\n        });\n        self.isRestartGame = false;\n    },\n\n    /*\n         调用: 单独开启的线程调用\n         功能: 隐藏玩家即将超逾的好友显示 停止更新update\n         参数: [\n            无\n         ]\n         返回值:[\n            无\n         ]\n         思路: 游戏逻辑需要\n     */\n    hideMinFriend: function () {\n        var self = this;\n        // self.friendIcon.node.active = false;\n\n        this.isShowFIcon = false;\n        return;\n        // wx.postMessage({\n        //     method: 6,\n        //     rank:false,\n        //     friendicon:false,\n        // });\n        this.printMaskMsg();\n    },\n    // 打印格子信息\n    printMaskMsg: function () {\n        for (var gzIndex = 0; gzIndex < 25; gzIndex++) {\n            this.getAllmask()[gzIndex].showMSG();\n        }\n    },\n\n    // 首次弹出帮助界面\n    firstShowHelpView: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\", 0)) === 0) {\n            tywx.Util.setItemToLocalStorage(\"hadshowhelpview\", 1);\n            this.showPlayMethod();\n        }\n    },\n\n    /*\n        调用: update的时候调用 \n        功能: 刷新子域即将超越的玩家纹理\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    _updateSubDomainCanvas: function () {\n        if (!this.tex || !tywx.publicwx) {\n            return;\n        }\n        if (this.isShowFIcon == true) {\n            var openDataContext = wx.getOpenDataContext();\n            var sharedCanvas = openDataContext.canvas;\n            this.tex.initWithElement(sharedCanvas);\n            this.tex.handleLoadedTexture();\n            this.friendIcon.spriteFrame = new cc.SpriteFrame(this.tex);\n            this.friendIcon.node.active = true;\n        }\n\n        // if(this.isShowFIcon){\n\n        // }\n\n    },\n\n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 清除当前的节点\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    destroyFinish: function () {\n        // if(this.node){\n        //    this.node.destroy();\n        // }\n    },\n\n    /*\n        调用: 点击免费领取宝箱的时候调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    lingQuBox: function () {\n\n        // 查看当前ID的道具玩家是否存在\n        if (this.produceItem != null) {\n            if (this.allitems.length == 0) {\n                this.allitems[0] = this.produceItem;\n            } else {\n                // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                var findata = false;\n                for (var itemIndex = 0; itemIndex < this.allitems.length; itemIndex++) {\n                    var itemdata = this.allitems[itemIndex];\n                    // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                    if (itemdata.id == this.produceItem.id) {\n                        itemdata.num = itemdata.num + this.produceItem.num;\n                        findata = true;\n                        this.allitems[itemIndex] = itemdata;\n                        break;\n                    }\n                }\n                if (findata == false) {\n                    this.allitems[this.allitems.length] = this.produceItem;\n                }\n            }\n            // 组织显示得到的信息\n\n            var item = null;\n            for (var djIndex = 0; djIndex < config.allitem.length; djIndex++) {\n                var dj = config.allitem[djIndex];\n                // tywx.LOGE(JSON.stringify(dj)+\"当前得到的宝箱数据  = \"+JSON.stringify(this.produceItem));\n                if (this.produceItem.id == dj.id) {\n                    item = dj;\n                    break;\n                }\n            }\n\n            if (item != null) {\n                this.showAlertMSG(\"领取成功\" + item.name);\n            }\n            this.produceItem = null;\n        }\n\n        this.storeAllItem();\n        this.dealAllItems(this.allitems);\n        this.openboxview.active = false;\n        this.showStopView();\n    },\n\n    /*\n        调用: 当条件达到某个值的时候显示领取宝箱\n        功能: 领取道具\n        参数: [\n           maxnum: 此次可以领取的道具的最大数量。\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showBox: function (maxnum) {\n        let arr = [0.3, 0.4, 0.9, 1];\n        let ran = Math.random();\n        let is_show = ran <= arr[maxnum - 1];\n        tywx.ado.logWithColor(`maxnum:${maxnum},ran:${ran},is_show:${is_show}`);\n        if (is_show) {\n            this.showStopView();\n            this.produceItems(maxnum)\n            this.openboxview.active = true;\n        }\n    },\n\n    /*\n        调用: 逻辑部分\n        功能: 暂停界面的重新开始游戏\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    restartGame: function () {\n        this.initgame();\n        this.showSubStopView();\n    },\n\n    /*\n         调用: 逻辑部分\n         功能: 失败界面的重新开始游戏\n         参数: [\n            无\n         ]\n         返回值:[\n            无\n         ]\n         思路: 游戏逻辑需要\n     */\n    loseRestartGame: function () {\n        this.initgame();\n        this.visibleControllButton(false);\n    },\n\n    /*\n        调用: 点击失败界面上的关闭按钮调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    startNewGame: function () {\n        this.visibleControllButton(false)\n        this.initgame();\n    }\n\n\n\n\n\n});"]}