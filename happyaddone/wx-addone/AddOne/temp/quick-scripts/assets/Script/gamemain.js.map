{"version":3,"sources":["gamemain.js"],"names":["config","require","gezi","mask","gamemain","cc","Class","extends","Component","properties","scoreLabel","default","type","Label","showalertmsg","num","allpngs","Prefab","celltile","stars","Node","stopView","tupojilu","fuHuo","stopV","stopButton","pjlView","openboxview","itemview","Nodef","yyview","goodEft","coolEft","awesEft","unbeliveEft","chuiziEft","loseScoreLabel","GameOver","loseShareButtton","pjlShareButtton","musicBtn","itemhelpview","loseRestartGameBtn","helpview","pjlScoreLabel","effect","djitem","gameOut","Sprite","friendIcon","stopViewBack","helpViewPre","mflqBtn","bg","restart","Button","score","point","maxphy_value","g_mask_samecnt","g_clickid","gamestate","gamestatetime","maxnum","lianjiNumber","g_gezi","g_mask","allitems","curtimeawaypre","isShowFIcon","recoverNumber","hadShowPjl","allOpenItems","produceItem","isRestartGame","showboxNumber","prepoint","allAudio","AudioSource","hadClickScreen","curUsingItemData","isUsingItem","refreshingMask","onLoad","string","self","i","geziNumber","node","cellt","instantiate","script","getComponent","setId","setClickCall","data","palyAudioByIndex","SOUNDS","POPUPCLOSE","touchEndCallback","push","parent","position","p","tmp_g","getAllgz","tmp_m","getAllmask","tywx","publicwx","tex","Texture2D","window","sharedCanvas","width","height","prerandomnumber","initgame","on","event","showItem","LOGE","JSON","stringify","fhBtnShow","fhbut","fhcall","recoverGame","hycall","fhsbCallBack","errorcall","setShareGroupCall","setSuccessCall","setErrorCall","setShareConfig","ado","Constants","ShareConfig","RECOVER_GAME_SHARE","Timer","setTimer","showMinFriend","macro","REPEAT_FOREVER","hideMinFriend","gameState","waitclick","dealPlayerNoClickScreen","hideView","active","dealPlayerClickScreen","mflq","VCTR","SystemInfo","version","auditing","setReactCall","lingQuBox","FREE_GIFT_SHARE","firstShowHelpView","allcellids","resetAllMask","checkmaskbyid","minCanRemoveNumber","length","stopAllActions","delay","delayTime","letUserClickTime","idindex","call","callFunc","cellid","precellid","stopDaijiEff","playDaijiEff","seq","sequence","rep","repeatForever","runAction","ci","showPlayMethod","helpviewpre","destroy","x","y","helpviewscript","setCloseCall","itemIndex","allitem","item","itemsceipt","setData","canupdate","id","showAlert","showOneHpEf","drawPhyPoint","itemhelpscript","showNum","value","showChuiZi","updateItemByData","dealAllItems","xx1Icon","getNumberOfRunningActions","newVec2","convertToWorldSpace","v2","new1Vec2","tmove","moveTo","Math","abs","itmindex","tdata","storeAllItem","addRecoverNumber","maxrnum","checkFriendsScore","showTouchEveryTime","msg","wx","showToast","title","icon","duration","showAlertMSG","ty","pri_pos","rc","move","moveBy","showTouchEffect","touchpos","showStopView","showSubStopView","items","Util","getItemFromLocalStorage","undefined","parse","e","titemIndex","storitem","openitemIndex","topenitem","getData","produceItems","tindex","randomFrom","itemid","itemnum","randomNum","random","box_rate","sub1","add2","chui","lowerValue","upperValue","floor","ctor","getAllPathByitemValue","usingitem","setnum","settoblock","block","effectid","effecttime","setMaxNumber","checkclick","Utils","showWXToast","curaddnum","mpos","useCZClick","maxScoreShow","scale","anim","Animation","finishCallback","stop","tnumber","tid","trow","dis","posx","posy","gezi_pitch","id_keep","id_dest","speed_keep","move_time","adjustdrop","settoblockvalue","getrandomnum","dodrop","animateState","play","wrapMode","WrapMode","Normal","update","dt","tickmove","tickeffect","star","star1","draw","_updateSubDomainCanvas","sc","baseScore","step","actiontime_keep","from","adjustmove","domove","gameOverCallBack","finalDealMask","pjlCallBack","dealDoMove","dealLianJiLogic","audioIndex","COMBO","playZhEff","refreshbymask","LOGD","bfound","j","dealLianJiNumber","lianjiEffects","sgood","playGood","GOOD","cgood","playCool","COOL","bgood","playAwesome","AWESOME","maxgood","playUnbelive","UNBLIEVEABLE","fileName","AudioManager","playSound","animation","showBox","animationState","setItemToLocalStorage","starIndex","show","hide","visibleControllButton","vis","gameover","parseInt","scaleTo","closePjlView","storeScore","needcheck","changenumbymask","reset","checkDirPaths","bj","add","tnum","initGameMaxNum","topid","tmpid","sjs","ttindex","sindex","luck_block","tgl","rate","getPjNumberName","allids","total","gzindex","tcellIndex","pjNumber","backFirstPage","director","loadScene","destroyFinish","postMessage","method","backCall","bpos","rest","isrestart","printMaskMsg","gzIndex","showMSG","openDataContext","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","findata","itemdata","djIndex","dj","name","arr","ran","is_show","logWithColor","restartGame","loseRestartGame","startNewGame"],"mappings":"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","file":"gamemain.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n    游戏的逻辑UI\n    游戏的操作的主要逻辑在这个module里面编写\n    created by gyc on 2018-08-01.\n*/\n\n// 倒入游戏涉及到的module\nvar config = require(\"AddOneConfig\")\nvar gezi   = require(\"GeZi\")\nvar mask   = require(\"GeZiMask\")\n\n\nvar gamemain = cc.Class({\n    extends: cc.Component,\n    properties: {\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        showalertmsg: {\n            default: null,\n            type: cc.Label\n        },\n        num: {\n            default: [],\n            type: cc.Label\n        },\n        allpngs: {\n            default: [],\n            type: cc.Prefab\n        },\n        celltile: {\n            default: null,\n            type: cc.Prefab\n        },\n        stars: {\n            default: [],\n            type: cc.Node\n        },\n        stopView: {\n            default: null,\n            type: cc.Node\n        },\n        tupojilu: {\n            default: null,\n            type: cc.Node\n        },\n        \n        fuHuo: {\n            default: null,\n            type: cc.Node\n        },\n        stopV: {\n            default: null,\n            type: cc.Node\n        },\n        stopButton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlView: {\n            default: null,\n            type: cc.Node\n        },\n        openboxview: {\n            default: null,\n            type: cc.Node\n        },\n        itemview: {\n            default: null,\n            type: cc.Nodef\n        },\n       \n        yyview: {\n            default: null,\n            type: cc.Node,\n        },\n     \n        goodEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        coolEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        awesEft: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        unbeliveEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        chuiziEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        loseScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        GameOver: {\n            default: null,\n            type: cc.Label\n        },\n        loseShareButtton:{\n            default: null,\n            type: cc.Node\n        },\n        pjlShareButtton:{\n            default: null,\n            type: cc.Node\n        },\n        musicBtn:{\n            default: null,\n            type: cc.Node\n        },\n\n        itemhelpview:{\n            default: null,\n            type: cc.Node\n        },\n\n        \n        loseRestartGameBtn:{\n            default: null,\n            type: cc.Node\n        },\n\n        \n        helpview:{\n            default: null,\n            type: cc.Node\n        },\n        pjlScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        effect:{\n            default:null,\n            type: cc.Prefab,\n        },\n        djitem:{\n            default:null,\n            type: cc.Prefab,\n        },\n        gameOut:{\n            default:null,\n            type:cc.Sprite,\n        },\n        friendIcon:{\n            default:null,\n            type:cc.Sprite,\n        },\n        stopViewBack:{\n            default:null,\n            type:cc.Sprite,\n        },\n        helpViewPre:{\n            default: null,\n            type:cc.Prefab,\n        },\n        mflqBtn:{\n            default: null,\n            type:cc.Node,\n        },\n\n         \n        // 游戏的背景\n        bg:cc.Node, \n        // 重新开始的按钮\n        restart:cc.Button,  \n        // 当前玩家得分\n        score: 0,\n        // 玩家当前体力 默认为最大值\n        point:config.maxphy_value,   \n        // 当前点击的块ID\n        g_mask_samecnt:0,\n        //点击的格子ID\n        g_clickid:-1,\n        //游戏状态-无，等待点击，移动，下落等\n        gamestate:'null', \n        //游戏状态的计时\n        gamestatetime:0,\n        //当前最大值\n        maxnum:5, \n        //此次点击产生的连击数\n        lianjiNumber:1, \n        // 存放每个格子的数组\n        g_gezi:[],\n        // 存放每个mask的数组\n        g_mask:[],\n        // 玩家当前道具\n        allitems:[],\n        // 此时距离上次点击屏幕有多长时间\n        curtimeawaypre:10,\n        // 控制隐藏好友\n        isShowFIcon:false,\n        // 此局复活次数\n        recoverNumber:0,\n        // 此局是否展示过破纪录\n        hadShowPjl:false,\n        // 此局是否展示过破纪录\n        allOpenItems:[],\n        // 此次连接产生的道具\n        produceItem:null,\n        // 此局是否是进入游戏后的重新开始的局\n        isRestartGame:false,\n        // 显示宝箱的数量\n        showboxNumber: 0,\n        // 上一次的生命值\n        prepoint:0,\n        // 所有音效\n        allAudio:{\n            default:[],\n            type:cc.AudioSource,\n        },\n        // 时间段内玩家是否有点击过屏幕 true: 有点击 false: 没有点击 \n        hadClickScreen:false,\n        // 当前处于使用状态的道具ID\n        curUsingItemData: null,\n        // 是哦用道具不消耗生命\n        isUsingItem: false,\n        // 当前是否在刷新mask\n        refreshingMask: false,\n    },\n\n    /*\n        调用: 场景加载完成后的回调\n        功能: 场景加载完成后的一些UI逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        // 初始分数显示为0\n        this.scoreLabel.string = this.score;\n        var self = this;\n        // 循环生成初始游戏\n        for(var i=0;i<config.geziNumber;i++)\n        {\n            var node     = new cc.Node(\"node\");\n            var cellt = cc.instantiate(this.celltile);\n            var script = cellt.getComponent(\"celltile\");\n            script.setId(i);\n            script.setClickCall(function(data, celltile){\n                self.palyAudioByIndex(config.SOUNDS.POPUPCLOSE);\n                self.touchEndCallback(data, celltile);\n            })\n            this.allpngs.push(cellt);\n            cellt.parent = this.yyview;\n            cellt.position = cc.p(0,0);\n            node.position = cc.p(0,0);\n            node.parent   = this.node;\n            var tmp_g = new gezi(i,this);\n            this.getAllgz().push(tmp_g);\n            var tmp_m = new mask(i, this);\n            this.getAllmask().push(tmp_m);\n        }\n        if(tywx.publicwx){\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 720;\n            window.sharedCanvas.height = 1280;\n        }\n        var self = this;\n        // 游戏的点击逻辑\n        // this.node.on('touchend', function ( event ) {\n        //     if(self.stopView.active == false){\n        //         var mpos = event.touch.getLocation();\n        //         self.touchEndCallback(mpos.x,mpos.y);\n        //     }\n        // });\n        // 前一个产生的随机数\n        this.prerandomnumber = 0;\n        // 初始游戏\n        this.initgame();\n        \n        this.isRestartGame = false;\n        //   // 游戏的点击逻辑\n        this.stopViewBack.node.on('touchstart', function ( event ) {\n            return true;\n        });\n\n        this.gameOut.node.on('touchstart', function ( event ) {\n            return true;\n        });\n\n\n        \n        // var effect = cc.instantiate(this.effect);\n        // this.node.parent.addChild(effect);\n        // effect.x = 140;\n        // effect.y = 90;\n        this.showItem();\n        // 设置复活按钮的点击回调\n        tywx.LOGE(\"dddds\"+JSON.stringify(config));\n        this.fhBtnShow();\n        let fhbut = this.fuHuo.getComponent(\"ShareButton\");\n        if (fhbut){\n            var fhcall = function(){\n                self.recoverGame();\n            } \n            var hycall = function(){\n                self.fhsbCallBack();\n            } \n\n            var errorcall = function(){\n                self.fhsbCallBack();\n            } \n            // 设置分享到组的成功回调\n            fhbut.setShareGroupCall(fhcall);\n            // 设置分享到好友的回调\n            fhbut.setSuccessCall(hycall);\n            // 设置分享失败后的回调\n            fhbut.setErrorCall(hycall);\n            fhbut.setShareConfig(tywx.ado.Constants.ShareConfig.RECOVER_GAME_SHARE);\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function(){\n            self.showMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 5);\n\n        // // 开启一个进程循环隐藏即将超逾的玩家\n        tywx.Timer.setTimer(self, function(){\n            self.hideMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 7);\n        \n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function(){\n            if(this.gamestate == config.gameState.waitclick){\n                self.dealPlayerNoClickScreen();\n                this.hadClickScreen = false;\n            }\n        }, 5, cc.macro.REPEAT_FOREVER, 15);\n        \n        this.node.on('touchend', function ( event ) {\n            self.itemhelpview.getComponent(\"ItemHelp\").hideView();\n            self.curUsingItemData = null;\n            self.itemhelpview.active = false;\n            self.dealPlayerClickScreen();\n            self.hadClickScreen = true;\n        });\n\n        // 设置免费领取的回调\n        let mflq = this.mflqBtn.getComponent(\"ShareButton\");\n        if(config.VCTR[\"v\"+tywx.SystemInfo.version]  && config.VCTR[\"v\"+tywx.SystemInfo.version].auditing == true){\n            mflq.setReactCall(true);     \n        }else{\n            mflq.setReactCall(false);     \n        }\n        mflq.setSuccessCall(function(){\n            self.lingQuBox();\n        });\n        mflq.setShareGroupCall(function(){\n            self.lingQuBox();\n        });\n        mflq.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n        this.firstShowHelpView();\n        self.friendIcon.node.active = true;\n    },\n    \n    fhBtnShow:function(){\n        if(config.VCTR[\"v\"+tywx.SystemInfo.version]  && config.VCTR[\"v\"+tywx.SystemInfo.version].auditing == true){\n            this.fuHuo.active = false;\n            this.loseRestartGameBtn.active = true;\n        }else{\n            this.fuHuo.active = true;\n            // this.loseRestartGameBtn.active = false;\n        }\n    },\n\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerNoClickScreen:function(){\n         if(this.hadClickScreen == false){\n            var self = this;\n            this.hadClickScreen = true;\n            // 得到当前点击可以消除的格子\n            var allcellids = [];\n            for(var i = 0; i < config.geziNumber; i++){\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + 1;\n                this.checkmaskbyid(i, 0);\n                if(this.g_mask_samecnt >= config.minCanRemoveNumber){\n                    allcellids[allcellids.length] = i;\n                }\n            }\n            \n            // for(var ci = 0; ci < allcellids.length; ci ++){\n            //     if(this.allpngs[allcellids[ci]] != null){\n            //        this.allpngs[allcellids[ci]].getComponent(\"celltile\").playDaijiEff();\n            //     }\n            // }\n            if(allcellids.length > 0){\n                self.node.stopAllActions();\n                var delay = cc.delayTime(config.letUserClickTime);\n                var idindex = 0;\n                var call  = cc.callFunc(function(){\n                    var cellid = allcellids[idindex];\n                    tywx.LOGE(idindex + \" = 当前的ID信息 = \"+cellid);\n                    if(idindex > 0){\n                       var precellid = allcellids[idindex - 1];\n                       self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                    }\n                    \n                    self.allpngs[cellid].getComponent(\"celltile\").playDaijiEff();\n                    idindex = idindex + 1;\n                    if(idindex == allcellids.length){\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                        idindex = 0;\n                    }\n                });\n                var seq = cc.sequence(call,delay);\n                var rep = cc.repeatForever(seq);\n                self.node.runAction(rep);\n            }\n           \n\n        }\n    },\n\n\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerClickScreen:function(){\n        // if(this.hadClickScreen == false){\n            this.node.stopAllActions();\n            for(var ci = 0; ci < config.geziNumber; ci ++){\n                if(this.allpngs[ci] != null){\n                   this.allpngs[ci].getComponent(\"celltile\").stopDaijiEff();\n                }\n            }\n        // }\n   },\n\n\n    \n    \n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n\n    showPlayMethod:function(){\n         if(this.helpviewpre != null){\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n         }\n         // 添加帮助界面\n         this.helpviewpre = cc.instantiate(this.helpViewPre);\n         this.helpviewpre.x = 360;\n         this.helpviewpre.y = 0;\n         this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n         var self = this;\n        //  this.helpviewscript.setIsGame(1);\n         this.helpviewscript.setCloseCall(function(){\n            //  self.showSubStopView();\n             self.showPlayMethod();\n         });\n         this.helpviewpre.parent = this.helpview;\n         this.helpview.active = !this.helpview.active ? true : false;\n    },\n\n    // 复活调用\n    fhsbCallBack:function(){\n        // this.showAlert(\"请分享到不同的群\");\n        // this.visibleControllButton(false);\n        // this.initgame();\n    },\n\n    // 显示当前的道具\n    showItem:function(){\n        tywx.LOGE(\"当局 = \")\n        for(var itemIndex = 0; itemIndex < config.allitem.length; itemIndex ++){\n            var item = cc.instantiate(this.djitem);\n            let itemsceipt = item.getComponent(\"DjItem\");\n            itemsceipt.setData(config.allitem[itemIndex]);\n            item.parent = this.itemview;\n            var self = this;\n            itemsceipt.setClickCall(function(data, item){\n                // 判断当前游戏是否是等待点击状态 不是则不能使用道具\n                if(self.gamestate == config.gameState.waitclick){\n                    // 判断道具数量足不足\n                    if(data.num > 0){\n                        var canupdate = true;\n                        if(data.id == 4 ){\n                            if(self.point == config.maxphy_value){\n                               self.showAlert(\"当前生命值已满。\");\n                               canupdate = false;\n                            }else{\n                               self.recoverGame();\n                            }\n                        }else if(data.id == 5){ // 加1血\n                            tywx.LOGE(\"当前徐良= \"+self.point+\",\"+config.maxphy_value);\n                            if(self.point < config.maxphy_value){\n                                self.showOneHpEf(item); \n                                self.prepoint = self.point;\n                                self.point = self.point + 1;\n                                self.drawPhyPoint();\n                                canupdate = true;\n                            }else{\n                                canupdate = false;\n                                self.showAlert(\"血量充足\");\n                            }\n                        }\n                        else{\n                            // canupdate = self.getAllPathByitemValue(data);\n                            self.itemhelpview.active = true;\n                            let itemhelpscript = self.itemhelpview.getComponent(\"ItemHelp\");\n                            if(data.id == 2 || data.id == 1){\n                               self.curUsingItemData = data;\n                               itemhelpscript.showNum(data.value);\n                            }else if(data.id == 6){\n                               self.curUsingItemData = data;\n                               itemhelpscript.showChuiZi();\n                            }\n                            canupdate = false;\n                        }\n                        // 显示\n                        if(canupdate == true){\n                            data.num = data.num - 1;\n                            if(data.num < 0){\n                                data.num = 0;\n                            }\n                            self.updateItemByData(data);\n                        }\n                    }else{\n                        self.showAlert(\"道具数量不足！\");\n                    }\n                }\n            });\n            item.x = 165 + (itemIndex * 125);\n            item.y = -50;\n            this.allOpenItems.push(item);\n        }\n        // 刷新道具显示\n        this.dealAllItems();\n    },\n    \n\n    // 使用1血特效\n    showOneHpEf:function(item){\n        if((this.point != 5 || this.point != 1) && item.xx1Icon.node.getNumberOfRunningActions() == 0 ){\n            var node = this.stars[this.point];\n            var newVec2 = node.convertToWorldSpace(cc.v2(node.x, node.y));\n            var new1Vec2 = item.xx1Icon.node.convertToWorldSpace(cc.v2(item.xx1Icon.node.x, item.xx1Icon.node.y));\n            var tmove = cc.moveTo(0.6,cc.p(newVec2.x - new1Vec2.x - node.x - 30,newVec2.y - Math.abs(new1Vec2.y) - node.y));\n            var seq   = cc.sequence(tmove,cc.callFunc(function(){\n                item.xx1Icon.node.x = 0;\n                item.xx1Icon.node.y = 0;\n            }))\n            item.xx1Icon.node.runAction(seq);\n        }\n        \n    },\n\n    // 更新某个道具\n    updateItemByData:function(data){\n        if(data != null){\n          tywx.LOGE(\"当前更新的数据 = \"+JSON.stringify(data));\n          for(var itmindex = 0; itmindex < this.allitems.length; itmindex ++){\n              var tdata = this.allitems[itmindex];\n              if(tdata.id == data.id){\n                 tdata.num = data.num;\n                 this.allitems[itmindex] = tdata;\n                 this.storeAllItem();\n                 this.dealAllItems(this.allitems)\n                 break;\n              }\n          }\n        }\n    },\n    // 添加复活次数\n    addRecoverNumber: function(){\n        this.recoverNumber = this.recoverNumber + 1;\n        // 如果恢复的次数等于2的话 隐藏恢复按钮\n        if(this.recoverNumber == config.maxrnum){\n           this.fuHuo.active = false;\n        }else{\n           this.fhBtnShow();\n        }\n    },\n\n    // 隔多久检查一下当前分数要超越的玩家\n    checkFriendsScore:function(){\n         \n    },\n\n    /*\n        调用: 一段时间没有点击屏幕后调用\n        功能: 提示玩家点击某个方块可以消除\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEveryTime:function(){\n        \n    },\n    \n    showAlert: function(msg){\n        wx.showToast({\n            title: msg,\n            icon: 'success',\n            duration: 1500,\n        });\n       \n    },\n    showAlertMSG:function(msg){\n        if(msg !== null && this.showalertmsg.node.getNumberOfRunningActions() === 0){\n           this.showalertmsg.node.stopAllActions(); \n           var self = this;\n           this.showalertmsg.node.active = true; \n           this.showalertmsg.string = msg;\n           var ty = self.showalertmsg.node.y;\n           let pri_pos = this.showalertmsg.node.position;\n           var rc = function(){\n                self.showalertmsg.node.active = false;\n                self.showalertmsg.node.y = ty - 160;\n                // 通过 tag 停止一个动作\n                self.showalertmsg.node.stopAllActions();\n                self.showalertmsg.node.position = pri_pos;\n           };\n           var move = cc.moveBy(2.5,cc.p(0, 260));\n           \n           var call = cc.callFunc(rc);\n           var seq = cc.sequence(move, call);\n           this.showalertmsg.node.runAction(seq);\n        }\n        //tywx.ado.Utils.showWXToast(msg);\n    },\n     \n\n    /*\n        调用: 点击的时候调用\n        功能: 点击方块产生特效\n        参数: [\n            touchpos: 当前触摸点的位置 type:{}\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEffect:function(touchpos){\n       \n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showStopView:function(){\n       this.stopView.active = !this.stopView.active ? true : false;\n       if(this.stopView.active == false){\n          this.stopV.active = false;\n          this.pjlView.active = false;\n          this.openboxview.active = false;\n       }\n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n   showSubStopView:function(){\n       this.stopView.active = !this.stopView.active ? true : false;\n       this.stopV.active = !this.stopV.active ? true : false;\n   },\n\n    \n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            allitem: 给定的显示道具数据\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要 \n    */\n    dealAllItems:function(allitem){\n        // tywx.Util.setItemToLocalStorage(\"allitems\",JSON.stringify([{id:1, num:2}])); \n        var items = tywx.Util.getItemFromLocalStorage(\"allitems\", [])\n        tywx.LOGE(\"处理的道具数据 = \"+items) \n        // 刷新道具显示\n         if(items != null && items != undefined && items != []){\n           try{\n              if(allitem){\n                this.allitems = allitem;\n              }else{\n                this.allitems = JSON.parse(items);\n              }\n              \n           }catch(e){\n              this.allitems = this.allitems; \n           }\n           for(var titemIndex = 0; titemIndex < this.allitems.length; titemIndex++){\n                 var storitem = this.allitems[titemIndex];\n                 tywx.LOGE(titemIndex + \"道具数据 = \"+JSON.stringify(items)) \n                 for(var openitemIndex = 0; openitemIndex < this.allOpenItems.length; openitemIndex ++){\n                    var topenitem = this.allOpenItems[openitemIndex].getComponent(\"DjItem\");\n                    var tdata = topenitem.getData();\n                    if(tdata.id == storitem.id){\n                        tdata.num = storitem.num;\n                        topenitem.setData(tdata);\n                        break;\n                    }\n                  }\n             }  \n         }\n    },\n\n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    produceItems:function(maxnum){\n        // 随机道具的ID\n        var tindex = this.randomFrom(0, config.allitem.length - 1);\n        var itemid = config.allitem[tindex].id;\n        // 随机道具的数量\n         \n        var itemnum =  1;\n        var randomNum = Math.random();\n        if(randomNum >= 1 - config.box_rate.sub1 ){\n           itemid = config.allitem[0].id;\n        }else if(randomNum < 1 - config.box_rate.sub1 && randomNum >= 1 - config.box_rate.sub1 - config.box_rate.add2){\n           itemid = config.allitem[1].id;\n        }else if(randomNum < 1 - config.box_rate.sub1 - config.box_rate.add2 && randomNum > config.box_rate.chui){\n           itemid = config.allitem[2].id;\n        }else if(randomNum <= config.box_rate.chui){\n           itemid = config.allitem[3].id;\n         }\n        \n        this.produceItem = {id:itemid, num:itemnum};\n        tywx.LOGE(\"当前产生的道具 \"+JSON.stringify(this.produceItem))\n       \n    },\n    \n    /*\n        调用: 产生随机数的地方调用\n        功能: 产生指定范围的随机数\n        参数: [\n            lowerValue: 范围的最小值\n            upperValue: 范围的最大值\n        ]\n        返回值:[\n            无\n        ]\n        思路: 通用方法\n    */\n    randomFrom:function(lowerValue,upperValue)\n    {\n        return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);\n    },\n\n \n\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor:function(){\n        tywx.LOGE(\"helloc g\");\n       config = tywx.config != null? tywx.config : config;\n    },\n    \n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的格子容器\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllgz :function(){\n        return this.g_gezi;\n    },\n    \n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的mask容器\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllmask: function(){\n        return this.g_mask;\n    },\n    \n\n \n    /*  \n        调用:点击使用道具的时候调用\n        功能:给定一个值 根据这个值在格子中的数字进行和值运算 找出每个格子加上这个值是否可以连接\n        参数: [\n            data: 道具数据 type:Table.\n        ]\n        返回值: [\n            true || false: true可以使用 false不可使用道具\n        ]\n        思路: 逻辑需要\n    */\n\n    getAllPathByitemValue:function(data){\n         \n        if(this.gamestate == config.gameState.waitclick){\n            this.gamestate = config.gameState.usingitem;\n            // 得出当前可连的所有路径\n            var allcellids = [];\n            for(var i = 0; i < config.geziNumber; i++){\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + data.value;\n                this.checkmaskbyid(i, 0);\n                if(this.g_mask_samecnt >= config.minCanRemoveNumber){\n                    allcellids[allcellids.length] = i;\n                    break;\n                }\n                \n            }\n            this.resetAllMask();\n            //  tywx.LOGE(\"当前值可消除的mask\"+JSON.stringify(allcellids));\n            if(allcellids.length > 0){\n                let i = allcellids[0];\n                var  num = this.getAllgz()[i].num + data.value;\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n                this.getAllgz()[i].block.effectid   = 0;\n                this.getAllgz()[i].block.effecttime = 0.5;\n                if(num > this.maxnum){\n                    this.setMaxNumber(num);\n                }\n                this.g_clickid =  allcellids[0];\n                this.gamestate = config.gameState.checkclick;\n                return true;\n            }else{\n                this.gamestate = config.gameState.checkclick;\n                tywx.ado.Utils.showWXToast(\"此块不能使用道具\")\n                return false;\n            }\n        }\n        return false;\n    },\n    \n\n    /*\n        调用: 当点击屏幕的时候调用\n        功能: 处理点击屏幕产生的逻辑(主要是判断出当前点击的位置在某个格子上)\n        参数: [\n            x: 点击的X坐标\n            y: 点击点的Y坐标\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互接口\n    */\n    touchEndCallback:function(i, celltile){\n        if( this.gamestate  == config.gameState.waitclick){\n                tywx.LOGE(\"当前即将使用的道具谁 = \"+JSON.stringify(this.curUsingItemData))\n                var curaddnum = 1;\n                var tdata = this.curUsingItemData;\n                this.curUsingItemData = null;\n                if((tdata != null && tdata.id != 6) || tdata == null){\n                    if(tdata != null){\n                       curaddnum = tdata.value;\n                    }\n                    // 判断当前的游戏状态是否为等待点击状态\n                    // 根据点击的点 来判断当前点击在那个格子上面\n                    var  num = this.getAllgz()[i].num + curaddnum;\n                    if(num < 1){\n                       this.showAlert(\"不能使用此道具\");\n                    }else{\n                        \n                        if(tdata != null){\n                            tdata.num = tdata.num - 1;\n                            if(tdata.num < 0){\n                               tdata.num = 0;\n                            }\n                            this.isUsingItem = true;\n                            this.updateItemByData(tdata);\n                        }else{\n                            this.isUsingItem = false;\n                        }\n                        this.getAllgz()[i].setnum(num);\n                        this.getAllgz()[i].settoblock();\n                        this.getAllgz()[i].block.effectid   = 0;\n                        this.getAllgz()[i].block.effecttime = 0.5;\n                        if(num > this.maxnum){\n                            this.setMaxNumber(num);\n                        }\n                        // 记录下当前点击的格子 和切换当前的游戏状态为检查点击状态\n                        this.g_clickid  = i;\n                        this.gamestate  = config.gameState.checkclick;\n                        // 在方块上产生点击特效\n                        var mpos = {};\n                        this.showTouchEffect(mpos);\n                        // 终止此次点击的循环处理\n                    }\n                }else{\n                    if(tdata != null){\n                        tdata.num = tdata.num - 1;\n                        if(tdata.num < 0){\n                           tdata.num = 0;\n                        }\n                        this.isUsingItem = true;\n                        this.updateItemByData(tdata);\n                    }else{\n                        this.isUsingItem = false;\n                    }\n                    this.useCZClick(i,celltile);\n                }\n        }\n       \n    },\n\n    // 设置最大值\n    setMaxNumber:function(num) {\n        this.maxnum = num;\n        this.maxScoreShow();\n    },\n    \n    // 使用锤子类型的道具\n    useCZClick: function(id, celltile){\n        var self = this;\n        \n        self.chuiziEft.active = true;\n        self.chuiziEft.scale = 1.4;\n        self.chuiziEft.parent = celltile.node;\n        self.chuiziEft.x = 25;\n        self.chuiziEft.y = -30;\n        // self.chuiziEft.node.setLocalZOrder(1999);\n        var anim = this.chuiziEft.getComponent(cc.Animation);\n        var self = this;\n        var finishCallback = function(){\n            self.chuiziEft.active = false;\n            self.chuiziEft.parent = self.node;\n            anim.stop(\"chuiziza\");\n            \n        }\n\n        var call = cc.callFunc(function(){\n            var tnumber = self.randomFrom(1, self.maxnum);\n            var tid = id;\n            for(var trow = 0; trow < 5; trow ++){\n                if(tid > config.geziNumber - 1){\n                   break;\n                }else{\n                    if(tid + 5 <= config.geziNumber - 1){\n                        var dis = 5 - self.getAllmask()[tid].y;\n                        self.getAllgz()[tid].block.posx    = self.getAllgz()[tid].posx;\n                        self.getAllgz()[tid].block.posy    = self.getAllgz()[tid].posy + dis * config.gezi_pitch;\n                        self.getAllgz()[tid].block.id_keep = -1;\n                        self.getAllgz()[tid].block.id_dest = tid;\n                        self.getAllgz()[tid].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                        self.getAllgz()[tid].block.adjustdrop();\n                        var num = self.getAllgz()[tid + 5].block.num;\n                        // self.getAllgz()[tid]\n                        // \n                        self.getAllgz()[tid].setnum(num);\n                        self.getAllgz()[tid].settoblockvalue();\n                    }else{\n                        var num = self.getrandomnum();\n                        self.getAllgz()[tid].setnum(num);\n                        var dis = 5 - self.getAllmask()[tid].y;\n                        self.getAllgz()[tid].block.posx    = self.getAllgz()[tid].posx;\n                        self.getAllgz()[tid].block.posy    = self.getAllgz()[tid].posy + dis * config.gezi_pitch;\n                        self.getAllgz()[tid].block.id_keep = -1;\n                        self.getAllgz()[tid].block.id_dest = tid;\n                        self.getAllgz()[tid].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                        self.getAllgz()[tid].block.adjustdrop();\n                        self.getAllgz()[tid].settoblockvalue();\n                        break;\n                    }\n                    tid = tid + 5;\n                }\n            }\n            self.lianjiNumber = 1;\n            self.gamestatetime = config.move_time;\n            self.gamestate = config.gameState.dodrop;\n        })\n\n        var delay = cc.delayTime(0.6);\n        var seq = cc.sequence(delay, call);\n        celltile.node.runAction(seq);\n        // self.getAllmask(tid).step = 0;\n       \n        // self.refreshbymask();\n        // this.gamestate = config.gameState.checkclick;\n      \n\n        var animateState = anim.play(\"chuiziza\");\n        animateState.wrapMode = cc.WrapMode.Normal;\n        anim.on('finished',  finishCallback,    self);\n    },\n\n    /*\n        调用: 每一帧都调用\n        功能: 游戏的主体逻辑都在这个方法里面\n        参数: [\n            dt: 系统渲染的时间\n        ]\n        返回值:[\n            无\n        ]\n        思路: 每一帧都调用适合处理这个游戏的玩法和操作  \n    */\n    update: function (dt) {\n         \n        for (var i = 0; i < this.getAllgz().length; i++) {\n            this.getAllgz()[i].block.tickmove(dt);\n            this.getAllgz()[i].block.tickeffect(dt,this.star,this.star1);\n            this.getAllgz()[i].draw(this.allpngs[i]);\n        }\n        \n        if(this.isShowFIcon){\n           this._updateSubDomainCanvas();\n        }\n        switch (this.gamestate){\n            case config.gameState.checkclick:{ \n                this.resetAllMask();\n                var sc = this.getAllgz()[this.g_clickid].num;\n                this.lianjiNumber = 1;\n                this.checkmaskbyid(this.g_clickid, 0);\n                if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                    this.gamestatetime = config.move_time;\n                    this.score += config.baseScore * (this.g_mask_samecnt - 1) * sc;\n                    this.scoreLabel.string = this.score;\n                    for(var i = 0; i < config.geziNumber; i ++){\n                        // 判断是否已经标记 \n                        if(this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0){\n                            this.getAllgz()[i].block.speed_keep = config.gezi_pitch * this.getAllmask()[i].step / config.move_time;\n                            this.getAllgz()[i].block.actiontime_keep = config.move_time / this.getAllmask()[i].step;\n                            this.getAllgz()[i].block.id_keep = i;\n                            this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                            this.getAllgz()[i].block.adjustmove();\n                        }\n                    }\n                    this.gamestate = config.gameState.domove;\n                }else{\n                    if(this.isUsingItem == true){\n                       this.isUsingItem = false;\n                    }else{\n                       this.point --;\n                       this.drawPhyPoint();\n                    }\n                    // 判断游戏是否结束\n                    if(this.point <= 0) {\n                       this.gameOverCallBack()\n                    }else{\n                       this.gamestate = config.gameState.waitclick;\n                       this.finalDealMask();\n                    }\n                    if(this.hadShowPjl == false){\n                       this.pjlCallBack();\n                    }\n                }\n                break;\n            }\n            //格子组合移动，进入掉落状态\n            case config.gameState.domove:{\n                this.gamestatetime -= dt;\n                if(this.gamestatetime <= 0){\n                   this.dealDoMove()\n                }\n                break;\n            }\n            //格子掉落完，进入再次检查合并状态，或者等待点击状态\n            case config.gameState.dodrop:\n            {\n                this.gamestatetime -= dt;\n                if(this.gamestatetime <= 0){\n                   this.dealLianJiLogic();\n                }\n                break;\n            }\n            \n        }\n    },\n    \n    /*\n        调用: 处于移动状态的时候调用\n        功能: 移动的逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealDoMove(){\n        //  this.star.node.active = false;\n        \n         this.gamestatetime    = config.move_time;\n         var num = this.getAllgz()[this.g_clickid].num + 1;\n         this.getAllgz()[this.g_clickid].setnum(num);\n         this.getAllgz()[this.g_clickid].settoblock();\n         this.getAllgz()[this.g_clickid].block.effectid = 1;\n         this.getAllgz()[this.g_clickid].block.effecttime = 0.5;\n         if(num > this.maxnum){\n            this.setMaxNumber(num);\n         }\n         if(this.allpngs[this.g_clickid]){\n            var audioIndex = this.lianjiNumber + 1;\n            if(audioIndex > config.SOUNDS.COMBO.length - 1){\n                audioIndex = config.SOUNDS.COMBO.length - 1;\n            }\n            if(audioIndex < 0){\n               audioIndex = 0;\n            }\n            this.palyAudioByIndex(config.SOUNDS.COMBO[audioIndex]);\n            this.allpngs[this.g_clickid].getComponent(\"celltile\").playZhEff();\n         }\n         //  tywx.LOGE(\"Hellocd\");\n         this.refreshbymask();\n         this.gamestate  = config.gameState.dodrop;\n       \n    },\n\n\n    /*\n        调用: 产生最大数字的时候调用\n        功能: 产生最大数字的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 逻辑需要\n    */\n    maxScoreShow: function(){\n        tywx.LOGD(\"产生最大数字\",this.maxnum);\n    },\n   \n    /*\n        调用: 游戏处于掉落状态的时候调用\n        功能: 掉落状态的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealLianJiLogic: function(){\n        var bfound = false;\n        for(var j = 0; j < config.geziNumber; j++){\n            this.resetAllMask();\n            var sc =this.getAllgz()[j].num;\n            this.checkmaskbyid(j, 0);\n            if (this.g_mask_samecnt >= config.minCanRemoveNumber) {\n                this.gamestatetime = config.move_time;\n                this.lianjiNumber ++;\n                this.score += config.baseScore * sc * (this.g_mask_samecnt - 1);\n                this.scoreLabel.string = this.score;\n                for(var i = 0; i < 25; i++){\n                    if(this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0){\n                       this.getAllgz()[i].block.speed_keep = config.gezi_pitch * this.getAllmask()[i].step/config.move_time;\n                       this.getAllgz()[i].block.actiontime_keep = config.move_time / this.getAllmask()[i].step;\n                       this.getAllgz()[i].block.id_keep = i;\n                       this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                       this.getAllgz()[i].block.adjustmove();\n                    }\n                } \n                bfound = true;\n                this.g_clickid = j;\n                this.gamestate = config.gameState.domove;\n                if(this.point<5)\n                   this.point++;\n                   this.drawPhyPoint();\n                   break;\n                }\n               \n            }\n\n            if(bfound == false){\n               this.gamestate = config.gameState.waitclick;\n               this.finalDealMask();\n               // 判断连接数的大小 如果连接数大于不同的值则产生不同的效果\n               this.dealLianJiNumber();\n            }\n    },\n    \n    /*\n        调用: 当玩家点击一次交付结束后调用\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 多元化游戏元素\n            sgood:3,   // cool \n            cgood:4,   // good\n            bgood:5,   // awesome\n            maxgood:6, // unbelive\n       \n        UNBLIEVEABLE: 'sounds/unblieveable.mp3',\t\n    },\n    */\n    dealLianJiNumber: function(){\n           if(this.lianjiNumber == config.lianjiEffects.sgood) {\n              this.playGood();  \n              this.palyAudioByIndex(config.SOUNDS.GOOD);\n              this.showboxNumber = 1;\n           }else if(this.lianjiNumber == config.lianjiEffects.cgood) {\n              this.playCool();\n              this.palyAudioByIndex(config.SOUNDS.COOL);\n              this.showboxNumber = 2;\n           }else if(this.lianjiNumber == config.lianjiEffects.bgood) {\n              this.playAwesome(); \n              this.palyAudioByIndex(config.SOUNDS.AWESOME);\n              this.showboxNumber = 3;\n           }else if(this.lianjiNumber >= config.lianjiEffects.maxgood) {\n              this.playUnbelive(); \n              this.palyAudioByIndex(config.SOUNDS.UNBLIEVEABLE);\n              this.showboxNumber = 4;\n           }else{\n              this.showboxNumber = 0;\n           }\n           \n        //    else if(this.lianjiNumber > 1) {\n        //       this.showBox(1);  \n        //    }\n    },\n    \n\n     \n    /*\n            调用: 出动画的时候\n            功能: 播放特定的音效\n            参数: [\n                index: 音效的下标 type: Number\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n    palyAudioByIndex:function(fileName){\n        tywx.ado.AudioManager.playSound(fileName);\n    },\n\n    \n\n   \n    // 播放good特效\n    playGood: function(){\n        var self = this;\n        var animation  = this.goodEft.getComponent(cc.Animation);\n        \n        var finishCallback = function(){\n            if(self.showboxNumber > 0){\n               self.showBox(this.showboxNumber);\n               self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished',  finishCallback,    self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n     // 播放good特效\n     playCool: function(){\n        var self = this;\n        var animation  = this.coolEft.getComponent(cc.Animation);\n        \n        var finishCallback = function(){\n            if(self.showboxNumber > 0){\n               self.showBox(this.showboxNumber);\n               self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished',  finishCallback,    self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n\n     // 播放awesome特效\n     playAwesome: function(){\n        var self = this;\n        this.awesEft.active = true;\n        var animation  = this.awesEft.getComponent(cc.Animation);\n        var finishCallback = function(){\n            if(self.showboxNumber > 0){\n               self.showBox(this.showboxNumber);\n               self.showboxNumber = 0;\n               this.awesEft.active = false;\n            }\n        }\n        animation.on('finished',  finishCallback,    self);\n        var animationState = animation.play(\"awesome\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n     // 播放awesome特效\n     playUnbelive: function(){\n        var self = this;\n        this.unbeliveEft.active = true;\n        var animation  = this.unbeliveEft.getComponent(cc.Animation);\n        var finishCallback = function(){\n            if(self.showboxNumber > 0){\n               self.showBox(this.showboxNumber);\n               self.showboxNumber = 0;\n               self.unbeliveEft.active = false;\n            }\n        }\n        animation.on('finished',  finishCallback,    self);\n        var animationState = animation.play(\"unbli\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n\n  \n\n\n    /*\n            调用: 当宝箱数据有更新的时候存储\n            功能: 存储宝箱数据到本地\n            参数: [\n                无\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n     storeAllItem: function(){\n        // console.log(\"当前存储的数据 = \"+JSON.stringify(this.allitems))\n        if(this.allitems){\n           tywx.Util.setItemToLocalStorage(\"allitems\",JSON.stringify(this.allitems));\n        }\n     },\n\n\n    /*\n        调用: 1: 游戏初始的时候调用，2: 每次点击的时候没有连接的时候调用，3: 重新开始游戏的时候调用。\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏元素需求\n    */\n    drawPhyPoint:function(){\n        // var ctx = this.bg.getComponent(cc.Graphics);\n        // ctx.clear();\n        // for(var i = 0;i< this.point; i++){\n        //     let color = config.showphy_pros.colors[i];\n        //     ctx.fillColor = cc.color(color[0],color[1],color[2]);\n        //     var x = (config.swidth - ((config.showphy_pros.phy_num - (config.maxphy_value - this.point)) * config.gezi_pitch)) / 2 + (config.showphy_pros.width + 10) * i;\n        //     var y = 980;\n        //     var w = config.showphy_pros.width;\n        //     var h = config.showphy_pros.height;\n        //     ctx.roundRect(x,y,w,h,config.showphy_pros.radius);\n        //     ctx.fill();\n        // }\n         if(this.prepoint == this.point){\n            return;\n         }\n         this.prepoint = this.point;\n         for(var starIndex = 0; starIndex < 5; starIndex ++){\n            if(this.point >= starIndex + 1){\n               this.stars[starIndex].getComponent(\"LifeStar\").show();\n            }else{\n               this.stars[starIndex].getComponent(\"LifeStar\").hide();\n            }\n        }\n        \n    },\n    \n    /*\n        调用: 1: 游戏重新开始的时候需要隐藏，2: 游戏结束的时候需要显示\n        功能: gameOver和restart按钮的显示隐藏控制\n        参数: [\n            vis: false: 隐藏元素，true: 显示元素\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    visibleControllButton:function(vis){\n        this.gameOut.node.active = vis;\n    },\n\n    /*\n        调用: 1: 游戏结束的时候需要显示\n        功能: 游戏结束的逻辑\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    gameOverCallBack:function(){\n        // 判断此次得分是否创纪录\n        this.gamestate = config.gameState.gameover;\n        this.visibleControllButton(true);\n        // 刷新当前的显示得分\n        this.loseScoreLabel.string = this.score;\n    },\n\n    /*\n        调用: 1: 刷新当前得分的时候\n        功能: 展示破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    pjlCallBack:function(){\n        // 判断此次得分是否创纪录\n        if(this.score > parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0))){\n            // console.log(typeof this.score + \"\" + typeof tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)+ \" \" + this.score+\"是否破纪录= \"+parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)));\n            this.hadShowPjl = true;\n            this.visibleControllButton(false);\n            var delay = cc.delayTime(0.3);\n            var self = this;\n            var call = cc.callFunc(function(){\n                self.stopView.active = true;\n                self.pjlView.active = true;\n                self.pjlView.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.1,1.1),\n                        cc.scaleTo(0.2,1)\n                    )\n                );\n            });\n            var seq = cc.sequence(delay, call);\n            tywx.LOGD(\"是否破纪录21212\");\n            this.node.runAction(seq);\n            // var animation = this.tupojilu.getComponent(cc.Animation);\n            // this.newPlayerEf.active = false;\n            // animation.stop(\"tupojilu\");\n            // 刷新破纪录的显示\n            this.pjlScoreLabel.string = this.score;\n        }\n    },\n\n\n    /*\n        调用: 点击展示破纪录画面时候的关闭按钮调用\n        功能: 关闭破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    closePjlView:function(){\n        // 判断此次得分是否创纪录\n        this.showStopView();\n        this.pjlView.active = false;\n    },\n   \n\n    finalDealMask:function(){\n        for (var i = 0; i < config.geziNumber; i++) {\n            this.getAllgz()[i].settoblock();\n        }\n    },\n\n\n    /*\n        调用: 1: 游戏开始的时候调用 2: 游戏重新开始的时候调用\n        功能: 游戏初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    initgame:function() {\n        this.storeScore();\n        this.score  = 0;\n        this.scoreLabel.string = this.score;\n        this.point  = config.maxphy_value;\n        this.drawPhyPoint();\n        this.maxnum = config.maxphy_value;\n        this.recoverNumber = 0;\n        this.fhBtnShow();\n        this.isRestartGame = true;\n        this.hadShowPjl = false; \n        for (var i = 0; i < config.geziNumber; i++) {\n            var num = this.getrandomnum();\n            this.getAllgz()[i].setnum(num);\n            this.getAllgz()[i].settoblock();\n        }\n\n        var needcheck = true;\n        \n        while(needcheck == true) {\n            needcheck = false;\n            for (var i = 0; i < config.geziNumber; i++) {\n                this.resetAllMask();\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= 3) {\n                    this.changenumbymask();\n                    needcheck = true;\n                }\n            }\n        }\n\n        this.gamestate = config.gameState.waitclick;\n        this.visibleControllButton(false)\n    },\n   \n    /*\n        调用: 1: 游戏处于检查点击的时候调用 2: 游戏开始的时候调用 3: 处理格子连接的时候调用\n        功能: 重置棋盘mask，为重新探路做准备\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    resetAllMask:function(){\n        if(this.refreshingMask == false){\n            this.refreshingMask = true\n            for(var i=0;i<config.geziNumber;i++){\n                this.getAllmask()[i].reset();\n            }\n            this.g_mask_samecnt = 1;\n            this.refreshingMask = false;\n        }\n       \n    },\n    \n    \n     /*\n        调用: 1: 处理游戏点击的时候调用 2:游戏格子连接的时候调用\n        功能: 递归寻找给定ID的格子 并在mask数组里面进行标记\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要 通过mask标记来找出每次连接的格子\n    */\n    checkmaskbyid:function(id,step){\n        this.getAllmask()[id].step=step;\n        // 从左找\n        this.checkDirPaths(id, step,0, -1);\n        this.checkDirPaths(id, step,0, -5);\n        this.checkDirPaths(id, step,4, 1);\n        this.checkDirPaths(id, step,4, 5);\n    },\n    \n     /*\n        调用: 1: checkmaskbyid寻找可连的点\n        功能: 检查是否可以继续连接\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n            bj: 寻找边界 type: Number\n            add: 叠加数 上下加减5 左右加减1 type: Number\n        ]\n        返回值:[\n           无\n        ]\n        思路: 根据递归寻找下一个点的连接情况\n    */\n    checkDirPaths: function(id, step, bj, add){\n        if(Math.abs(add) == 4 && this.getAllmask()[id] != null && this.getAllmask()[id].y == bj){\n           return false\n        }else if(Math.abs(add) == 1 && this.getAllmask()[id] != null && this.getAllmask()[id].x == bj){\n           return false\n        }\n        if(this.getAllmask()[id] == null || this.getAllmask()[id + add] == null){\n            return false;\n        }\n        if(this.getAllmask()[id + add].num != this.getAllmask()[id].num || this.getAllmask()[id + add].step <= step){\n           return false;\n        }\n\n        if(this.getAllmask()[id + add].step == 9999999){\n            this.g_mask_samecnt++;\n        }\n\n        this.getAllmask()[id + add].step = step;\n        this.getAllmask()[id + add].from = id;\n        this.checkmaskbyid(id + add, step + 1, bj, add)\n    },\n\n\n     /*\n        调用: 游戏初始的时候调用\n        功能: 改变格子的数字 通过mask\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    changenumbymask:function(){\n        for(var i = 0;i < config.geziNumber; i++){\n            if(this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0){\n                var num = this.getrandomnum();\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n            }\n        }\n    },\n   \n   /*\n        调用: 1, 游戏初始的时候调用 2, 改变格子的数字的时候调用\n        功能: 创建随机的新块 返回新快的显示\n        参数: [\n           无\n        ]\n        返回值:[\n           num: 返回格子的显示数组\n        ]\n        思路: 游戏逻辑需要\n    */\n    getrandomnum:function(){\n        var tnum = this.maxnum - 1;\n        if(tnum < config.initGameMaxNum)\n            tnum = config.initGameMaxNum;\n\n        var num = parseInt(Math.random() * 10000) % tnum + 1;\n        // if(this.prerandomnumber == num){\n        //     return this.getrandomnum();\n        // }else{\n        //     this.prerandomnumber = num;\n        // }\n        return num;\n    },\n\n    /*\n        调用: 使用满血道具 或者分享游戏的时候调用\n        功能: 复活游戏\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    recoverGame: function(){\n        if(this.recoverNumber < config.maxrnum){\n            this.point = config.maxphy_value;\n            this.drawPhyPoint();\n            this.gamestate = config.gameState.waitclick;\n            this.addRecoverNumber();\n            this.visibleControllButton(false);\n        }else{\n            this.showAlert(\"复活次数已达\"+config.maxrnum+\"次，不能继续复活。\")\n            this.initgame();\n        }\n       \n    },\n    \n    /*\n        调用: 游戏处于移动状态的时候调用\n        功能: 创建新的棋盘，为掉落做准备\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    refreshbymask:function(){ \n       \n        for(var i = 0;i < config.geziNumber;i++) {\n            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                this.getAllmask()[i].from =- 1;\n                var topid = -1;\n                var tmpid = i + 5;\n                while(tmpid < config.geziNumber){\n                    if(this.getAllmask()[tmpid].step == 9999999 || this.getAllmask()[tmpid].step==0){\n                        topid = tmpid;\n                        break;\n                    }\n                    tmpid += 5;\n                }\n                if(topid != -1){\n                    var dis = this.getAllmask()[topid].y - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx        = this.getAllgz()[topid].posx;\n                    this.getAllgz()[i].block.posy        = this.getAllgz()[topid].posy;\n                    this.getAllgz()[i].block.id_keep     = topid;\n                    this.getAllgz()[i].block.id_dest     = i;\n                    this.getAllgz()[i].block.speed_keep  = (dis * config.gezi_pitch) / config.move_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    this.getAllgz()[topid].step = 888;\n                    var sjs = Math.random();\n                    var ttindex = 0;\n                    for(var sindex = 1; sindex < config.luck_block.score.length - 1; sindex ++){\n                         if(this.score >= config.luck_block.score[sindex]){\n                            ttindex = sindex;\n                            break;\n                         }\n                    }\n                    var tgl = config.luck_block.rate[ttindex];\n                    if(sjs <= tgl){\n                       this.getAllgz()[i].setnum(this.getAllgz()[topid].num);\n                    }else{\n                       var num = this.getPjNumberName(i);\n                       this.getAllgz()[i].setnum(num);\n                    }\n                    this.getAllgz()[i].settoblockvalue();\n                    this.getAllgz()[i].block.effectid       =  this.getAllgz()[topid].block.effectid;\n                    this.getAllgz()[i].block.effecttime     =  this.getAllgz()[topid].block.effecttime;\n                    this.getAllgz()[topid].block.effectid   =- 1;\n                    this.getAllgz()[topid].block.effecttime =  0;\n                }else{\n                    var dis = 5 - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx    = this.getAllgz()[i].posx;\n                    this.getAllgz()[i].block.posy    = this.getAllgz()[i].posy + dis * config.gezi_pitch;\n                    this.getAllgz()[i].block.id_keep = -1;\n                    this.getAllgz()[i].block.id_dest = i;\n                    this.getAllgz()[i].block.speed_keep = (dis * config.gezi_pitch) / config.move_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    var num = this.getrandomnum();\n                    this.getAllgz()[i].setnum(num);\n                   \n                    this.getAllgz()[i].settoblockvalue();\n                }\n            }\n        }\n    },\n   \n    // 找出个格子的周围的数 算出平均数 来设置当前格子的数子\n    getPjNumberName: function(id) {\n        var allids = [id - 1,id + 4, id + 5, id + 6, id + 1,id - 6, id - 5,id - 4];\n        var total  = 0;\n        var gzindex = 1;\n        for(var tcellIndex = 0; tcellIndex <  allids.length; tcellIndex ++){\n            if(this.getAllmask()[tcellIndex]){\n                total = total + this.getAllgz()[tcellIndex].block.num;\n                gzindex = gzindex + 1;\n            }\n        }\n        let pjNumber = total / gzindex;\n        // console.log(\"当前格子产生的平均数 = \"+parseInt(pjNumber));\n        return parseInt(pjNumber);\n    },\n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 返回首页\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    backFirstPage:function(){\n        this.storeScore();\n        cc.director.loadScene(\"gamestart\", this.destroyFinish);\n    },\n    \n    storeScore:function(){\n        if(parseInt(tywx.Util.getItemFromLocalStorage(\"maxscore\", 0)) < this.score){\n            tywx.Util.setItemToLocalStorage(\"maxscore\",this.score); \n         }\n         if(tywx.publicwx){\n             wx.postMessage({\n                 method: 4,\n                 score:this.score,\n             });\n         }\n    },\n\n    backCall:function(){\n    //    this.showMinFriend();\n        this.showAlert(\"测试提示信息\")\n        // this.getAllPathByitemValue({value:2});\n    },\n   \n     /*\n        调用: 单独开启的线程调用\n        功能: 开启玩家即将超逾的好友显示 开始更新update\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showMinFriend:function(){\n        var self = this;\n        var bpos = cc.v2(this.stopButton.x, this.stopButton.y);\n        this.isShowFIcon = true;\n        var rest = self.isRestartGame;\n        wx.postMessage({\n            method: 5,\n            isrestart:rest,\n            score:self.score,\n            posx: bpos.x,\n            posy: bpos.y - 30,\n        });\n        self.isRestartGame = false;\n    },\n\n   /*\n        调用: 单独开启的线程调用\n        功能: 隐藏玩家即将超逾的好友显示 停止更新update\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    hideMinFriend:function(){\n        var self = this;\n        // self.friendIcon.node.active = false;\n\n        this.isShowFIcon = false;\n        return;\n        // wx.postMessage({\n        //     method: 6,\n        //     rank:false,\n        //     friendicon:false,\n        // });\n        this.printMaskMsg();\n    },\n    // 打印格子信息\n    printMaskMsg:function(){\n        for(var gzIndex = 0; gzIndex < 25; gzIndex ++){\n           this.getAllmask()[gzIndex].showMSG();\n        }\n    },\n\n    // 首次弹出帮助界面\n    firstShowHelpView:function(){\n        if(parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\",0)) === 0){\n           tywx.Util.setItemToLocalStorage(\"hadshowhelpview\",1); \n           this.showPlayMethod();\n        }\n     },\n \n     /*\n        调用: update的时候调用 \n        功能: 刷新子域即将超越的玩家纹理\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    _updateSubDomainCanvas: function() {\n            if (!this.tex || !tywx.publicwx) {\n                return;\n            }\n            if(this.isShowFIcon == true){\n                var openDataContext = wx.getOpenDataContext();\n                var sharedCanvas = openDataContext.canvas;\n                this.tex.initWithElement(sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.friendIcon.spriteFrame = new cc.SpriteFrame(this.tex);\n                this.friendIcon.node.active = true;\n            }\n           \n            // if(this.isShowFIcon){\n              \n            // }\n           \n     },\n   \n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 清除当前的节点\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    destroyFinish:function(){\n        // if(this.node){\n        //    this.node.destroy();\n        // }\n    },\n\n    /*\n        调用: 点击免费领取宝箱的时候调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    lingQuBox:function(){\n          \n       // 查看当前ID的道具玩家是否存在\n       if(this.produceItem != null){\n            if(this.allitems.length == 0){\n               this.allitems[0] = this.produceItem; \n            }else{\n                // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                var findata = false;\n                for(var itemIndex= 0; itemIndex < this.allitems.length; itemIndex ++){\n                    var itemdata = this.allitems[itemIndex];\n                    // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                    if(itemdata.id == this.produceItem.id){\n                       itemdata.num = itemdata.num + this.produceItem.num;\n                       findata = true;\n                       this.allitems[itemIndex] = itemdata; \n                       break;\n                    }\n                }\n                if(findata == false){\n                   this.allitems[this.allitems.length] = this.produceItem; \n                }\n            }\n            // 组织显示得到的信息\n            \n            var item = null;\n            for(var djIndex = 0; djIndex < config.allitem.length; djIndex ++){\n                var dj = config.allitem[djIndex];\n                // tywx.LOGE(JSON.stringify(dj)+\"当前得到的宝箱数据  = \"+JSON.stringify(this.produceItem));\n                if(this.produceItem.id == dj.id){\n                    item = dj;\n                    break;\n                } \n            }\n           \n            if(item != null){\n               this.showAlertMSG(\"领取成功\"+item.name);\n            }\n            this.produceItem = null;\n       }\n      \n        this.storeAllItem();\n        this.dealAllItems(this.allitems);\n        this.openboxview.active = false;\n        this.showStopView();\n    },\n\n    /*\n        调用: 当条件达到某个值的时候显示领取宝箱\n        功能: 领取道具\n        参数: [\n           maxnum: 此次可以领取的道具的最大数量。\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showBox:function(maxnum){\n        let arr = [0.3,0.4,0.9,1];\n        let ran = Math.random();\n        let is_show =  ran <= arr[maxnum - 1] ;\n        tywx.ado.logWithColor(`maxnum:${maxnum},ran:${ran},is_show:${is_show}`);\n        if(is_show){\n            this.showStopView();\n            this.produceItems(maxnum)\n            this.openboxview.active = true;\n        }\n    },\n\n    /*\n        调用: 逻辑部分\n        功能: 暂停界面的重新开始游戏\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    restartGame:function(){\n        this.initgame();\n        this.showSubStopView();\n    },\n\n   /*\n        调用: 逻辑部分\n        功能: 失败界面的重新开始游戏\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    loseRestartGame:function(){\n        this.initgame();\n        this.visibleControllButton(false);\n    },\n    \n    /*\n        调用: 点击失败界面上的关闭按钮调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    startNewGame:function(){\n        this.visibleControllButton(false)\n        this.initgame();\n    }\n\n\n\n\n\n});\n\n\n\n"]}