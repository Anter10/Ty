{"version":3,"sources":["../../../../assets/Script/assets/Script/gamemain.js"],"names":["config","require","gezi","mask","maxzorder","gamemain","cc","Class","extends","Component","properties","scoreLabel","default","type","Label","showalertmsg","num","allpngs","Prefab","showNumberPrefab","celltile","stars","Node","stopView","tupojilu","fuHuo","stopV","stopButton","pjlView","openboxview","itemview","Nodef","yyview","goodEft","coolEft","awesEft","unbeliveEft","chuiziEft","loseScoreLabel","GameOver","loseShareButtton","pjlShareButtton","musicBtn","itemhelpview","loseRestartGameBtn","friendsNode","mergeAniNode","helpview","pjlScoreLabel","effect","djitem","gameOut","Sprite","friendIcon","stopViewBack","helpViewPre","mflqBtn","hpHelpTips","cellUpView","addScoreLabelPools","NodePool","addScoreNode","bg","restart","Button","score","point","tywx","ado","Constants","GameCenterConfig","maxphy_value","g_mask_samecnt","g_clickid","gamestate","gamestatetime","maxnum","lianjiNumber","g_gezi","g_mask","allitems","curtimeawaypre","isShowFIcon","recoverNumber","hadShowPjl","allOpenItems","produceItem","isRestartGame","showboxNumber","prepoint","allAudio","AudioSource","hadClickScreen","curUsingItemData","isUsingItem","refreshingMask","hasProduceNewScore","hadAddNum","allmergecellIds","showAddTime","hadProducetantenNUmber","startDropTime","curGiveScore","hadshowlqbox","curshowxhgs","allxhggz","alljzxhgid","allshowshareids","addXHGId","id","length","hadXHGId","ti","addXHGCell","cell","dealXhgCells","mai","getAllmask","getComponent","setCurNum","showHG","getIDData","onLoad","gamecenter","curcount","i","scoreNodeLabel","instantiate","put","setShareConfig","ShareConfig","POJILU_SHARE","string","self","geziNumber","node","cellt","script","setId","setClickCall","data","palyAudioByIndex","SOUNDS","POPUPCLOSE","touchEndCallback","push","parent","position","p","tmp_g","getAllgz","tmp_m","publicwx","tex","Texture2D","window","sharedCanvas","width","height","prerandomnumber","initgame","on","event","showItem","LOGE","JSON","stringify","fhBtnShow","fhbut","fhcall","recoverGame","hycall","fhsbCallBack","errorcall","setShareGroupCall","setSuccessCall","setErrorCall","RECOVER_GAME_SHARE","Timer","setTimer","showMinFriend","macro","REPEAT_FOREVER","hideMinFriend","gameState","waitclick","dealPlayerNoClickScreen","hideView","active","dealPlayerClickScreen","mflq","auditing","setReactCall","lingQuBox","FREE_GIFT_SHARE","showNumberNode","setCloseCall","showmflqBtn","getShareComponent","firstShowHelpView","changeTexture","addxhgNumber","removexhgNumber","thn","splice","showmsm2","showmsm1","hasShowxhgNum","setWaitClickState","combo_level","good","dealLianJiNumber","playAni","pjlCallBack","setWaitNum","waitnum","allcellids","resetAllMask","checkmaskbyid","minCanRemoveNumber","stopAllActions","delay","delayTime","letUserClickTime","idindex","call","callFunc","cellid","precellid","stopDaijiEff","playDaijiEff","seq","sequence","rep","repeatForever","runAction","ci","showPlayMethod","helpviewpre","destroy","x","y","helpviewscript","setIsGame","showUseHpHelp","setStartGameCall","itemIndex","allitem","item","itemsceipt","setData","canupdate","showAlert","showOneHpEf","drawPhyPoint","itemhelpscript","showNum","value","showChuiZi","updateItemByData","dealAllItems","xx1Icon","getNumberOfRunningActions","newVec2","convertToWorldSpace","v2","new1Vec2","tmove","moveTo","Math","abs","itmindex","tdata","storeAllItem","addRecoverNumber","maxrnum","checkFriendsScore","showTouchEveryTime","msg","wx","showToast","title","icon","duration","showAlertMSG","ty","pri_pos","rc","move","moveBy","showTouchEffect","touchpos","showStopView","showSubStopView","items","Util","getItemFromLocalStorage","undefined","parse","e","titemIndex","storitem","openitemIndex","topenitem","getData","produceItems","tindex","randomFrom","itemid","itemnum","randomNum","random","box_rate","sub1","add2","chui","lowerValue","upperValue","floor","ctor","getAllPathByitemValue","usingitem","setnum","settoblock","block","effectid","effecttime","setMaxNumber","checkclick","Utils","showWXToast","curaddnum","showAnimationWhenScoreBiggerThanTen","mpos","useCZClick","maxScoreShow","scale","anim","Animation","finishCallback","stop","tid","step","refreshbymask","drop_time","dodrop","merge_delay_time","animateState","play","wrapMode","WrapMode","Normal","update","dt","tickmove","tickeffect","star","star1","draw","_updateSubDomainCanvas","sc","merge_time","baseScore","speed_keep","gezi_pitch","actiontime_keep","id_keep","id_dest","from","adjustmove","domove","addGetScoreLabelOnTile","gameOverCallBack","finalDealMask","dealDoMove","playMergeAnimation","zIndex","dealLianJiLogic","audioIndex","COMBO","playZhEff","LOGD","bfound","j","playGood","GOOD","cool","playCool","COOL","awesome","playAwesome","AWESOME","unbelive","playUnbelive","UNBLIEVEABLE","fileName","AudioManager","playSound","animation","showBox","animationState","setItemToLocalStorage","scaleX","scaleY","produceHPAni","starIndex","show","hide","scaleBoom","scaleTo","scaleSmaller","visibleControllButton","vis","gameover","showPjlScore","parseInt","loadItem","closePjlView","storeScore","getrandomnum","needcheck","changenumbymask","startDropAnimation","allpos","startGameDropTime","reset","checkDirPaths","bj","add","tnum","initGameMaxNum","topid","tmpid","dis","posx","posy","adjustdrop","settoblockvalue","getPjNumberName","luck","sjs","ttindex","sindex","luck_block","tgl","rate","allids","total","gzindex","tcellIndex","pjNumber","fudu","backFirstPage","director","loadScene","destroyFinish","saveItem","backCall","logWithColor","bpos","rest","pos","screen","view","getVisibleSizeInPixel","postMessage","method","isrestart","printMaskMsg","gzIndex","showMSG","openDataContext","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","findata","itemdata","djIndex","dj","name","cl","arr","ran","is_show","restartGame","loseRestartGame","startNewGame","cmergeAniNode","mergeAni","removeCall","animState","speed","getLabel","label","size","get","labelScrpt","setNumber","tiles","shownum","tileIndex","dealAddNumber","scalesm","mtop","spawn","scalex","scaley","prenum","needaddstore","hadShowShareLJ","moreThanEightNumber","mergeMaxNumberBaseScore","showScript","setShowNumber","t"],"mappings":"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","file":"gamemain.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n    游戏的逻辑UI\n    游戏的操作的主要逻辑在这个module里面编写\n    created by gyc on 2018-08-01.\n*/\n\n// 倒入游戏涉及到的module\nvar config = require(\"AddOneConfig\")\nvar gezi = require(\"GeZi\")\nvar mask = require(\"GeZiMask\")\nvar maxzorder = 999;\n\nvar gamemain = cc.Class({\n    extends: cc.Component,\n    properties: {\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        showalertmsg: {\n            default: null,\n            type: cc.Label\n        },\n        num: {\n            default: [],\n            type: cc.Label\n        },\n        allpngs: {\n            default: [],\n            type: cc.Prefab\n        },\n        showNumberPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        celltile: {\n            default: null,\n            type: cc.Prefab\n        },\n        stars: {\n            default: [],\n            type: cc.Node\n        },\n        stopView: {\n            default: null,\n            type: cc.Node\n        },\n        tupojilu: {\n            default: null,\n            type: cc.Node\n        },\n\n        fuHuo: {\n            default: null,\n            type: cc.Node\n        },\n        stopV: {\n            default: null,\n            type: cc.Node\n        },\n        stopButton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlView: {\n            default: null,\n            type: cc.Node\n        },\n        openboxview: {\n            default: null,\n            type: cc.Node\n        },\n        itemview: {\n            default: null,\n            type: cc.Nodef\n        },\n\n        yyview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        goodEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        coolEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        awesEft: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        unbeliveEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        chuiziEft: {\n            default: null,\n            type: cc.Node\n        },\n\n        loseScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        GameOver: {\n            default: null,\n            type: cc.Label\n        },\n        loseShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        pjlShareButtton: {\n            default: null,\n            type: cc.Node\n        },\n        musicBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n        itemhelpview: {\n            default: null,\n            type: cc.Node\n        },\n\n\n        loseRestartGameBtn: {\n            default: null,\n            type: cc.Node\n        },\n\n        friendsNode: {\n            default: null,\n            type: cc.Node\n        },\n        mergeAniNode: {\n            default: null,\n            type: cc.Prefab\n        },\n\n        helpview: {\n            default: null,\n            type: cc.Node\n        },\n        pjlScoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        effect: {\n            default: null,\n            type: cc.Prefab,\n        },\n        djitem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        gameOut: {\n            default: null,\n            type: cc.Sprite,\n        },\n        friendIcon: {\n            default: null,\n            type: cc.Sprite,\n        },\n        stopViewBack: {\n            default: null,\n            type: cc.Sprite,\n        },\n        helpViewPre: {\n            default: null,\n            type: cc.Prefab,\n        },\n        mflqBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        // 血量提示tip\n        hpHelpTips: {\n            default: null,\n            type: cc.Node,\n        },\n\n        cellUpView: {\n            default: null,\n            type: cc.Node,\n        },\n        addScoreLabelPools: {\n            default: null,\n            type: cc.NodePool,\n        },\n\n        addScoreNode: {\n            default: null,\n            type: cc.Prefab,\n        },\n\n\n\n        // 游戏的背景\n        bg: cc.Node,\n        // 重新开始的按钮\n        restart: cc.Button,\n        // 当前玩家得分\n        score: 0,\n        // 玩家当前体力 默认为最大值\n        point: tywx.ado.Constants.GameCenterConfig.maxphy_value,\n        // 当前点击的块ID\n        g_mask_samecnt: 0,\n        //点击的格子ID\n        g_clickid: -1,\n        //游戏状态-无，等待点击，移动，下落等\n        gamestate: 'null',\n        //游戏状态的计时\n        gamestatetime: 0,\n        //当前最大值\n        maxnum: 5,\n        //此次点击产生的连击数\n        lianjiNumber: 1,\n        // 存放每个格子的数组\n        g_gezi: [],\n        // 存放每个mask的数组\n        g_mask: [],\n        // 玩家当前道具\n        allitems: [],\n        // 此时距离上次点击屏幕有多长时间\n        curtimeawaypre: 10,\n        // 控制隐藏好友\n        isShowFIcon: false,\n        // 此局复活次数\n        recoverNumber: 0,\n        // 此局是否展示过破纪录\n        hadShowPjl: false,\n        // 此局是否展示过破纪录\n        allOpenItems: [],\n        // 此次连接产生的道具\n        produceItem: null,\n        // 此局是否是进入游戏后的重新开始的局\n        isRestartGame: false,\n        // 显示宝箱的数量\n        showboxNumber: 0,\n        // 上一次的生命值\n        prepoint: 0,\n        // 所有音效\n        allAudio: {\n            default: [],\n            type: cc.AudioSource,\n        },\n        // 时间段内玩家是否有点击过屏幕 true: 有点击 false: 没有点击 \n        hadClickScreen: false,\n        // 当前处于使用状态的道具ID\n        curUsingItemData: null,\n        // 是哦用道具不消耗生命\n        isUsingItem: false,\n        // 当前是否在刷新mask\n        refreshingMask: false,\n        // 此次点击是否有分数产生\n        hasProduceNewScore: false,\n        // 此次是否已经加过num\n        hadAddNum: false,\n        // 当前需要合并的所有块的ID\n        allmergecellIds: [],\n        // 显示加分时间\n        showAddTime: 0.1,\n        // 此次点击是否产生过大于10的分享\n        hadProducetantenNUmber: false,\n        // 开始动画时间\n        startDropTime: 0,\n        // 当前奖励分数\n        curGiveScore: 0,\n        // 是否已经弹出过领取界面\n        hadshowlqbox: false,\n        // 记录当前数字显示过小皇冠\n        curshowxhgs: [],\n        // 记录已经标示有小皇冠的格子\n        allxhggz:[],\n        // 所有禁用小皇冠ID\n        alljzxhgid : [],\n        // 所有展示过分享领奖的数字\n        allshowshareids:[],\n        \n    },\n    \n    addXHGId: function (id) {\n        this.alljzxhgid[this.alljzxhgid.length] = id;\n    },\n\n    hadXHGId: function (id) {\n        for (var ti = 0; ti < this.alljzxhgid.length; ti ++){\n            if (this.alljzxhgid[ti] == id) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    addXHGCell:function(cell){\n         this.allxhggz[this.allxhggz.length] = cell;\n    },\n\n    dealXhgCells:function(){\n       for(var mai = 0; mai < this.getAllmask().length; mai ++){\n            this.allpngs[mai].getComponent(\"celltile\").setCurNum(this.getAllmask()[mai].num);\n            this.allpngs[mai].getComponent(\"celltile\").showHG();\n        }\n    },\n\n    getIDData:function(id){\n        return this.getAllmask()[id];\n    } ,\n\n    /*\n        调用: 场景加载完成后的回调\n        功能: 场景加载完成后的一些UI逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        tywx.gamecenter = this;\n        this.addScoreLabelPools = new cc.NodePool();\n        var curcount = 6;\n        for (let i = 0; i < curcount; ++i) {\n            let scoreNodeLabel = cc.instantiate(this.addScoreNode); // 创建节点\n            this.addScoreLabelPools.put(scoreNodeLabel); // 通过 putInPool 接口放入对象池\n        }\n        this.pjlShareButtton.getComponent(\"ShareButton\").setShareConfig(tywx.ado.Constants.ShareConfig.POJILU_SHARE);\n        // 初始分数显示为0\n        this.scoreLabel.string = this.score;\n        var self = this;\n        // 循环生成初始游戏\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            var node = new cc.Node(\"node\");\n            var cellt = cc.instantiate(this.celltile);\n            var script = cellt.getComponent(\"celltile\");\n            script.setId(i);\n            script.setClickCall(function (data, celltile) {\n                // self.printMaskMsg();\n                self.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.POPUPCLOSE);\n                self.touchEndCallback(data, celltile);\n            });\n            this.allpngs.push(cellt);\n            cellt.parent = this.yyview;\n            cellt.position = cc.p(0, 0);\n            node.position = cc.p(0, 0);\n            node.parent = this.node;\n            var tmp_g = new gezi(i, this);\n            this.getAllgz().push(tmp_g);\n            var tmp_m = new mask(i, this);\n            this.getAllmask().push(tmp_m);\n        }\n        if (tywx.publicwx) {\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 211;\n            window.sharedCanvas.height = 98;\n        }\n        var self = this;\n        // 游戏的点击逻辑\n        // this.node.on('touchend', function ( event ) {\n        //     if(self.stopView.active == false){\n        //         var mpos = event.touch.getLocation();\n        //         self.touchEndCallback(mpos.x,mpos.y);\n        //     }\n        // });\n        // 前一个产生的随机数\n        this.prerandomnumber = 0;\n        // 初始游戏\n        this.initgame();\n\n        this.isRestartGame = false;\n        //   // 游戏的点击逻辑\n        this.stopViewBack.node.on('touchstart', function (event) {\n            return true;\n        });\n\n        this.gameOut.node.on('touchstart', function (event) {\n            return true;\n        });\n\n\n\n        // var effect = cc.instantiate(this.effect);\n        // this.node.parent.addChild(effect);\n        // effect.x = 140;\n        // effect.y = 90;\n        this.showItem();\n        // 设置复活按钮的点击回调\n        tywx.LOGE(\"dddds\" + JSON.stringify(config));\n        this.fhBtnShow();\n        let fhbut = this.fuHuo.getComponent(\"ShareButton\");\n        if (fhbut) {\n            var fhcall = function () {\n                self.recoverGame();\n            }\n            var hycall = function () {\n                self.fhsbCallBack();\n            }\n\n            var errorcall = function () {\n                self.fhsbCallBack();\n            }\n            // 设置分享到组的成功回调\n            fhbut.setShareGroupCall(fhcall);\n            // 设置分享到好友的回调\n            fhbut.setSuccessCall(hycall);\n            // 设置分享失败后的回调\n            fhbut.setErrorCall(hycall);\n            fhbut.setShareConfig(tywx.ado.Constants.ShareConfig.RECOVER_GAME_SHARE);\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.showMinFriend();\n        }, 10, cc.macro.REPEAT_FOREVER, 0);\n\n        // // 开启一个进程循环隐藏即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            self.hideMinFriend();\n        }, 15, cc.macro.REPEAT_FOREVER, 5);\n\n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function () {\n            if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                this.hadClickScreen = false;\n                self.dealPlayerNoClickScreen();\n            }\n        }, 15, 0, 15);\n\n        this.node.on('touchend', function (event) {\n            self.itemhelpview.getComponent(\"ItemHelp\").hideView();\n            self.curUsingItemData = null;\n            self.itemhelpview.active = false;\n            self.dealPlayerClickScreen();\n            self.hadClickScreen = true;\n        });\n\n        // 设置免费领取的回调\n        let mflq = this.mflqBtn.getComponent(\"ShareButton\");\n        if (tywx.config.auditing == true) {\n            mflq.setReactCall(true);\n        } else {\n            mflq.setReactCall(false);\n        }\n        mflq.setSuccessCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareGroupCall(function () {\n            self.lingQuBox();\n        });\n        mflq.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n\n        this.showNumberNode = cc.instantiate(this.showNumberPrefab);\n        this.showNumberNode.active = false;\n        this.showNumberNode.parent = this.node;\n\n        this.showNumberNode.getComponent(\"MoreTanNumber\").setCloseCall(function () {\n            self.hadshowlqbox = false;\n        });\n\n        var showmflqBtn = this.showNumberNode.getComponent(\"MoreTanNumber\").getShareComponent();\n        showmflqBtn.setShareConfig(tywx.ado.Constants.ShareConfig.FREE_GIFT_SHARE);\n        if (tywx.config.auditing == true) {\n            showmflqBtn.setReactCall(true);\n        } else {\n            showmflqBtn.setReactCall(false);\n        }\n        showmflqBtn.setSuccessCall(function () {\n            // console.log(\"Helloc\");\n            self.lingQuBox();\n            self.showNumberNode.active = false;\n            self.stopView.active = false;\n            self.hadshowlqbox = false;\n        });\n        showmflqBtn.setShareGroupCall(function () {\n            self.lingQuBox();\n            self.showNumberNode.active = false;\n            self.stopView.active = false;\n            self.hadshowlqbox = false;\n        });\n        // this.showAnimationWhenScoreBiggerThanTen(14);\n        this.firstShowHelpView();\n        self.friendIcon.node.active = true;\n        this.musicBtn.getComponent(\"Audio\").changeTexture();\n    },\n\n    fhBtnShow: function () {\n        // console.log(\"当前的版本信息 =\" + tywx.SystemInfo.version + JSON.stringify(config));\n        if (tywx.config.auditing == true) {\n            this.fuHuo.active = false;\n            this.loseRestartGameBtn.active = true;\n        } else {\n            this.fuHuo.active = true;\n            // this.loseRestartGameBtn.active = false;\n        }\n    },\n\n    addxhgNumber: function (num, id) {\n        this.curshowxhgs[this.curshowxhgs.length] = {id:id, num:num};\n    },\n\n    removexhgNumber: function (num) {\n        // console.log(\"当前的ID是1 = \" + JSON.stringify(this.curshowxhgs));\n        for (var thn = 0; thn < this.curshowxhgs.length; thn ++){\n            if (this.curshowxhgs[thn].num == num) {\n                this.curshowxhgs.splice(thn,1);\n                break;\n            }\n        }\n        // console.log(\"当前的ID是2 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    showmsm2:function(){\n        //  console.log(\"showmsm2 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    showmsm1: function () {\n        // console.log(\"showmsm1 = \" + JSON.stringify(this.curshowxhgs));\n    },\n\n    hasShowxhgNum: function (num, id) {\n        if (this.curshowxhgs.length == 0) {\n            return false;\n        }\n        for (var ti = 0; ti < this.curshowxhgs.length; ti++) {\n            if (num == this.curshowxhgs[ti].num) {\n                // if ((Math.abs(id - this.curshowxhgs[ti].id) == 5 || Math.abs(id - this.curshowxhgs[ti].id) == 0)){\n                   return true;\n                // }else{\n                     \n                //    return true;\n                // }\n            }\n        }\n        return false;\n    },\n    /**\n     * 设置游戏状态\n     * 参数: state {Type: umber}\n     */\n    setWaitClickState: function () {\n        //  if (this.waitnum && this.hasShowxhgNum(this.waitnum) == false) {\n        //     this.addxhgNumber(this.waitnum);\n        //     this.waitnum = null;\n        //  }\n        // this.curshowxhgs = [];\n      \n        // 判断连接数的大小 如果连接数大于不同的值则产生不同的效果\n        if (this.gamestate != tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n            // this.curshowxhgs = [];\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n            if (this.lianjiNumber >= tywx.config.combo_level.good[0] && this.point > 0) {\n                if (!this.hadshowlqbox) {\n                    this.dealLianJiNumber();\n                } else {\n                    if (this.hadshowlqbox) {\n                        this.showNumberNode.active = true;\n                        this.showNumberNode.getComponent(\"MoreTanNumber\").playAni();\n                    }\n                }\n            } else {\n                if (this.hadshowlqbox) {\n                    this.showNumberNode.active = true;\n                    this.showNumberNode.getComponent(\"MoreTanNumber\").playAni();\n                } else if (this.hadShowPjl == false && this.point > 0 && this.hasProduceNewScore == true) {\n                    this.hasProduceNewScore = false;\n                    this.pjlCallBack();\n                }\n            }\n        }\n\n    },\n\n    setWaitNum: function (waitnum) {\n        this.waitnum = waitnum;\n    },\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerNoClickScreen: function () {\n        if (this.hadClickScreen == false) {\n            var self = this;\n            this.hadClickScreen = true;\n            // 得到当前点击可以消除的格子\n            var allcellids = [];\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + 1;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                }\n            }\n\n            // for(var ci = 0; ci < allcellids.length; ci ++){\n            //     if(this.allpngs[allcellids[ci]] != null){\n            //        this.allpngs[allcellids[ci]].getComponent(\"celltile\").playDaijiEff();\n            //     }\n            // }\n\n            if (allcellids.length > 0) {\n                // console.log(\" 所有可连接的ID = \" + JSON.stringify(allcellids));\n                self.node.stopAllActions();\n                var delay = cc.delayTime(tywx.ado.Constants.GameCenterConfig.letUserClickTime);\n                var idindex = 0;\n                var call = cc.callFunc(function () {\n                    var cellid = allcellids[idindex];\n                    // console.log(idindex + \" = 当前的ID信息 = \" + cellid);\n                    if (idindex > 0) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                    }\n\n\n                    if (idindex - 1 >= 0) {\n                        var precellid = allcellids[idindex - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                    } else {\n                        var precellid = allcellids[allcellids.length - 1];\n                        self.allpngs[precellid].getComponent(\"celltile\").stopDaijiEff();\n                    }\n                    self.allpngs[cellid].getComponent(\"celltile\").playDaijiEff();\n                    if (idindex == allcellids.length - 1) {\n                        idindex = 0;\n                    } else {\n                        idindex = idindex + 1;\n                    }\n                });\n                var seq = cc.sequence(call, delay);\n                var rep = cc.repeatForever(seq);\n                self.node.runAction(rep);\n            }\n\n\n        }\n    },\n\n\n    // 判断玩家当前是否有点击 没有点击的话\n    dealPlayerClickScreen: function () {\n        // if(this.hadClickScreen == false){\n        var self = this;\n        this.node.stopAllActions();\n        for (var ci = 0; ci < tywx.ado.Constants.GameCenterConfig.geziNumber; ci++) {\n            if (this.allpngs[ci] != null) {\n                this.allpngs[ci].getComponent(\"celltile\").stopDaijiEff();\n            }\n        }\n        this.hadClickScreen = true;\n        // 开一个线程监听次时间段用户是否有点击\n        tywx.Timer.setTimer(self, function () {\n            if (self.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                self.hadClickScreen = false;\n                self.dealPlayerNoClickScreen();\n            }\n        }, 5, 0, 15);\n        // }\n    },\n\n\n\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n\n    showPlayMethod: function () {\n        if (this.helpviewpre != null) {\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n        }\n        // 添加帮助界面\n        this.helpviewpre = cc.instantiate(this.helpViewPre);\n        this.helpviewpre.x = 360;\n        this.helpviewpre.y = 0;\n        this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n        var self = this;\n        this.helpviewscript.setIsGame(1);\n        this.helpviewscript.setCloseCall(function () {\n            //  self.showSubStopView();\n            self.helpview.active = !self.helpview.active ? true : false;\n            self.showUseHpHelp(true);\n            // console.log(\"当前的新手帮助\")\n        });\n\n        this.helpviewscript.setStartGameCall(function () {\n            self.helpview.active = !self.helpview.active ? true : false;\n            self.showUseHpHelp(true);\n        });\n        this.helpviewpre.parent = this.helpview;\n        self.helpview.active = !self.helpview.active ? true : false;\n    },\n\n    // 复活调用\n    fhsbCallBack: function () {\n        // this.showAlert(\"请分享到不同的群\");\n        // this.visibleControllButton(false);\n        // this.initgame();\n    },\n\n    // 显示当前的道具\n    showItem: function () {\n        tywx.LOGE(\"当局 = \")\n        for (var itemIndex = 0; itemIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; itemIndex++) {\n            var item = cc.instantiate(this.djitem);\n            let itemsceipt = item.getComponent(\"DjItem\");\n            itemsceipt.setData(tywx.ado.Constants.GameCenterConfig.allitem[itemIndex]);\n            item.parent = this.itemview;\n            var self = this;\n            itemsceipt.setClickCall(function (data, item) {\n                // 判断当前游戏是否是等待点击状态 不是则不能使用道具\n                if (self.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n                    // 判断道具数量足不足\n                    if (data.num > 0) {\n                        var canupdate = true;\n                        if (data.id == 4) {\n                            if (self.point == tywx.ado.Constants.GameCenterConfig.maxphy_value) {\n                                self.showAlert(\"当前生命值已满。\");\n                                canupdate = false;\n                            } else {\n                                self.recoverGame();\n                            }\n                        } else if (data.id == 5) { // 加1血\n                            tywx.LOGE(\"当前徐良= \" + self.point + \",\" + tywx.ado.Constants.GameCenterConfig.maxphy_value);\n                            if (self.point < tywx.ado.Constants.GameCenterConfig.maxphy_value) {\n                                self.showOneHpEf(item);\n                                self.prepoint = self.point;\n                                self.point = self.point + 1;\n                                self.drawPhyPoint();\n                                canupdate = true;\n                            } else {\n                                canupdate = false;\n                                self.showAlert(\"血量充足\");\n                            }\n                        } else {\n                            // canupdate = self.getAllPathByitemValue(data);\n                            self.itemhelpview.active = true;\n                            let itemhelpscript = self.itemhelpview.getComponent(\"ItemHelp\");\n                            if (data.id == 2 || data.id == 1) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showNum(data.value);\n                            } else if (data.id == 6) {\n                                self.curUsingItemData = data;\n                                itemhelpscript.showChuiZi();\n                            }\n                            canupdate = false;\n                        }\n                        // 显示\n                        if (canupdate == true) {\n                            data.num = data.num - 1;\n                            if (data.num < 0) {\n                                data.num = 0;\n                            }\n                            self.updateItemByData(data);\n                        }\n                    } else {\n                        self.showAlert(\"道具数量不足！\");\n                    }\n                }\n            });\n\n            item.x = 165 + (itemIndex * 125);\n            item.y = -55;\n            this.allOpenItems.push(item);\n        }\n        // 刷新道具显示\n        this.dealAllItems();\n    },\n\n\n    // 使用1血特效\n    showOneHpEf: function (item) {\n        if ((this.point != 5 || this.point != 1) && item.xx1Icon.node.getNumberOfRunningActions() == 0) {\n            var node = this.stars[this.point];\n            var newVec2 = node.convertToWorldSpace(cc.v2(node.x, node.y));\n            var new1Vec2 = item.xx1Icon.node.convertToWorldSpace(cc.v2(item.xx1Icon.node.x, item.xx1Icon.node.y));\n            var tmove = cc.moveTo(0.6, cc.p(newVec2.x - new1Vec2.x - node.x - 30, newVec2.y - Math.abs(new1Vec2.y) - node.y));\n            var seq = cc.sequence(tmove, cc.callFunc(function () {\n                item.xx1Icon.node.x = 0;\n                item.xx1Icon.node.y = 0;\n            }))\n            item.xx1Icon.node.runAction(seq);\n        }\n\n    },\n\n    // 更新某个道具\n    updateItemByData: function (data) {\n        if (data != null) {\n            tywx.LOGE(\"当前更新的数据 = \" + JSON.stringify(data));\n            for (var itmindex = 0; itmindex < this.allitems.length; itmindex++) {\n                var tdata = this.allitems[itmindex];\n                if (tdata.id == data.id) {\n                    tdata.num = data.num;\n                    this.allitems[itmindex] = tdata;\n                    this.storeAllItem();\n                    this.dealAllItems(this.allitems)\n                    break;\n                }\n            }\n        }\n    },\n    // 添加复活次数\n    addRecoverNumber: function () {\n        this.recoverNumber = this.recoverNumber + 1;\n        // 如果恢复的次数等于2的话 隐藏恢复按钮\n        if (this.recoverNumber == tywx.ado.Constants.GameCenterConfig.maxrnum) {\n            this.fuHuo.active = false;\n        } else {\n            this.fhBtnShow();\n        }\n    },\n\n    // 隔多久检查一下当前分数要超越的玩家\n    checkFriendsScore: function () {\n\n    },\n\n    /*\n        调用: 一段时间没有点击屏幕后调用\n        功能: 提示玩家点击某个方块可以消除\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEveryTime: function () {\n\n    },\n\n    showAlert: function (msg) {\n        wx.showToast({\n            title: msg,\n            icon: 'success',\n            duration: 1500,\n        });\n\n    },\n    showAlertMSG: function (msg) {\n        if (msg !== null && this.showalertmsg.node.getNumberOfRunningActions() === 0) {\n            this.showalertmsg.node.stopAllActions();\n            var self = this;\n            this.showalertmsg.node.active = true;\n            this.showalertmsg.string = msg;\n            var ty = self.showalertmsg.node.y;\n            let pri_pos = this.showalertmsg.node.position;\n            var rc = function () {\n                self.showalertmsg.node.active = false;\n                self.showalertmsg.node.y = ty - 160;\n                // 通过 tag 停止一个动作\n                self.showalertmsg.node.stopAllActions();\n                self.showalertmsg.node.position = pri_pos;\n            };\n            var move = cc.moveBy(2.5, cc.p(0, 260));\n\n            var call = cc.callFunc(rc);\n            var seq = cc.sequence(move, call);\n            this.showalertmsg.node.runAction(seq);\n        }\n        //tywx.ado.Utils.showWXToast(msg);\n    },\n\n\n    /*\n        调用: 点击的时候调用\n        功能: 点击方块产生特效\n        参数: [\n            touchpos: 当前触摸点的位置 type:{}\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showTouchEffect: function (touchpos) {\n\n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        if (this.stopView.active == false) {\n            this.stopV.active = false;\n            this.pjlView.active = false;\n            this.openboxview.active = false;\n        }\n    },\n\n    /*\n        调用: 点击停止按钮的时候调用\n        功能: 显示停止按钮控制的菜单\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    showSubStopView: function () {\n        this.stopView.active = !this.stopView.active ? true : false;\n        this.stopV.active = !this.stopV.active ? true : false;\n    },\n\n\n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            allitem: 给定的显示道具数据\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要 \n    */\n    dealAllItems: function (allitem) {\n        // tywx.Util.setItemToLocalStorage(\"allitems\",JSON.stringify([{id:1, num:2}])); \n        var items = tywx.Util.getItemFromLocalStorage(\"allitems\", [])\n        tywx.LOGE(\"处理的道具数据 = \" + items)\n        // 刷新道具显示\n        if (items != null && items != undefined && items != []) {\n            try {\n                if (allitem) {\n                    this.allitems = allitem;\n                } else {\n                    this.allitems = JSON.parse(items);\n                }\n\n            } catch (e) {\n                this.allitems = this.allitems;\n            }\n            for (var titemIndex = 0; titemIndex < this.allitems.length; titemIndex++) {\n                var storitem = this.allitems[titemIndex];\n                tywx.LOGE(titemIndex + \"道具数据 = \" + JSON.stringify(items))\n                for (var openitemIndex = 0; openitemIndex < this.allOpenItems.length; openitemIndex++) {\n                    var topenitem = this.allOpenItems[openitemIndex].getComponent(\"DjItem\");\n                    var tdata = topenitem.getData();\n                    if (tdata.id == storitem.id) {\n                        tdata.num = storitem.num;\n                        topenitem.setData(tdata);\n                        break;\n                    }\n                }\n            }\n        }\n    },\n\n    /*\n        调用: 道具变化和游戏初始化的时候调用\n        功能: 刷新道具显示\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    produceItems: function (maxnum) {\n        // 随机道具的ID\n        var tindex = this.randomFrom(0, tywx.ado.Constants.GameCenterConfig.allitem.length - 1);\n        var itemid = tywx.ado.Constants.GameCenterConfig.allitem[tindex].id;\n        // 随机道具的数量\n\n        var itemnum = 1;\n        var randomNum = Math.random();\n        if (randomNum >= 1 - config.box_rate.sub1) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[0].id;\n        } else if (randomNum < 1 - config.box_rate.sub1 && randomNum >= 1 - config.box_rate.sub1 - config.box_rate.add2) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[1].id;\n        } else if (randomNum < 1 - config.box_rate.sub1 - config.box_rate.add2 && randomNum > config.box_rate.chui) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[2].id;\n        } else if (randomNum <= config.box_rate.chui) {\n            itemid = tywx.ado.Constants.GameCenterConfig.allitem[3].id;\n        }\n\n        this.produceItem = {\n            id: itemid,\n            num: itemnum\n        };\n        tywx.LOGE(\"当前产生的道具 \" + JSON.stringify(this.produceItem))\n\n    },\n\n    /*\n        调用: 产生随机数的地方调用\n        功能: 产生指定范围的随机数\n        参数: [\n            lowerValue: 范围的最小值\n            upperValue: 范围的最大值\n        ]\n        返回值:[\n            无\n        ]\n        思路: 通用方法\n    */\n    randomFrom: function (lowerValue, upperValue) {\n        return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);\n    },\n\n\n\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function () {\n        tywx.LOGE(\"helloc g\");\n        config = tywx.config != null ? tywx.config : config;\n    },\n\n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的格子容器\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllgz: function () {\n        return this.g_gezi;\n    },\n\n    /*\n        调用: 在GeZi, GeZiData和该类中都有调用\n        功能: 得到当前的mask容器\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 方便统一管理\n    */\n    getAllmask: function () {\n        return this.g_mask;\n    },\n\n\n\n    /*  \n        调用:点击使用道具的时候调用\n        功能:给定一个值 根据这个值在格子中的数字进行和值运算 找出每个格子加上这个值是否可以连接\n        参数: [\n            data: 道具数据 type:Table.\n        ]\n        返回值: [\n            true || false: true可以使用 false不可使用道具\n        ]\n        思路: 逻辑需要\n    */\n\n    getAllPathByitemValue: function (data) {\n\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.usingitem;\n            // 得出当前可连的所有路径\n            var allcellids = [];\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.resetAllMask();\n                this.getAllmask()[i].num = this.getAllmask()[i].num + data.value;\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                    allcellids[allcellids.length] = i;\n                    break;\n                }\n\n            }\n            this.resetAllMask();\n            //  tywx.LOGE(\"当前值可消除的mask\"+JSON.stringify(allcellids));\n            if (allcellids.length > 0) {\n                let i = allcellids[0];\n                var num = this.getAllgz()[i].num + data.value;\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n                this.getAllgz()[i].block.effectid = 0;\n                this.getAllgz()[i].block.effecttime = 0.5;\n                if (num > this.maxnum) {\n                    this.setMaxNumber(num);\n                }\n                this.g_clickid = allcellids[0];\n                this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                return true;\n            } else {\n                this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                tywx.ado.Utils.showWXToast(\"此块不能使用道具\")\n                return false;\n            }\n        }\n        return false;\n    },\n\n\n    /*\n        调用: 当点击屏幕的时候调用\n        功能: 处理点击屏幕产生的逻辑(主要是判断出当前点击的位置在某个格子上)\n        参数: [\n            x: 点击的X坐标\n            y: 点击点的Y坐标\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互接口\n    */\n    touchEndCallback: function (i, celltile) {\n        if (this.gamestate == tywx.ado.Constants.GameCenterConfig.gameState.waitclick) {\n            tywx.LOGE(\"当前即将使用的道具谁 = \" + JSON.stringify(this.curUsingItemData))\n            var curaddnum = 1;\n            var tdata = this.curUsingItemData;\n            this.curUsingItemData = null;\n            if ((tdata != null && tdata.id != 6) || tdata == null) {\n                if (tdata != null) {\n                    curaddnum = tdata.value;\n                }\n                // 判断当前的游戏状态是否为等待点击状态\n                // 根据点击的点 来判断当前点击在那个格子上面\n                var num = this.getAllgz()[i].num + curaddnum;\n                this.showAnimationWhenScoreBiggerThanTen(num);\n                if (num < 1) {\n                    this.showAlert(\"不能使用此道具\");\n                } else {\n\n                    if (tdata != null) {\n                        tdata.num = tdata.num - 1;\n                        if (tdata.num < 0) {\n                            tdata.num = 0;\n                        }\n                        this.isUsingItem = true;\n                        this.updateItemByData(tdata);\n                    } else {\n                        this.isUsingItem = false;\n                    }\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblock();\n                    this.getAllgz()[i].block.effectid = 0;\n                    this.getAllgz()[i].block.effecttime = 0.5;\n                    if (num > this.maxnum) {\n                        this.setMaxNumber(num);\n                    }\n                    // 记录下当前点击的格子 和切换当前的游戏状态为检查点击状态\n                    this.g_clickid = i;\n                    this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n                    // 在方块上产生点击特效\n                    var mpos = {};\n                    this.showTouchEffect(mpos);\n                    // 终止此次点击的循环处理\n                }\n            } else {\n                if (tdata != null) {\n                    tdata.num = tdata.num - 1;\n                    if (tdata.num < 0) {\n                        tdata.num = 0;\n                    }\n                    this.isUsingItem = true;\n                    this.updateItemByData(tdata);\n                } else {\n                    this.isUsingItem = false;\n                }\n                this.useCZClick(i, celltile);\n            }\n        }\n\n    },\n\n    // 设置最大值\n    setMaxNumber: function (num) {\n        this.maxnum = num;\n        this.maxScoreShow();\n    },\n\n    // 使用锤子类型的道具\n    useCZClick: function (id, celltile) {\n        var self = this;\n\n        self.chuiziEft.active = true;\n        self.chuiziEft.scale = 1.4;\n        self.chuiziEft.parent = celltile.node;\n        self.chuiziEft.x = 25;\n        self.chuiziEft.y = -30;\n        // self.chuiziEft.node.setLocalZOrder(1999);\n        var anim = this.chuiziEft.getComponent(cc.Animation);\n        var self = this;\n        var finishCallback = function () {\n            self.chuiziEft.active = false;\n            self.chuiziEft.parent = self.node;\n            anim.stop(\"chuiziza\");\n\n        }\n        var tid = id;\n        var call = cc.callFunc(function () {\n            self.getAllmask()[tid].step = 1;\n            self.refreshbymask();\n            self.lianjiNumber = 1;\n            self.gamestatetime = tywx.ado.Constants.GameCenterConfig.drop_time;\n            tywx.Timer.setTimer(self, function () {\n                self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.dodrop;\n                self.hadAddNum = false;\n                //pπ 开启一个进程循环显示即将超逾的玩家\n            }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n\n        })\n\n        var delay = cc.delayTime(0.5);\n        var seq = cc.sequence(delay, call);\n        celltile.node.runAction(seq);\n        // self.getAllmask(tid).step = 0;\n\n        // self.refreshbymask();\n        // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.checkclick;\n\n\n        var animateState = anim.play(\"chuiziza\");\n        animateState.wrapMode = cc.WrapMode.Normal;\n        anim.on('finished', finishCallback, self);\n    },\n\n    /*\n        调用: 每一帧都调用\n        功能: 游戏的主体逻辑都在这个方法里面\n        参数: [\n            dt: 系统渲染的时间\n        ]\n        返回值:[\n            无\n        ]\n        思路: 每一帧都调用适合处理这个游戏的玩法和操作  \n    */\n    update: function (dt) {\n        // this.showAddTime = this.showAddTime - dt;\n        if (this.startDropTime <= 0) {\n            for (var i = 0; i < this.getAllgz().length; i++) {\n                this.getAllgz()[i].block.tickmove(dt);\n                this.getAllgz()[i].block.tickeffect(dt, this.star, this.star1);\n                this.getAllgz()[i].draw(this.allpngs[i]);\n            }\n        }\n\n         this.dealXhgCells();\n\n\n        if (this.isShowFIcon) {\n            this._updateSubDomainCanvas();\n        }\n        switch (this.gamestate) {\n            /*case tywx.ado.Constants.GameCenterConfig.gameState.waitclick:{\n                if (this.hadShowPjl == false && this.point > 0) {\n                    this.pjlCallBack();\n                }\n                break;\n            }*/\n            case tywx.ado.Constants.GameCenterConfig.gameState.checkclick:\n                {\n                    this.resetAllMask();\n                    var sc = this.getAllgz()[this.g_clickid].num;\n                    this.lianjiNumber = 1;\n\n                    this.allmergecellIds = [];\n                    this.allmergecellIds[this.allmergecellIds.length] = this.g_clickid;\n                    this.checkmaskbyid(this.g_clickid, 0);\n\n                    if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                        this.gamestatetime = tywx.ado.Constants.GameCenterConfig.merge_time + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n                        this.score += tywx.ado.Constants.GameCenterConfig.baseScore * this.g_mask_samecnt * 1;\n                        this.hasProduceNewScore = true;\n                        this.scoreLabel.string = this.score;\n                        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                            // 判断是否已经标记 \n                            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                                this.getAllgz()[i].block.speed_keep = tywx.ado.Constants.GameCenterConfig.gezi_pitch * this.getAllmask()[i].step / tywx.ado.Constants.GameCenterConfig.merge_time;\n                                this.getAllgz()[i].block.actiontime_keep = tywx.ado.Constants.GameCenterConfig.merge_time / this.getAllmask()[i].step;\n                                this.getAllgz()[i].block.id_keep = i;\n                                this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                                this.getAllgz()[i].block.adjustmove();\n                            }\n                        }\n                        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.domove;\n                        // console.log(\"当前可以连接的格子数ID是 = \" + this.allmergecellIds)\n                        this.showAddTime = 0.1;\n                        this.addGetScoreLabelOnTile(this.allmergecellIds, tywx.ado.Constants.GameCenterConfig.baseScore);\n                        // console.log(\"this.hadAddNum2 \" + this.hadAddNum);\n                        this.hadAddNum = false;\n                    } else {\n                        this.hasProduceNewScore = false;\n                        if (this.isUsingItem == true) {\n                            this.isUsingItem = false;\n                        } else {\n                            this.point--;\n                            this.drawPhyPoint();\n                        }\n                        // 判断游戏是否结束\n                        if (this.point <= 0) {\n                            this.gameOverCallBack()\n                        } else {\n                            // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n                            this.setWaitClickState();\n                            this.finalDealMask();\n                        }\n                        // if (this.hadShowPjl == false) {\n                        //     this.pjlCallBack();\n                        // }\n                    }\n                    break;\n                }\n                //格子组合移动，进入掉落状态\n            case tywx.ado.Constants.GameCenterConfig.gameState.domove:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        this.dealDoMove();\n                    }\n                    if (this.gamestatetime <= tywx.ado.Constants.GameCenterConfig.merge_delay_time) {\n                        if (this.hadAddNum == false) {\n                            this.playMergeAnimation();\n                            this.hadAddNum = true;\n                            this.allpngs[this.g_clickid].zIndex = maxzorder++;\n                            var num = this.getAllgz()[this.g_clickid].num + 1;\n                            this.getAllgz()[this.g_clickid].setnum(num);\n                            this.getAllgz()[this.g_clickid].block.num = num;\n                            // this.allpngs[this.g_clickid].getComponent(\"celltile\").showHG(num);\n                            if (this.hadshowlqbox) {\n\n                            }\n                            this.showAnimationWhenScoreBiggerThanTen(num);\n                        }\n                    }\n\n                    break;\n                }\n                //格子掉落完，进入再次检查合并状态，或者等待点击状态\n            case tywx.ado.Constants.GameCenterConfig.gameState.dodrop:\n                {\n                    this.gamestatetime -= dt;\n                    if (this.gamestatetime <= 0) {\n                        //console.log(\"dealLianJiLogic1\")\n                        this.dealLianJiLogic();\n                    }\n                    break;\n                }\n\n        }\n    },\n\n    /*\n        调用: 处于移动状态的时候调用\n        功能: 移动的逻辑处理\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealDoMove() {\n        //  this.star.node.active = false;\n        var self = this;\n        // console.log(\"dealDoMovedealDoMovedealDoMove 1\");\n        this.gamestatetime = tywx.ado.Constants.GameCenterConfig.merge_time + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n        var num = this.getAllgz()[this.g_clickid].num;\n        this.getAllgz()[this.g_clickid].settoblock();\n        this.getAllgz()[this.g_clickid].block.effectid = 1;\n        this.getAllgz()[this.g_clickid].block.effecttime = 0.5;\n        if (num > this.maxnum) {\n            this.setMaxNumber(num);\n        }\n        if (this.allpngs[this.g_clickid]) {\n            var audioIndex = this.lianjiNumber % tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1;\n            // console.log(this.lianjiNumber + \"当前播放的音效下标 = \" + audioIndex);\n            if (audioIndex < 0) {\n                audioIndex = 0;\n            }\n            if (audioIndex > tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1) {\n                audioIndex = tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO.length - 1;\n            }\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.COMBO[audioIndex]);\n            this.allpngs[this.g_clickid].getComponent(\"celltile\").playZhEff();\n        }\n        //  tywx.LOGE(\"Hellocd\");\n        this.refreshbymask();\n        tywx.Timer.setTimer(self, function () {\n            self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.dodrop;\n            // 开启一个进程循环显示即将超逾的玩家\n        }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n\n\n    },\n\n\n    /*\n        调用: 产生最大数字的时候调用\n        功能: 产生最大数字的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 逻辑需要\n    */\n    maxScoreShow: function () {\n        tywx.LOGD(\"产生最大数字\", this.maxnum);\n    },\n\n    /*\n        调用: 游戏处于掉落状态的时候调用\n        功能: 掉落状态的逻辑处理\n        参数: [\n            无\n        ]\n        返回值: [\n            无\n        ]\n        思路: 游戏和玩家的交互的表现\n    */\n    dealLianJiLogic: function () {\n        var bfound = false;\n        //console.log(\"dealLianJiLogic abc\")\n        for (var j = 0; j < tywx.ado.Constants.GameCenterConfig.geziNumber; j++) {\n            this.resetAllMask();\n            var sc = this.getAllgz()[j].num;\n            this.allmergecellIds = [];\n            this.allmergecellIds[0] = 0;\n            this.checkmaskbyid(j, 0);\n            if (this.g_mask_samecnt >= tywx.ado.Constants.GameCenterConfig.minCanRemoveNumber) {\n                this.gamestatetime = tywx.ado.Constants.GameCenterConfig.merge_time + tywx.ado.Constants.GameCenterConfig.merge_delay_time;\n                this.lianjiNumber++;\n                this.score += tywx.ado.Constants.GameCenterConfig.baseScore * this.g_mask_samecnt * this.lianjiNumber;\n                this.scoreLabel.string = this.score;\n                for (var i = 0; i < 25; i++) {\n                    if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                        this.getAllgz()[i].block.speed_keep = tywx.ado.Constants.GameCenterConfig.gezi_pitch * this.getAllmask()[i].step / tywx.ado.Constants.GameCenterConfig.merge_time;\n                        this.getAllgz()[i].block.actiontime_keep = tywx.ado.Constants.GameCenterConfig.merge_time / this.getAllmask()[i].step;\n                        this.getAllgz()[i].block.id_keep = i;\n                        this.getAllgz()[i].block.id_dest = this.getAllmask()[i].from;\n                        this.getAllgz()[i].block.adjustmove();\n                    }\n                }\n                bfound = true;\n                this.g_clickid = j;\n                this.allmergecellIds[0] = this.g_clickid;\n                if (this.point < 5) {\n                    this.point++;\n                }\n                this.drawPhyPoint();\n                var self = this;\n                // var num = this.getAllgz()[this.g_clickid].num + 1;\n                // this.getAllgz()[this.g_clickid].setnum(num);\n                // this.showAddTime = 0.1;\n                this.addGetScoreLabelOnTile(this.allmergecellIds, tywx.ado.Constants.GameCenterConfig.baseScore * this.lianjiNumber);\n                // console.log(\"当前可以连接的格子数ID是 = \" + this.allmergecellIds)\n\n                tywx.Timer.setTimer(self, function () {\n\n                    self.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.domove;\n                    // console.log(\"this.hadAddNum1 \" + this.hadAddNum);\n                    self.hadAddNum = false;\n                    //pπ 开启一个进程循环显示即将超逾的玩家\n                }, 0, 0, tywx.ado.Constants.GameCenterConfig.merge_delay_time);\n                break;\n            }\n\n        }\n\n        if (bfound == false) {\n            // this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n            this.setWaitClickState();\n            this.finalDealMask();\n        }\n    },\n\n    /*\n        调用: 当玩家点击一次交付结束后调用\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 多元化游戏元素\n            sgood:3,   // cool \n            cgood:4,   // good\n            bgood:5,   // awesome\n            maxgood:6, // unbelive\n       \n        UNBLIEVEABLE: 'sounds/unblieveable.mp3',\t\n    },\n    */\n    dealLianJiNumber: function () {\n        if (this.lianjiNumber == tywx.config.combo_level.good[0]) {\n            this.playGood();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.GOOD);\n            this.showboxNumber = 1;\n        } else if (this.lianjiNumber == tywx.config.combo_level.cool[0]) {\n            this.playCool();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.COOL);\n            this.showboxNumber = 2;\n        } else if (this.lianjiNumber == tywx.config.combo_level.awesome[0]) {\n            this.playAwesome();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.AWESOME);\n            this.showboxNumber = 3;\n        } else if (this.lianjiNumber >= tywx.config.combo_level.unbelive[0]) {\n            this.playUnbelive();\n            this.palyAudioByIndex(tywx.ado.Constants.GameCenterConfig.SOUNDS.UNBLIEVEABLE);\n            this.showboxNumber = 4;\n        } else {\n            this.showboxNumber = 0;\n        }\n\n        //    else if(this.lianjiNumber > 1) {\n        //       this.showBox(1);  \n        //    }\n    },\n\n\n\n    /*\n            调用: 出动画的时候\n            功能: 播放特定的音效\n            参数: [\n                index: 音效的下标 type: Number\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n    palyAudioByIndex: function (fileName) {\n        tywx.ado.AudioManager.playSound(fileName);\n    },\n\n\n\n\n    // 播放good特效\n    playGood: function () {\n        var self = this;\n        var animation = this.goodEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n    // 播放good特效\n    playCool: function () {\n        var self = this;\n        var animation = this.coolEft.getComponent(cc.Animation);\n\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"encourage\");\n    },\n\n\n    // 播放awesome特效\n    playAwesome: function () {\n        var self = this;\n        this.awesEft.active = true;\n        var animation = this.awesEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                this.awesEft.active = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"awesome\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n    // 播放awesome特效\n    playUnbelive: function () {\n        var self = this;\n        this.unbeliveEft.active = true;\n        var animation = this.unbeliveEft.getComponent(cc.Animation);\n        var finishCallback = function () {\n            if (self.showboxNumber > 0) {\n                self.showBox(this.showboxNumber);\n                self.showboxNumber = 0;\n                self.unbeliveEft.active = false;\n            }\n        }\n        animation.on('finished', finishCallback, self);\n        var animationState = animation.play(\"unbli\");\n        animationState.wrapMode = cc.WrapMode.Normal;\n    },\n\n\n\n\n\n    /*\n            调用: 当宝箱数据有更新的时候存储\n            功能: 存储宝箱数据到本地\n            参数: [\n                无\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需求\n     */\n    storeAllItem: function () {\n        // console.log(\"当前存储的数据 = \"+JSON.stringify(this.allitems))\n        if (this.allitems) {\n            tywx.Util.setItemToLocalStorage(\"allitems\", JSON.stringify(this.allitems));\n        }\n    },\n\n\n    /*\n        调用: 1: 游戏初始的时候调用，2: 每次点击的时候没有连接的时候调用，3: 重新开始游戏的时候调用。\n        功能: 展示相关的特效UI\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏元素需求\n    */\n    drawPhyPoint: function () {\n        // var ctx = this.bg.getComponent(cc.Graphics);\n        // ctx.clear();\n        // for(var i = 0;i< this.point; i++){\n        //     let color = tywx.ado.Constants.GameCenterConfig.showphy_pros.colors[i];\n        //     ctx.fillColor = cc.color(color[0],color[1],color[2]);\n        //     var x = (tywx.ado.Constants.GameCenterConfig.swidth - ((tywx.ado.Constants.GameCenterConfig.showphy_pros.phy_num - (tywx.ado.Constants.GameCenterConfig.maxphy_value - this.point)) * tywx.ado.Constants.GameCenterConfig.gezi_pitch)) / 2 + (tywx.ado.Constants.GameCenterConfig.showphy_pros.width + 10) * i;\n        //     var y = 980;\n        //     var w = tywx.ado.Constants.GameCenterConfig.showphy_pros.width;\n        //     var h = tywx.ado.Constants.GameCenterConfig.showphy_pros.height;\n        //     ctx.roundRect(x,y,w,h,tywx.ado.Constants.GameCenterConfig.showphy_pros.radius);\n        //     ctx.fill();\n        // }\n        if (this.point > 1) {\n            this.stars[0].scaleX = 1;\n            this.stars[0].scaleY = 1;\n            this.stars[0].stopAllActions();\n        }\n        if (this.prepoint == this.point) {\n            return;\n        }\n        // 咋这里判断当前的血量是否为1 如果为1的话产生 动画提示和tips\n        if (this.point == 1) {\n            this.produceHPAni();\n        }\n        this.prepoint = this.point;\n        for (var starIndex = 0; starIndex < 5; starIndex++) {\n            if (this.point >= starIndex + 1) {\n                this.stars[starIndex].getComponent(\"LifeStar\").show();\n            } else {\n                this.stars[starIndex].getComponent(\"LifeStar\").hide();\n            }\n        }\n\n    },\n\n    /**\n     * 第一个星星产生一个放大缩小的动画 并且产生提示动画\n     */\n    produceHPAni: function () {\n        this.stars[0].stopAllActions();\n        var scaleBoom = cc.scaleTo(0.2, 1.2);\n        var scaleSmaller = cc.scaleTo(0.2, 1);\n        var delay = cc.delayTime(0.2);\n        var seq = cc.sequence(scaleBoom, scaleSmaller, delay);\n        var rep = cc.repeatForever(seq);\n        this.stars[0].runAction(rep);\n\n        this.showAlertMSG(\"血量要耗光啦~\");\n\n    },\n\n    /*\n        调用: 1: 游戏重新开始的时候需要隐藏，2: 游戏结束的时候需要显示\n        功能: gameOver和restart按钮的显示隐藏控制\n        参数: [\n            vis: false: 隐藏元素，true: 显示元素\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    visibleControllButton: function (vis) {\n        this.gameOut.node.active = vis;\n    },\n\n    /*\n        调用: 1: 游戏结束的时候需要显示\n        功能: 游戏结束的逻辑\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    gameOverCallBack: function () {\n        // 判断此次得分是否创纪录\n        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.gameover;\n        this.visibleControllButton(true);\n        // 刷新当前的显示得分\n        this.loseScoreLabel.string = this.score;\n    },\n\n    /*\n        调用: 1: 刷新当前得分的时候\n        功能: 展示破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    pjlCallBack: function () {\n        // 判断当前的得分是否超过了可显示的分数\n        if (this.score < tywx.ado.Constants.GameCenterConfig.showPjlScore) {\n            return;\n        }\n        // 判断此次得分是否创纪录\n        if (this.score > parseInt(tywx.ado.Utils.loadItem(\"ADDONE_SCORE\", 0))) {\n            this.hadShowPjl = true;\n            this.visibleControllButton(false);\n            var delay = cc.delayTime(0.1);\n            var self = this;\n            var call = cc.callFunc(function () {\n                self.stopView.active = true;\n                self.pjlView.active = true;\n                self.pjlView.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.1, 1.1),\n                        cc.scaleTo(0.2, 1)\n                    )\n                );\n            });\n            var seq = cc.sequence(delay, call);\n            tywx.LOGD(\"是否破纪录21212\");\n            this.node.runAction(seq);\n            // var animation = this.tupojilu.getComponent(cc.Animation);\n            // this.newPlayerEf.active = false;\n            // animation.stop(\"tupojilu\");\n            // 刷新破纪录的显示\n            this.pjlScoreLabel.string = this.score;\n        }\n    },\n\n\n    /*\n        调用: 点击展示破纪录画面时候的关闭按钮调用\n        功能: 关闭破纪录界面\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    closePjlView: function () {\n        // 判断此次得分是否创纪录\n        this.showStopView();\n        this.pjlView.active = false;\n    },\n\n\n    finalDealMask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            this.getAllgz()[i].settoblock();\n        }\n    },\n\n\n    /*\n        调用: 1: 游戏开始的时候调用 2: 游戏重新开始的时候调用\n        功能: 游戏初始化\n        参数: [\n            restart: 是否为重新开始的游戏\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    initgame: function (restart) {\n        this.storeScore();\n        this.allshowshareids = [];\n        this.alljzxhgid = [];\n        this.allxhggz = [];\n        this.curshowxhgs = [];\n        this.hasProduceNewScore = false;\n        this.score = 0;\n        this.hadProducetantenNUmber = false;\n        this.startDropTime = 0;\n        this.curGiveScore = 0;\n        this.hadshowlqbox = false;\n        this.scoreLabel.string = this.score;\n        this.point = tywx.ado.Constants.GameCenterConfig.maxphy_value;\n        this.drawPhyPoint();\n        this.maxnum = tywx.ado.Constants.GameCenterConfig.maxphy_value;\n        this.recoverNumber = 0;\n        this.fhBtnShow();\n        this.isRestartGame = true;\n        this.hadShowPjl = false;\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            var num = this.getrandomnum();\n            this.getAllgz()[i].setnum(num);\n            this.getAllgz()[i].settoblock();\n            // this.allpngs[i].getComponent(\"celltile\").setCurNum(this.getAllmask()[i].num);\n            this.allpngs[i].getComponent(\"celltile\").showHG();\n        }\n \n\n        var needcheck = true;\n\n        while (needcheck == true) {\n            needcheck = false;\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.resetAllMask();\n                this.checkmaskbyid(i, 0);\n                if (this.g_mask_samecnt >= 3) {\n                    this.changenumbymask();\n                    needcheck = true;\n                }\n            }\n        }\n\n        this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n        this.visibleControllButton(false);\n\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\", 0)) == 1) {\n            this.showUseHpHelp(true);\n        }\n        if (restart) {\n            this.startDropAnimation();\n        }\n        this.dealPlayerClickScreen();\n\n    },\n\n    /**\n     * 产生格子下落动画\n     */\n    startDropAnimation: function () {\n        var self = this;\n        var allpos = [];\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            this.allpngs[i].active = false;\n        }\n        // 开启一个进程循环显示即将超逾的玩家\n        tywx.Timer.setTimer(self, function () {\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                self.allpngs[i].active = true;\n                var ty = this.randomFrom(300, 660);\n                allpos[allpos.length] = ty;\n                self.allpngs[i].y = self.allpngs[i].y + ty;\n            }\n            self.startDropTime = 0.2;\n            tywx.Timer.setTimer(self, function () {\n                self.startDropTime = 0;\n            }, 0, 0, tywx.ado.Constants.GameCenterConfig.startGameDropTime + 0.05);\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                let move = cc.moveBy(tywx.ado.Constants.GameCenterConfig.startGameDropTime, cc.p(0, -allpos[i]));\n                self.allpngs[i].runAction(move);\n            }\n        }, 0, 0, 0.2);\n    },\n\n    /*\n        调用: 1: 游戏处于检查点击的时候调用 2: 游戏开始的时候调用 3: 处理格子连接的时候调用\n        功能: 重置棋盘mask，为重新探路做准备\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要\n    */\n    resetAllMask: function () {\n        if (this.refreshingMask == false) {\n            this.refreshingMask = true\n            for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n                this.getAllmask()[i].reset();\n            }\n            this.g_mask_samecnt = 1;\n            this.refreshingMask = false;\n        }\n\n    },\n\n\n    /*\n        调用: 1: 处理游戏点击的时候调用 2:游戏格子连接的时候调用\n        功能: 递归寻找给定ID的格子 并在mask数组里面进行标记\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏逻辑需要 通过mask标记来找出每次连接的格子\n    */\n    checkmaskbyid: function (id, step) {\n\n        this.getAllmask()[id].step = step;\n        // 从左找\n        this.checkDirPaths(id, step, 0, -1);\n        this.checkDirPaths(id, step, 0, -5);\n        this.checkDirPaths(id, step, 4, 1);\n        this.checkDirPaths(id, step, 4, 5);\n    },\n\n    /*\n        调用: 1: checkmaskbyid寻找可连的点\n        功能: 检查是否可以继续连接\n        参数: [\n            id: 每个格子的ID type: Number\n            step: 此次寻找的步数 type: Number\n            bj: 寻找边界 type: Number\n            add: 叠加数 上下加减5 左右加减1 type: Number\n        ]\n        返回值:[\n           无\n        ]\n        思路: 根据递归寻找下一个点的连接情况\n    */\n    checkDirPaths: function (id, step, bj, add) {\n        if (Math.abs(add) == 4 && this.getAllmask()[id] != null && this.getAllmask()[id].y == bj) {\n            return false\n        } else if (Math.abs(add) == 1 && this.getAllmask()[id] != null && this.getAllmask()[id].x == bj) {\n            return false\n        }\n        if (this.getAllmask()[id] == null || this.getAllmask()[id + add] == null) {\n            return false;\n        }\n        if (this.getAllmask()[id + add].num != this.getAllmask()[id].num || this.getAllmask()[id + add].step <= step) {\n            return false;\n        }\n\n        if (this.getAllmask()[id + add].step == 9999999) {\n            this.g_mask_samecnt++;\n        }\n\n        this.getAllmask()[id + add].step = step;\n        this.getAllmask()[id + add].from = id;\n        this.allmergecellIds[this.allmergecellIds.length] = id + add;\n        this.checkmaskbyid(id + add, step + 1, bj, add)\n    },\n\n\n    /*\n        调用: 游戏初始的时候调用\n        功能: 改变格子的数字 通过mask\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    changenumbymask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                var num = this.getrandomnum();\n                this.getAllgz()[i].setnum(num);\n                this.getAllgz()[i].settoblock();\n            }\n        }\n    },\n\n    /*\n         调用: 1, 游戏初始的时候调用 2, 改变格子的数字的时候调用\n         功能: 创建随机的新块 返回新快的显示\n         参数: [\n            无\n         ]\n         返回值:[\n            num: 返回格子的显示数组\n         ]\n         思路: 游戏逻辑需要\n     */\n    getrandomnum: function () {\n        var tnum = this.maxnum - 1;\n        if (tnum < tywx.ado.Constants.GameCenterConfig.initGameMaxNum)\n            tnum = tywx.ado.Constants.GameCenterConfig.initGameMaxNum;\n\n        var num = parseInt(Math.random() * 10000) % tnum + 1;\n        // if(this.prerandomnumber == num){\n        //     return this.getrandomnum();\n        // }else{\n        //     this.prerandomnumber = num;\n        // }\n        return num;\n    },\n\n    /*\n        调用: 使用满血道具 或者分享游戏的时候调用\n        功能: 复活游戏\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 逻辑需要\n    */\n    recoverGame: function () {\n        if (this.recoverNumber < tywx.ado.Constants.GameCenterConfig.maxrnum) {\n            this.point = tywx.ado.Constants.GameCenterConfig.maxphy_value;\n            this.drawPhyPoint();\n            this.gamestate = tywx.ado.Constants.GameCenterConfig.gameState.waitclick;\n            this.addRecoverNumber();\n            this.visibleControllButton(false);\n        } else {\n            this.showAlert(\"复活次数已达\" + tywx.ado.Constants.GameCenterConfig.maxrnum + \"次，不能继续复活。\");\n            this.initgame(true);\n        }\n\n    },\n\n    /*\n        调用: 游戏处于移动状态的时候调用\n        功能: 创建新的棋盘，为掉落做准备\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    refreshbymask: function () {\n        for (var i = 0; i < tywx.ado.Constants.GameCenterConfig.geziNumber; i++) {\n            if (this.getAllmask()[i].step != 9999999 && this.getAllmask()[i].step != 0) {\n                this.getAllmask()[i].from = -1;\n                var topid = -1;\n                var tmpid = i + 5;\n                while (tmpid < tywx.ado.Constants.GameCenterConfig.geziNumber) {\n                    if (this.getAllmask()[tmpid].step == 9999999 || this.getAllmask()[tmpid].step == 0) {\n                        topid = tmpid;\n                        break;\n                    }\n                    tmpid += 5;\n                }\n\n\n                if (topid != -1) { //\n                    var dis = this.getAllmask()[topid].y - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[topid].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[topid].posy;\n                    this.getAllgz()[i].block.id_keep = topid;\n                    this.getAllgz()[i].block.id_dest = i;\n                    this.getAllgz()[i].block.speed_keep = (dis * tywx.ado.Constants.GameCenterConfig.gezi_pitch) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    this.getAllmask()[topid].step = 888;\n                    var num = this.getAllgz()[topid].num;\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                    this.getAllgz()[i].block.effectid = this.getAllgz()[topid].block.effectid;\n                    this.getAllgz()[i].block.effecttime = this.getAllgz()[topid].block.effecttime;\n                    this.getAllgz()[topid].block.effectid = -1;\n                    this.getAllgz()[topid].block.effecttime = 0;\n                } else {\n                    var dis = 5 - this.getAllmask()[i].y;\n                    this.getAllgz()[i].block.posx = this.getAllgz()[i].posx;\n                    this.getAllgz()[i].block.posy = this.getAllgz()[i].posy + dis * tywx.ado.Constants.GameCenterConfig.gezi_pitch;\n                    this.getAllgz()[i].block.id_keep = -1;\n                    this.getAllgz()[i].block.id_dest = i;\n                    this.getAllgz()[i].block.speed_keep = (dis * tywx.ado.Constants.GameCenterConfig.gezi_pitch) / tywx.ado.Constants.GameCenterConfig.drop_time;\n                    this.getAllgz()[i].block.adjustdrop();\n                    var num = this.getPjNumberName(i);\n                    this.getAllgz()[i].setnum(num);\n                    this.getAllgz()[i].settoblockvalue();\n                }\n            }\n        }\n    },\n\n    // 找出个格子的周围的数 算出平均数 来设置当前格子的数子\n    getPjNumberName: function (id) {\n        var luck = false;\n        var sjs = Math.random();\n        var ttindex = 0;\n        for (var sindex = 1; sindex < tywx.config.luck_block.score.length - 1; sindex++) {\n            if (this.score >= tywx.config.luck_block.score[sindex]) {\n                ttindex = sindex;\n                break;\n            }\n        }\n        var tgl = tywx.config.luck_block.rate[ttindex];\n        if (sjs <= tgl) {\n            luck = true;\n        }\n\n        var allids = [id - 1, id + 4, id + 5, id + 6, id + 1, id - 6, id - 5, id - 4];\n        var total = 0;\n        var gzindex = 1;\n        for (var tcellIndex = 0; tcellIndex < allids.length; tcellIndex++) {\n            if (this.getAllmask()[tcellIndex]) {\n                total = total + this.getAllgz()[tcellIndex].block.num;\n                gzindex = gzindex + 1;\n            }\n        }\n        let pjNumber = parseInt(total / gzindex);\n        let fudu = luck ? 1.0 : 3.5;\n        let num = parseInt(pjNumber + fudu - 2 * fudu * Math.random());\n        if (num <= 0) num = 1;\n        return num;\n    },\n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 返回首页\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    backFirstPage: function () {\n        this.storeScore();\n        cc.director.loadScene(\"gamestart\", this.destroyFinish);\n    },\n\n    storeScore: function () {\n        if (parseInt(tywx.ado.Utils.loadItem(\"ADDONE_SCORE\", 0)) < this.score) {\n            tywx.ado.Utils.saveItem('ADDONE_SCORE', this.score, false);\n        }\n    },\n\n    backCall: function () {\n        //    this.showMinFriend();\n        this.showAlert(\"测试提示信息\");\n        // this.getAllPathByitemValue({value:2});\n    },\n\n    /*\n        调用: 单独开启的线程调用\n        功能: 开启玩家即将超逾的好友显示 开始更新update\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showMinFriend: function () {\n        tywx.ado.logWithColor('showMinFriend=====');\n        var self = this;\n        var bpos = cc.v2(this.stopButton.x, this.stopButton.y);\n        this.isShowFIcon = true;\n        var rest = self.isRestartGame;\n        var pos = this.friendsNode.convertToWorldSpace(cc.p(this.friendsNode.x, this.friendsNode.y))\n        var screen = cc.view.getVisibleSizeInPixel();\n        // console.log(\"y = \" + pos.y + \"x = \" + pos.x + \"screen = \" + JSON.stringify(screen));\n        wx.postMessage({\n            method: 5,\n            isrestart: rest,\n            score: self.score,\n            width: screen.width,\n            x: pos.x,\n            y: screen.height - pos.y - 90,\n        });\n        self.isRestartGame = false;\n    },\n\n    /*\n         调用: 单独开启的线程调用\n         功能: 隐藏玩家即将超逾的好友显示 停止更新update\n         参数: [\n            无\n         ]\n         返回值:[\n            无\n         ]\n         思路: 游戏逻辑需要\n     */\n    hideMinFriend: function () {\n        var self = this;\n        // self.friendIcon.node.active = false;\n\n        this.isShowFIcon = false;\n        return;\n        // wx.postMessage({\n        //     method: 6,\n        //     rank:false,\n        //     friendicon:false,\n        // });\n        // this.printMaskMsg();\n    },\n    // 打印格子信息\n    printMaskMsg: function () {\n        for (var gzIndex = 0; gzIndex < 25; gzIndex++) {\n            this.getAllmask()[gzIndex].showMSG();\n        }\n    },\n\n    // 首次弹出帮助界面\n    firstShowHelpView: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhelpview\", 0)) === 0) {\n            tywx.Util.setItemToLocalStorage(\"hadshowhelpview\", 1);\n            this.showPlayMethod();\n        }\n    },\n\n    /*\n        调用: update的时候调用 \n        功能: 刷新子域即将超越的玩家纹理\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    _updateSubDomainCanvas: function () {\n        //return;\n        if (!this.tex || !tywx.publicwx) {\n            return;\n        }\n        if (this.isShowFIcon == true) {\n            var openDataContext = wx.getOpenDataContext();\n            var sharedCanvas = openDataContext.canvas;\n            this.tex.initWithElement(sharedCanvas);\n            this.tex.handleLoadedTexture();\n            this.friendIcon.spriteFrame = new cc.SpriteFrame(this.tex);\n            this.friendIcon.node.active = true;\n\n        }\n\n        // if(this.isShowFIcon){\n\n        // }\n\n    },\n\n    /*\n        调用: 点击返回首页的时候会调用\n        功能: 清除当前的节点\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    destroyFinish: function () {\n        // if(this.node){\n        //    this.node.destroy();\n        // }\n    },\n\n    /*\n        调用: 点击免费领取宝箱的时候调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    lingQuBox: function () {\n\n        // 查看当前ID的道具玩家是否存在\n        if (this.produceItem != null) {\n            if (this.allitems.length == 0) {\n                this.allitems[0] = this.produceItem;\n            } else {\n                // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                var findata = false;\n                for (var itemIndex = 0; itemIndex < this.allitems.length; itemIndex++) {\n                    var itemdata = this.allitems[itemIndex];\n                    // tywx.LOGE(\"领取时玩家的道具数据 = \"+JSON.stringify(this.allitems))\n                    if (itemdata.id == this.produceItem.id) {\n                        itemdata.num = itemdata.num + this.produceItem.num;\n                        findata = true;\n                        this.allitems[itemIndex] = itemdata;\n                        break;\n                    }\n                }\n                if (findata == false) {\n                    this.allitems[this.allitems.length] = this.produceItem;\n                }\n            }\n            // 组织显示得到的信息\n\n            var item = null;\n            for (var djIndex = 0; djIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; djIndex++) {\n                var dj = tywx.ado.Constants.GameCenterConfig.allitem[djIndex];\n                // tywx.LOGE(JSON.stringify(dj)+\"当前得到的宝箱数据  = \"+JSON.stringify(this.produceItem));\n                if (this.produceItem.id == dj.id) {\n                    item = dj;\n                    break;\n                }\n            }\n\n            if (item != null) {\n                this.showAlertMSG(\"领取成功\" + item.name);\n            }\n            this.produceItem = null;\n        }\n\n        this.storeAllItem();\n        this.dealAllItems(this.allitems);\n        this.openboxview.active = false;\n        this.showStopView();\n    },\n\n    /*\n        调用: 当条件达到某个值的时候显示领取宝箱\n        功能: 领取道具\n        参数: [\n           maxnum: 此次可以领取的道具的最大数量。\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    showBox: function (maxnum) {\n        let cl = tywx.config.combo_level;\n        let arr = [cl.good[1], cl.cool[1], cl.awesome[1], cl.unbelive[1]];\n        let ran = Math.random();\n        let is_show = ran <= arr[maxnum - 1];\n        tywx.ado.logWithColor(`maxnum:${maxnum},ran:${ran},is_show:${is_show}`);\n        if (is_show) {\n            this.showStopView();\n            this.produceItems(maxnum)\n            this.openboxview.active = true;\n        }\n    },\n\n    /*\n        调用: 逻辑部分\n        功能: 暂停界面的重新开始游戏\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    restartGame: function () {\n        this.initgame(true);\n        this.showSubStopView();\n    },\n\n    /*\n         调用: 逻辑部分\n         功能: 失败界面的重新开始游戏\n         参数: [\n            无\n         ]\n         返回值:[\n            无\n         ]\n         思路: 游戏逻辑需要\n     */\n    loseRestartGame: function () {\n        this.initgame(true);\n        this.visibleControllButton(false);\n    },\n\n    /*\n        调用: 点击失败界面上的关闭按钮调用\n        功能: 领取道具\n        参数: [\n           无\n        ]\n        返回值:[\n           无\n        ]\n        思路: 游戏逻辑需要\n    */\n    startNewGame: function () {\n        this.visibleControllButton(false)\n        this.initgame(true);\n    },\n\n    // 在置顶的块上播放组合动画\n    playMergeAnimation: function () {\n        //return;\n        if (this.g_clickid) {\n            var self = this;\n            if (!this.cmergeAniNode) {\n                this.cmergeAniNode = cc.instantiate(this.mergeAniNode);\n                var mergeAni = this.cmergeAniNode.getComponent(cc.Animation);\n                let removeCall = function () {\n                    self.cmergeAniNode.active = false;\n                }\n                this.cmergeAniNode.parent = this.cellUpView;\n                mergeAni.on('finished', removeCall, self);\n            }\n            this.cmergeAniNode.active = true;\n            this.cmergeAniNode.position = this.allpngs[this.g_clickid].position;\n            var animState = this.cmergeAniNode.getComponent(cc.Animation).play(\"mergani\");\n            // 使动画播放速度加速\n            animState.speed = 1.3;\n        }\n    },\n\n    /**\n     * 得到加分label\n     * label显示的分数\n     */\n    getLabel: function (num) {\n        let label = null;\n        if (this.addScoreLabelPools.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n            label = this.addScoreLabelPools.get();\n        } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n            label = cc.instantiate(this.addScoreNode);\n        }\n        var labelScrpt = label.getComponent(\"AddScoreLabel\");\n        labelScrpt.setNumber(\"+\" + num);\n        return label;\n    },\n    // tywx.ado.Constants.GameCenterConfig.baseScore * (this.g_mask_samecnt - 1) * sc;\n    // 在当前加分的每个快上 加得分 10 * 3 * 4\n    addGetScoreLabelOnTile: function (tiles, shownum) {\n\n        for (var tileIndex = 0; tileIndex < tiles.length; tileIndex++) {\n            var id = tiles[tileIndex];\n            this.dealAddNumber(id);\n            // var num = 10;\n            // if (id == this.g_clickid) {\n            //     num = tywx.ado.Constants.GameCenterConfig.baseScore * (this.getAllgz()[this.g_clickid].num);\n            //     console.log(id  + \"当前的下标 first \" + tileIndex + \" 分数 = \" + num);\n            // }else{\n            //     num = tywx.ado.Constants.GameCenterConfig.baseScore * tileIndex;\n            //     console.log(id  + \"当前的下标 second \" + tileIndex + \" 分数 = \" + num);\n            // }\n            let label = this.getLabel(shownum);\n            label.getComponent(\"addNode\");\n            var scaleBoom = cc.scaleTo(0.2, 1.3);\n            var scalesm = cc.scaleTo(0.2, 1);\n            var mtop = cc.moveBy(0.2, cc.p(0, 10));\n            var spawn = cc.spawn([scaleBoom, mtop]);\n            var self = this;\n            var call = cc.callFunc(function () {\n                label.scalex = 1;\n                label.scaley = 1;\n                self.addScoreLabelPools.put(label);\n                //console.log(\"移除没有4\")\n            })\n            // var pos = this.getPos(id);\n\n            label.parent = this.cellUpView;\n            label.x = this.allpngs[id].x;\n            label.y = this.allpngs[id].y - 10;\n            var seq = cc.sequence(spawn, scalesm, call);\n            label.runAction(seq);\n        }\n    },\n\n    // 判断合成的格子中是否有小皇冠的格子\n    dealAddNumber:function(id){\n        if(this.allpngs[id].getComponent(\"celltile\").prenum != 0){\n            this.addXHGId(this.allpngs[id].getComponent(\"celltile\").prenum);\n            // console.log(\"当前的小皇冠禁用ID = \" + JSON.stringify(this.alljzxhgid));\n        } \n    },\n    // 展示血量帮助提示\n    showUseHpHelp: function (needaddstore) {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhpnum\", 0)) < 2) {\n            if (needaddstore) {\n                tywx.Util.setItemToLocalStorage(\"hadshowhpnum\", parseInt(tywx.Util.getItemFromLocalStorage(\"hadshowhpnum\", 0)) + 1);\n            }\n            this.hpHelpTips.active = true;\n            var delay = cc.delayTime(5);\n            var self = this;\n            var call = cc.callFunc(function () {\n                self.hpHelpTips.active = false;\n            });\n            var seq = cc.sequence(delay, call);\n            this.hpHelpTips.runAction(seq);\n        } else {\n            this.hpHelpTips.active = false;\n        }\n    },\n\n    /** \n     * 当分数超过10以后显示一个动画(合并完成后出现)\n     */\n    showAnimationWhenScoreBiggerThanTen: function (num) {\n        // 产生大于10的效果\n        if (num % 2 == 0  && this.hadShowShareLJ(num) == false && num >= tywx.ado.Constants.GameCenterConfig.moreThanEightNumber && this.hadshowlqbox == false) {\n            this.produceItems(1);\n            this.allshowshareids[this.allshowshareids.length] = num;\n            if (num * tywx.ado.Constants.GameCenterConfig.mergeMaxNumberBaseScore > this.curGiveScore) {\n                this.curGiveScore = num * tywx.ado.Constants.GameCenterConfig.mergeMaxNumberBaseScore;\n                this.score = this.score + this.curGiveScore;\n                this.showAlertMSG(\"合出数字\" + num + \"奖励:\" + this.curGiveScore + \"分\");\n                this.scoreLabel.string = this.score;\n            }\n            this.hadshowlqbox = true;\n            let showScript = this.showNumberNode.getComponent(\"MoreTanNumber\");\n            showScript.setShowNumber(num);\n        }\n    },\n    // 判断当前数字是否显示过分享领奖\n    hadShowShareLJ:function(num){\n        for (var t = 0; t < this.allshowshareids.length; t ++){\n            if (num == this.allshowshareids[t]) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n\n});"]}