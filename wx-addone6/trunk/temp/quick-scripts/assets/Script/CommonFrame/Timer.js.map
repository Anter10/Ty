{"version":3,"sources":["Timer.js"],"names":["tywx","Timer","setTimer","obj","callback","interval","repeatNum","delay","_TAG","LOGD","scheduler","cc","director","getScheduler","enableForTarget","paused","times","macro","REPEAT_FOREVER","schedule","error","cancelTimer","unschedule","isScheduledTimer","isScheduled","e"],"mappings":";;;;;;AAAA;;;;AAIAA,KAAKC,KAAL,GAAa;AACT;;;;;;;;;AASHC,cAAS,kBAASC,GAAT,EAAcC,QAAd,EAAwBC,QAAxB,EAAkCC,SAAlC,EAA6CC,KAA7C,EAAmD;AACrD,YAAIJ,OAAOA,IAAIK,IAAf,EAAqB;AACjBR,iBAAKS,IAAL,CAAU,YAAV,EAAwB,qCAAqCN,IAAIK,IAAJ,GAAWL,IAAIK,IAAf,GAAsB,EAA3D,CAAxB;AACH;AACD,YAAIE,YAAYC,GAAGC,QAAH,CAAYC,YAAZ,EAAhB;AACA,YAAGH,SAAH,EAAa;AACTA,sBAAUI,eAAV,IAA6BJ,UAAUI,eAAV,CAA0BX,GAA1B,CAA7B;AACA;AACA,gBAAIY,SAAS,KAAb;AACA,gBAAIC,QAAU,QAAQV,SAAT,GAAsBA,SAAtB,GAAkCK,GAAGM,KAAH,CAASC,cAAxD;AACAR,sBAAUS,QAAV,CAAmBf,QAAnB,EAA6BD,GAA7B,EAAkCE,QAAlC,EAA4CC,SAA5C,EAAuDC,KAAvD,EAA8DQ,MAA9D;AACH,SAND,MAOI;AACAJ,eAAGS,KAAH,CAAS,gBAAT,EAA2B,wBAA3B;AACH;AAEP,KA1BW;;AA4BT;;;;;;AAMHC,iBAAY,qBAASlB,GAAT,EAAcC,QAAd,EAAuB;AAClC;AACM,YAAID,OAAOA,IAAIK,IAAf,EAAqB;AACjBR,iBAAKS,IAAL,CAAU,YAAV,EAAwB,wCAAwCN,IAAIK,IAAJ,GAAWL,IAAIK,IAAf,GAAsB,EAA9D,CAAxB;AACH;AACD,YAAIE,YAAYC,GAAGC,QAAH,CAAYC,YAAZ,EAAhB;AACA,YAAGH,SAAH,EAAa;AACTA,sBAAUI,eAAV,IAA6BJ,UAAUI,eAAV,CAA0BX,GAA1B,CAA7B;AACAO,sBAAUY,UAAV,CAAqBlB,QAArB,EAA+BD,GAA/B;AACH;AACP,KA5CW;AA6CT;;;;;;AAMAoB,sBAAiB,0BAASpB,GAAT,EAAcC,QAAd,EAAuB;AACpC;AACA,YAAID,OAAOA,IAAIK,IAAf,EAAqB;AACjBR,iBAAKS,IAAL,CAAU,YAAV,EAAwB,6CAA6CN,IAAIK,IAAJ,GAAWL,IAAIK,IAAf,GAAsB,EAAnE,CAAxB;AACH;AACD,YAAG;AACC,gBAAIE,YAAYC,GAAGC,QAAH,CAAYC,YAAZ,EAAhB;AACAH,sBAAUI,eAAV,IAA6BJ,UAAUI,eAAV,CAA0BX,GAA1B,CAA7B;AACA,mBAAOO,UAAUc,WAAV,CAAsBpB,QAAtB,EAAgCD,GAAhC,CAAP;AACH,SAJD,CAKA,OAAMsB,CAAN,EAAQ;AACJd,eAAGS,KAAH,CAAS,sDAAT;AACH;AAEJ;AAjEQ,CAAb","file":"Timer.js","sourceRoot":"../../../../../assets/Script/CommonFrame","sourcesContent":["/**\n * 对scheduler进行封装\n */\n\ntywx.Timer = {\n    /**\n     * 开始定时器\n     * 参数的含义依次是：回调的obj、回调函数、tick的间隔、不算这次还要重复的次数，开始tick的delay时间\n     * @param {[type]}   obj       [description]\n     * @param {Function} callback  [description]\n     * @param {[type]}   interval  [description]\n     * @param {[type]}   repeatNum [description]\n     * @param {[type]}   delay     [description]\n     */\n\tsetTimer:function(obj, callback, interval, repeatNum, delay){\n        if (obj && obj._TAG) {\n            tywx.LOGD('tywx.Timer', '----------in setTimer----------' + (obj._TAG ? obj._TAG : ''));\n        }\n        var scheduler = cc.director.getScheduler();\n        if(scheduler){\n            scheduler.enableForTarget && scheduler.enableForTarget(obj);\n            // 直接屏蔽paused\n            var paused = false;\n            var times =  (null != repeatNum) ? repeatNum : cc.macro.REPEAT_FOREVER;\n            scheduler.schedule(callback, obj, interval, repeatNum, delay, paused);\n        }\n        else{\n            cc.error('setTimer Error', 'schedule is undefined.');\n        }\n        \n\t},\n\n    /**\n     * 取消定时器\n     * @param  {[type]}   obj      [description]\n     * @param  {Function} callback [description]\n     * @return {[type]}            [description]\n     */\n\tcancelTimer:function(obj, callback){\n\t\t// 这个类在jsb_cocos2dx_auto_api.js中可以找到\n        if (obj && obj._TAG) {\n            tywx.LOGD('tywx.Timer', '----------in cancelTimer ---------' + (obj._TAG ? obj._TAG : ''));\n        }\n        var scheduler = cc.director.getScheduler();\n        if(scheduler){\n            scheduler.enableForTarget && scheduler.enableForTarget(obj);\n            scheduler.unschedule(callback, obj);    \n        }\n\t},\n    /**\n     * 判断定时器\n     * @param  {[type]}   obj      [description]\n     * @param  {Function} callback [description]\n     * @return {[type]}            [description]\n     */\n    isScheduledTimer:function(obj, callback){\n        // 这个类在jsb_cocos2dx_auto_api.js中可以找到\n        if (obj && obj._TAG) {\n            tywx.LOGD('tywx.Timer', '----------in isScheduledTimer ---------' + (obj._TAG ? obj._TAG : ''));\n        }\n        try{\n            var scheduler = cc.director.getScheduler();\n            scheduler.enableForTarget && scheduler.enableForTarget(obj);\n            return scheduler.isScheduled(callback, obj);\n        }\n        catch(e){\n            cc.error('getScheduler failed when call Timer.isScheduledTimer');\n        }\n        \n    }\n};\n"]}