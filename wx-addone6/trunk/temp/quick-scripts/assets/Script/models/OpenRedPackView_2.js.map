{"version":3,"sources":["OpenRedPackView_2.js"],"names":["cc","Class","extends","Component","properties","kaibottomNode","default","type","Node","bottomNode","background","Sprite","shareButtonNode","isOpening","close","notneedshow","tywx","ado","Utils","showWXBanner","node","destroy","onLoad","on","event","showUI","commonScaleIn","setData","data","console","log","JSON","stringify","initOpenLogic","init","is_double","open","StateInfo","networkConnected","self","param","success","add_amount","showRedPacketTransferPop","formatCashFen2Yuan","fail","double","requestEveryLoginReward","openRedPackBtn","getComponent","setSuccessCall","playRotate","setReactCall","scale1","scaleTo","scale2","callFunc","active","tcall","seq","sequence","runAction"],"mappings":"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","file":"OpenRedPackView_2.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":[" cc.Class({\n     extends: cc.Component,\n\n     properties: {\n       \n         kaibottomNode: {\n             default: null,\n             type: cc.Node,\n         },\n         bottomNode: {\n             default: null,\n             type: cc.Node,\n         },\n         background: {\n              default: null,\n              type: cc.Sprite,\n         },\n         shareButtonNode: {\n             default: null,\n             type: cc.Node,\n         },\n         isOpening: false,\n     },\n\n     /** \n      * @description \n      */\n     close: function (notneedshow) {\n        tywx.ado.Utils.showWXBanner();\n        this.node.destroy();\n     },\n\n     /**\n      * @description 加载完成后调用\n      */\n     onLoad() {\n            this.background.node.on('touchstart', function (event) {\n                return true;\n            });\n     },\n\n     /** \n      * @description 界面弹出的时候调用\n     */\n     showUI:function(){\n          tywx.ado.Utils.commonScaleIn(this.bottomNode);\n     },\n\n     /**\n      * @description 加载完成后调用\n      * @param {Number} moneyNum 红包金额\n      */\n     setData(data) {\n         this.data = data;\n         console.log(\"当前的设置数据 = \" + JSON.stringify(this.data));\n        //  this.redPackNumberLabel.string = tywx.ado.Utils.formatCashFen2Yuan(this.data.nextAmount) + \" 元\"\n         this.initOpenLogic();\n     },\n     init(is_double){\n         //this.initOpenLogic();\n         this.is_double = is_double;\n     },\n     \n     /**\n      * @description 点击开红包的时候调用\n      */\n     open:function(){\n         if(!tywx.StateInfo.networkConnected){\n            return;\n         }\n         var self = this;\n         let param = {\n            success:function(add_amount){\n                 self.close();\n                 tywx.ado.Utils.showRedPacketTransferPop(tywx.ado.Utils.formatCashFen2Yuan(add_amount));\n             },\n             fail:function(){\n                //  self.close();\n             },\n             double: this.is_double | false,\n         };\n         tywx.ado.Utils.requestEveryLoginReward(param);\n     },\n\n     /** \n      * @description 初始化开红包逻辑\n      */\n     initOpenLogic: function () {\n         var self = this;\n         this.openRedPackBtn = this.shareButtonNode.getComponent(\"ShareButton\");\n         this.openRedPackBtn.setSuccessCall(function () {\n               self.playRotate();\n         });\n         this.openRedPackBtn.setReactCall(true);\n     },\n\n\n     /** \n      * @description 播放旋转动画\n      */\n     playRotate: function () {\n         if (this.isOpening) {\n             return;\n         }\n         this.isOpening = true;\n         var self = this;\n         let scale1 = cc.scaleTo(0.25, 0, 1);\n         let scale2 = cc.scaleTo(0.25, 1, 1);\n         var open = cc.callFunc(function () {\n             self.kaibottomNode.active = false;\n             self.isOpening = false;\n         });\n         var tcall = cc.callFunc(function(){\n              self.open();\n         }) ;\n         var seq = cc.sequence(scale1, scale2, open, tcall);\n         this.kaibottomNode.runAction(seq);\n     },\n });"]}