{"version":3,"sources":["../../../../../assets/Script/models/assets/Script/models/Utils.js"],"names":["crypto","require","GameClubBtn","WXBannerAD","IsHideBanner","WXVedioAD","WXVedioCallback","success","fail","err_cb","Utils","params","canvas","toTempFilePath","x","y","width","w","height","h","destWidth","destHeight","res","console","log","saveImage2PhoneByUrl","tempFilePath","url","cb_success","cb_fail","saveImg2Phone","wx","saveImageToPhotosAlbum","filePath","getSetting","authSetting","authorize","scope","openSetting","complete","key","cc","sys","localStorage","removeItem","tywx","isInWXChat","removeUserCloudStorage","keyList","msg","time","Date","err_obj","SystemInfo","cloudId","toDateString","clientId","UserInfo","userId","system","model","wechatType","version","StateInfo","networkType","ip","header","configObj","errorTxtServer","HttpUtil","httpPost","value","only_local","setItem","setUserCloudStorage","KVDataList","default_value","v","getItem","i","tmp_v","tag","result","success_cb","fail_cb","shareTickets","call_succ","call_fail","ff","getShareInfo","shareTicket","iv","encryptedData","resultStr","decrypt","wxgame_session_key","resultObj","JSON","parse","id","openGId","t0","parseInt","loadItem","tc","getTime","saveItem","e","share_tag","config","tmp_arr","PropagateInterface","ShareConfig","hasOwnProperty","rand_idx","Math","random","length","crypted","decoded","Buffer","decipher","createDecipheriv","setAutoPadding","update","final","err","duration","showToast","title","icon","error","content","show_cancel","sure_cb","cancle_cb","confirm_txt","cancle_txt","showModal","showCancel","confirmText","cancelText","confirm","cancel","createGameClubButton","top","ado","isIpx","style","left","show","hide","window","createBannerAd","destroyWXBanner","sys_info","getSystemInfoSync","s_w","screenWidth","s_h","screenHeight","is_ipx","is_pad","isPad","adUnitId","Constants","WXAdConfig","bannerId","onResize","destroy","createRewardedVideoAd","vedioId","onClose","toast_str","isEnded","undefined","error_callback","load","then","catch","lucky_rate","Configs","LuckyUserRate","showWXModal","hideWXBanner","node","runAction","sequence","scaleTo","easing","easeIn","ret","indexOf","windowHeight","windowWidth","sprite","size","loader","texture","new_sprite_frame","SpriteFrame","spriteFrame","setContentSize","btn_sure_cb","loadRes","prefab","winSize","prefabNode","instantiate","game","addPersistRootNode","position","v2","getComponent","init","request","loginUrl","data","authorCode","deviceInfo","deviceId","name","userName","rand","stringify","nextAmount","red_packet","current","formatCashFen2Yuan","max","totalAmount","times","needShare","is_share","RedPacketInfo","uploadErrorMsg","message","addAmount","WXTransferRedPacketError","code","NotificationCenter","trigger","Events","ADO_EVENT_RED_PACKET_CHANGE","EveryDataLoginInfo","double","amounts","count","inviteId","InviteInfo","reward","hpvalue","cash","current_cash","parent","getPopRoot","pop","scene","director","getScene","pop_root","getChildByName","end","end_callback","moveTo","easeSineIn","callFunc","wx_app_id","list","AdManager","rawAdInfoList","tmp_c","toappid","skip_type","icon_skip_type","togame","topath","path","second_toappid","that","icon_id","config_id","webpage_url","webpage_id","bi_paramlist","adType","BiLog","clickStat","clickStatEventType","clickStatEventTypeClickAdBtn","navigateToMiniProgram","appId","envVersion","extraData","from","clickStatEventTypeClickDirectToMiniGameSuccess","clickStatEventTypeClickDirectToMiniGameFail","ip_info","MinGanIpInfo","MinGanIp","loc","info","lock_city","p1","p2","sqrt","module","exports"],"mappings":"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","file":"Utils.js","sourceRoot":"../../../../../assets/Script/models","sourcesContent":["let crypto = require('crypto');\nlet GameClubBtn = null; // * 游戏圈按钮\nlet WXBannerAD = null; // * 微信banner广告\nlet IsHideBanner = false; // * 是否显示Banner\nlet WXVedioAD = null; // * 微信Vedio广告\nlet WXVedioCallback = {\n    success: null,\n    fail: null,\n    err_cb: null,\n}; // * 微信vedio回调\nlet Utils = class {\n    /**\n     * @param params Object\n     *        params.wisper_ming string 悄悄话 明文\n     *        params.wisper_an string 悄悄话 暗文\n     *        params.heard_url string 玩家头像\n     *        params.size cc.size 尺寸\n     *        params.bg string 背景图片\n     *        params.success function 成功回调\n     *        params.fail function 失败回调\n     * 流程:\n     * 1. 创建离屏canvas\n     * 2. 绘制背景\n     * 3. 绘制头像\n     * 4. 绘制文本\n     * 5. 截屏保存到本地\n     * 6. 将本地图片保存到相册\n     * @author lu ning\n     * @date 11:31 2018/7/5\n     * @return {Object} 返回值描述\n     */\n    static createAndSaveImg2WXAlbum(params) {\n        canvas.toTempFilePath({\n            x: params.x,\n            y: params.y,\n            width: params.w,\n            height: params.h,\n            destWidth: params.w,\n            destHeight: params.h,\n            success: function success(res) {\n                console.log(res);\n\n                Utils.saveImage2PhoneByUrl(res.tempFilePath, params.success, params.fail);\n            },\n            fail: function fail(res) {\n                // self.title.active = true;\n                params.fail && params.fail();\n            }\n        });\n    }\n\n    static saveImage2PhoneByUrl(url, cb_success, cb_fail) {\n        let saveImg2Phone = () => {\n            if (!wx.saveImageToPhotosAlbum) {\n                cb_fail();\n                return;\n            }\n\n            wx.saveImageToPhotosAlbum({\n                filePath: url,\n                success: (res) => {\n                    cb_success();\n                },\n                fail: (res) => {\n                    cb_fail();\n                }\n            });\n        };\n        wx.getSetting({\n            success: (res) => {\n                if (!res.authSetting['scope.writePhotosAlbum']) {\n                    wx.authorize({\n                        scope: \"scope.writePhotosAlbum\",\n                        success: function () {\n                            saveImg2Phone();\n                        },\n                        fail: function () {\n                            if (wx.openSetting) {\n                                wx.openSetting({\n                                    success: (res) => {\n                                        console.log('success', res);\n                                        if (res.authSetting['scope.writePhotosAlbum']) {\n                                            saveImg2Phone();\n                                        } else {\n                                            cb_fail();\n                                        }\n                                    },\n                                    fail: (res) => {\n                                        console.log('fail', res);\n                                        cb_fail();\n                                    }\n                                });\n                            } else {\n                                cb_fail();\n                            }\n                        },\n                        complete: function () {}\n                    });\n                } else {\n                    saveImg2Phone();\n                }\n            },\n            fail: (res) => {\n                cb_fail();\n            }\n        });\n    }\n    /**\n     * * 删除存储在本地的指定数据\n     *\n     * @static\n     * @param {String} key 标识\n     * @returns\n     */\n    static delItem(key) {\n        cc.sys.localStorage.removeItem(key);\n        //localValues.delete(key);\n        if (!tywx.isInWXChat)\n            return;\n        wx.removeUserCloudStorage({\n            keyList: [key],\n            success: (msg) => {\n                console.log('removeObjectCloud  ' + key + ' succeeds', msg);\n            },\n            fail: (msg) => {\n                console.log('removeObjectCloud  ' + key + ' fails', msg);\n            },\n        });\n    }\n\n    static uploadErrorMsg(msg) {\n        let time = new Date();\n        let err_obj = {\n            \"cloud_id\": tywx.SystemInfo.cloudId,\n            \"time\": time.toDateString(),\n            \"client_id\": tywx.SystemInfo.clientId,\n            \"user_id\": tywx.UserInfo.userId,\n            \"sys_version\": tywx.UserInfo.system,\n            \"mobile_models\": tywx.UserInfo.model,\n            \"baseVersion\": \"0\",\n            \"wxVersion\": tywx.UserInfo.wechatType,\n            \"clientVersion\": tywx.SystemInfo.version,\n            \"Nettype\": tywx.StateInfo.networkType,\n            \"ip\": tywx.UserInfo.ip,\n            \"errMsg\": msg\n        };\n        //let err_str = String(err_obj);\n        if (err_obj) {\n            var header = {\n                'Content-Type': 'text/plain'\n            };\n            var configObj = {\n                'url': tywx.SystemInfo.errorTxtServer,\n                'header': header,\n                'postData': err_obj,\n                'callback': (params) => {\n                    console.log('uploadErrorMsg===>', params);\n                }\n            };\n            tywx.HttpUtil.httpPost(configObj, 'POST');\n        }\n    }\n\n    /**\n     * * 保存数据到本地\n     *\n     * @static\n     * @param {String} key 标识\n     * @param {any} value\n     * @param {boolean} only_local 是否只保存在本地,false的情况，上传到腾讯云\n     * @returns\n     */\n    static saveItem(key, value, only_local) {\n        value = value + '';\n        cc.sys.localStorage.setItem(key, value);\n        //localValues.set(key, value);\n        if (!tywx.isInWXChat)\n            return;\n        if (!only_local) {\n            //FIXED: 做版本检测，版本低的会有黑屏\n            if (wx.setUserCloudStorage) {\n                wx.setUserCloudStorage({\n                    KVDataList: [{\n                        key: key,\n                        value: value\n                    }],\n                    success: (msg) => {\n                        console.log('saveObjectToCloud  ' + key + ' succeeds', msg);\n                    },\n                    fail: (msg) => {\n                        console.log('saveObjectToCloud  ' + key + ' fails', msg);\n                    },\n                });\n            }\n        }\n    }\n    /**\n     * * 加载保存在本地的数据\n     *\n     * @static\n     * @param {String} key 标识\n     * @param {any} default_value 默认值\n     * @returns\n     */\n    static loadItem(key, default_value) {\n        //if(localValues.has(key)) return localValues.get(key);\n        var v = cc.sys.localStorage.getItem(key);\n        if (!v) {\n            v = default_value;\n            for (let i = 0; i < 3; i++) {\n                let tmp_v = cc.sys.localStorage.getItem(key);\n                if (!tmp_v) continue;\n                v = tmp_v;\n                break;\n            }\n        }\n        return v;\n    }\n\n    /**\n     * @description 分享到不同群限制\n     * @author lu ning\n     * @date 2018-08-22\n     * @static\n     * @param {String} tag 分享tag\n     * @param {Object} result 分享返回值\n     * @param {Function} success_cb 成功回调\n     * @param {Function} fail_cb 失败回调\n     * @returns\n     */\n    static share2GroupByTicket(tag, result, success_cb, fail_cb) {\n        if (!result.shareTickets || !result.shareTickets[0]) return false;\n        let call_succ = () => {\n            if (success_cb) success_cb();\n        };\n        let call_fail = () => {\n            if (fail_cb) fail_cb();\n        };\n        let ff = Utils;\n\n        wx.getShareInfo({\n            shareTicket: result.shareTickets[0],\n            success: (res) => {\n                console.log('isCanShare2GroupByTicket==>', res);\n                try {\n                    let iv = res.iv;\n                    let encryptedData = res.encryptedData;\n                    let resultStr = ff.decrypt(tywx.UserInfo.wxgame_session_key, iv, encryptedData);\n                    console.log('resultStr==>', resultStr);\n                    if (resultStr && resultStr !== 0) {\n                        let resultObj = JSON.parse(resultStr);\n                        let id = `${tag}_${resultObj.openGId}`;\n                        let t0 = parseInt(ff.loadItem(id, 0));\n                        let tc = new Date().getTime();\n                        console.log('isCanShare2GroupByTicket==>openGId', id, typeof id);\n                        if (tc - t0 >= 8 * 60 * 60 * 1000) {\n                            ff.saveItem(id, tc, true);\n                            call_succ();\n                        } else {\n                            call_fail();\n                        }\n                    } else {\n                        call_fail();\n                    }\n\n                } catch (e) {\n                    console.log(\"share::\", e);\n                    call_fail();\n                }\n            },\n            fail: () => {\n                call_fail();\n            }\n        });\n    }\n\n    /**\n     * @description 获取随机分享数据\n     * @author lu ning\n     * @date 2018-08-23\n     * @static\n     * @param {String} share_tag\n     */\n    static getRandomShareConfigByShareTag(share_tag) {\n        let config = null;\n        let tmp_arr = [];\n        if (tywx.PropagateInterface.ShareConfig.hasOwnProperty(share_tag)) {\n            tmp_arr = tywx.PropagateInterface.ShareConfig[share_tag];\n            let rand_idx = parseInt(Math.random() * tmp_arr.length);\n            config = tmp_arr[rand_idx];\n        }\n        return config;\n    }\n\n    static decrypt(key, iv, crypted) {\n        var decoded = 0;\n        try {\n            crypted = new Buffer(crypted, 'base64');\n            iv = new Buffer(iv, 'base64');\n            key = new Buffer(key, 'base64');\n\n            var decipher = crypto.createDecipheriv('aes-128-cbc', key, iv);\n            decipher.setAutoPadding(true);\n\n            decoded = decipher.update(crypted, 'binary', 'utf8');\n            decoded += decipher.final('utf8');\n        } catch (err) {\n            console.log(\"decrypt\", \" catch error: \" + err);\n        }\n        return decoded;\n    }\n\n    /**\n     * @description \n     * @author lu ning\n     * @date 2018-08-24\n     * @static\n     * @param {String} msg\n     * @param {number} [duration=1000]\n     */\n    static showWXToast(msg, duration = 1000) {\n        if (wx.showToast) {\n            wx.showToast({\n                title: msg,\n                icon: '',\n                duration: duration\n            });\n        } else {\n            cc.error('showWXToast error can not find function wx.showToast');\n        }\n    }\n    /**\n     * @description 显示模态窗\n     * @author lu ning\n     * @date 2018-08-24\n     * @static\n     * @param {String} content 显示内容\n     * @param {String} [title='提示'] title\n     * @param {boolean} [show_cancle=false]  是否显示取消\n     * @param {Function} [sure_cb=null] 确定按钮回调\n     * @param {Function} [cancle_cb=null] 取消按钮回调\n     * @param {string} [confirm_txt='确定']\n     * @param {string} [cancle_txt='取消']\n     */\n    static showWXModal(content, title = '提示', show_cancel = false, sure_cb = null, cancle_cb = null, confirm_txt = '确定', cancle_txt = '取消') {\n        wx.showModal({\n            title: title,\n            content: content,\n            showCancel: show_cancel,\n            confirmText: confirm_txt,\n            cancelText: cancle_txt,\n            success: function (res) {\n                if (res.confirm) {\n                    console.log('用户点击确定');\n                    sure_cb && sure_cb();\n                } else if (res.cancel) {\n                    console.log('用户点击取消');\n                    cancle_cb && cancle_cb();\n                }\n            }\n        });\n    }\n    /**\n     * @description 显示游戏圈\n     * @author lu ning\n     * @date 2018-09-05\n     * @static \n     */\n    static showGameClub() {\n        if (!GameClubBtn && wx.createGameClubButton) {\n            let top = tywx.ado.Utils.isIpx() ? .4 * canvas.height : .39 * canvas.height;\n            GameClubBtn = wx.createGameClubButton({\n                icon: 'green',\n                style: {\n                    left: 20,\n                    top: top,\n                    width: 40,\n                    height: 40\n                }\n            });\n        }\n        GameClubBtn.show();\n    }\n    /**\n     * @description 隐藏游戏圈\n     * @author lu ning\n     * @date 2018-09-05\n     * @static\n     */\n    static hideGameClub() {\n        if (GameClubBtn) {\n            GameClubBtn.hide();\n        }\n    }\n\n    /**\n     * @description 创建并显示微信Banner广告, IsHideBanner=false到时候创建成功也不会显示\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @returns\n     */\n    static createAndcreateAndShowWXBanner() {\n        if (!window.wx) return; //! 防止浏览器中报错\n        if (!wx.createBannerAd) return; //! 玩家基础库不支持\n        tywx.ado.Utils.destroyWXBanner();\n        let sys_info = wx.getSystemInfoSync();\n        let s_w = sys_info.screenWidth;\n        let s_h = sys_info.screenHeight; // 220\n        // ! 强制适配,主要是ipx有问题\n        let is_ipx = tywx.ado.Utils.isIpx();\n        // ! 强制适配 pad(宽屏设备)\n        let is_pad = tywx.ado.Utils.isPad();\n        WXBannerAD = wx.createBannerAd({\n            adUnitId: tywx.ado.Constants.WXAdConfig.bannerId,\n            style: {\n                left: 0,\n                top: 0,\n                width: is_ipx ? s_w * 0.88 : (is_pad ? s_w * 0.6 : s_w * 0.95)\n            }\n        });\n\n        try {\n            WXBannerAD.onResize(function (res) {\n                console.log('showBannerAd', '当前banner,width:' + res.width + \"; height:\" + res.height);\n                if (WXBannerAD) {\n                    let top = s_h - res.height - 5; //is_ipx ? s_h - res.height + 50 : s_h - res.height - 5;\n                    WXBannerAD.style.left = (s_w - res.width) / 2;\n                    WXBannerAD.style.top = top;\n                    //res.width             = is_ipx ? s_w * 0.8 : s_w * 0.9;\n                    //res.height            = s_h * 0.13;\n                }\n            });\n        } catch (e) {\n            console.log(e);\n        }\n        // * 隐藏状态不显示banner\n        if (WXBannerAD && !IsHideBanner) WXBannerAD.show();\n    }\n    /**\n     * @description 隐藏Banner广告,隐藏后，若需要显示，必须调用showWXBanner()\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static hideWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.hide();\n        }\n        IsHideBanner = true;\n    }\n    /**\n     * @description 显示Banner广告\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static showWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.show();\n        }\n        IsHideBanner = false;\n    }\n    /**\n     * @description 销毁Banner\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static destroyWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.hide();\n            WXBannerAD.destroy();\n            WXBannerAD = null;\n        }\n    }\n    /**\n     * @description 显示视频广告\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {Function} params.error_callback\n     */\n    static showWXVideo(params) {\n        if (!window.wx) return; //! 防止浏览器中报错\n        if (!wx.createRewardedVideoAd) return; //! 玩家基础库不支持\n        if (!WXVedioAD) {\n            WXVedioAD = wx.createRewardedVideoAd({\n                adUnitId: tywx.ado.Constants.WXAdConfig.vedioId\n            });\n            WXVedioAD.onClose(res => {\n                let toast_str = '';\n                if (res && res.isEnded || res === undefined) {\n                    toast_str = '视频观看成功';\n                    WXVedioCallback.success && WXVedioCallback.success();\n                } else {\n                    toast_str = '视频观看失败';\n                    WXVedioCallback.fail && WXVedioCallback.fail();\n                }\n                // tywx.ado.Utils.showWXModal(`${toast_str}`);\n                // tywx.ado.Utils.showWXBanner();\n            });\n        }\n        // * 成功和失败回调是变化的\n        WXVedioCallback.success = params.success;\n        WXVedioCallback.fail = params.fail;\n        WXVedioCallback.err_cb = params.error_callback || null;\n\n\n        WXVedioAD.load().then(() => WXVedioAD.show()).catch(e => {\n            console.log(e);\n            let lucky_rate = tywx.ado.Configs.LuckyUserRate || 50;\n            if(Math.random() * 100 <= lucky_rate){\n                WXVedioCallback.err_cb && WXVedioCallback.err_cb();\n            }\n            else{\n                tywx.ado.Utils.showWXModal(\"获取视频失败\");\n            }\n        });\n        tywx.ado.Utils.hideWXBanner();\n    }\n    /**\n     * @description 通用缩放动画\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @param {cc.Node} node\n     */\n    static commonScaleIn(node) {\n        if (!node) return;\n        node.runAction(\n            cc.sequence(\n                cc.scaleTo(0.08, 0.95).easing(cc.easeIn(3.0)),\n                cc.scaleTo(0.12, 1.1).easing(cc.easeIn(3.0)),\n                cc.scaleTo(0.08, 1).easing(cc.easeIn(3.0))\n            )\n        );\n    }\n    /**\n     * @description 是否是iphoneX\n     * @author lu ning\n     * @date 2018-09-07\n     * @static\n     * @returns\n     */\n    static isIpx() {\n        let ret = false;\n        let sys_info = wx.getSystemInfoSync();\n        if (sys_info.model.indexOf('iPhone X') >= 0 || (sys_info.system.indexOf('iOS') >= 0 && sys_info.windowHeight / sys_info.windowWidth > 1.9)) {\n            return true;\n        }\n        return ret;\n    }\n    /**\n     * @description 根据url刷新sprite\n     * @author lu ning\n     * @date 2018-09-08\n     * @static\n     * @param {cc.Sprite} sprite\n     * @param {String} url\n     */\n    static refreshSpriteByUrl(sprite, url, size) {\n        cc.loader.load(url, (err, texture) => {\n            if (!err) {\n                let new_sprite_frame = new cc.SpriteFrame(texture);\n                sprite.spriteFrame = new_sprite_frame;\n                if (size) {\n                    sprite.node.setContentSize(size);\n                }\n                console.log(\"刷新CDN图片成功\");\n            }\n        });\n    }\n    /**\n     * @description\n     * @author lu ning\n     * @date 2018-09-17\n     * @static\n     * @param {Function} btn_sure_cb\n     * @param {string} content\n     */\n    static showErrorGfitPop(btn_sure_cb, content) {\n        cc.loader.loadRes('prefabs/ado_view_error_gift', function (err, prefab) {\n            if (!err) {\n                let size = cc.winSize;\n                var prefabNode = cc.instantiate(prefab);\n                cc.game.addPersistRootNode(prefabNode);\n                prefabNode.position = cc.v2(size.width / 2, size.height / 2);\n                prefabNode.getComponent('ado_view_error_gift').init(btn_sure_cb, content);\n            }\n        });\n    }\n    /**\n     * @description 获取红包,获取本次加红包的信息，\n     *     调用requestAddRedPacket接口后才能真正的加上\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     */\n    static requestRedPacket(params) {\n        console.log('redpacket', 'requestRedPacket start');\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                //method:\"POST\",\n                success: (res) => {\n                    console.log('redpacket', 'requestRedPacket==success', JSON.stringify(res));\n                    if (res.data && res.data.nextAmount > 0) {\n                        let red_packet = {\n                            current: tywx.ado.Utils.formatCashFen2Yuan(res.data.nextAmount), // 本次获取的金额\n                            max: tywx.ado.Utils.formatCashFen2Yuan(res.data.totalAmount), // 总共金额\n                            times: res.data.needShare ? 3 : 1, // 1,2 ==> 确定，直接领取，>= 3分享或看视频领取\n                            is_share: res.data.needShare,\n                        };\n                        tywx.ado.RedPacketInfo = res.data;\n                        params.success && params.success(red_packet);\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket==success;' + JSON.stringify(res));\n                    } else {\n                        if (res.data && res.data.nextAmount === 0) {\n                            tywx.ado.RedPacketInfo = res.data;\n                        }\n                        params.fail && params.fail(-1);\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket==success---fail;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    params.fail && params.fail(-1);\n                    console.log('redpacket', 'requestRedPacket==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket==fail;' + JSON.stringify(res));\n                }\n            });\n        } catch (e) {\n            params.fail && params.fail(-1);\n            console.log('redpacket', 'requestRedPacket==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket==error;' + e.message);\n\n        }\n    }\n    /**\n     * @description 请求加红包\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     */\n    static requestAddRedPacket(params) {\n        console.log('redpacket', 'requestAddRedPacket start');\n\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/add`,\n                data: {\n                    userId: tywx.UserInfo.userId, // tywx.UserInfo.userId\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                //method:\"POST\",\n                success: (res) => {\n                    // * 加红包成功\n                    console.log('redpacket', 'requestAddRedPacket==success', JSON.stringify(res));\n                    if (res.data && res.data.addAmount > 0) {\n                        let addAmount = tywx.ado.Utils.formatCashFen2Yuan(res.data.addAmount);\n                        tywx.ado.RedPacketInfo.totalAmount += res.data.addAmount;\n                        params.success && params.success(addAmount);\n                    } else {\n                        tywx.ado.Utils.showWXModal(\n                            '加红包失败',\n                            '提示',\n                            false);\n                        params.fail && params.fail();\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==success---fail;' + JSON.stringify(res));\n\n                    }\n\n                },\n                fail: (res) => {\n                    // * 加红包失败\n                    console.log('redpacket', 'requestAddRedPacket==fail', JSON.stringify(res));\n                    tywx.ado.Utils.showWXModal(\n                        '加红包失败',\n                        '提示',\n                        false);\n                    params.fail && params.fail();\n                    tywx.ado.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 加红包报错\n            console.log('redpacket', 'requestAddRedPacket==error', JSON.stringify(e));\n            tywx.ado.Utils.showWXModal(\n                '加红包失败',\n                '提示',\n                false);\n            tywx.ado.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==error;' + e.message);\n\n        }\n    }\n    /**\n     * @description 请求提现\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     */\n    static requestRedPacket2Cash() {\n        console.log('redpacket', 'requestRedPacket2Cash start');\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/transfer`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 提现成功\n                    console.log('redpacket', 'requestRedPacket2Cash==success', JSON.stringify(res));\n                    if (res.data) {\n                        tywx.ado.Utils.showWXModal(\n                            tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                            '提示',\n                            false);\n                        if (res.data.code !== 0) {\n                            tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.ado.RedPacketInfo.totalAmount = 0;\n                            tywx.NotificationCenter.trigger(tywx.ado.Events.ADO_EVENT_RED_PACKET_CHANGE, null);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 提现失败\n                    //params.fail && params.fail(0);\n                    tywx.ado.Utils.showWXModal(\n                        '提现请求失败，请稍后再试',\n                        '提示',\n                        false);\n                    console.log('redpacket', 'requestRedPacket2Cash==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 提现失败\n            //params.fail && params.fail(0);\n            tywx.ado.Utils.showWXModal(\n                '提现请求失败，请稍后再试',\n                '提示',\n                false);\n            console.log('redpacket', 'requestRedPacket2Cash==fail', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求每日登陆信息\n     * @author lu ning\n     * @date 2018-09-24\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {Function} params.error\n     * @static\n     */\n    static requestEveryLoginInfo(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/everydaylogin/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 获取每日登陆信息成功\n                    console.log('redpacket', 'requestEveryLoginInfo==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.ado.Utils.showWXModal(\n                                tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.ado.EveryDataLoginInfo = res.data;\n                            params.success && params.success();\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 获取每日登陆信息失败\n                    params.fail && params.fail();\n                    console.log('redpacket', 'requestEveryLoginInfo==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 提现失败\n            console.log('redpacket', 'requestEveryLoginInfo==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求获得每日登陆奖励\n     * @author lu ning\n     * @date 2018-09-24\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {boolean} params.double\n     */\n    static requestEveryLoginReward(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/everydaylogin/reward`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    double: params.double ? 1 : 0,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 请求每日登陆奖励成功\n                    console.log('redpacket', 'requestEveryLoginReward==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.ado.Utils.showWXModal(\n                                tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            //tywx.ado.EveryDataLoginInfo = res.data;\n                            let addAmount = tywx.ado.EveryDataLoginInfo.amounts[tywx.ado.EveryDataLoginInfo.count - 1];\n                            addAmount = params.double ? addAmount * 2 : addAmount;\n                            tywx.ado.RedPacketInfo.totalAmount += addAmount;\n                            tywx.NotificationCenter.trigger(tywx.ado.Events.ADO_EVENT_RED_PACKET_CHANGE, null);\n                            params.success && params.success(addAmount);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    params.fail && params.fail();\n                    console.log('redpacket', 'requestEveryLoginReward==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            console.log('redpacket', 'requestEveryLoginInfo==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==error;' + e.message);\n        }\n    }\n    /**\n     * @description 上报邀请信息\n     * @author lu ning\n     * @date 2018-09-26\n     * @param {Number} inviteId\n     * @static\n     */\n    static requestInviteLogin(inviteId) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/login`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                    inviteId: inviteId\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    console.log('invite', 'requestInviteLogin==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            // tywx.ado.Utils.showWXModal(\n                            //     tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                            //     '提示',\n                            //     false);\n                            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteLogin==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            console.log('invite requestInviteLogin success');\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('invite;requestInviteLogin==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    console.log('invite', 'requestInviteLogin==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('invite;requestInviteLogin==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            console.log('invite', 'requestInviteLogin==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteLogin==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求邀请信息\n     * @author lu ning\n     * @date 2018-09-26\n     * @static\n     */\n    static requestInviteGetInfo(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    console.log('invite', 'requestInviteGetInfo==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.ado.Utils.showWXModal(\n                                tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteGetInfo==success--error-0;' + JSON.stringify(res));\n                            params.fail && params.fail();\n                        } else {\n                            console.log('invite requestInviteGetInfo success');\n                            tywx.ado.InviteInfo = res.data;\n                            params.success && params.success();\n                            // ! Modify by luning [14-11-2018] 暂时去掉最大血量为6\n                            //if(tywx.ado.InviteInfo.reward) tywx.ado.hpvalue = 6;\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('invite;requestInviteGetInfo==success--error-1;' + JSON.stringify(res));\n                        params.fail && params.fail();\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    console.log('invite', 'requestInviteGetInfo==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('invite;requestInviteGetInfo==fail;' + JSON.stringify(res));\n                    params.fail && params.fail();\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            console.log('invite', 'requestInviteGetInfo==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteGetInfo==error;' + e.message);\n            params.fail && params.fail();\n        }\n    }\n    /**\n     * @description 请求邀请奖励\n     * @author lu ning\n     * @date 2018-09-26\n     * @static\n     */\n    static requestInviteReward() {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/reward`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    console.log('invite', 'requestInviteReward==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.ado.Utils.showWXModal(\n                                tywx.ado.Constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteReward==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            console.log('invite requestInviteReward success');\n                            tywx.ado.InviteInfo.reward = true;\n                            tywx.ado.hpvalue = 6;\n                            tywx.ado.Utils.showWXModal(\n                                \"领取成功\",\n                                '提示',\n                                false);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.ado.Utils.uploadErrorMsg('invite;requestInviteReward==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    console.log('invite', 'requestInviteReward==fail', JSON.stringify(res));\n                    tywx.ado.Utils.uploadErrorMsg('invite;requestInviteReward==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            console.log('invite', 'requestInviteReward==error', JSON.stringify(e));\n            tywx.ado.Utils.uploadErrorMsg('invite;requestInviteReward==error;' + e.message);\n        }\n    }\n\n    /**\n     * @description 现金转换==>分 to 元\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     * @param {Number} cash 分为单位\n     * @returns {Number}\n     */\n    static formatCashFen2Yuan(cash) {\n        let ret = 0;\n        ret = cash / 100;\n        return ret;\n    }\n    /**\n     * @description 显示提现弹窗\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @param {string} [current_cash=null]\n     */\n    static showRedPacketTransferPop(current_cash = null) {\n        cc.loader.loadRes('prefabs/red_packet_tansfer', (err, prefab) => {\n            if (!err) {\n                let parent = tywx.ado.Utils.getPopRoot();\n                let pop = cc.instantiate(prefab);\n                pop.parent = parent;\n                pop.getComponent('red_packet_transfer').init(current_cash);\n            }\n        });\n    }\n    /**\n     * @description 获取弹窗根节点\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @returns\n     */\n    static getPopRoot() {\n        let scene = cc.director.getScene();\n        let pop_root = scene.getChildByName('Canvas').getChildByName('pop');\n        return pop_root;\n    }\n    /**\n     * @description 简单的贝塞尔曲线\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @param {cc.Node} node\n     * @param {cc.Vec2} end\n     * @param {Function} end_callback\n     */\n    static simpleBezierAction(node, end, end_callback) {\n        //let sp        = node.position;\n        //let ep        = end;\n        // let dist      = Math.sqrt((sp.x - ep.x) * (sp.x - ep.x) + (sp.y - ep.y) * (sp.y - ep.y));//cc.pDistance(sp,ep);\n        // //cc.pSub();\n        // let normalPos = eq.sub(sp).normalizeSelf();//cc.pSub(ep,sp).normalizeSelf();\n        // let cfg = [cc.v2(sp.x + 30, sp.y + normalPos.y * dist / 2),\n        //            cc.v2(sp.x + normalPos.x * dist / 4 * 3, sp.y + normalPos.y * dist / 4 * 3),\n        //            ep];\n        if (node) {\n            node.runAction(\n                cc.sequence(\n                    cc.moveTo(0.8, end).easing(cc.easeSineIn()),\n                    cc.callFunc(() => {\n                        end_callback && end_callback();\n                    })\n                )\n            );\n        }\n    }\n    /**\n     * @description 是否是平板\n     * @author lu ning\n     * @date 2018-09-20\n     * @static\n     */\n    static isPad() {\n        let ret = false;\n        let sys_info = wx.getSystemInfoSync();\n        if (sys_info.windowHeight / sys_info.windowWidth < 1.777) {\n            return true;\n        }\n        return ret;\n    }\n    /**\n     * @description 通过appid获取游戏交叉导流信息\n     * @author lu ning\n     * @date 2018-09-29\n     * @static\n     * @param {String} wx_app_id\n     */\n    static getCrossAdConfigByAppId(wx_app_id) {\n        let ret = null;\n        let list = tywx.AdManager.rawAdInfoList;\n        for (let i = 0; i < list.length; ++i) {\n            let tmp_c = list[i];\n            if (tmp_c.toappid === wx_app_id) {\n                ret = tmp_c;\n                break;\n            }\n        }\n        return ret;\n    }\n    /**\n     * @description 游戏跳转\n     * @author lu ning\n     * @date 2018-09-29\n     * @static\n     * @param {*} config\n     * @returns\n     */\n    static jump2MiniProgramByConfig(config) {\n        try {\n\n            // this.genRandomSecondAdInfo();\n\n            //先尝试直接跳转\n            var skip_type = config.icon_skip_type;\n            var toappid = config.toappid;\n            var togame = config.togame;\n            var topath = config.path;\n            var second_toappid = config.second_toappid;\n\n            console.log('topath ====>' + topath);\n\n            var that = this;\n\n            var icon_id = config.icon_id;\n            var config_id = '0';\n            var webpage_url = '';\n            var webpage_id = '0';\n\n            var bi_paramlist = [icon_id, config_id, webpage_url, toappid, togame, webpage_id, that.adType];\n\n            console.log('bi_paramlist ====> ' + JSON.stringify(bi_paramlist));\n\n            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickAdBtn, bi_paramlist);\n\n            //! 先尝试直接跳转\n            if (wx && wx.navigateToMiniProgram) {\n\n                if (1 === skip_type) {\n\n                    wx.navigateToMiniProgram({\n                        appId: toappid,\n                        path: topath ? topath : '?from=adcross',\n                        envVersion: 'release',\n                        extraData: {\n                            from: topath ? topath : '?from=adcross',\n                        },\n                        success: function (res) {\n\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess, bi_paramlist);\n\n                            console.log('wx.navigateToMiniProgram success');\n                            console.log(res);\n                        },\n                        fail: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail, bi_paramlist);\n                            console.log('wx.navigateToMiniProgram fail');\n                            console.log(res);\n                        },\n                        complete: function (res) {\n                            console.log('navigateToMiniProgram ==== complete');\n                            //that.resetBtnIcon();\n                        }\n                    });\n\n                    return;\n                } else if (2 === skip_type) {\n                    wx.navigateToMiniProgram({\n                        appId: second_toappid,\n                        path: topath ? topath : '?from=adcross',\n                        envVersion: 'release',\n                        extraData: {\n                            from: topath ? topath : '?from=adcross',\n                        },\n                        success: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess, bi_paramlist);\n                            console.log('wx.navigateToMiniProgram success');\n                            console.log(res);\n                        },\n                        fail: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail, bi_paramlist);\n                            console.log('wx.navigateToMiniProgram fail');\n                            console.log(res);\n                        },\n                        complete: function (res) {\n                            //that.resetBtnIcon();\n                            console.log('navigateToMiniProgram ==== complete');\n                        }\n                    });\n\n                } else {\n                    console.error('Unsupported skip type! Please Check!');\n                }\n\n                return;\n            }\n        } catch (err) {\n            console.log(\"error:\", \"tywx.AdManager.onClickAdIconBtn——\" + JSON.stringify(err));\n        }\n    }\n    /**\n     * @description 是否是敏感ip\n     * @author lu ning\n     * @date 2018-09-30\n     * @static\n     * @param {Object} ip_info\n     * @returns\n     */\n    static isMinGanIp(ip_info){\n        let ret = false;\n        let MinGanIpInfo = tywx.ado.Configs.MinGanIp || tywx.ado.Constants.MinGanIp;\n        if(ip_info.loc && ip_info.loc.length > 0){\n            for(let i = 0; i < MinGanIpInfo.length; ++i){\n                let info = MinGanIpInfo[i];\n                if(ip_info.loc[1] === info[0]){\n                    if(info[1].length === 0){\n                        // * 没有指定城市，只指定了省份，那么就是屏蔽整个省\n                        ret = true;\n                    }\n                    else{\n                        let lock_city = info[1];\n                        if(lock_city.indexOf(ip_info.loc[2]) >= 0){\n                            ret = true;\n                            break;\n                        }\n                    }\n                    \n                }\n            }\n        }\n        console.log('MINGAN_IP...'+ret);\n        return ret;\n    }\n\n    static distance(p1, p2){\n        return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n    }\n};\n\nmodule.exports = Utils;"]}