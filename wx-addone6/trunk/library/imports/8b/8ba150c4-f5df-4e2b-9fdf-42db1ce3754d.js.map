{"version":3,"sources":["../../../../assets/Script/assets/Script/gamestart.js"],"names":["config","require","tywx","publicwx","curscene","gamestart","cc","Class","extends","Component","properties","startButton","default","type","Button","backButton","audioCtr","Prefab","userItem","gameScore","Label","historyLabel","phbNameLabel","phb","phbback","Sprite","helpback","giftback","Node","method","phbSprite","phbShareBtn","shareBtn","groupBtn","phbView","helpview","giftview","helpViewPre","contentView","addInMyMini","shouZHiNode","icon","version","requestTimes","haveStoreGameData","nodeEveryDataLoginBtn","nodeMoreGame","nodeInviteGift","start","tex","Texture2D","window","sharedCanvas","width","height","showPhb","_updateSubDomainCanvas","openDataContext","wx","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","ctor","update","delayTime","onLoad","postMessage","MAIN_MENU_NUM","string","SystemInfo","ado","loadProgress","inviteGiftTouchEnable","Utils","showGameClub","game","cw","ch","is_ipx","console","log","y","widget","node","getComponent","Widget","_top","setShareConfig","Constants","ShareConfig","RANK_SHARE","JSON","stringify","view","getDevicePixelRatio","getVisibleSize","PropagateInterface","getShareConfigInfo","msg","ShareInterface","getRandomOnShareAppMessageInfo","setOnShareAppMessageInfo","title","imageUrl","sharePointId","shareSchemeId","shareComponent","setErrorCall","data","setSuccessCall","FIRST_PAGE_SHARE","groupBtnComponent","self","setShareGroupCall","active","showBack","hideGameClub","shareTicket","shareTickets","Timer","setTimer","score","loadItem","length","x","tx","saveItem","on","event","hideBack","givePlayerItems","requestConfigInfo","btnGetMoney","getChildByName","UserInfo","userId","auditing","loginSuccess","NotificationCenter","listen","EventType","SDK_LOGIN_SUCCESS","Events","ADO_EVENT_RED_PACKET_CHANGE","onRedPacktChange","ADO_EVENT_DESTROY_EVERY_DAY_LOGIN","onDestroyEveryDayLogin","ADO_EVENT_GET_IP_SUCCESS","showStartBtnAnimation","animation","Animation","play","parseInt","Math","random","setTimeout","error","everyDayLogin","requestRedPacket","success","res","isRequestedConfig","init","fail","cash","max","formatCashFen2Yuan","RedPacketInfo","totalAmount","isFirstLogin","EveryDataLoginInfo","rewad","showEveryDayLogin","invite_id","requestInviteLogin","requestInviteGetInfo","refreshEveryDayLoginRedPoint","requestEveryLoginInfo","node_red_point","is_canncle_when_reward","root","getPopRoot","loader","loadRes","err","prefab","every_day_login","instantiate","parent","playSZAni","stime","scale","stopAllActions","scaletime","tscale","scaleBoom","scaleTo","scaleSmaller","delay","seq","sequence","rep","repeatForever","runAction","onDestroy","destroyWXBanner","ignoreScope","showPlayMethod","helpviewpre","destroy","helpviewscript","setCloseCall","showGiftView","showFriendPhbView","hidePhbView","loadFinishCallBack","setScore","abs","refreshAfterGetConfig","isMinGanIP","isMinGanIp","AdManager","ipLocInfo","_configUrl","cdnPath","that","Configs","successcb","ret","v","uid","c","cb","d","k","undefined","WXAdConfig","bannerId","WXAd2","banner","vedioId","video","isCanWatchVideo","trigger","ADO_EVENT_RESUEST_CONFIG_END","failcb","HttpUtil","httpGet","opacity","Util","getItemFromLocalStorage","setItemToLocalStorage","giveitems","djIndex","GameCenterConfig","allitem","titem","id","num","initGivePlayerItemNumber","push","showBanner","createAndShowWXBanner","schedule","bannerRefresh","bannerRefreshTime","startGame","prePlayGetScore","showGoonProgress","goonProgressGame","director","loadScene","reset","resetProgerss","progress","contentTxt","hasgononstate","showWXModal","shareMiniApp","shareconfig","shareGroupCallBack","successCallBack","errorCallBack","IsWechatPlatform","showShareMenu","withShareTicket","getRandomShareConfigByShareTag","DefaultShareConfig","share","shareContent","sharePicUrl","LOGE","btnShowLottery","size","winSize","prefabNode","addPersistRootNode","position","v2","btnShowEveryDayLogin","showInviteGift"],"mappings":"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","file":"gamestart.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/*\n   游戏开始界面\n   created by gyc on 2018-08-02.\n   final changed time by gyc on  2018-08-03\n*/\nvar config = require(\"AddOneConfig\")\ntywx.publicwx = true;\n// 记录下当前的场景 用于异步调用\nvar curscene = null;\nvar gamestart = cc.Class({\n    extends: cc.Component,\n    properties: {\n        startButton: {\n            default: null,\n            type: cc.Button,\n        },\n        backButton: {\n            default: null,\n            type: cc.Button,\n        },\n        audioCtr: {\n            default: null,\n            type: cc.Prefab,\n        },\n        userItem: {\n            default: null,\n            type: cc.Prefab,\n        },\n        gameScore: {\n            default: null,\n            type: cc.Label,\n        },\n        historyLabel: {\n            default: null,\n            type: cc.Label,\n        },\n\n        phbNameLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        phb: {\n            default: null,\n            type: cc.Button,\n        },\n        phbback: {\n            default: null,\n            type: cc.Sprite,\n        },\n        helpback: {\n            default: null,\n            type: cc.Sprite,\n        },\n        giftback: {\n            default: null,\n            type: cc.Node,\n        },\n        method: {\n            default: null,\n            type: cc.Button,\n        },\n        phbSprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        phbShareBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        shareBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        groupBtn: {\n            default: null,\n            type: cc.Node,\n        },\n        phbView: {\n            default: null,\n            type: cc.Node,\n        },\n\n        helpview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        giftview: {\n            default: null,\n            type: cc.Node,\n        },\n\n        helpViewPre: {\n            default: null,\n            type: cc.Prefab,\n        },\n        contentView: {\n            default: null,\n            type: cc.Node,\n        },\n\n        addInMyMini: {\n            default: null,\n            type: cc.Node,\n        },\n\n        shouZHiNode: {\n            default: null,\n            type: cc.Node,\n        },\n\n        icon: cc.Sprite,\n        version: cc.Label,\n        //! 请求次数上线\n        requestTimes: 3,\n        // 当前是否有保存的游戏数据\n        haveStoreGameData: -1,\n        nodeEveryDataLoginBtn: cc.Node,\n        nodeMoreGame: cc.Node,\n        //nodeEveryDayLogin: cc.Node,\n        nodeInviteGift: cc.Node\n    },\n\n\n    start() {\n        //是否发布微信版本\n        if (tywx.publicwx) {\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 635;\n            window.sharedCanvas.height = 60 * 30;\n        }\n        this.showPhb = false;\n    },\n\n    /**\n     * 刷新子域的canvas\n     */\n    _updateSubDomainCanvas: function () {\n        if (!this.tex) {\n            return;\n        }\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        // tywx.ado.Utils.createAndSaveImg2WXAlbum({});\n        this.phbSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    /*\n        调用: 系统new 的时候调用。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    ctor: function () {\n\n    },\n\n    update: function (delayTime) {\n        if (tywx.publicwx) {\n            //    this._updateSubDomainCanvas();   \n        }\n    },\n\n    /*\n        调用: 界面加载完成后的回调。\n        功能: 该类的构造函数 可用于自身变量的初始化\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 系统自带\n    */\n    onLoad: function () {\n        wx.postMessage({\n            method: \"load_data\",\n            MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n        });\n        this.version.string = tywx.SystemInfo.version + '';\n        this.haveStoreGameData = tywx.ado.loadProgress();\n        this.inviteGiftTouchEnable = true;\n        tywx.ado.Utils.showGameClub();\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9;\n        if (is_ipx) {\n            console.log(\"iphone x start game\");\n            this.addInMyMini.y = this.addInMyMini.y - 45;\n\n            let widget = this.icon.node.getComponent(cc.Widget);\n            widget._top = 150;\n        }\n        // ! Modify by luning [29-09-2018] 添加更多游戏，单独的交叉导流暂时去掉\n        // let an = tywx.AdManager.getAdNodeByTag('GAME_START');\n        // if(an) an.showAdNode();\n        // this.playSZAni(this.shouZHiNode, 1,1.2);\n\n\n        // this.contentView.height = 60 * 30; \n        this.phbShareBtn.getComponent(\"ShareButton\").setShareConfig(tywx.ado.Constants.ShareConfig.RANK_SHARE);\n        console.log(\"当前屏幕尺寸  \" + JSON.stringify(cc.view.getDevicePixelRatio()) + JSON.stringify(cc.view.getVisibleSize()));\n        tywx.PropagateInterface.getShareConfigInfo(); //! 获取所有分享点信息\n        if (tywx.publicwx) {\n            var msg = tywx.ShareInterface.getRandomOnShareAppMessageInfo();\n            if (msg) {\n                tywx.ShareInterface.setOnShareAppMessageInfo(msg.title, msg.imageUrl, msg.sharePointId, msg.shareSchemeId);\n                console.log(\"当前获得的分享信息 = \" + JSON.stringify(msg))\n            }\n            // 设置分享组件的回调和数据\n            var shareComponent = this.shareBtn.getComponent(\"ShareButton\");\n\n            if (shareComponent) {\n                shareComponent.setErrorCall(function (data) {\n                    console.log(\"分享失败后处理的回调函数 \", data);\n                })\n\n                shareComponent.setSuccessCall(function (data) {\n                    console.log(\"分享成功后处理的回调函数 \", data);\n                })\n\n                shareComponent.setShareConfig(tywx.ado.Constants.ShareConfig.FIRST_PAGE_SHARE);\n            }\n\n            // 设置群组排行榜组件的回调和数据\n            var groupBtnComponent = this.groupBtn.getComponent(\"ShareButton\");\n            var self = this;\n\n            if (groupBtnComponent) {\n                groupBtnComponent.setShareConfig(tywx.ado.Constants.ShareConfig.RANK_SHARE);\n                groupBtnComponent.setShareGroupCall(function (data) {\n                    console.log(\"群分享当前的文档\")\n                    if (self.showPhb) {\n                        self.phbView.active = false;\n                        self.showPhb = false;\n                        tywx.ado.Utils.showGameClub();\n                    } else {\n                        window.sharedCanvas.width = 635;\n                        window.sharedCanvas.height = 60 * 30;\n                        self.phbView.active = true;\n                        self.showPhb = true;\n                        curscene.showBack();\n                        tywx.ado.Utils.hideGameClub();\n                        window.wx.postMessage({\n                            method: 2,\n                            MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n                            shareTicket: data.shareTickets[0]\n                        });\n                        // 开一个线程监听次时间段用户是否有点击\n                        self.phbNameLabel.string = \"群排行榜\";\n                        tywx.Timer.setTimer(self, function () {\n                            self._updateSubDomainCanvas();\n                        }, 1, 11, 0);\n                    }\n\n\n                })\n\n                groupBtnComponent.setErrorCall(function (data) {\n                    console.log(\"分享失败后处理的回调函数 \", data);\n                })\n\n            }\n\n        }\n        var score = tywx.ado.Utils.loadItem(\"ADDONE_SCORE2\", 0);\n        if (score != null) {\n            this.gameScore.string = score;\n            let length = (score + \"\").length;\n            // 根据当前的分数来调整显示\n            if (length < 2) {\n                this.historyLabel.node.x = this.historyLabel.node.x + 50;\n                this.gameScore.node.x = this.gameScore.node.x + 50;\n            } else if (length > 5) {\n                var tx = 25 + (length - 6) * 25;\n                this.historyLabel.node.x = this.historyLabel.node.x - tx;\n                this.gameScore.node.x = this.gameScore.node.x - tx;\n            }\n            tywx.ado.Utils.saveItem(\"ADDONE_SCORE2\", score, false);\n        } else {\n            console.log(\"当前分数不存在\")\n        }\n        //  游戏的点击逻辑\n        this.phbback.node.on('touchstart', function (event) {\n            return true;\n        }, this);\n\n        var self = this;\n\n        curscene = this;\n\n        curscene.hideBack()\n        this.givePlayerItems();\n        console.log(\"本地的项目配置 = \" + JSON.stringify(config))\n        this.requestConfigInfo();\n        //   tywx.ado.Configs = config;\n        //   tywx.config = config;\n        // 开一个线程监听次时间段用户是否有点击\n\n        tywx.Timer.setTimer(self, function () {\n            self._updateSubDomainCanvas();\n        }, 1, 11, 0);\n\n        // ! 菜单不显示banner\n        //this.showBanner();\n        this.btnGetMoney = this.node.getChildByName('GetMoneyButton');\n        this.btnGetMoney.active = false;\n\n        if (tywx.UserInfo.userId > 0 && tywx.config.auditing === false) { // \n            this.loginSuccess();\n        }\n\n        tywx.NotificationCenter.listen(tywx.EventType.SDK_LOGIN_SUCCESS, this.loginSuccess, this);\n        tywx.NotificationCenter.listen(tywx.ado.Events.ADO_EVENT_RED_PACKET_CHANGE, this.onRedPacktChange, this);\n        tywx.NotificationCenter.listen(tywx.ado.Events.ADO_EVENT_DESTROY_EVERY_DAY_LOGIN, this.onDestroyEveryDayLogin, this);\n        tywx.NotificationCenter.listen(tywx.ado.Events.ADO_EVENT_GET_IP_SUCCESS, this.onDestroyEveryDayLogin, this);\n\n        this.showStartBtnAnimation();\n\n        this.nodeInviteGift.active = false;\n    },\n    showStartBtnAnimation(){\n        let animation = this.startButton.getComponent(cc.Animation);\n        animation.play();\n        animation.on('finished', ()=>{\n            let delayTime = parseInt(Math.random() * 2000 + 1000);\n            setTimeout(()=>{\n                try {\n                    animation.play();\n                } catch (error) {\n                    console.log('showStartBtnAnimation error==>',animation, animation.play);\n                    console.log(error);\n                }\n            },delayTime);\n        });\n    },\n    onDestroyEveryDayLogin() {\n        this.everyDayLogin = null;\n    },\n    loginSuccess() {\n        // ! 显示红包\n        let self = this;\n        if (tywx.UserInfo.userId === 0 || tywx.config.auditing === true) return;\n        tywx.ado.Utils.requestRedPacket({\n            success: (res) => {\n                if (tywx.config.auditing === false) {\n                    if (tywx.ado.isRequestedConfig) {\n                        self.btnGetMoney.active = true;\n                        self.btnGetMoney.getComponent('GetMoneyButton').init(res);\n                        self.nodeEveryDataLoginBtn.active = true;\n                    }\n                }\n                else {\n                    self.btnGetMoney.active = false;\n                    self.nodeEveryDataLoginBtn.active = false;\n                }\n            },\n            fail: (res) => {\n                if (tywx.config.auditing === false) {\n                    if (tywx.ado.isRequestedConfig) {\n                        self.btnGetMoney.active = true;\n                        let cash = {\n                            max: tywx.ado.Utils.formatCashFen2Yuan(tywx.ado.RedPacketInfo.totalAmount)\n                        };\n                        self.btnGetMoney.getComponent('GetMoneyButton').init(cash);\n                        self.nodeEveryDataLoginBtn.active = true;\n                    }\n                }\n                else {\n                    self.nodeEveryDataLoginBtn.active = false;\n                    self.btnGetMoney.active = false;\n                }\n            }\n        });\n\n        // ! 邀请有礼\n        // ! Modify by luning [14-11-2018] 暂时去掉邀请好友奖励\n        this.nodeInviteGift.active = false;\n        // if (!tywx.config.auditing && tywx.ado.isRequestedConfig) {\n        //     this.nodeInviteGift.active = true;\n        // }\n        // else {\n        //     this.nodeInviteGift.active = false;\n        // }\n\n        // ! 登陆游戏后第一次进入菜单特殊处理\n        if (tywx.ado.isFirstLogin) {\n            // ! 只有第一次进入菜单才主动弹出每日登陆, 非审核状态\n            if (tywx.ado.isRequestedConfig && !tywx.ado.EveryDataLoginInfo.rewad && tywx.config.auditing === false) {\n                this.showEveryDayLogin(true);\n            }\n            // ! 上报邀请信息\n            if (tywx.UserInfo.invite_id > 0) {\n                tywx.ado.Utils.requestInviteLogin(tywx.UserInfo.invite_id);\n            }\n            // ! 请求邀请信息\n            tywx.ado.Utils.requestInviteGetInfo({ success: () => console.log('request invite getinfo success') });\n        }\n\n        // ! 刷新每日登陆红点\n        this.refreshEveryDayLoginRedPoint();\n    },\n    onRedPacktChange() {\n        // ! 余额刷新\n        let cash = {\n            max: tywx.ado.Utils.formatCashFen2Yuan(tywx.ado.RedPacketInfo.totalAmount)\n        };\n        this.btnGetMoney.getComponent('GetMoneyButton').init(cash);\n        // ! 红点刷新\n        this.refreshEveryDayLoginRedPoint();\n    },\n    refreshEveryDayLoginRedPoint() {\n        let self = this;\n        tywx.ado.Utils.requestEveryLoginInfo({\n            success: () => {\n\n                if (self.nodeEveryDataLoginBtn) {\n                    let node_red_point = self.nodeEveryDataLoginBtn.getChildByName('sprite_red_point');\n                    if (node_red_point) {\n                        node_red_point.active = !tywx.ado.EveryDataLoginInfo.rewad;\n                    }\n                }\n            },\n            fail: () => {\n                console.log('requestEveryLoginInfo fail');\n            }\n        });\n    },\n    // * 展示每日登陆\n    showEveryDayLogin(is_canncle_when_reward = false) {\n        let self = this;\n        tywx.ado.Utils.requestEveryLoginInfo({\n            success: () => {\n                if (is_canncle_when_reward) {\n                    if (tywx.ado.EveryDataLoginInfo.rewad) return;\n                }\n                let root = tywx.ado.Utils.getPopRoot();\n                if (root) {\n                    cc.loader.loadRes('prefabs/ado_view_every_day_login', (err, prefab) => {\n                        if (!err && !self.everyDayLogin) {\n                            let every_day_login = cc.instantiate(prefab);\n                            every_day_login.parent = root;\n                            every_day_login.getComponent('ado_view_every_day_login').init();\n                            self.everyDayLogin = every_day_login;\n                            tywx.ado.isFirstLogin = false;\n                        }\n                    });\n                }\n            },\n            fail: () => {\n                console.log('showEveryDayLogin fail');\n            }\n        }\n        );\n\n    },\n\n    /**\n     * @description: 第一个星星产生一个放大缩小的动画 并且产生提示动画\n     */\n    playSZAni: function (node, stime, scale) {\n        node.stopAllActions();\n        var scaletime = !stime ? 0.2 : stime;\n        var tscale = !scale ? 1.2 : scale;\n        var scaleBoom = cc.scaleTo(scaletime, tscale);\n        var scaleSmaller = cc.scaleTo(scaletime, 1);\n        var delay = cc.delayTime(scaletime);\n        var seq = cc.sequence(scaleBoom, scaleSmaller, delay);\n        var rep = cc.repeatForever(seq);\n        node.runAction(rep);\n    },\n\n    onDestroy() {\n        tywx.ado.Utils.hideGameClub();\n        tywx.ado.Utils.destroyWXBanner();\n        tywx.NotificationCenter.ignoreScope(this);\n    },\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    showPlayMethod: function () {\n        if (this.helpviewpre != null) {\n            this.helpviewpre.destroy();\n            this.helpviewpre = null;\n        }\n        // 添加帮助\n        this.helpviewpre = cc.instantiate(this.helpViewPre);\n\n        this.helpview.active = !this.helpview.active ? true : false;\n        if (this.helpview.active == true) {\n            this.helpviewpre.parent = this.helpview;\n            this.helpviewpre.x = -360;\n            this.helpviewpre.y = 0;\n            this.helpviewscript = this.helpviewpre.getComponent(\"helpview\");\n            // console.log(\"this.helpviewscript.setCloseCall\" + this.helpviewscript.setCloseCall);\n            this.helpviewscript.setCloseCall(function () {\n                curscene.showPlayMethod();\n            });\n            tywx.ado.Utils.hideGameClub();\n            curscene.showBack();\n        } else {\n            curscene.hideBack();\n            tywx.ado.Utils.showGameClub();\n        }\n    },\n\n    /*\n        调用: 点击游戏帮助的时候调用\n        功能: 展示游戏玩法\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n\n    showGiftView: function () {\n        this.giftview.active = !this.giftview.active ? true : false;\n        if (this.giftview.active == true) {\n            curscene.showBack()\n        } else {\n            curscene.hideBack()\n        }\n    },\n\n    /*\n        调用: 点击排行榜的时候调用\n        功能: 展示玩家微信好友在游戏中的排名\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    showFriendPhbView: function () {\n        console.log(\"Hellocd\");\n        var self = this;\n        if (this.showPhb) {\n            this.phbView.active = false;\n            curscene.hideBack()\n            tywx.ado.Utils.showGameClub();\n            this.showPhb = false;\n        } else {\n            window.sharedCanvas.width = 635;\n            window.sharedCanvas.height = 60 * 30;\n            curscene.showBack()\n            tywx.ado.Utils.hideGameClub();\n            this.phbView.active = true;\n            this.showPhb = true;\n            if (tywx.publicwx) {\n                console.log(\"Hellocd\")\n                wx.postMessage({\n                    method: 1,\n                    MAIN_MENU_NUM: \"ADDONE_SCORE2\",\n                });\n            }\n            // 开一个线程监听次时间段用户是否有点击\n            self.phbNameLabel.string = \"好友排行榜\";\n            tywx.Timer.setTimer(self, function () {\n                self._updateSubDomainCanvas();\n            }, 1, 11, 0);\n        }\n\n    },\n\n    /*\n        调用: 点击返回按钮\n        功能: 隐藏排行榜\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    hidePhbView: function () {\n        console.log(\"çç.showPhb = \" + typeof (curscene.phbView))\n        if (curscene.showPhb) {\n            wx.postMessage({\n                 method: 9,\n            });\n            curscene.phbView.active = false;\n            curscene.showPhb = false;\n            tywx.ado.Utils.showGameClub();\n            curscene.hideBack()\n        } else {\n            window.sharedCanvas.width = 635;\n            window.sharedCanvas.height = 60 * 30;\n            curscene.phbView.active = true;\n            curscene.showBack()\n            tywx.ado.Utils.hideGameClub();\n            curscene.showPhb = true;\n        }\n\n    },\n\n    /*\n        调用: 进入游戏的时候调用\n        功能: 清除当前界面占用的内存\n        参数: [\n            无\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    loadFinishCallBack: function () {\n        if (this.node) {\n            // this.node.destroy();\n        }\n    },\n\n    /*\n        调用: 进入小游戏的时候开始调用\n        功能: 显示玩家的最高得分\n        参数: [\n            score: 玩家当前的最高得分\n        ]\n        返回值:[\n            无\n        ]\n        思路: 游戏需要\n    */\n    setScore: function (score) {\n        if (score != null) {\n            this.gameScore.string = Math.abs(score);\n        }\n    },\n\n    /**\n     * @description 获取配置成功后刷新\n     * @author lu ning\n     * @date 2018-09-12\n     */\n    refreshAfterGetConfig() {\n        tywx.ado.isMinGanIP = tywx.ado.Utils.isMinGanIp(tywx.AdManager.ipLocInfo);\n        // ! Modify by luning [06-09-18] 交叉导流icon,这个版本隐藏\n        // ! Modify by luning [12-09-2018] 显示交叉导流,添加提审状态不显示\n        if (tywx.config.auditing) {\n            this.nodeMoreGame.active = false;\n        }\n        else {\n            // ! Modify by luning [29-09-2018] 添加更多游戏，单独的交叉导流暂时去掉\n            // let adNode = tywx.AdManager.getAdNodeByTag('GAME_START');\n            // if(adNode){\n            //     adNode.showAdNode();\n            // }\n            // else{\n            //     tywx.AdManager.showAd(cc.v2(100, 100),'GAME_START');\n            // }\n            this.nodeMoreGame.active = true;\n        }\n        this.loginSuccess();\n    },\n\n    /**\n     * 请求获取配置信息\n     */\n    requestConfigInfo: function () {\n\n        this.requestTimes--;\n        var _configUrl = tywx.SystemInfo.cdnPath + 'config/addone666.json';\n        var that = this;\n\n        console.log('请求的CDN地址 = ' + _configUrl);\n        tywx.ado.Configs = config;\n        tywx.config = config;\n\n        var successcb = function (ret) {\n            console.log(\"服务器读到的配置:\" + JSON.stringify(ret));\n            that.requestTimes = 3;\n            var v = tywx.SystemInfo.version;\n            var uid = parseInt(tywx.UserInfo.userId);\n            var c, cb, d;\n            c = ret['' + v];\n            cb = ret['' + v + '_ABTEST'];\n            d = ret['default'];\n            if (!d) {\n                //没找到缺省服务器配置...\n                console.log('No default server config, use local config...');\n                d = config;\n            }\n            if (!c) {\n                //没找到版本对应配置，使用缺省配置...\n                config = d;\n                console.log(_configUrl + 'use default config...');\n            } else {\n                //AB测试...\n                if (cb) {\n                    if (uid % 2 == 0) {\n                        config = c;\n                        console.log(_configUrl + 'use ' + v + '_A server config...');\n                    } else {\n                        config = cb;\n                        console.log(_configUrl + 'use ' + v + '_B server config...');\n                    }\n                } else {\n                    config = c;\n                    console.log(_configUrl + 'use ' + v + ' server config...');\n                }\n                //把缺省配置中的配置项复制到当前配置...\n                for (var k in d) {\n                    if (config[k] === undefined)\n                        config[k] = d[k];\n                }\n            }\n            tywx.ado.isRequestedConfig = true;\n            tywx.ado.Configs = config;\n            tywx.config = config;\n            tywx.ado.Constants.WXAdConfig.bannerId = config.WXAd2.banner;\n            tywx.ado.Constants.WXAdConfig.vedioId = config.WXAd2.video;\n            if(tywx.ado.Constants.WXAdConfig.vedioId === '') tywx.ado.isCanWatchVideo = false;\n            else tywx.ado.isCanWatchVideo = true;\n            //config.auditing = false;\n            that.refreshAfterGetConfig();\n            console.log('CONFIG ' + JSON.stringify(config));\n            tywx.NotificationCenter.trigger(tywx.ado.Events.ADO_EVENT_RESUEST_CONFIG_END, null);\n        };\n\n        var failcb = function (ret) {\n            if (that.requestTimes > 0) {\n                that.requestConfigInfo();\n            } else {\n                tywx.ado.Configs = config;\n                tywx.config = config;\n            }\n        };\n\n        tywx.HttpUtil.httpGet({\n            'url': _configUrl\n        }, successcb, failcb);\n    },\n\n\n    /**\n     * 显示排行榜黑色排行榜\n     */\n    showBack: function () {\n        this.phbback.node.active = true;\n        this.phbback.node.opacity = 165;\n    },\n\n\n    /**\n     * 隐藏排行榜黑色背景\n     */\n    hideBack: function () {\n        this.phbback.node.active = false;\n        this.phbback.node.opacity = 0;\n    },\n\n    /**\n     * 初始化的时候给玩家三个道具\n     * 参数: 无\n     */\n    givePlayerItems: function () {\n        if (parseInt(tywx.Util.getItemFromLocalStorage(\"hadgiveitem\", 0)) === 0) {\n            tywx.Util.setItemToLocalStorage(\"hadgiveitem\", 1);\n            var giveitems = [];\n            for (var djIndex = 0; djIndex < tywx.ado.Constants.GameCenterConfig.allitem.length; djIndex++) {\n                var titem = {};\n                titem.id = tywx.ado.Constants.GameCenterConfig.allitem[djIndex].id;\n                titem.num = tywx.ado.Constants.GameCenterConfig.initGivePlayerItemNumber;\n                giveitems.push(titem);\n            }\n            tywx.Util.setItemToLocalStorage(\"allitems\", JSON.stringify(giveitems));\n        }\n    },\n    showBanner() {\n        tywx.ado.Utils.createAndShowWXBanner();\n        this.schedule(this.bannerRefresh, tywx.ado.Constants.WXAdConfig.bannerRefreshTime);\n    },\n    bannerRefresh() {\n        tywx.ado.Utils.createAndShowWXBanner();\n    },\n\n    /*\n            调用: 点击开始游戏的时候调用\n            功能: 进入游戏界面\n            参数: [\n                无\n            ]\n            返回值:[\n                无\n            ]\n            思路: 游戏需要\n        */\n    startGame: function () {\n        if (!tywx.config) return;\n\n        if (this.haveStoreGameData != -1) {\n            console.log(\"this.haveStoreGameData \" + JSON.stringify(this.haveStoreGameData));\n            if (this.haveStoreGameData.score && this.haveStoreGameData.score >= tywx.ado.Constants.GameCenterConfig.prePlayGetScore) {\n                this.showGoonProgress();\n            } else {\n                this.goonProgressGame(true);\n            }\n        } else {\n            cc.director.loadScene(\"gamemain\");\n        }\n    },\n\n    /**\n     * @description 继续游戏进度的分享回调\n     */\n    goonProgressGame: function (reset) {\n        if (reset) {\n            tywx.ado.resetProgerss();\n        }\n\n        cc.director.loadScene(\"gamemain\");\n    },\n\n    /**\n     * @description 弹出游戏的选择是否继续进度的对话框\n     */\n    showGoonProgress: function () {\n        if (tywx.config && tywx.config.auditing == true) {\n            cc.director.loadScene(\"gamemain\");\n            return;\n        }\n        let progress = tywx.ado.loadProgress();\n        if (progress === -1) {\n            this.goonProgressGame(true);\n            return;\n        }\n        if (progress.score == 0) {\n            this.goonProgressGame(true);\n            return;\n        }\n\n        // if (progress.score > 0) {\n        //     this.goonProgressGame(false);\n        //     return;\n        // }\n\n\n        let contentTxt = `上次得分${progress.score}，您想继续游戏吗？`;\n        var self = this;\n        self.hasgononstate = false;\n        tywx.ado.Utils.showWXModal(contentTxt, '发现游戏进度', true,\n            // 确定\n            function () {\n                // var config = tywx.ado.Constants.ShareConfig.RECOVER_SHARE_GAME_SHARE;\n                // var groupSucCall = function () {\n                //     self.goonProgressGame();\n                // };\n                // var succall = function () {\n                //     self.hasgononstate = true;\n                //     self.goonProgressGame();\n                // };\n\n                // var failcall = function () {\n                //     self.hasgononstate = true;\n                // };\n                // if (tywx.ado.isMinGanIP) {\n                    self.goonProgressGame(false);\n                // } else {\n                //     self.shareMiniApp(config, groupSucCall, succall, failcall);\n                // }\n            },\n            // 取消\n            function () {\n                self.goonProgressGame(true);\n            },\n            '继续游戏', '重新开始'\n        );\n\n    },\n\n\n    /**\n     * @description 非分享按钮的分享 （手动分享）\n     * @param {Object} shareconfig 分享配置信息\n     * @param {Function} shareGroupCallBack 分享到群成功的回调\n     * @param {Function} successCallBack 分享成功的回调\n     * @param {Function} errorCallBack 分享失败的回调\n     */\n    shareMiniApp: function (shareconfig, shareGroupCallBack, successCallBack, errorCallBack) {\n        console.log(\"当前的分享配置  = \" + JSON.stringify(shareconfig));\n        var self = this;\n        if (tywx.IsWechatPlatform()) {\n            window.wx.showShareMenu({\n                withShareTicket: true\n            });\n            let msg = tywx.ado.Utils.getRandomShareConfigByShareTag(shareconfig[0]);\n            if (!msg) {\n                msg = tywx.ado.Constants.DefaultShareConfig;\n            }\n            if (msg) {\n                tywx.ShareInterface.share(\n                    msg.shareContent,\n                    msg.sharePicUrl,\n                    msg.sharePointId,\n                    msg.shareSchemeId,\n                    (res) => {\n                        tywx.LOGE(\"分享成功后的数据\" + JSON.stringify(res));\n                        // * is share to group\n                        if (shareconfig && shareconfig[1]) {\n                            // * froce share to group\n                            successCallBack && successCallBack(res);\n                        } else {\n                            // * success\n                            successCallBack && successCallBack(res);\n                        }\n                    },\n                    function (data) {\n                        tywx.LOGE(\"分享成功后的数2据\" + JSON.stringify(data));\n                        errorCallBack && errorCallBack(data);\n                    }\n                );\n            }\n        }\n    },\n    btnShowLottery() {\n        cc.loader.loadRes('prefabs/ado_view_lottery_layer', function (err, prefab) {\n            if (!err) {\n                let size = cc.winSize;\n                var prefabNode = cc.instantiate(prefab);\n                cc.game.addPersistRootNode(prefabNode);\n                prefabNode.position = cc.v2(size.width / 2, size.height / 2);\n                prefabNode.getComponent('ado_view_lottery_layer').init();\n            }\n        });\n    },\n    btnShowEveryDayLogin() {\n        this.showEveryDayLogin();\n    },\n    showInviteGift() {\n        console.log('showInviteGift click');\n        if(!this.inviteGiftTouchEnable) return;\n        this.inviteGiftTouchEnable = false;\n        let self = this;\n        tywx.ado.Utils.requestInviteGetInfo({\n            success: (res) => {\n                cc.loader.loadRes('prefabs/ado_view_invite_gift', function (err, prefab) {\n                    if (!err) {\n                        let size = cc.winSize;\n                        var prefabNode = cc.instantiate(prefab);\n                        cc.game.addPersistRootNode(prefabNode);\n                        prefabNode.position = cc.v2(size.width / 2, size.height / 2);\n                        prefabNode.getComponent('ado_view_invite_gift').init(res);\n                    }\n                });\n                self.inviteGiftTouchEnable = true;\n            },\n            fail:()=>{\n                self.inviteGiftTouchEnable = true;\n            }\n        });\n\n    }\n\n});\n"]}