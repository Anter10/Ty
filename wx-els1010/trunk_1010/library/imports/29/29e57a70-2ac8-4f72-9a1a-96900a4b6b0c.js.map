{"version":3,"sources":["../../../../../../assets/scripts/game/common/assets/scripts/game/common/red_packet_transfer.js"],"names":["cc","Class","extends","Component","properties","labelMax","Label","labelRules","labelTips","labelCurrent","nodeCurrent","Node","background","onLoad","self","tywx","tt","Utils","hideWXBanner","getComponent","setTouchEndCall","motaiCallback","ani","node","Animation","play","commonScaleIn","getChildByName","start","onDestroy","showWXBanner","closeing","call","destroy","on","btnTransferClickCallback","currentcash","requestRedPacket2Cash","showWXModal","init","current_cash","string","active"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,KADL;AAERC,oBAAYP,GAAGM,KAFP;AAGRE,mBAAWR,GAAGM,KAHN;AAIRG,sBAAcT,GAAGM,KAJT;AAKRI,qBAAaV,GAAGW,IALR;AAMRC,oBAAYZ,GAAGW;AANP,KAHP;;AAYL;;AAEAE,UAdK,oBAcI;AACL,YAAIC,OAAO,IAAX;AACAC,aAAKC,EAAL,CAAQC,KAAR,CAAcC,YAAd;AACA,aAAKN,UAAL,CAAgBO,YAAhB,CAA6B,YAA7B,EAA2CC,eAA3C,CAA2D,YAAY;AACnEN,iBAAKO,aAAL;AACH,SAFD;AAGA,YAAIC,MAAM,KAAKC,IAAL,CAAUJ,YAAV,CAAuBnB,GAAGwB,SAA1B,CAAV;AACAF,YAAIG,IAAJ,CAAS,WAAT;AACAV,aAAKC,EAAL,CAAQC,KAAR,CAAcS,aAAd,CAA4B,KAAKH,IAAL,CAAUI,cAAV,CAAyB,MAAzB,CAA5B;AACH,KAvBI;AAyBLC,SAzBK,mBAyBG,CAEP,CA3BI;AA6BLC,aA7BK,uBA6BO;AACRd,aAAKC,EAAL,CAAQC,KAAR,CAAca,YAAd;AACH,KA/BI;;;AAiCL;;AAEAT,iBAnCK,2BAmCW;AACZ,YAAI,KAAKU,QAAT,EAAmB;AACf;AACH;AACD,aAAKA,QAAL,GAAgB,IAAhB;AACA,YAAIjB,OAAO,IAAX;AACA,YAAIkB,OAAO,SAAPA,IAAO,GAAY;AACnBlB,iBAAKS,IAAL,CAAUU,OAAV;AACH,SAFD;AAGA,YAAIX,MAAM,KAAKC,IAAL,CAAUJ,YAAV,CAAuBnB,GAAGwB,SAA1B,CAAV;AACAF,YAAIY,EAAJ,CAAO,UAAP,EAAmBF,IAAnB,EAAyB,IAAzB;AACAV,YAAIG,IAAJ,CAAS,SAAT;AACH,KA/CI;AAgDLU,4BAhDK,sCAgDsB;AACvB,YAAI,KAAKC,WAAL,IAAoB,EAAxB,EAA4B;AACxBrB,iBAAKC,EAAL,CAAQC,KAAR,CAAcoB,qBAAd;AACH,SAFD,MAEO;AACHtB,iBAAKC,EAAL,CAAQC,KAAR,CAAcqB,WAAd,CAA0B,eAA1B,EAA2C,IAA3C,EAAiD,KAAjD;AACH;AACJ,KAtDI;AAuDLC,QAvDK,gBAuDAC,YAvDA,EAuDc;AACf,aAAKJ,WAAL,GAAmBI,YAAnB;AACA,aAAKnC,QAAL,CAAcoC,MAAd,yBAA8B,KAAKL,WAAnC;AACA,aAAK3B,YAAL,CAAkBc,IAAlB,CAAuBmB,MAAvB,GAAgC,KAAhC;AACH;AA3DI,CAAT","file":"red_packet_transfer.js","sourceRoot":"../../../../../../assets/scripts/game/common","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        labelMax: cc.Label,\n        labelRules: cc.Label,\n        labelTips: cc.Label,\n        labelCurrent: cc.Label,\n        nodeCurrent: cc.Node,\n        background: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        var self = this;\n        tywx.tt.Utils.hideWXBanner();\n        this.background.getComponent(\"background\").setTouchEndCall(function () {\n            self.motaiCallback();\n        });\n        let ani = this.node.getComponent(cc.Animation);\n        ani.play(\"show_hide\");\n        tywx.tt.Utils.commonScaleIn(this.node.getChildByName('root'));\n    },\n\n    start() {\n\n    },\n\n    onDestroy() {\n        tywx.tt.Utils.showWXBanner();\n    },\n\n    // update (dt) {},\n\n    motaiCallback() {\n        if (this.closeing) {\n            return;\n        }\n        this.closeing = true;\n        var self = this;\n        let call = function () {\n            self.node.destroy();\n        };\n        let ani = this.node.getComponent(cc.Animation);\n        ani.on(\"finished\", call, this);\n        ani.play(\"hide_ui\");\n    },\n    btnTransferClickCallback() {\n        if (this.currentcash >= 20) {\n            tywx.tt.Utils.requestRedPacket2Cash();\n        } else {\n            tywx.tt.Utils.showWXModal('攒够20元再提现吧,加油!', '提示', false);\n        }\n    },\n    init(current_cash) {\n        this.currentcash = current_cash;\n        this.labelMax.string = `余额:¥${this.currentcash}`;\n        this.labelCurrent.node.active = false;\n    }\n});"]}