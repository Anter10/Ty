{"version":3,"sources":["../../../../../../assets/scripts/game/view/assets/scripts/game/view/tt_scene_play.js"],"names":["TAG","friend","require","cc","Class","extends","Component","properties","stopbottom","Node","initshow","friendnode","historyscoreLabel","Label","scoreLabel","stopScoreLabel","btnGetMoney","topElementNode","onLoad","self","score","showstop","active","qzshowinitshow","addIcon","tywx","tt","scaleX","root","node","getChildByName","pop","loadPlayView","showBanner","curgamescene","canshowads","NotificationCenter","listen","events","LOGIN_SUCCESS","loginSuccess","TT_EVENT_RED_PACKET_CHANGE","onRedPacktChange","TT_EVENT_GET_IP_SUCCESS","getIPSuccess","ads","addAdsNode","v2","console","log","JSON","stringify","RedPacketInfo","initMoneyBtn","Utils","isIpx","y","is2To1","configManager","getInstance","auditing","data","max","formatCashFen2Yuan","totalAmount","getComponent","init","setShowCall","res","stopCall","animation","animState","play","wrapMode","WrapMode","Reverse","animation1","animState1","Normal","qzShowBase","start","storeScore","parseInt","loadItem","constants","TT_SCORE","saveItem","onDestroy","storeScord","destroyWXBanner","playdata","bord","Board","board","huanyihuan","BoardView","repeatNumber","previews","previewConfigs","previewIndex","length","congifdata","preIndex","config","push","previewsdata","PlayDataKeys","ttplaydata","createAndcreateAndShowWXBanner","schedule","bannerRefresh","WXAdConfig","bannerRefreshTime","requestRedPacket","success","fail","flushMaxScore","string","setScore","tscore","scorecz","call","callFunc","time","delay","delayTime","seq","sequence","rep","repeat","stopAllActions","runAction","loader","loadRes","err","prefab","playView","instantiate","parent","playviewscript","error"],"mappings":"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","file":"tt_scene_play.js","sourceRoot":"../../../../../../assets/scripts/game/view","sourcesContent":["let TAG = '[tt_scene_play]';\nlet friend = require('../rank/friend.js');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        stopbottom: cc.Node,\n        initshow: cc.Node,\n        friendnode: cc.Node,\n        historyscoreLabel: cc.Label,\n        scoreLabel: cc.Label,\n        stopScoreLabel: cc.Label,\n        btnGetMoney: cc.Node,\n        topElementNode: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        let self = this;\n        this.score = 0;\n        this.showstop = false;\n        this.stopbottom.active = true;\n        this.initshow.active = true;\n        this.qzshowinitshow = true;\n        friend.addIcon(this.friendnode);\n        tywx.tt.friend = friend;\n        this.stopbottom.scaleX = 0;\n        this.root = this.node.getChildByName('root');\n        this.pop = this.node.getChildByName('pop');\n        this.loadPlayView();\n        this.showBanner();\n        tywx.tt.curgamescene = this;\n        let canshowads = true;\n        tywx.NotificationCenter.listen(tywx.tt.events.LOGIN_SUCCESS, this.loginSuccess, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_EVENT_RED_PACKET_CHANGE, this.onRedPacktChange, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_EVENT_GET_IP_SUCCESS, this.getIPSuccess, this);\n        if (canshowads) {\n            tywx.tt.ads.addAdsNode(\"list_menu\", this.node, cc.v2(220, 222));\n        }\n        this.btnGetMoney.active = false;\n        console.log(\"红包数据 = \" + JSON.stringify(tywx.tt.RedPacketInfo));\n        this.initMoneyBtn();\n\n        //\n    \n         if (tywx.tt.Utils.isIpx()) {\n            this.topElementNode.y = this.topElementNode.y - 35;\n         } else if (tywx.tt.Utils.is2To1()) {\n            // this.topElementNode.y = this.topElementNode.y - 30;\n         }\n\n    },\n\n    initMoneyBtn:function(){\n        let self = this;\n        if (tywx.tt.configManager.getInstance().auditing == false && tywx.tt.RedPacketInfo) {\n            self.btnGetMoney.active = true;\n            let data = {}\n            data.max = tywx.tt.Utils.formatCashFen2Yuan(tywx.tt.RedPacketInfo.totalAmount);\n            self.btnGetMoney.getComponent('GetMoneyButton').init(data);\n            self.btnGetMoney.getComponent('GetMoneyButton').setShowCall(function () {\n                console.log(\"主界面的红包\");\n            })\n        } else {\n            self.btnGetMoney.active = false;\n        }\n    },\n\n    /**\n     * @description 红包数据变化的时候调用\n     * @param {Object} res 红包变化的数据\n     */\n    onRedPacktChange: function (res) {\n        console.log(\"红包数据 = \" + JSON.stringify(res));\n        if (res.data && res.data.totalAmount) {\n            let data = {}\n            data.max = tywx.tt.Utils.formatCashFen2Yuan(res.data.totalAmount);\n            this.btnGetMoney.getComponent('GetMoneyButton').init(data);\n        } else {\n            tywx.tt.log(TAG, \"通知事件中的红包数据 = \" + JSON.stringify(res));\n        }\n    },\n\n    // 点击暂停回调\n    stopCall: function () {\n        let self = this;\n        // tywx.tt.stop_view.showStopView();\n        if (!this.showstop) {\n            this.showstop = true;\n            this.stopbottom.active = true;\n            let animation = this.stopbottom.getComponent(\"cc.Animation\");\n            let animState = animation.play(\"showstop\");\n            animState.wrapMode = cc.WrapMode.Reverse;\n            this.qzshowinitshow = false;\n            let animation1 = this.initshow.getComponent(\"cc.Animation\");\n            let animState1 = animation1.play(\"initshow\");\n            animState1.wrapMode = cc.WrapMode.Normal;\n        } else {\n            this.showstop = false;\n            this.stopbottom.active = true;\n            let animation = this.stopbottom.getComponent(\"cc.Animation\");\n            let animState = animation.play(\"showstop\");\n            animState.wrapMode = cc.WrapMode.Normal;\n\n            this.qzshowinitshow = true;\n            let animation1 = this.initshow.getComponent(\"cc.Animation\");\n            \n            let animState1 = animation1.play(\"initshow\");\n            animState1.wrapMode = cc.WrapMode.Reverse;\n            // tywx.Timer.setTimer(this, function(){\n            //     self.stopbottom.active = false;\n            // },0.5, 0,0);\n        }\n    },\n\n    qzShowBase: function () {\n        if (!this.qzshowinitshow) {\n            let self = this;\n            this.stopbottom.active = true;\n            let animation = this.stopbottom.getComponent(\"cc.Animation\");\n            let animState = animation.play(\"showstop\");\n            // tywx.Timer.setTimer(this, function () {\n            //      self.stopbottom.active = false;\n            // }, 0.5, 0, 0);\n            animState.wrapMode = cc.WrapMode.Normal;\n            this.qzshowinitshow = true;\n            this.showstop = false;\n\n            let animation1 = this.initshow.getComponent(\"cc.Animation\");\n            let animState1 = animation1.play(\"initshow\");\n            animState1.wrapMode = cc.WrapMode.Reverse;\n        }\n    },\n\n    start() {\n\n    },\n\n    /**\n     * @description: 存储当前的分数\n     */\n    storeScore: function () {\n        if (parseInt(tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0)) < this.score) {\n            tywx.tt.Utils.saveItem(tywx.tt.constants.TT_SCORE, this.score, false);\n        }\n    },\n\n\n    onDestroy() {\n        this.storeScord();\n        tywx.tt.log(TAG, \"主页退出 \");\n        tywx.tt.Utils.destroyWXBanner();\n    },\n\n    /**\n     * @description 存储玩家的数据记录\n     */\n    storeScord: function () {\n        let playdata = {};\n        playdata.bord = tywx.tt.Board.board;\n        playdata.score = tywx.tt.Board.score;\n        playdata.huanyihuan = tywx.tt.BoardView.repeatNumber;\n        let previews = tywx.tt.Board.previewConfigs;\n        let previewIndex = tywx.tt.Board.previewIndex;\n\n        tywx.tt.log(TAG, \"previews = \" + previews.length);\n        let congifdata = [];\n        for (let preIndex = 0; preIndex < previews.length; preIndex++) {\n            let config = previews[preIndex];\n            congifdata.push(config);\n        }\n        playdata.previewIndex = previewIndex;\n        playdata.previewsdata = congifdata;\n        tywx.tt.Utils.saveItem(tywx.tt.constants.PlayDataKeys.ttplaydata, JSON.stringify(playdata), true);\n    },\n\n\n    /**\n     * @description 展示广告\n     */\n    showBanner: function () {\n        tywx.tt.Utils.createAndcreateAndShowWXBanner();\n        this.schedule(this.bannerRefresh, tywx.tt.constants.WXAdConfig.bannerRefreshTime);\n    },\n\n\n      /**\n       * @description 延迟加载初始化某些数据\n       */\n      loginSuccess() {\n          // ! 显示红包\n          let self = this;\n          if (tywx.tt.configManager.getInstance().auditing) return;\n          // ! 登陆游戏后第一次进入菜单特殊处理\n          tywx.tt.Utils.requestRedPacket({\n              success: (res) => {\n                 tywx.tt.log(TAG, \"审核状态 = \" + tywx.tt.configManager.getInstance().auditing + \"玩家红包数据= \" + JSON.stringify(res));\n                 self.initMoneyBtn();\n              },\n              fail: (res) => {\n                 self.initMoneyBtn();\n              }\n          });\n      },\n\n\n    /**\n     * @description 刷新广告的显示\n     */\n    bannerRefresh: function () {\n        tywx.tt.Utils.createAndcreateAndShowWXBanner();\n    },\n\n    /**\n     * @description 刷新最高分\n     */\n    flushMaxScore: function (score) {\n        this.historyscoreLabel.string = \"\" + score;\n    },\n\n    setScore: function (score) {\n        let tscore = this.score;\n        let scorecz = score - this.score;\n        let self = this;\n        if (scorecz > 0) {\n            this.score = score;\n            let call = cc.callFunc(function () {\n                tscore = tscore + 2;\n                self.scoreLabel.string = tscore;\n                self.stopScoreLabel.string = tscore;\n            });\n            let time = 2 / scorecz;\n            let delay = cc.delayTime(time);\n            let seq = cc.sequence(delay, call);\n            let rep = cc.repeat(seq, scorecz / 2);\n            this.scoreLabel.node.stopAllActions();\n            this.scoreLabel.node.runAction(rep);\n            tywx.tt.friend.setScore(score);\n            tywx.tt.curgamescene.storeScore();\n        } else {\n            self.stopScoreLabel.string = 0 + \"\";\n            self.scoreLabel.string = 0 + \"\";\n        }\n\n        this.score = score;\n    },\n    // update (dt) {},\n    loadPlayView() {\n        let self = this;\n        cc.loader.loadRes('prefabs/tt_view_play_board', (err, prefab) => {\n            if (!err) {\n                self.playView = cc.instantiate(prefab);\n                self.playView.parent = self.root;\n                self.playviewscript = self.playView.getComponent(\"tt_view_play_board\");\n                tywx.tt.log(TAG, 'load play view success');\n                //self.playView.getComponent('tt_view_play_board').init();\n            } else {\n                tywx.tt.error(TAG, 'load play view failed', JSON.stringify(err));\n            }\n        });\n    }\n\n});"]}