{"version":3,"sources":["../../../../../../assets/scripts/game/cross_ad/assets/scripts/game/cross_ad/ads_list.js"],"names":["TAG","node_path","ads_node","cc","Class","extends","Component","properties","adnode","Prefab","listBackbtn","Button","contentnode","Node","background","scrollNode","bottom","setData","data","tywx","tt","log","JSON","stringify","initUI","showOrHide","state","show","hide","showing","hiding","tnode","width","height","addChild","tindex","trow","t","ads_data","length","anchorX","anchorY","x","y","instantiate","ads_script","getComponent","vpos","v2","error","position","onLoad","node","game","canvas","active","self","setTouchEndCall","Math","abs","update","scaleX"],"mappings":"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","file":"ads_list.js","sourceRoot":"../../../../../../assets/scripts/game/cross_ad","sourcesContent":["/** \n * @description \n * created by gyc on 20181012\n */\n\nlet TAG = \"[game/cross_ad/ads_node.js]\";\nlet node_path = \"prefabs/ads_node\";\n\nlet ads_node = cc.Class({\n    extends: cc.Component,\n    properties: {\n        adnode: cc.Prefab,\n        listBackbtn:cc.Button,\n        contentnode: cc.Node,\n        background:cc.Node,\n        scrollNode:cc.Node,\n        bottom:cc.Node,\n    },\n\n    /**\n     * @description 设置交叉倒流的数据\n     * @param {Object} data 交叉倒流的数据\n     */\n    setData: function (data) {\n        this.data = data;\n        tywx.tt.log(TAG, \"广告设置了数据 \" + JSON.stringify(data));\n        this.initUI();\n    },\n\n\n    showOrHide:function(){\n         if (this.state == 0){\n             this.show();\n         }else{\n             this.hide();\n         }\n    },\n\n    hide:function(){\n       if(this.showing){\n           return;\n       }\n       this.state = 0;\n    },\n    \n\n    show: function () {\n         if(this.hiding) {\n            return;\n         }\n        this.state = 1;\n    },\n\n    /**\n     * @description 初始化UI\n     */\n    initUI: function () {\n        var tnode = new cc.Node();\n        tnode.width = 560;\n        tnode.height = 120;\n        this.contentnode.addChild(tnode);\n        var tindex = 0;\n        var trow = 1;\n        for (var t = 0; t < this.data.ads_data.length; t++) {\n            if((t + 1) % 3 == 1){\n               tnode = new cc.Node();\n               tnode.width = 460;\n               tnode.height = 140;\n               tnode.anchorX = 0;\n               tnode.anchorY = 0;\n               tindex = 0;\n               trow ++;\n               this.contentnode.addChild(tnode);\n            }\n            tnode.x = 0;\n            tnode.y = (trow - 2) * -160;\n            let data = this.data.ads_data[t];\n            let adnode = cc.instantiate(this.adnode);\n            let ads_script = adnode.getComponent('ad_node');\n            ads_script.setData(data);\n            let vpos = cc.v2(140 + (tindex * 140) - 280, -90);\n            tywx.tt.error(TAG, \"vpos = \" + JSON.stringify(vpos));\n            adnode.position = vpos;\n            tnode.addChild(adnode)\n            tindex ++;\n            \n        }\n    },\n\n\n\n    // use this for initialization\n    onLoad: function () {\n           this.node.width = cc.game.canvas.width;\n           this.node.height = cc.game.canvas.height;\n           this.scrollNode.position.x = -this.scrollNode.width;\n           this.background.active = false;\n           var self = this;\n           this.background.getComponent(\"background\").setTouchEndCall(function () {\n               self.hide();\n           });\n        //    this.bottom.on('touchstart', function (event) {\n        //        return true;\n        //    });\n        //    this.bottom.on('touchend', function (event) {\n        //        self.hide();\n        //    });\n           this.state = 0;\n           this.scrollNode.x = -Math.abs(this.scrollNode.width + 360);\n          \n    },\n\n    update:function(){\n        if(this.state == 0){\n           if (Math.abs(this.scrollNode.x - 30) < Math.abs(this.scrollNode.width + 360)) {\n               this.scrollNode.x = this.scrollNode.x - 30;\n               this.hiding = true;\n           } else if (this.background.active == true) {\n               this.background.active = false;\n               this.listBackbtn.node.scaleX = -1;\n               this.hiding = false;\n               this.scrollNode.x = -Math.abs(this.scrollNode.width + 360);\n           }\n        } else if(this.state == 1) {\n           if (this.scrollNode.x + 25 < -360) {\n               this.showing = true;\n               this.scrollNode.x = this.scrollNode.x + 25;\n           }else if (this.background.active == false ){\n               this.background.active = true;\n               this.listBackbtn.node.scaleX = 1;\n               this.scrollNode.x = -360;\n               this.showing = false;\n           }\n        }\n    }\n    \n\n});\n\n"]}