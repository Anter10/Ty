{"version":3,"sources":["../../../../../../assets/scripts/game/view/assets/scripts/game/view/tt_view_play_board.js"],"names":["TAG","Board","require","cc","Class","extends","Component","properties","prefabBlock","Prefab","prefabPreview","addscoreLabelPrefab","labelScore","Label","czNumberLabel","repNumberLabel","friendnode","Node","helpTip","helpts","Sprite","allblock","helpTipLabel","maxScoreLabel","lotteryNode","shouzhiNode","blinkNode","alertNode","chuiziNoneNode","chuiziNode","onLoad","playdata","getPlayHistoryData","node","width","game","canvas","height","root","getChildByName","hammerTouch","active","hammerIcon","board","previews","lotteryboxnumber","previewsPos","touchIdx","useRepeateNumber","touchHeight","isTouchLocked","isUsingHammer","reset","tywx","tt","BoardView","initLayout","initBoardView","initTouch","initHammerTouch","initChuiZiAndRepeate","onRefreshScore","storescorevalue","Utils","loadItem","constants","TT_SCORE","flushMaxScore","initPreviewBlocks","getHelp","showHelp","NotificationCenter","listen","events","TT_FILL_BOARD","onFillBoard","TT_RESET_PREVIEWS","onResetPreviews","TT_CLEAR_ROW","onClearRow","TT_REFRESH_SCORE","TT_CLEAR_HAMMER","onClearHammer","TT_REFRESH_PREVIEW_STAT","refreshPreStatue","HELP_ADD","helpAdd","initHistoryPlayData","hideHarmer","hide","checkPreviewActives","canputnumber","i","length","previewscr","getComponent","isCanPut","parseInt","score","string","curgamescene","start","onDestroy","ignoreScope","layout","nodeTop","nodeBoard","nodeBoardBottom","nodeBottom","cw","ch","top_y","board_y","board_bottom_y","bottom_y","isIpx","is2To1","getBoundingBox","position","v2","BoardWidth","w","h","c_s","BlockSize","size","scalebl","theight","ttheight","padding_left","bpos","padding_bottom","y","tpos2","convertToWorldSpace","tpos","convertToWorldSpaceAR","tpy","hc","blockViews","x","lb_x","lb_y","rt_x","rt_y","idx","j","tmp_block","instantiate","parent","setStat","setBgColor","lbPos","rtPos","self","is_ipx","ch2","previewConfigs","getPreviewConfigs","tmp_preview","init","push","on","EventType","TOUCH_START","log","pos","event","getLocation","qzShowBase","pretouchpos","preview","previewStat","helpindex","AudioManager","getInstance","playSound","SOUNDS","COMBO","touch","showAlert","TOUCH_MOVE","Math","abs","refreshShadowFrame","TOUCH_END","is_put_success","preview_sc","touchCancle","config","fillBoard","put","resetPreviews","checkClear","refreshPreviewStat","getConfig","hideAllBlockFrames","showHammerSelectFrameByPosition","useHammerByPosition","hideAllBlockMask","select_preview","select_pos","select_config","c_r","c_c","BoardHeight","m_r","m_c","row","r","col","c","tmp_block_view","tmp_block_sc","BlockMap","debug_infos","line","dis","b_r","b_c","warn","ret","view_data","getBlockViewByPosition","blockView","isCanFill","centerRow","centerCol","fillBaordByConfig","block_view","params","fillblocks","JSON","stringify","forEach","e","view","resetByConfig","gameover","setScore","mr","mc","repeateRepeatNumberCall","clear_rows","clearRows","clear_cols","clearCols","clear_blocks","lotteryboxs","indexOf","ani_time","delay_time","tcleartypes","showAddScore","rows","cols","getAddScoreByClear","SHUIXIAQIPAO","is_last","display","runAction","sequence","delayTime","spawn","scaleTo","fadeOut","callFunc","scale","opacity","clearBlocks","onBtnResetPreviews","repeatNumber","useRepeateCall","forseResetPreviews","share_control","configManager","gethuanyihuan","calltype","shareVideoCtr","hideWXBanner","tipview","show","success","tip","ShareConfig","GET_HUNAYIHUAN_NUMBER_SHARE","GET_HUNAYIHUAN_NUMBER_VIEDO","onBtnUseHammer","czInitNumber","lqHarmmer","getchuizi","addCZCallBack","GET_CHUIZI_NUMBER_SHARE","GET_CHUIZI_NUMBER_VIEDO","tmp_view","somedata","console","showLottery","b_w","b_h","showHammerShadowByRowAndCol","hideMask","shadow_blocks","data","tmp_col","tmp_row","showMask","hammerClearByRowAndCol","useCZNumber","blocks","items","parse","czNumber","tiIndex","titem","id","num","add","hadcut","saveItem","error","repnum","hadadd","item","name","flushPreviewStatueUI","stats","haszeorstate","ti1","setGrey","hideGrey","play","hadrefresh","time","hasclear","doGameOver","deal","tg","tgameover","closecall","friend","setStop","fuhuo","bordI","tdata","canadd","emptyBlocks","delete","p4pos","scale1","scale2","delay","seq","zIndex","repeatForever","rep","getHelpPreviewBlockData","showzhiAction","stopAllActions","Animation","move","moveTo","move2","seq2","Timer","setTimer","Blocks","hadhelp","recoverGame","clears","columns","ti","column","param","lottery","boxs","removeLotteryView","cjIndex","scoreIndex","rate","max","random","tbord","tgz","sbord","addLotteryBox","getPlayDataByKey","PlayDataKeys","ttplaydata","huanyihuan","alle","tr","bord","tc","cdata","fillBord","previewdata","previewsdata","previewIndex","clearPlayDataByKey","allcell","rowindex","filleindex","colindex","addscoreLabel","addChild","randomshowIndex","poscell","hideAllBlocks","blocksAni","allcellsanis","allcells","dir","outnumber","right","up","left","down","tindex","showcall","block","totaltime","trepeate","repeat"],"mappings":"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","file":"tt_view_play_board.js","sourceRoot":"../../../../../../assets/scripts/game/view","sourcesContent":["let TAG = '[tt_view_play_board]';\nlet Board = require('../model/tt_model_board.js');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        prefabBlock: cc.Prefab,\n        prefabPreview: cc.Prefab,\n        addscoreLabelPrefab: cc.Prefab,\n        labelScore: cc.Label,\n        czNumberLabel: cc.Label,\n        repNumberLabel: cc.Label,\n        friendnode: cc.Node,\n        helpTip: cc.Node,\n        helpts: cc.Sprite,\n        allblock: [],\n        helpTipLabel: cc.Label,\n        maxScoreLabel: cc.Label,\n        lotteryNode: cc.Node,\n        shouzhiNode: cc.Node,\n        blinkNode: cc.Node,\n        alertNode: cc.Node,\n        chuiziNoneNode: cc.Node,\n        chuiziNode: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.playdata = this.getPlayHistoryData();\n        this.node.width = cc.game.canvas.width;\n        this.node.height = cc.game.canvas.height;\n        this.root = this.node.getChildByName('root');\n        this.root.width = cc.game.canvas.width;\n        this.root.height = cc.game.canvas.height;\n        this.hammerTouch = this.node.getChildByName('hammer_touch');\n        this.hammerTouch.active = false;\n        this.hammerIcon = this.hammerTouch.getChildByName('hammer_icon');\n        this.hammerIcon.active = false;\n        this.board = new Board();\n        this.previews = [];\n        this.lotteryboxnumber = 0;\n        this.previewsPos = [];\n        this.touchIdx = -1;\n        this.useRepeateNumber = 0;\n        this.touchHeight = 240;\n        this.isTouchLocked = false; // *  点击是否被锁住\n        this.isUsingHammer = false; // * 是否在使用 锤子道具\n        this.board.reset();\n        tywx.tt.BoardView = this;\n        tywx.tt.Board = this.board;\n\n        this.initLayout();\n        this.initBoardView();\n\n        this.initTouch();\n        this.initHammerTouch();\n        this.initChuiZiAndRepeate();\n        this.onRefreshScore();\n\n        this.storescorevalue = tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0);\n        this.flushMaxScore();\n\n        this.initPreviewBlocks();\n        if (this.getHelp() == 1) {\n            this.showHelp();\n            this.helpTip.active = true;\n        }\n\n\n        // this.addCZCallBack(1);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_FILL_BOARD, this.onFillBoard, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_RESET_PREVIEWS, this.onResetPreviews, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_ROW, this.onClearRow, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_SCORE, this.onRefreshScore, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_HAMMER, this.onClearHammer, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_PREVIEW_STAT, this.refreshPreStatue, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.HELP_ADD, this.helpAdd, this);\n        this.initHistoryPlayData();\n    },\n\n    // 初始化是否有锤子\n    hideHarmer:function(hide){\n        if (hide){\n            this.chuiziNoneNode.active = true;\n            this.chuiziNode.active = false;\n        } else{\n            this.chuiziNoneNode.active = false;\n            this.chuiziNode.active = true;\n        }\n        \n    },\n\n    // 判断当前是否需要检测已经全部拖完preview\n    checkPreviewActives:function(){\n        let canputnumber = 0;\n        for (let i = 0; i < this.previews.length; i++) {\n            let previewscr = this.previews[i].getComponent('tt_view_priview_blocks');\n            if (previewscr.isCanPut()){\n               canputnumber ++;\n            }\n        }\n        return canputnumber;\n    },\n\n    /**\n     * @description 刷新最高分\n     */\n    flushMaxScore: function () {\n        if (parseInt(this.storescorevalue) < this.board.score) {\n            this.maxScoreLabel.string = \"历史最佳:\" + this.board.score;\n            tywx.tt.curgamescene.flushMaxScore(this.board.score);\n        } else {\n            tywx.tt.curgamescene.flushMaxScore(this.storescorevalue)\n        }\n    },\n\n    start() {\n\n    },\n    onDestroy() {\n        tywx.NotificationCenter.ignoreScope(this);\n    },\n\n    // update (dt) {},\n    initLayout() {\n        this.layout = this.root.getChildByName('layout');\n        this.nodeTop = this.layout.getChildByName('node_top'); //1085\n        this.nodeBoard = this.layout.getChildByName('node_board'); //452\n        this.nodeBoardBottom = this.layout.getChildByName('node_board_bottom'); //261\n        this.nodeBottom = this.layout.getChildByName('node_bottom'); // 0\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n\n\n        let top_y = (1085 / 1280) * ch;\n        let board_y = (410 / 1280) * ch;\n        let board_bottom_y = (190 / 1280) * ch;\n        let bottom_y = 0;\n\n        if (tywx.tt.Utils.isIpx()) {\n            top_y -= 30;\n            board_y += 50;\n        } else if (tywx.tt.Utils.is2To1()) {\n            top_y -= 150;\n        }\n\n        if (ch < 1280) {\n            top_y = this.nodeBoard.getBoundingBox().height + board_y;\n        }\n\n        if (cw / ch >= 0.7) {\n            // * pad\n            board_bottom_y = 0;\n            board_y = board_bottom_y + this.nodeBoardBottom.getBoundingBox().height;\n            top_y = board_y + this.nodeBoard.getBoundingBox().height;\n        }\n\n        this.nodeTop.position = cc.v2(0, top_y);\n        this.nodeBoard.position = cc.v2(0, board_y);\n        this.nodeBoardBottom.position = cc.v2(0, board_bottom_y);\n        this.nodeBottom.position = cc.v2(0, bottom_y);\n\n        // let is_ipx = ch / cw >= 1.9; // *\n        // if (is_ipx) {\n        //     this.nodeTop.getChildByName(\"toproot\").y = this.nodeTop.getChildByName(\"toproot\").y - 80;\n        //     this.nodeBoard.y = this.nodeBoard.y - 90;\n        //     this.nodeBoard.getChildByName(\"bg\").y = this.nodeBoard.getChildByName(\"bg\").y - 90;\n        // }\n    },\n\n\n\n    initBoardView() {\n        // * init board view\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let c_s = tywx.tt.constants.BlockSize;\n        let size = this.root.getBoundingBox();\n        // let block_scale = size.width / 720;\n        // c_s.width = c_s.width * block_scale;\n        // c_s.height = c_s.height * block_scale;\n\n        let scalebl = 720 / this.root.width;\n        let theight = 1280 / this.root.height;\n        let ttheight = theight / 2;\n        let padding_left = (this.root.width * scalebl - w * c_s.width) / 2;\n        var bpos = this.nodeBoard.position;\n        let padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        let tpos2 = this.nodeBoard.convertToWorldSpace(cc.v2(this.nodeBoard.width / 2, this.nodeBoard.height / 2));\n        let tpos = this.nodeBoard.convertToWorldSpaceAR(cc.v2(this.nodeBoard.width / 2, 0));\n        let tpy = tpos.y - tpos2.y;\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let hc = 1280 / cc.game.canvas.height;\n        // let is_ipx = ch / cw >= 1.9; // *\n        // if (is_ipx) {\n        //     padding_bottom = tpos.y - this.nodeBoard.height / 2 - 220 + ((220 - (220 * hc)) / 2);\n        // }\n\n        this.blockViews = [];\n\n        let [x, y] = [0, 0];\n        let [lb_x, lb_y, rt_x, rt_y] = [0, 0, 0, 0];\n        let idx = true;\n        for (let i = 0; i < h; ++i) {\n            y = padding_bottom + i * c_s.height;\n            this.blockViews[i] = [];\n            idx = i % 2 === 0 ? true : false;\n            for (let j = 0; j < w; ++j) {\n                x = padding_left + j * c_s.width;\n                let tmp_block = cc.instantiate(this.prefabBlock);\n                tmp_block.parent = this.root;\n                tmp_block.getComponent('tt_view_block').setStat(-2);\n                tmp_block.getComponent('tt_view_block').setBgColor(idx ? 1 : 2);\n                idx = !idx;\n                tmp_block.position = cc.v2(x, y);\n                this.blockViews[i][j] = tmp_block;\n                lb_x = x <= lb_x ? x : lb_x;\n                rt_x = x >= rt_x ? x : rt_x;\n            }\n            lb_y = y <= lb_y ? y : lb_y;\n            rt_y = y >= rt_y ? y : rt_y;\n        }\n        this.lbPos = cc.v2(lb_x, lb_y);\n        this.rtPos = cc.v2(rt_x + c_s.width, rt_y + c_s.height);\n    },\n\n    initPreviewBlocks() {\n        this.previews = [];\n        let self = this;\n        let [x, y] = [0, this.nodeBoardBottom.y];\n        let bpos = this.nodeBoardBottom.position;\n        let padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        let tpos = this.nodeBoardBottom.convertToWorldSpaceAR(cc.v2(0, 0));\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // *\n        let ch2 = 1280 / cc.game.canvas.height;\n        // if (is_ipx) {\n        //     padding_bottom = tpos.y - 261 - 452 + 20;\n        // } else {\n        //     padding_bottom = padding_bottom + this.nodeBoardBottom.height / 2;\n        // }\n        padding_bottom = padding_bottom + this.nodeBoardBottom.height / 2;\n        let previewConfigs = this.board.getPreviewConfigs();\n        for (let i = 0; i < previewConfigs.length; i++) {\n            if (previewConfigs[i]) {\n                let tmp_preview = cc.instantiate(this.prefabPreview);\n                tmp_preview.parent = this.root;\n                tmp_preview.getComponent('tt_view_priview_blocks').init(previewConfigs[i]);\n                self.previews.push(tmp_preview);\n                x = (i + 1) * 144 + 144 / 2;\n                tmp_preview.position = cc.v2(x, padding_bottom);\n                this.previewsPos.push(cc.v2(x, padding_bottom));\n            }\n        }\n    },\n    initTouch() {\n        let self = this;\n        this.root.on(cc.Node.EventType.TOUCH_START, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch start');\n            let pos = event.getLocation();\n            tywx.tt.curgamescene.qzShowBase();\n            self.pretouchpos = pos;\n            self.touchIdx = -1;\n            for (let i = 0; i < self.previews.length; i++) {\n                let preview = self.previews[i];\n                let [x, y] = [preview.x, preview.y];\n                let [w, h] = [130, 130]; //[preview.width,preview.height];\n                let [lb_x, lb_y] = [x - w / 2, y - h / 2];\n                let [rt_x, rt_y] = [x + w / 2, y + h / 2];\n                if (pos.x >= lb_x && pos.x <= rt_x && pos.y >= lb_y && pos.y <= rt_y) {\n                    if (tywx.tt.Board.previewStat[i] == 1 || (this.helpindex && this.helpindex < 3 && this.helpindex != -1)) {\n                        self.touchIdx = i;\n                        preview.position = cc.v2(pos.x, pos.y);\n                        tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.COMBO[0]);\n                        preview.getComponent('tt_view_priview_blocks').touch();\n                        tywx.tt.log(TAG, `x[${lb_x},${pos.x},${rt_x}],y[${lb_y},${pos.y},${rt_y}]`);\n                    } else {\n                        tywx.tt.Utils.showAlert(\"点击使用换一换\");\n                    }\n\n                }\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            if (self.isTouchLocked) return;\n            let pos = event.getLocation();\n            if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                return;\n            }\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let preview = self.previews[self.touchIdx];\n                preview.position = cc.v2(pos.x, pos.y + this.touchHeight);\n                self.refreshShadowFrame();\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_END, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch end');\n\n            let pos = event.getLocation();\n\n\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let is_put_success = false;\n                if (pos.x >= self.lbPos.x &&\n                    pos.x <= self.rtPos.x &&\n                    pos.y + this.touchHeight >= self.lbPos.y &&\n                    pos.y + this.touchHeight <= self.rtPos.y) {\n                    is_put_success = true;\n                }\n                let preview = self.previews[self.touchIdx];\n\n                preview.position = self.previewsPos[self.touchIdx];\n                let preview_sc = preview.getComponent('tt_view_priview_blocks');\n                if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                    preview_sc.touchCancle();\n                    return;\n                }\n                if (is_put_success) {\n                    let config = preview_sc.config;\n                    if (self.fillBoard(cc.v2(pos.x, pos.y + this.touchHeight), config)) {\n                        preview_sc.put();\n                        self.board.resetPreviews(true);\n                        self.board.checkClear();\n                    } else {\n                        self.board.refreshPreviewStat();\n                        preview_sc.touchCancle();\n                    }\n                } else {\n                    preview_sc.touchCancle();\n                    tywx.tt.log(TAG, \"getConfig2 = \" + preview_sc.getConfig())\n                }\n            }\n            self.hideAllBlockFrames();\n            self.touchIdx = -1;\n        });\n    },\n\n    initHammerTouch() {\n        let self = this;\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_START, event => {\n            self.hammerIcon.active = true;\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_END, event => {\n            let pos = event.getLocation();\n            self.hammerTouch.active = false;\n            self.hammerIcon.active = false;\n            self.useHammerByPosition(pos);\n            self.hideAllBlockMask();\n        });\n    },\n    refreshShadowFrame() {\n        if (this.touchIdx < 0 || this.touchIdx >= this.previews.length) {\n            // tywx.tt.warn(TAG, `wrong touch index when call refreshShadowFrame , touchIdx=${this.touchIdx}`);\n            return;\n        }\n        //tywx.tt.log(TAG,`refreshShadowFrame touchIdx=${this.touchIdx}`);\n        let select_preview = this.previews[this.touchIdx];\n        let select_pos = select_preview.position;\n        let select_config = select_preview.getComponent('tt_view_priview_blocks').getConfig();\n        let [c_r, c_c] = [-1, -1];\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n      \n        let row = this.blockViews.length;\n        for (let r = 0; r < row; ++r) {\n            let col = this.blockViews[r].length;\n            for (let c = 0; c < col; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (select_pos.x >= lb_x &&\n                    select_pos.x <= rt_x &&\n                    select_pos.y >= lb_y &&\n                    select_pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                }\n                tmp_block_sc.setStat(-2);\n            }\n        }\n\n        if (c_r !== -1 && c_c !== -1) {\n            let BlockMap = tywx.tt.constants.BlockMap;\n            let debug_infos = [];\n            for (let r = 0; r < select_config.length; ++r) {\n                let line = select_config[r];\n                for (let c = 0; c < line.length; ++c) {\n                    let dis = BlockMap[r][c];\n                    if (select_config[r][c] !== 0) {\n                        let [b_r, b_c] = [c_r + dis[1], c_c + dis[0]];\n                        if (b_r >= 0 && b_r < m_r &&\n                            b_c >= 0 && b_c < m_c) {\n                            let tmp_block_view = this.blockViews[b_r][b_c];\n                            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                            tmp_block_sc.setStat(-1);\n                            debug_infos.push(`{c=${b_c},r=${b_r}}`);\n                        }\n                    }\n                }\n            }\n            if (debug_infos.length < 4) {\n                tywx.tt.warn(TAG, `{cr=${c_r},cc=${c_c}}`, [...debug_infos]);\n            }\n        }\n    },\n    fillBoard(pos, config) {\n        let ret = false;\n        let view_data = this.getBlockViewByPosition(pos);\n        // console.log(\"viewData = \" + view_data.centerRow, view_data.centerCol);\n        if (view_data.blockView) {\n            if (this.board.isCanFill(view_data.centerRow, view_data.centerCol, config)) {\n                ret = true;\n                tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.COMBO[1]);\n                this.board.fillBaordByConfig(view_data.centerRow, view_data.centerCol, config, this.touchIdx);\n            } else {\n                ret = false;\n            }\n        }\n        return ret;\n    },\n    /**\n     * @description\n     * @author lu ning\n     * @date 2018-10-09\n     * @param {cc.Vec2} pos 指定坐标\n     * @returns {Object} ret \n     *    ret.blockView\n     *    ret.centerRow\n     *    ret.centerCol\n     */\n    getBlockViewByPosition(pos) {\n        let ret = null;\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n        let [c_r, c_c] = [-1, -1];\n        let block_view = null;\n        for (let r = 0; r < m_r; ++r) {\n            for (let c = 0; c < m_c; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (pos.x >= lb_x &&\n                    pos.x <= rt_x &&\n                    pos.y >= lb_y &&\n                    pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                    block_view = tmp_block_view;\n                    break;\n                }\n            }\n        }\n        ret = {\n            blockView: block_view,\n            centerRow: c_r,\n            centerCol: c_c\n        };\n        return ret;\n    },\n    onFillBoard(params) {\n        this.fillblocks = params;\n        tywx.tt.log(TAG, 'onFillBoard' + JSON.stringify(params));\n        let self = this;\n        params.forEach(e => {\n            let tmp_block_view = self.blockViews[e[0]][e[1]];\n            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n            tmp_block_sc.setStat(e[2]);\n        });\n\n    },\n    onResetPreviews() {\n        let previewConfigs = this.board.getPreviewConfigs();\n        tywx.tt.log(TAG, 'onResetPreviews==>' + previewConfigs.length);\n        for (let i = 0; i < previewConfigs.length; i++) {\n            let config = previewConfigs[i];\n            let view = this.previews[i];\n            tywx.tt.log(TAG, 'onResetPreviews==>' + i);\n            view.getComponent('tt_view_priview_blocks').resetByConfig(config);\n        }\n    },\n\n    reset() {\n        this.board.reset();\n        this.gameover = false;\n        this.board.setScore(0);\n        let [mr, mc] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardHeight];\n        for (let r = 0; r < mr; ++r) {\n            for (let c = 0; c < mc; ++c) {\n                this.blockViews[r][c].getComponent('tt_view_block').setStat(0);\n            }\n        }\n        this.onResetPreviews();\n        this.onRefreshScore();\n        this.lotteryboxnumber = 0;\n        this.repeateRepeatNumberCall();\n        this.storescorevalue = tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0);\n        this.flushMaxScore();\n    },\n    onClearRow() {\n        let clear_rows = this.board.clearRows;\n        let clear_cols = this.board.clearCols;\n        let clear_blocks = [];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let self = this;\n        this.lotteryboxs = [];\n        clear_rows.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = self.blockViews[e][c];\n                if (this.board.board[e][c] == 12) {\n                    this.lotteryboxs.push(12);\n                }\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        clear_cols.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let r = 0; r < h; ++r) {\n                let tmp_block_view = self.blockViews[r][e];\n                if (this.board.board[r][e] == 12) {\n                    this.lotteryboxs.push(12);\n                }\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        let ani_time = 0.2;\n        let delay_time = 0.05;\n        let tcleartypes = [];\n        this.showAddScore({\n            rows: this.board.clearRows,\n            cols: this.board.clearCols,\n        }, this.board.getAddScoreByClear(this.board.clearRows, this.board.clearCols));\n        if (clear_blocks.length > 0) {\n            tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.SHUIXIAQIPAO);\n            \n            this.isTouchLocked = true;\n            for (let i = 0; i < clear_blocks.length; ++i) {\n                let tmp_block_view = clear_blocks[i];\n                let is_last = i === (clear_blocks.length - 1);\n\n                let display = tmp_block_view.getChildByName('display');\n                display.runAction(\n                    cc.sequence(\n                        cc.delayTime(i * delay_time),\n                        cc.spawn(\n                            cc.scaleTo(ani_time, 0.1),\n                            cc.fadeOut(ani_time)\n                        ),\n                        cc.callFunc(() => {\n                            display.scale = 1.0;\n                            display.opacity = 255;\n                            tmp_block_view.getComponent('tt_view_block').setStat(0);\n                            if (is_last) {\n                                self.board.clearBlocks();\n                                self.isTouchLocked = false;\n                            }\n                        })\n                    )\n                );\n            }\n        }\n\n\n    },\n    onBtnResetPreviews() {\n        if (this.isTouchLocked) return;\n        tywx.tt.log(TAG, 'onBtnResetPreviews');\n        if (this.helpindex && this.helpindex > 0) {\n            return;\n        }\n        if (this.repeatNumber > 0) {\n            this.useRepeateCall();\n            this.board.forseResetPreviews();\n        } else {\n            const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.gethuanyihuan : [\"share\", 50];\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            const self = this;\n            tywx.tt.Utils.hideWXBanner();\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.repeateRepeatNumberCall();\n                },\n                tip: \"免费获得3次换一换！可以在危险的时候使用。\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_VIEDO,\n                calltype: calltype,\n\n            });\n\n        }\n    },\n    onBtnUseHammer() {\n        if (this.isTouchLocked) return;\n        if (this.helpindex && this.helpindex > 0) {\n            return;\n        }\n        tywx.tt.log(TAG, 'onBtnUseHammer');\n        if (this.czInitNumber > 0) {\n            this.hideHarmer(false);\n            this.hammerTouch.active = true;\n        } else {\n            this.hideHarmer(true);\n            this.lqHarmmer();\n        }\n    },\n\n    lqHarmmer:function(){\n        const self = this;\n        const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.getchuizi : [\"share\", 50];\n        const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n        tywx.tt.Utils.hideWXBanner();\n        tywx.tt.tipview.show({\n            success: function () {\n                self.addCZCallBack(1);\n                self.hideHarmer(false);\n            },\n            tip: \"免费获得1个锤子！可以用来点击消除3*3范围的方块.\",\n            config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_VIEDO,\n            calltype: calltype,\n        });\n    },\n    \n    hideAllBlockFrames() {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_view.getComponent('tt_view_block');\n                tmp_block_sc.setStat(-2);\n            }\n        }\n    },\n\n    /**\n     * @description 刷分\n     * @param {Object} somedata 刷分的时候自带刷新数据\n     */\n    onRefreshScore(somedata) {\n        console.log(\"当前的分数 = \", this.board.score);\n        tywx.tt.curgamescene.setScore(this.board.score);\n        if (somedata) {\n            this.showLottery(somedata);\n        }\n    },\n    showHammerSelectFrameByPosition(pos) {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, b_w, b_h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + b_w, y + b_h];\n                if (pos.x >= lb_x && pos.x <= rt_x &&\n                    pos.y >= lb_y && pos.y <= rt_y) {\n                    tywx.tt.log(TAG, `showHammerSelectFrameByPosition==>${r},${c}`);\n                    this.showHammerShadowByRowAndCol(r, c);\n                    this.hammerIcon.position = tmp_block_view.position;\n                    break;\n                }\n            }\n        }\n    },\n    hideAllBlockMask() {\n        for (let r = 0; r < this.blockViews.length; ++r) {\n            for (let c = 0; c < this.blockViews[r].length; ++c) {\n                this.blockViews[r][c].getComponent('tt_view_block').hideMask();\n            }\n        }\n    },\n    showHammerShadowByRowAndCol(row, col) {\n        let shadow_blocks = [\n            [\n                [-1, 1],\n                [0, 1],\n                [1, 1]\n            ],\n            [\n                [-1, 0],\n                [0, 0],\n                [1, 0]\n            ],\n            [\n                [-1, -1],\n                [0, -1],\n                [1, -1]\n            ]\n        ];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        this.hideAllBlockMask();\n        for (let r = 0; r < 3; ++r) {\n            for (let c = 0; c < 3; ++c) {\n                let data = shadow_blocks[r][c];\n                let tmp_col = col + data[0];\n                let tmp_row = row + data[1];\n                if (tmp_col >= 0 && tmp_row >= 0 && tmp_col < w && tmp_row < h) {\n                    let tmp_block = this.blockViews[tmp_row][tmp_col];\n                    let tmp_block_sc = tmp_block.getComponent('tt_view_block');\n                    tmp_block_sc.showMask();\n                }\n            }\n        }\n    },\n    useHammerByPosition(pos) {\n        let data = this.getBlockViewByPosition(pos);\n        tywx.tt.log(TAG, `usehammerByPosition>>>row:${data.centerRow},col:${data.centerCol}`);\n        if (data.blockView) {\n            this.board.hammerClearByRowAndCol(data.centerRow, data.centerCol);\n            // 刷新锤子的显示\n            this.useCZNumber(-1);\n        }\n    },\n    onClearHammer(blocks) {\n        if (blocks.length > 0) this.isTouchLocked = true;\n        else return;\n        let self = this;\n        let delay_time = 0.05;\n        let ani_time = 0.2;\n        for (let i = 0; i < blocks.length; i++) {\n            let is_last = i === (blocks.length - 1);\n            let tmp_row = blocks[i][0];\n            let tmp_col = blocks[i][1];\n            let tmp_block_view = this.blockViews[tmp_row][tmp_col];\n            let display = tmp_block_view.getChildByName('display');\n            display.runAction(\n                cc.sequence(\n                    cc.delayTime(i * delay_time),\n                    cc.spawn(\n                        cc.scaleTo(ani_time, 0.1),\n                        cc.fadeOut(ani_time)\n                    ),\n                    cc.callFunc(() => {\n                        display.scale = 1.0;\n                        display.opacity = 255;\n                        tmp_block_view.getComponent('tt_view_block').setStat(0);\n                        if (is_last) {\n                            self.isTouchLocked = false;\n                            tywx.tt.Board.refreshPreviewStat();\n                        }\n                    })\n                )\n            );\n        }\n    },\n\n    /**\n     * @description 初始化锤子数量和重置次数\n     */\n    initChuiZiAndRepeate: function () {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n            const titem = items[tiIndex];\n            tywx.tt.log(\"cz item = \" + JSON.stringify(titem));\n            if (titem.id == 2 || titem.id == 4 || titem.id == 6) {\n                czNumber = czNumber + titem.num;\n            }\n        }\n        this.czInitNumber = czNumber;\n        if (czNumber == 0) {\n            // this.czNumberLabel.string = \"点我获取\";\n            this.hideHarmer(true);\n        } else {\n            this.hideHarmer(false);\n            // this.czNumberLabel.string = czNumber + \"\";\n        }\n\n        // 重置次数\n        this.repeatNumber = 3;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n\n    /**\n     * @description 使用锤子回调\n     * @param {Number} add 负数为减少锤子数量 正数添加锤子数量\n     */\n    useCZNumber: function (add) {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadcut = false;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n            if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6) && items[tiIndex].num > 0) {\n                if (!hadcut) {\n                    hadcut = true;\n                    items[tiIndex].num = items[tiIndex].num + add;\n                }\n                if (items[tiIndex].num > 0) {\n                    czNumber = czNumber + items[tiIndex].num;\n                }\n            }\n        }\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n\n        this.czInitNumber = czNumber;\n        if (czNumber == 0) {\n            this.hideHarmer(true);\n            // this.czNumberLabel.string = \"点我获取\";\n        } else {\n            this.hideHarmer(true);\n            // this.czNumberLabel.string = czNumber + \"\";\n        }\n    },\n\n    /**\n     * @description 使用换一换的刷新回调\n     */\n    useRepeateCall: function () {\n        if (this.repeatNumber > 0) {\n            this.repeatNumber--;\n            this.repNumberLabel.string = this.repeatNumber + \"/3\";\n        } else {\n            tywx.tt.error(TAG, \"换一换的使用次数为 \" + this.repeatNumber)\n        }\n    },\n\n    /**\n     * 重置换一换的次数\n     */\n    repeateRepeatNumberCall: function (repnum) {\n        this.gameover = false;\n        this.repeatNumber = 3;\n        this.useRepeateNumber = this.useRepeateNumber + 1;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n\n    /**\n     * @添加锤子\n     * @param {Number} num 添加锤子的数量\n     */\n    addCZCallBack: function (num) {\n        var items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadadd = false;\n        if (items.length == 0) {\n            items = [];\n            var item = {};\n            item.id = 2;\n            item.num = num;\n            item.name = \"锤子\";\n            items[0] = item;\n            czNumber = num;\n        } else {\n            for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n                if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6)) {\n                    if (!hadadd) {\n                        hadadd = true;\n                        items[tiIndex].num = items[tiIndex].num + num;\n                    }\n                    if (items[tiIndex].num > 0) {\n                        czNumber = czNumber + items[tiIndex].num;\n                    }\n                }\n            }\n        }\n        tywx.tt.log(\"锤子的数量  = \" + czNumber);\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n        this.czInitNumber = czNumber;\n        // this.czNumberLabel.string = czNumber + \"\";\n    },\n\n    /**\n     * @description 刷新显示\n     */\n    flushPreviewStatueUI: function () {\n        let stats = this.board.previewStat;\n        console.log(\" 设置的状态 =  \" + stats[0]);\n        console.log(stats.length + \" 当前的所有状态 = \" + stats);\n        let haszeorstate = false;\n\n        for (let ti1 = 0; ti1 < stats.length; ti1++) {\n            if (stats[ti1] == 0 && tywx.tt.Board.previewConfigs[ti1] != null) {\n                this.previews[ti1].getComponent(\"tt_view_priview_blocks\").setGrey();\n                haszeorstate = true;\n            } else {\n                this.previews[ti1].getComponent(\"tt_view_priview_blocks\").hideGrey();\n            }\n        }\n\n        if (haszeorstate == true) {\n            this.alertNode.active = true;\n            this.alertNode.getComponent(\"cc.Animation\").play(\"dangertip\");\n        } else {\n            this.alertNode.active = false;\n        }\n    },\n\n       refreshPreStatue: function () {\n        //    if (this.hadrefresh) {\n        //        return;\n        //    }\n           let self = this;\n           this.hadrefresh = true;\n           let time = tywx.tt.Board.hasclear == true? 0.5 : 0.2;\n           this.doGameOver(); \n       },\n    \n    /** \n     * @description 处理游戏是否结束\n     */\n    doGameOver: function () {\n        this.hadrefresh = false;\n        let self = this;\n        let deal = false;\n        for (let tg = 0; tg < 3; tg++) {\n            if (tywx.tt.Board.previewConfigs[tg] != null) {\n                deal = true;\n                break;\n            }\n        }\n        console.log(\"gameover p判断的preview = \" + JSON.stringify(tywx.tt.Board.previewConfigs));\n        // if (!deal) {\n        //     return;\n        // }\n        this.flushPreviewStatueUI();\n        // tywx.Timer.setTimer(this, self.flushPreviewStatueUI, 0.25, 0, 0);\n        // console.log(this.board.previewStat.length + \"this.bord = \" + JSON.stringify(this.board.previewStat));\n        let stats = this.board.previewStat\n        tywx.tt.log(TAG, stats.length + \"this.bord = \" + stats);\n        let gameover = true;\n\n        for (let ti1 = 0; ti1 < stats.length; ti1++) {\n            if (stats[ti1] == 1) {\n                gameover = false;\n            }\n\n        }\n\n        const tgameover = gameover && this.repeatNumber == 0;\n        tywx.tt.log(\"tgameover \" + tgameover);\n        if (tgameover) {\n            this.alertNode.active = false;\n            this.gameover = true;\n            tywx.tt.Utils.hideWXBanner();\n            const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.gethuanyihuan : [\"share\", 50];\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.repeateRepeatNumberCall();\n                },\n                tip: \"免费获得3次换一换！可以复活!\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_VIEDO,\n                calltype: calltype,\n                closecall: function () {\n                    // 停止刷新即将超越的好友\n                    tywx.tt.friend.setStop(true);\n                    // 显示复活界面\n                    tywx.tt.fuhuo.show({\n                        score: self.board.score,\n                    })\n                }\n            });\n\n        }\n    },\n\n    /**\n     * @description 显示帮助界面\n     */\n    showHelp: function () {\n        this.helpindex = 1;\n        let data = [];\n        for (var row = 0; row < 8; row++) {\n            for (let bordI = 0; bordI < 8; bordI++) {\n                var tdata = [];\n                tdata[0] = row;\n                tdata[1] = bordI;\n                tdata[2] = 3;\n                if ((row >= 3 && row < 5 && (bordI != 3 && bordI != 4))) {\n                    data.push(tdata);\n                } else {\n                    let canadd = true;\n                    if ((bordI == 3 || bordI == 4) && (row == 3 || row == 4)) {\n                        canadd = false;\n                    }\n                    let [r, c] = [tdata[0], tdata[1]];\n                    if (this.board.board[r][c] === 0 && canadd) {\n                        this.board.board[r][c] = -2;\n                        this.board.emptyBlocks.delete(`${r}_${c}`);\n                    }\n                }\n            }\n        }\n        data.forEach(e => {\n            let [r, c] = [e[0], e[1]];\n            if (this.board.board[r][c] === 0) {\n                this.board.board[r][c] = e[2];\n                this.board.emptyBlocks.delete(`${r}_${c}`);\n            }\n            let tmp_block_view = this.blockViews[e[0]][e[1]];\n            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n            tmp_block_sc.setStat(e[2]);\n        })\n        this.board.previewStat[0] = 0;\n        this.board.previewStat[1] = 1;\n        this.board.previewStat[0] = 0;\n        // this.blockViews[3][3].opacity = 122,\n        // this.blockViews[4][3].opacity = 122,\n        let p4pos = this.blockViews[4][3].position;\n        this.blinkNode.position = cc.v2(p4pos.x + 38, p4pos.y);\n        // this.blockViews[3][3].getComponent(\"tt_view_block\").blockBlink();\n        // this.blockViews[4][3].getComponent(\"tt_view_block\").blockBlink();\n        this.helpts.node.active = true;\n        // this.helpts.node.position = this.blockViews[3][3].parent.parent.position;\n        this.previews[0].active = false;\n        this.previews[2].active = false;\n        this.helpTip.active = true;\n        let scale1 = cc.scaleTo(0.5, 1.1);\n        let scale2 = cc.scaleTo(0.5, 1);\n        let delay = cc.delayTime(0.2);\n        let seq = cc.sequence(scale1, scale2, delay);\n        this.blinkNode.zIndex = 99998;\n        this.shouzhiNode.zIndex = 99999;\n        this.blinkNode.runAction(cc.repeatForever(seq));\n        let rep = cc.repeatForever(cc.sequence(cc.scaleTo(0.5, 1.1), cc.scaleTo(0.5, 1)));\n        this.helpts.node.runAction(rep);\n        this.previews[1].getComponent(\"tt_view_priview_blocks\").resetByConfig(this.getHelpPreviewBlockData());\n        this.showzhiAction(this.blockViews[3][3].position);\n        tywx.tt.log(TAG, \"新手数据  = \" + JSON.stringify(this.helpts.node.position));\n    },\n\n    showzhiAction: function (position) {\n        this.shouzhiNode.stopAllActions();\n        this.shouzhiNode.active = true;\n        this.shouzhiNode.getComponent(cc.Animation).play(\"dragani\");\n        this.shouzhiNode.position = cc.v2(this.previews[1].position.x + 45, this.previews[1].position.y - 38);\n        let move = cc.moveTo(0.5, cc.v2(position.x + 76, position.y + 38));\n        let delay = cc.delayTime(0.5);\n        let move2 = cc.moveTo(0.5, cc.v2(this.previews[1].position.x + 45, this.previews[1].position.y - 38));\n        let seq2 = cc.sequence(move, delay, move2);\n        this.shouzhiNode.runAction(cc.repeatForever(seq2));\n    },\n\n    /**\n     * @description 完成第一步帮助后的回调\n     */\n    helpAdd: function () {\n        if (this.helpindex > 0) {\n            this.helpindex++;\n            if (this.helpindex == 2) {\n                var self = this;\n                this.helpTipLabel.string = \"再拖动块到目标位置,就可以消除这两行了。\"\n                this.previews[1].active = true;\n                tywx.Timer.setTimer(this, function () {\n                    this.showzhiAction(this.blockViews[3][4].position);\n                    // this.blockViews[3][3].getComponent(\"tt_view_block\").blockHide();\n                    // this.blockViews[4][3].getComponent(\"tt_view_block\").blockHide();\n                    // this.blockViews[3][4].getComponent(\"tt_view_block\").blockBlink();\n                    // this.blockViews[4][4].getComponent(\"tt_view_block\").blockBlink();\n                    let p4pos = this.blockViews[4][4].position;\n                    this.blinkNode.position = cc.v2(p4pos.x + 38, p4pos.y);\n                    self.previews[1].getComponent(\"tt_view_priview_blocks\").resetByConfig(self.getHelpPreviewBlockData())\n                }, 1, 0, 0.3);\n            } else {\n                // 清空棋盘重新开始\n                this.helpindex = -1;\n                this.helpts.node.stopAllActions();\n                this.helpts.node.active = false;\n                this.helpTipLabel.string = \"恭喜您，祝您玩得愉快。\"\n                var self = this;\n                // this.blockViews[3][4].getComponent(\"tt_view_block\").blockHide();\n                // this.blockViews[4][4].getComponent(\"tt_view_block\").blockHide();\n                // this.board.forseResetPreviews();\n                this.shouzhiNode.active = false;\n                this.blinkNode.stopAllActions();\n\n                this.shouzhiNode.stopAllActions();\n                this.blinkNode.active = false;\n                tywx.Timer.setTimer(this, function () {\n                    tywx.tt.log(TAG, \"新手引导结束\");\n                    tywx.tt.Utils.saveItem(\"hadhelp\", 2, true);\n                    this.previews[0].active = true;\n                    this.previews[1].active = true;\n                    this.previews[2].active = true;\n                    this.helpTip.active = false;\n                    tywx.tt.BoardView.reset();\n                }, 1, 0, 2);\n            }\n        }\n    },\n\n    /** \n     * @description 得到给定的帮助的格子数据\n     */\n    getHelpPreviewBlockData: function () {\n        const config = tywx.tt.constants.Blocks[1];\n        return config;\n    },\n\n    /** \n     * @description 得到是否需要帮助\n     */\n    getHelp: function () {\n        const hadhelp = tywx.tt.Utils.loadItem(\"hadhelp\", 1);\n        return hadhelp;\n    },\n\n    /**\n     * @description 复活游戏\n     */\n    recoverGame: function () {\n        this.gameover = false;\n        let clears = [];\n        let rows = [0, 1, 2, 3, 4, 5, 6, 7];\n        let columns = [0, 1, 2, 3, 4, 5, 6, 7];\n        for (let ti = 0; ti < 8; ti++) {\n            let data = {};\n            data.row = rows[ti];\n            data.column = columns[7 - ti];\n            clears.push(data);\n            data = {};\n            data.row = rows[7 - ti];\n            data.column = columns[ti];\n            clears.push(data);\n        }\n        tywx.tt.log(TAG, \"data clear = \" + JSON.stringify(clears));\n        clears.forEach(data => {\n            this.board.hammerClearByRowAndCol(data.row, data.column);\n        });\n        tywx.tt.Board.refreshPreviewStat();\n    },\n\n    /**\n     * @description 显示抽奖\n     * @param {Object} param 消除行列的位置信息\n     */\n    showLottery: function (param) {\n        if (this.helpindex && this.helpindex < 3) {\n            return\n        }\n        if (this.gameover) {\n            return;\n        }\n\n        if (!tywx.tt.configManager.getInstance().lottery) {\n            return;\n        }\n        // 产看当前是否有宝箱可以弹出\n        let boxs = this.lotteryboxs;\n        this.lotteryboxs = [];\n        // 显示宝箱\n        var self = this;\n        if (boxs.length > 0) {\n            this.lotteryboxnumber = this.lotteryboxnumber - boxs.length;\n            tywx.tt.lottery.showLottery(\"game\", function () {\n                self.addCZCallBack(0);\n                tywx.tt.lottery.removeLotteryView();\n            });\n\n        }\n        tywx.tt.log(TAG, \"当前宝箱个数 = \" + this.lotteryboxnumber);\n        // 处理显示的宝箱\n        var cjIndex = 0;\n        for (let scoreIndex = 0; scoreIndex < tywx.tt.configManager.getInstance().lottery.score.length; scoreIndex++) {\n            if (this.board.score <= tywx.tt.configManager.getInstance().lottery.score[scoreIndex]) {\n                cjIndex = scoreIndex;\n                break;\n            }\n        }\n        let rate = tywx.tt.configManager.getInstance().lottery.rate[cjIndex];\n        let max = tywx.tt.configManager.getInstance().lottery.max[cjIndex];\n        let random = Math.random();\n        // 产生抽奖\n        tywx.tt.log(TAG, \"score = \" + this.board.score + \" max = \" + max + \"random = \" + random + \" rate =  \" + rate + \" cjIndex = \" + cjIndex);\n        if (random <= rate && this.lotteryboxnumber < max) {\n            this.lotteryboxnumber++;\n            // 1 row 2 col\n            let tbord = [];\n            for (let r = 0; r < this.board.board.length; r++) {\n                let tdata = this.board.board[r];\n                for (let c = 0; c < tdata.length; c++) {\n                    if (this.board.board[r][c] > 0) {\n                        let tgz = {};\n                        tgz.row = r;\n                        tgz.column = c;\n                        tbord.push(tgz);\n                    }\n                }\n            }\n            let sbord = tbord[parseInt(Math.random() * tbord.length)];\n            tywx.tt.log(\"展示的位置2  = \" + JSON.stringify(sbord));\n            if (sbord.row && sbord.column) {\n                this.blockViews[sbord.row][sbord.column].getComponent(\"tt_view_block\").setStat(12);\n                this.board.board[sbord.row][sbord.column] = 12;\n                this.board.emptyBlocks.delete(`${ sbord.row}_${sbord.column}`);\n            }\n        } else {\n\n        }\n    },\n\n\n\n    /**\n     * @description 添加宝箱\n     * @param 添加宝箱的位置信息\n     */\n    addLotteryBox: function (param) {\n\n    },\n\n    /**\n     * @description 得到玩家数据\n     */\n    getPlayHistoryData: function () {\n        let data = tywx.tt.Utils.getPlayDataByKey(tywx.tt.constants.PlayDataKeys.ttplaydata);\n        tywx.tt.log(\"玩家记录数据 = \" + data);\n        if (data != -1) {\n            data = JSON.parse(data);\n        }\n        return data\n    },\n\n    /**\n     * @description 初始化游戏进度的数据\n     */\n    initHistoryPlayData: function () {\n        if (this.playdata != -1) {\n            // 设置score\n            // this.board.setScore(this.playdata.score);\n            this.repeatNumber = this.playdata.huanyihuan;\n            // 设置刷新次数\n            this.repNumberLabel.string = this.repeatNumber + \"/3\";\n            // 刷新棋盘数据\n            let alle = [];\n            for (let tr = 0; tr < this.playdata.bord.length; tr++) {\n                let tdata = this.playdata.bord[tr];\n                for (let tc = 0; tc < tdata.length; tc++) {\n                    let cdata = [];\n                    cdata[0] = tr;\n                    cdata[1] = tc;\n                    cdata[2] = tdata[tc];\n                    alle.push(cdata);\n                }\n            }\n            this.board.fillBord(alle);\n            // 刷新拖动数据\n            let previewdata = this.playdata.previewsdata;\n            let previewIndex = this.playdata.previewIndex;\n            tywx.tt.Board.previewConfigs = previewdata;\n            tywx.tt.Board.previewIndex = previewIndex;\n            console.log(\"borddata = \" + JSON.stringify(previewIndex));\n            for (let ti = 0; ti < previewdata.length; ti++) {\n                let config = previewdata[ti];\n                let preview_sc = this.previews[ti].getComponent(\"tt_view_priview_blocks\");\n                if (config) {\n                    preview_sc.resetByConfig(config);\n                } else {\n                    preview_sc.put();\n                }\n            }\n            tywx.tt.Board.refreshPreviewStat();\n            tywx.tt.Utils.clearPlayDataByKey(tywx.tt.constants.PlayDataKeys.ttplaydata, -1);\n        }\n    },\n\n\n    /**\n     * @description 显示添加的分数\n     * @param {Number} score 分数\n     * @param {cc.v2} pos 显示的位置\n     */\n    showAddScore: function (somedata, score) {\n        // console.log(\"当前清除数据 = \" + JSON.stringify(somedata));\n        // console.log(\"当前填充数据 = \" + JSON.stringify(this.fillblocks));\n        if ((somedata.rows.length > 0 || somedata.cols.length > 0) && this.fillblocks.length > 0) {\n            let pos = cc.v2(0, 0)\n            let allcell = [];\n            if (somedata.rows.length > 0) {\n                for (let rowindex = 0; rowindex < somedata.rows.length; rowindex++) {\n                    for (let filleindex = 0; filleindex < this.fillblocks.length; filleindex++) {\n                        if (somedata.rows[rowindex] == this.fillblocks[filleindex][0]) {\n                            allcell.push(this.fillblocks[filleindex]);\n                        }\n                    }\n                }\n            }\n            if (somedata.cols.length > 0) {\n                for (let colindex = 0; colindex < somedata.cols.length; colindex++) {\n                    for (let filleindex = 0; filleindex < this.fillblocks.length; filleindex++) {\n                        if (somedata.cols[colindex] == this.fillblocks[filleindex][1]) {\n                            allcell.push(this.fillblocks[filleindex]);\n                        }\n                    }\n                }\n            }\n            // console.log(\"当前可以显示分数的位置 \" + JSON.stringify(allcell));\n            if (allcell.length > 0) {\n                if (!this.addscoreLabel) {\n                    this.addscoreLabel = cc.instantiate(this.addscoreLabelPrefab);\n                    this.root.addChild(this.addscoreLabel, 120000);\n                }\n                let randomshowIndex = parseInt(Math.random() * allcell.length);\n                // console.log(\"randomshowIndex = \" + randomshowIndex);\n                let poscell = allcell[randomshowIndex];\n                if (poscell) {\n                    pos = this.blockViews[poscell[0]][poscell[1]].position;\n                    pos = cc.v2(pos.x + this.blockViews[poscell[0]][poscell[1]].width / 2, pos.y + this.blockViews[poscell[0]][poscell[1]].height / 2)\n                    this.addscoreLabel.position = pos;\n                    this.addscoreLabel.getComponent(\"AddScoreLabel\").setScore(score);\n                    this.addscoreLabel.getComponent(\"AddScoreLabel\").show();\n                }\n            } else {\n                tywx.tt.log(TAG, \"当前没有显示分数的位置 计算可能出错了\");\n            }\n        }\n    },\n\n    /**\n     * @description 隐藏底板所有的块\n     */\n    hideAllBlocks: function () {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_view = this.blockViews[r][c];\n                tmp_view.active = false;\n            }\n        }\n    },\n    /**\n     * @description 动画显示底板所有的块\n     */\n    blocksAni: function () {\n        this.isTouchLocked = true;\n        this.hideAllBlocks();\n        if (!this.allcellsanis) {\n            let allcells = [];\n            let dir = 0;\n            let outnumber = 8;\n            for (let row = 0; row < 4; row++) {\n                if (dir == 0) {\n                    for (let right = row; right < outnumber; right++) {\n                        let data = {};\n                        data.row = row;\n                        data.column = right;\n                        allcells.push(data);\n                    }\n                    dir = 1;\n                }\n                if (dir == 1) {\n                    for (let up = row + 1; up < outnumber; up++) {\n                        let data = {};\n                        data.row = up;\n                        data.column = outnumber - 1;\n                        allcells.push(data);\n                    }\n                    dir = 2;\n                }\n                if (dir == 2) {\n                    for (let left = outnumber - 2; left >= 0; left--) {\n                        let data = {};\n                        data.row = outnumber - 1;\n                        data.column = left;\n                        allcells.push(data);\n                    }\n                    dir = 3;\n                }\n                if (dir == 3) {\n                    for (let down = outnumber - 2; down > 0; down--) {\n                        let data = {};\n                        data.row = down;\n                        data.column = row;\n                        allcells.push(data);\n                    }\n                    dir = 0;\n                }\n                outnumber--;\n            }\n            this.allcellsanis = allcells;\n        }\n\n        let tindex = 0;\n        var self = this;\n        let showcall = cc.callFunc(function () {\n            let data = self.allcellsanis[tindex];\n            let block = self.blockViews[data.row][data.column];\n            block.active = true;\n            tindex++;\n            if (tindex == self.allcellsanis.length) {\n                self.isTouchLocked = false;\n            }\n        });\n        let totaltime = 1.2;\n        let delay = cc.delayTime(totaltime / this.allcellsanis.length);\n        let seq = cc.sequence(showcall, delay);\n        let trepeate = cc.repeat(seq, this.allcellsanis.length)\n        this.node.stopAllActions();\n        this.node.runAction(trepeate);\n        //  console.log(allcells.length + \" zongchangdu  = \" + JSON.stringify(allcells));\n    },\n});"]}