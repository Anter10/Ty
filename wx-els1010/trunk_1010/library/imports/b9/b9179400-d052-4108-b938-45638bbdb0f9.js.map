{"version":3,"sources":["../../../../../../assets/scripts/game/view/assets/scripts/game/view/tt_view_play_board.js"],"names":["TAG","Board","require","friend","cc","Class","extends","Component","properties","prefabBlock","Prefab","prefabPreview","labelScore","Label","czNumberLabel","repNumberLabel","friendnode","Node","maxScoreLabel","onLoad","node","width","game","canvas","height","root","getChildByName","hammerTouch","active","hammerIcon","board","previews","previewsPos","touchIdx","touchHeight","isTouchLocked","isUsingHammer","reset","tywx","tt","BoardView","addIcon","score","initLayout","initBoardView","initPreviewBlocks","initTouch","initHammerTouch","initChuiZiAndRepeate","onRefreshScore","storescorevalue","Utils","loadItem","constants","TT_SCORE","flushMaxScore","NotificationCenter","listen","events","TT_FILL_BOARD","onFillBoard","TT_RESET_PREVIEWS","onResetPreviews","TT_CLEAR_ROW","onClearRow","TT_REFRESH_SCORE","TT_CLEAR_HAMMER","onClearHammer","TT_REFRESH_PREVIEW_STAT","doGameOver","parseInt","string","start","onDestroy","ignoreScope","layout","nodeTop","nodeBoard","nodeBoardBottom","nodeBottom","cw","ch","is_ipx","y","BoardWidth","w","h","c_s","BlockSize","size","getBoundingBox","scalebl","theight","ttheight","padding_left","bpos","position","padding_bottom","tpos","convertToWorldSpaceAR","blockViews","x","lb_x","lb_y","rt_x","rt_y","idx","i","j","tmp_block","instantiate","parent","getComponent","setStat","setBgColor","color","v2","lbPos","rtPos","self","console","log","previewConfigs","getPreviewConfigs","length","tmp_preview","init","push","on","EventType","TOUCH_START","pos","event","getLocation","pretouchpos","preview","touch","TOUCH_MOVE","Math","abs","refreshShadowFrame","TOUCH_END","is_put_success","preview_sc","touchCancle","config","fillBoard","put","resetPreviews","checkClear","getConfig","hideAllBlockFrames","showHammerSelectFrameByPosition","useHammerByPosition","hideAllBlockMask","select_preview","select_pos","select_config","c_r","c_c","BoardHeight","m_r","m_c","row","r","col","c","tmp_block_view","tmp_block_sc","BlockMap","debug_infos","line","dis","b_r","b_c","warn","ret","view_data","getBlockViewByPosition","blockView","isCanFill","centerRow","centerCol","fillBaordByConfig","block_view","params","JSON","stringify","forEach","e","view","resetByConfig","clear_rows","clearRows","clear_cols","clearCols","clear_blocks","indexOf","ani_time","delay_time","is_last","display","runAction","sequence","delayTime","spawn","scaleTo","fadeOut","callFunc","clearBlocks","scale","opacity","onBtnResetPreviews","repeatNumber","useRepeateCall","forseResetPreviews","share_control","configManager","gethuanyihuan","calltype","shareVideoCtr","hideWXBanner","tipview","show","success","repeateRepeatNumberCall","tip","ShareConfig","GET_HUNAYIHUAN_NUMBER_SHARE","GET_HUNAYIHUAN_NUMBER_VIEDO","onBtnUseHammer","czInitNumber","getchuizi","addCZCallBack","GET_CHUIZI_NUMBER_SHARE","GET_CHUIZI_NUMBER_VIEDO","tmp_view","setScore","b_w","b_h","showHammerShadowByRowAndCol","hideMask","shadow_blocks","data","tmp_col","tmp_row","showMask","hammerClearByRowAndCol","useCZNumber","blocks","items","parse","czNumber","tiIndex","titem","id","num","add","hadcut","saveItem","error","hadadd","item","name","stats","previewStat","gameover","ti","tgameover","setStop","fuhuo"],"mappings":"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","file":"tt_view_play_board.js","sourceRoot":"../../../../../../assets/scripts/game/view","sourcesContent":["let TAG = '[tt_view_play_board]';\nlet Board = require('../model/tt_model_board.js');\nlet friend = require('../rank/friend.js');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        prefabBlock: cc.Prefab,\n        prefabPreview: cc.Prefab,\n        labelScore: cc.Label,\n        czNumberLabel: cc.Label,\n        repNumberLabel: cc.Label,\n        friendnode: cc.Node,\n        maxScoreLabel: cc.Label,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.node.width = cc.game.canvas.width;\n        this.node.height = cc.game.canvas.height;\n        this.root = this.node.getChildByName('root');\n        this.root.width = cc.game.canvas.width;\n        this.root.height = cc.game.canvas.height;\n        this.hammerTouch = this.node.getChildByName('hammer_touch');\n        this.hammerTouch.active = false;\n        this.hammerIcon = this.hammerTouch.getChildByName('hammer_icon');\n        this.hammerIcon.active = false;\n        this.board = new Board();\n        this.previews = [];\n        this.previewsPos = [];\n        this.touchIdx = -1;\n        this.touchHeight = 240;\n        this.isTouchLocked = false; // *  点击是否被锁住\n        this.isUsingHammer = false; // * 是否在使用 锤子道具\n        this.board.reset();\n        tywx.tt.BoardView = this;\n        tywx.tt.Board = this.board;\n        friend.addIcon(this.friendnode, this.score);\n        tywx.tt.friend = friend;\n        this.initLayout();\n        this.initBoardView();\n        this.initPreviewBlocks();\n        this.initTouch();\n        this.initHammerTouch();\n        this.initChuiZiAndRepeate();\n        this.onRefreshScore();\n\n        this.storescorevalue = tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0);\n        this.flushMaxScore();\n        // this.addCZCallBack(1);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_FILL_BOARD, this.onFillBoard, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_RESET_PREVIEWS, this.onResetPreviews, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_ROW, this.onClearRow, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_SCORE, this.onRefreshScore, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_HAMMER, this.onClearHammer, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_PREVIEW_STAT, this.doGameOver, this);\n    },\n\n    /**\n     * @description 刷新最高分\n     */\n    flushMaxScore: function () {\n        if (parseInt(this.storescorevalue) < this.board.score) {\n            this.maxScoreLabel.string = \"历史最佳:\" + this.board.score;\n        } else {\n            this.maxScoreLabel.string = \"历史最佳:\" + this.storescorevalue;\n        }\n    },\n\n    start() {\n\n    },\n    onDestroy() {\n        tywx.NotificationCenter.ignoreScope(this);\n    },\n\n    // update (dt) {},\n    initLayout() {\n        this.layout = this.root.getChildByName('layout');\n        this.nodeTop = this.layout.getChildByName('node_top');\n        this.nodeBoard = this.layout.getChildByName('node_board');\n        this.nodeBoardBottom = this.layout.getChildByName('node_board_bottom');\n        this.nodeBottom = this.layout.getChildByName('node_bottom');\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // *\n        if (is_ipx) {\n            this.nodeTop.getChildByName(\"toproot\").y = this.nodeTop.getChildByName(\"toproot\").y - 80;\n            this.nodeBoard.y = this.nodeBoard.y - 90;\n            this.nodeBoard.getChildByName(\"bg\").y = this.nodeBoard.getChildByName(\"bg\").y - 90;\n        }\n    },\n\n\n\n    initBoardView() {\n        // * init board view\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let c_s = tywx.tt.constants.BlockSize;\n        let size = this.root.getBoundingBox();\n        // let block_scale = size.width / 720;\n        // c_s.width = c_s.width * block_scale;\n        // c_s.height = c_s.height * block_scale;\n\n        let scalebl = 720 / this.root.width;\n        let theight = 1280 / this.root.height;\n        let ttheight = theight / 2;\n        let padding_left = (this.root.width * scalebl - w * c_s.width) / 2;\n        var bpos = this.nodeBoard.position;\n        let padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        // new cc.Node().\n\n        let tpos = this.root.getChildByName(\"layout\").convertToWorldSpaceAR(bpos)\n\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // *\n        if (is_ipx) {\n            padding_bottom = tpos.y - 195 - this.nodeBoard.height / 2;\n        }\n\n        // tywx.tt.log(TAG, `initBaordView==${w},${h},${c_s},${size},${padding_left},${padding_bottom}`);\n        this.blockViews = [];\n\n        let [x, y] = [0, 0];\n        let [lb_x, lb_y, rt_x, rt_y] = [0, 0, 0, 0];\n        let idx = true;\n        for (let i = 0; i < h; ++i) {\n            y = padding_bottom + i * c_s.height;\n            this.blockViews[i] = [];\n            idx = i % 2 === 0 ? true : false;\n            for (let j = 0; j < w; ++j) {\n                x = padding_left + j * c_s.width;\n                let tmp_block = cc.instantiate(this.prefabBlock);\n                tmp_block.parent = this.root;\n                tmp_block.getComponent('tt_view_block').setStat(-2);\n                tmp_block.getComponent('tt_view_block').setBgColor(idx ? cc.color('#092D41') : cc.color('#FFFFFF'));\n                idx = !idx;\n                tmp_block.position = cc.v2(x, y);\n                this.blockViews[i][j] = tmp_block;\n                lb_x = x <= lb_x ? x : lb_x;\n                rt_x = x >= rt_x ? x : rt_x;\n            }\n            lb_y = y <= lb_y ? y : lb_y;\n            rt_y = y >= rt_y ? y : rt_y;\n        }\n        this.lbPos = cc.v2(lb_x, lb_y);\n        this.rtPos = cc.v2(rt_x + c_s.width, rt_y + c_s.height);\n    },\n    initPreviewBlocks() {\n        this.previews = [];\n        let self = this;\n        let [x, y] = [0, this.nodeBoardBottom.y];\n        var bpos = this.nodeBoardBottom.position;\n        var padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        let tpos = this.nodeBoardBottom.parent.convertToWorldSpaceAR(bpos);\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // *\n        if (is_ipx) {\n            padding_bottom = tpos.y - 261 - this.nodeBoardBottom.height * 2 - 60;\n        } else {\n            padding_bottom = padding_bottom + this.nodeBoardBottom.height / 2;\n        }\n        console.log(is_ipx + tpos + \"theight = \" + \"bpos = \" + bpos + \"padding_bottom position = \" + padding_bottom);\n        let previewConfigs = this.board.getPreviewConfigs();\n        for (let i = 0; i < previewConfigs.length; i++) {\n            let tmp_preview = cc.instantiate(this.prefabPreview);\n            tmp_preview.parent = this.root;\n            tmp_preview.getComponent('tt_view_priview_blocks').init(previewConfigs[i]);\n            self.previews.push(tmp_preview);\n            x = (i + 1) * 144 + 144 / 2;\n            tmp_preview.position = cc.v2(x, padding_bottom);\n            this.previewsPos.push(cc.v2(x, padding_bottom));\n        }\n    },\n    initTouch() {\n        let self = this;\n        this.root.on(cc.Node.EventType.TOUCH_START, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch start');\n            let pos = event.getLocation();\n            self.pretouchpos = pos;\n            self.touchIdx = -1;\n            for (let i = 0; i < self.previews.length; i++) {\n                let preview = self.previews[i];\n                let [x, y] = [preview.x, preview.y];\n                let [w, h] = [130, 130]; //[preview.width,preview.height];\n                let [lb_x, lb_y] = [x - w / 2, y - h / 2];\n                let [rt_x, rt_y] = [x + w / 2, y + h / 2];\n                if (pos.x >= lb_x && pos.x <= rt_x && pos.y >= lb_y && pos.y <= rt_y) {\n                    self.touchIdx = i;\n                    preview.position = cc.v2(pos.x, pos.y);\n                    preview.getComponent('tt_view_priview_blocks').touch();\n                    tywx.tt.log(TAG, `x[${lb_x},${pos.x},${rt_x}],y[${lb_y},${pos.y},${rt_y}]`);\n                }\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            if (self.isTouchLocked) return;\n            let pos = event.getLocation();\n            if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                return;\n            }\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let preview = self.previews[self.touchIdx];\n                preview.position = cc.v2(pos.x, pos.y + this.touchHeight);\n                self.refreshShadowFrame();\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_END, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch end');\n\n            let pos = event.getLocation();\n\n\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let is_put_success = false;\n                if (pos.x >= self.lbPos.x &&\n                    pos.x <= self.rtPos.x &&\n                    pos.y + this.touchHeight >= self.lbPos.y &&\n                    pos.y + this.touchHeight <= self.rtPos.y) {\n                    is_put_success = true;\n                }\n                let preview = self.previews[self.touchIdx];\n\n                preview.position = self.previewsPos[self.touchIdx];\n                let preview_sc = preview.getComponent('tt_view_priview_blocks');\n                if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                    preview_sc.touchCancle();\n                    return;\n                }\n                if (is_put_success) {\n                    let config = preview_sc.config;\n                    if (self.fillBoard(cc.v2(pos.x, pos.y + this.touchHeight), config)) {\n                        preview_sc.put();\n                        self.board.resetPreviews();\n                        self.board.checkClear();\n                    } else {\n                        preview_sc.touchCancle();\n                    }\n                } else {\n                    preview_sc.touchCancle();\n                    console.log(\"getConfig2 = \" + preview_sc.getConfig())\n                }\n            }\n            self.hideAllBlockFrames();\n            self.touchIdx = -1;\n        });\n    },\n\n    initHammerTouch() {\n        let self = this;\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_START, event => {\n            self.hammerIcon.active = true;\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_END, event => {\n            let pos = event.getLocation();\n            self.hammerTouch.active = false;\n            self.hammerIcon.active = false;\n            self.useHammerByPosition(pos);\n            self.hideAllBlockMask();\n        });\n    },\n    refreshShadowFrame() {\n        if (this.touchIdx < 0 || this.touchIdx >= this.previews.length) {\n            // tywx.tt.warn(TAG, `wrong touch index when call refreshShadowFrame , touchIdx=${this.touchIdx}`);\n            return;\n        }\n        //tywx.tt.log(TAG,`refreshShadowFrame touchIdx=${this.touchIdx}`);\n        let select_preview = this.previews[this.touchIdx];\n        let select_pos = select_preview.position;\n        let select_config = select_preview.getComponent('tt_view_priview_blocks').getConfig();\n        let [c_r, c_c] = [-1, -1];\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n\n        let row = this.blockViews.length;\n        for (let r = 0; r < row; ++r) {\n            let col = this.blockViews[r].length;\n            for (let c = 0; c < col; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (select_pos.x >= lb_x &&\n                    select_pos.x <= rt_x &&\n                    select_pos.y >= lb_y &&\n                    select_pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                    tmp_block_sc.setStat(-1);\n                } else {\n                    tmp_block_sc.setStat(-2);\n                }\n            }\n        }\n\n        if (c_r !== -1 && c_c !== -1) {\n            let BlockMap = tywx.tt.constants.BlockMap;\n            let debug_infos = [];\n            for (let r = 0; r < select_config.length; ++r) {\n                let line = select_config[r];\n                for (let c = 0; c < line.length; ++c) {\n                    let dis = BlockMap[r][c];\n                    if (select_config[r][c] !== 0) {\n                        let [b_r, b_c] = [c_r + dis[1], c_c + dis[0]];\n                        if (b_r >= 0 && b_r < m_r &&\n                            b_c >= 0 && b_c < m_c) {\n                            let tmp_block_view = this.blockViews[b_r][b_c];\n                            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                            tmp_block_sc.setStat(-1);\n                            debug_infos.push(`{c=${b_c},r=${b_r}}`);\n                        }\n                    }\n                }\n            }\n            if (debug_infos.length < 4) {\n                tywx.tt.warn(TAG, `{cr=${c_r},cc=${c_c}}`, [...debug_infos]);\n            }\n        }\n    },\n    fillBoard(pos, config) {\n        let ret = false;\n        let view_data = this.getBlockViewByPosition(pos);\n        // console.log(\"viewData = \" + view_data.centerRow, view_data.centerCol);\n        if (view_data.blockView) {\n            if (this.board.isCanFill(view_data.centerRow, view_data.centerCol, config)) {\n                ret = true;\n                this.board.fillBaordByConfig(view_data.centerRow, view_data.centerCol, config, this.touchIdx);\n            } else {\n                ret = false;\n            }\n        }\n        return ret;\n    },\n    /**\n     * @description\n     * @author lu ning\n     * @date 2018-10-09\n     * @param {cc.Vec2} pos 指定坐标\n     * @returns {Object} ret \n     *    ret.blockView\n     *    ret.centerRow\n     *    ret.centerCol\n     */\n    getBlockViewByPosition(pos) {\n        let ret = null;\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n        let [c_r, c_c] = [-1, -1];\n        let block_view = null;\n        for (let r = 0; r < m_r; ++r) {\n            for (let c = 0; c < m_c; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (pos.x >= lb_x &&\n                    pos.x <= rt_x &&\n                    pos.y >= lb_y &&\n                    pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                    block_view = tmp_block_view;\n                    break;\n                }\n            }\n        }\n        ret = {\n            blockView: block_view,\n            centerRow: c_r,\n            centerCol: c_c\n        };\n        return ret;\n    },\n    onFillBoard(params) {\n        tywx.tt.log(TAG, 'onFillBoard' + JSON.stringify(params));\n        let self = this;\n        params.forEach(e => {\n            let tmp_block_view = self.blockViews[e[0]][e[1]];\n            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n            tmp_block_sc.setStat(e[2]);\n        });\n    },\n    onResetPreviews() {\n        let previewConfigs = this.board.getPreviewConfigs();\n        tywx.tt.log(TAG, 'onResetPreviews==>' + previewConfigs.length);\n        for (let i = 0; i < previewConfigs.length; i++) {\n            let config = previewConfigs[i];\n            let view = this.previews[i];\n            tywx.tt.log(TAG, 'onResetPreviews==>' + i);\n            view.getComponent('tt_view_priview_blocks').resetByConfig(config);\n        }\n    },\n    onClearRow() {\n        let clear_rows = this.board.clearRows;\n        let clear_cols = this.board.clearCols;\n        let clear_blocks = [];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let self = this;\n        clear_rows.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = self.blockViews[e][c];\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        clear_cols.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let r = 0; r < h; ++r) {\n                let tmp_block_view = self.blockViews[r][e];\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        let ani_time = 0.2;\n        let delay_time = 0.05;\n        if (clear_blocks.length > 0) {\n            this.isTouchLocked = true;\n            for (let i = 0; i < clear_blocks.length; ++i) {\n                let tmp_block_view = clear_blocks[i];\n                let is_last = i === (clear_blocks.length - 1);\n                let display = tmp_block_view.getChildByName('display');\n                display.runAction(\n                    cc.sequence(\n                        cc.delayTime(i * delay_time),\n                        cc.spawn(\n                            cc.scaleTo(ani_time, 0.1),\n                            cc.fadeOut(ani_time)\n                        ),\n                        cc.callFunc(() => {\n                            if (is_last) {\n                                self.board.clearBlocks();\n                                self.isTouchLocked = false;\n                            }\n                            display.scale = 1.0;\n                            display.opacity = 255;\n                            tmp_block_view.getComponent('tt_view_block').setStat(0);\n                        })\n                    )\n                );\n            }\n        }\n    },\n    onBtnResetPreviews() {\n        if (this.isTouchLocked) return;\n        tywx.tt.log(TAG, 'onBtnResetPreviews');\n        if (this.repeatNumber > 0) {\n            this.useRepeateCall();\n            this.board.forseResetPreviews();\n        } else {\n            const share_control = tywx.tt.configManager.share_control.gethuanyihuan;\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            const self = this;\n            tywx.tt.Utils.hideWXBanner();\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.repeateRepeatNumberCall();\n                },\n                tip: \"免费获得3次换一换！\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_VIEDO,\n                calltype: calltype,\n            });\n\n        }\n    },\n    onBtnUseHammer() {\n        if (this.isTouchLocked) return;\n        tywx.tt.log(TAG, 'onBtnUseHammer');\n        if (this.czInitNumber > 0) {\n            this.hammerTouch.active = true;\n        } else {\n            const self = this;\n            const share_control = tywx.tt.configManager.share_control.getchuizi;\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            tywx.tt.Utils.hideWXBanner();\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.addCZCallBack(1);\n                },\n                tip: \"免费获得1个锤子！\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_VIEDO,\n                calltype: calltype,\n            });\n        }\n    },\n    hideAllBlockFrames() {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_view.getComponent('tt_view_block');\n                tmp_block_sc.setStat(-2);\n            }\n        }\n    },\n    onRefreshScore() {\n        if (this.board.score > 70) {}\n        friend.setScore(this.board.score);\n        this.labelScore.string = `${this.board.score}`;\n    },\n    showHammerSelectFrameByPosition(pos) {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, b_w, b_h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + b_w, y + b_h];\n                if (pos.x >= lb_x && pos.x <= rt_x &&\n                    pos.y >= lb_y && pos.y <= rt_y) {\n                    tywx.tt.log(TAG, `showHammerSelectFrameByPosition==>${r},${c}`);\n                    this.showHammerShadowByRowAndCol(r, c);\n                    this.hammerIcon.position = tmp_block_view.position;\n                    break;\n                }\n            }\n        }\n    },\n    hideAllBlockMask() {\n        for (let r = 0; r < this.blockViews.length; ++r) {\n            for (let c = 0; c < this.blockViews[r].length; ++c) {\n                this.blockViews[r][c].getComponent('tt_view_block').hideMask();\n            }\n        }\n    },\n    showHammerShadowByRowAndCol(row, col) {\n        let shadow_blocks = [\n            [\n                [-1, 1],\n                [0, 1],\n                [1, 1]\n            ],\n            [\n                [-1, 0],\n                [0, 0],\n                [1, 0]\n            ],\n            [\n                [-1, -1],\n                [0, -1],\n                [1, -1]\n            ]\n        ];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        this.hideAllBlockMask();\n        for (let r = 0; r < 3; ++r) {\n            for (let c = 0; c < 3; ++c) {\n                let data = shadow_blocks[r][c];\n                let tmp_col = col + data[0];\n                let tmp_row = row + data[1];\n                if (tmp_col >= 0 && tmp_row >= 0 && tmp_col < w && tmp_row < h) {\n                    let tmp_block = this.blockViews[tmp_row][tmp_col];\n                    let tmp_block_sc = tmp_block.getComponent('tt_view_block');\n                    tmp_block_sc.showMask();\n                }\n            }\n        }\n    },\n    useHammerByPosition(pos) {\n        let data = this.getBlockViewByPosition(pos);\n        tywx.tt.log(TAG, `usehammerByPosition>>>row:${data.centerRow},col:${data.centerCol}`);\n        if (data.blockView) {\n            this.board.hammerClearByRowAndCol(data.centerRow, data.centerCol);\n            // 刷新锤子的显示\n            this.useCZNumber(-1);\n        }\n    },\n    onClearHammer(blocks) {\n        if (blocks.length > 0) this.isTouchLocked = true;\n        else return;\n        let self = this;\n        let delay_time = 0.05;\n        let ani_time = 0.2;\n        for (let i = 0; i < blocks.length; i++) {\n            let is_last = i === (blocks.length - 1);\n            let tmp_row = blocks[i][0];\n            let tmp_col = blocks[i][1];\n            let tmp_block_view = this.blockViews[tmp_row][tmp_col];\n            let display = tmp_block_view.getChildByName('display');\n            display.runAction(\n                cc.sequence(\n                    cc.delayTime(i * delay_time),\n                    cc.spawn(\n                        cc.scaleTo(ani_time, 0.1),\n                        cc.fadeOut(ani_time)\n                    ),\n                    cc.callFunc(() => {\n                        if (is_last) {\n                            self.isTouchLocked = false;\n                        }\n                        display.scale = 1.0;\n                        display.opacity = 255;\n                        tmp_block_view.getComponent('tt_view_block').setStat(0);\n                    })\n                )\n            );\n        }\n    },\n\n    /**\n     * @description 初始化锤子数量和重置次数\n     */\n    initChuiZiAndRepeate: function () {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n\n            const titem = items[tiIndex];\n            tywx.tt.log(\"cz item = \" + JSON.stringify(titem));\n            if (titem.id == 2 || titem.id == 4 || titem.id == 6) {\n                czNumber = czNumber + titem.num;\n            }\n        }\n        this.czInitNumber = czNumber;\n        this.czNumberLabel.string = czNumber + \"\";\n        // 重置次数\n        this.repeatNumber = 3;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n\n    /**\n     * @description 使用锤子回调\n     * @param {Number} add 负数为减少锤子数量 正数添加锤子数量\n     */\n    useCZNumber: function (add) {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadcut = false;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n            if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6) && items[tiIndex].num > 0) {\n                if (!hadcut) {\n                    hadcut = true;\n                    items[tiIndex].num = items[tiIndex].num + add;\n                }\n                if (items[tiIndex].num > 0) {\n                    czNumber = czNumber + items[tiIndex].num;\n                }\n            }\n        }\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n\n        this.czInitNumber = czNumber;\n        this.czNumberLabel.string = czNumber + \"\";\n    },\n  \n    /**\n     * @description 使用换一换的刷新回调\n     */\n    useRepeateCall: function () {\n        if (this.repeatNumber > 0) {\n            this.repeatNumber--;\n            this.repNumberLabel.string = this.repeatNumber + \"/3\";\n        } else {\n            tywx.tt.error(TAG, \"换一换的使用次数为 \" + this.repeatNumber)\n        }\n    },\n    \n    /**\n     * 重置换一换的次数\n     */\n    repeateRepeatNumberCall: function () {\n        this.repeatNumber = this.repeatNumber + 3;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n    \n    /**\n     * @添加锤子\n     * @param {Number} num 添加锤子的数量\n     */\n    addCZCallBack: function (num) {\n        var items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadadd = false;\n        if (items.length == 0) {\n            items = [];\n            var item = {};\n            item.id = 2;\n            item.num = num;\n            item.name = \"锤子\";\n            items[0] = item;\n            czNumber = num;\n        } else {\n            for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n                if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6)) {\n                    if (!hadadd) {\n                        hadadd = true;\n                        items[tiIndex].num = items[tiIndex].num + num;\n                    }\n                    if (items[tiIndex].num > 0) {\n                        czNumber = czNumber + items[tiIndex].num;\n                    }\n                }\n            }\n        }\n        tywx.tt.log(\"锤子的数量  = \" + czNumber);\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n        this.czInitNumber = czNumber;\n        this.czNumberLabel.string = czNumber + \"\";\n    },\n   \n    \n    /** \n     * @description 处理游戏是否结束\n    */\n    doGameOver: function () {\n        // console.log(this.board.previewStat.length + \"this.bord = \" + JSON.stringify(this.board.previewStat));\n        let stats = this.board.previewStat\n        tywx.tt.log(TAG, stats.length + \"this.bord = \" + stats);\n        var gameover = true;\n        for (let ti = 0; stats.length; ti++) {\n            if (stats[ti] != 0) {\n                gameover = false;\n                break;\n            }\n        }\n\n        const tgameover = gameover && this.repeatNumber == 0;\n        tywx.tt.log(TAG,\"gameover \" + tgameover);\n        if (gameover && this.repeatNumber == 0) {\n            // 停止刷新即将超越的好友\n            friend.setStop(true);\n            // 显示复活界面\n            tywx.tt.fuhuo.show({\n                score: this.board.score,\n            })\n        }\n\n    }\n\n\n});"]}