{"version":3,"sources":["../../../../../../assets/scripts/game/common/assets/scripts/game/common/tip_view.js"],"names":["tip_view_path","tip_view","cc","Class","extends","Component","properties","titleLabel","Label","tapLabel","shareBtn","Node","background","closeCall","closeing","tywx","tt","Utils","showWXBanner","call","curnode","removeFromParent","ani","getComponent","Animation","on","play","onLoad","self","setTouchEndCall","btnClose","closecall","init","shareBtnScript","setButtonCallType","setSuccessCall","success","setCallType","calltype","setReactCall","configManager","getInstance","auditing","setTitle","title","string","setTap","tap","setSuccessCallBack","setCloseCallBack","setShareConfig","config","start","statics","show","loader","loadRes","err","prefab","tipview","instantiate","tip_view_script","tip","log","director","getScene","addChild","module","exports"],"mappings":"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","file":"tip_view.js","sourceRoot":"../../../../../../assets/scripts/game/common","sourcesContent":[" const tip_view_path = \"prefabs/tip_view\";\n\n const tip_view = cc.Class({\n     extends: cc.Component,\n\n     properties: {\n         titleLabel: cc.Label,\n         tapLabel: cc.Label,\n         shareBtn: cc.Node,\n         background: cc.Node,\n     },\n\n     closeCall: function () {\n         if (this.closeing) {\n             return;\n         }\n         this.closeing = true;\n         tywx.tt.Utils.showWXBanner();\n         let call = function () {\n             tip_view.curnode.removeFromParent(true);\n             tip_view.curnode = null;\n         };\n         let ani = tip_view.curnode.getComponent(cc.Animation);\n         ani.on(\"finished\", call, this);\n         ani.play(\"hide_ui\");\n\n     },\n\n     onLoad() {\n         var self = this;\n         this.background.getComponent(\"background\").setTouchEndCall(function () {\n             self.btnClose();\n         });\n     },\n\n     btnClose: function () {\n         this.closecall && this.closecall();\n         this.closeCall();\n     },\n\n     /**\n      * 初始化\n      */\n     init: function () {\n         var self = this;\n         this.shareBtnScript = this.shareBtn.getComponent(\"ShareButton\");\n         this.shareBtnScript.setButtonCallType(1);\n         this.shareBtnScript.setSuccessCall(function () {\n             self.success();\n             self.closeCall();\n         });\n\n     },\n\n     /**\n      * @description 设置按钮调用类型\n      * @param {Number} calltype 1 分享 2视频\n      */\n     setCallType: function (calltype) {\n         this.shareBtnScript.setButtonCallType(calltype);\n         if (calltype == -1) {\n             this.shareBtnScript.setReactCall(true);\n         }\n         if (tywx.tt.configManager.getInstance().auditing == true) {\n             this.shareBtnScript.setReactCall(true);\n         }\n     },\n\n     /**\n      * @description 设置title\n      * @param {String} title \n      */\n     setTitle: function (title) {\n         this.titleLabel.string = title;\n     },\n\n     /**\n      * @description 设置提示内容\n      * @param {String} tap \n      */\n     setTap: function (tap) {\n         this.tapLabel.string = tap;\n     },\n\n     /**\n      * @description 设置看视频或者分享的回调\n      * @param {Function} success 看视频或分享成功后的回调\n      */\n     setSuccessCallBack: function (success) {\n         this.success = success;\n     },\n\n     /**\n      * @description 设置看视频或者分享的回调\n      * @param {Function} success 看视频或分享成功后的回调\n      */\n     setCloseCallBack: function (closecall) {\n         this.closecall = closecall;\n     },\n\n     /**\n      * @description 设置分享或者视频的类型\n      * @param {Object} config 配置分享点的参数\n      */\n     setShareConfig: function (config) {\n         this.shareBtnScript.setShareConfig(config);\n     },\n\n     start() {\n\n     },\n\n     statics: {\n         curnode: null,\n         /**\n          * @显示当前的提示页面信息\n          * @param {Object} config 显示的相关配置参数\n          * @summary \n          * config.success: Function 回调参数 \n          * config.title: String 分享标题 \n          * config.tip: String 提示类容 \n          * config.config: Object 分享点的信息\n          * calltype: Number 回调类型\n          */\n         show: function (config) {\n             if (tip_view.curnode) {\n                 return;\n             }\n             cc.loader.loadRes(tip_view_path, (err, prefab) => {\n                 if (!err) {\n                     let tipview = cc.instantiate(prefab);\n                     let ani = tipview.getComponent(cc.Animation);\n                     ani.play(\"show_hide\");\n                     let tip_view_script = tipview.getComponent('tip_view');\n                     tip_view_script.init();\n                     tip_view_script.setTap(config.tip || \"请设置提示类容\");\n                     tip_view_script.setTitle(config.title || \"提示\");\n                     tip_view_script.setShareConfig(config.config);\n                     tip_view_script.setSuccessCallBack(config.success);\n                     tip_view_script.setCallType(config.calltype);\n                     tip_view_script.setCloseCallBack(config.closecall);\n                     tip_view.curnode = tipview;\n                     tywx.tt.log(\"当前的VIE\");\n                     cc.director.getScene().addChild(tipview, 999999);\n                 }\n             });\n         }\n     }\n\n     // update (dt) {},\n });\n\n module.exports = tip_view;"]}