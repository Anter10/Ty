{"version":3,"sources":["../../../../../assets/scripts/common_frame/assets/scripts/common_frame/TuyooSDK.js"],"names":["console","log","tywx","TuyooSDK","SESSION_KEY","LOCAL_GAME_TIME_RECORD","LOCAL_SHARE_TIMES_RECORD","login","IsWechatPlatform","getSystemInfo","wechatLogin","PropagateInterface","_doHttpGetShareConfig","BiLog","clickStat","clickStatEventType","clickStatEventTypeWxLoginStart","wx","success","params","LOGD","JSON","stringify","clickStatEventTypeWxLoginSuccess","code","loginTuyooWithCode","NotificationCenter","trigger","EventType","WEIXIN_LOGIN_SUCCESS","fail","clickStatEventTypeWxLoginFailed","WEIXIN_LOGIN_FAIL","complete","err","LOGE","loginTuyooWith3rdSession","getStorage","key","data","request","url","SystemInfo","loginUrl","snsId","deviceName","clientId","appId","userInfo","showShareMenu","withShareTicket","gender","local_uuid","Util","getLocalUUID","sdkPath","dataObj","wxAppId","uuid","scene_id","UserInfo","scene_param","invite_id","nickName","avatarUrl","clickStatEventTypeLoginSDKStart","header","method","checkData","error","result","userId","userName","userPic","purl","authorCode","wxgame_session_key","token","setStorage","clickStatEventTypeLoginSDKSuccess","showScene","showQuery","sourceCode","clickStatEventTypeUserFrom","inviteCode","imageType","initWebSocketUrl","AdManager","processRawConfigInfo","SDK_LOGIN_SUCCESS","clickStatEventTypeLoginSDKFailed","SDK_LOGIN_FAIL","loginResult","tcpsrv","ip","port","wsport","webSocketUrl","indexOf","toString","model","isiPhone","windowHeight","resultType","systemType","wechatType","version","system","sdkVersion","SDKVersion","clickStatEventTypeSubmitVersionInfo","platform","wechatAuthorize","getSetting","res","authSetting","clickStatEventTypeAuthorizationStart","authorize","scope","clickStatEventTypeAuthorizationSuccess","START_AUTHORIZATION_SUCCESS","clickStatEventTypeAuthorizationFailed","START_AUTHORIZATION_FAILED","createOrder","id","prodPrice","name","prodCount","extraProdId","extraAppInfo","prodId","chargeType","gameId","prodName","appInfo","rechargeOrder","orderCallFunc","platformOrderId","chargeCoin","_chargeCoin","imei","results","tips","reqUrl","hall_version","mustcharge","prodOrderId","chargeInfo","chargeData","notifyUrl","requestMidasPayment","mode","env","offerId","buyQuantity","chargeTotal","currencyType","zoneId","errCode","cancelOrder","orderId","sendUrl","postData","payType","freshLocalShareTimes","localSTimesRecord","getStorageSync","_localDate","Date","toLocaleDateString","count","parseInt","_sObj","status","e","processLocalRecord","onShowTimeStamp","getTime","_cDate","localGTimeRecord","k","clickStatEventTypeOnReportGameTime","dateKeys","Object","keys","_tmpGTRecord","length","reverse","i","localSTimeRecord","clickStatEventTypeOnReportShareTimes","shareKeys","_tmpSTRecord","writeBackLocolRecord","_curDate","_curTimeStamps","_playTimeOffset","_startTimeStamps","parse","_preDateGameTime","_curDateGameTime","_preDateString","_curDateString","_gtObj","getLocalGameTimeRecord","getLocalShareTimesRecord","postRVideoAdLog","sceneName","StatusCode","clickStatEventTypeOnReportVideoAdsInfo","getUserFeature","gameid","cloudid","userid","successCallback","failCallBack","_url","reqObj","timeStamp","act","time","cloud_id","game_id","user_id","signStr","getConfigSignStr","paramStrList","push","finalUrl","join","that","GET_USERFEATURE_INFO_SUCCESS","GET_USERFEATURE_INFO_FAIL","WechatInterfaceInit","onShow","scene","query","scenePath","from","StateInfo","isOnForeground","GAME_SHOW","hasUUID","checkLocalUUID","oldUserFlag","gdt_vid","weixinadinfo","isSceneQrCode","hasOwnProperty","path","replace","decodeURIComponent","clickStatEventTypeOnShowTimeStampSubmit","tywxVersion","openLocalRecord","setTimeout","onForeGround","tt","onHide","clickStatEventTypeOnHideTimeStampSubmit","GAME_HIDE","TCPClient","close","getNetSuccess","networkConnected","isConnected","errMsg","networkType","getNetworkType","onNetworkStatusChange","onError","d","toDateString","toTimeString","message","uploadLogTimely"],"mappings":"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","file":"TuyooSDK.js","sourceRoot":"../../../../../assets/scripts/common_frame","sourcesContent":["/**\n * @author zhaoliang\n * @date 1.28\n * \n * 全局对象\n * 系统信息\n * 包括clientId，loginUrl等\n */\nconsole.log(\"TuyooSDK loaded\");\ntywx.TuyooSDK = {\n    SESSION_KEY: 'TU_SESSION_STORAGE',\n    LOCAL_GAME_TIME_RECORD: 'LOCAL_GAME_TIME_RECORD',\n    LOCAL_SHARE_TIMES_RECORD: 'LOCAL_SHARE_TIMES_RECORD',\n\n    /***************************以下为登录相关接口*********************************/\n    login: function() {\n        if(tywx.IsWechatPlatform()) {\n            tywx.TuyooSDK.getSystemInfo();\n            tywx.TuyooSDK.wechatLogin();\n            tywx.PropagateInterface._doHttpGetShareConfig();\n        }\n        else {\n            //其他平台,待添加\n        }\n    },\n\n    // 微信登录\n    wechatLogin: function() {\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n\n            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeWxLoginStart, []);\n            wx.login({\n                success: function(params) {\n                    tywx.LOGD(null, 'wx login success, params:' + JSON.stringify(params));\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeWxLoginSuccess, [params.code]);\n                    if (params.code) {\n                        var code = params.code;\n                        tywx.TuyooSDK.loginTuyooWithCode(code, {});\n                        tywx.NotificationCenter.trigger(tywx.EventType.WEIXIN_LOGIN_SUCCESS);\n                    }\n                },\n\n                fail: function(params) {\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeWxLoginFailed, []);\n                    tywx.LOGD(null, 'wx login fail, params:' + JSON.stringify(params));\n                    tywx.NotificationCenter.trigger(tywx.EventType.WEIXIN_LOGIN_FAIL);\n                },\n\n                complete: function(params) {\n\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.wechatLogin——\" + JSON.stringify(err));\n        }\n    },\n\n    // 微信不需要重新授权，使用\n    loginTuyooWith3rdSession: function() {\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n            wx.getStorage({\n                key: tywx.TuyooSDK.SESSION_KEY,\n                success: function(params) {\n                    if (!params.data) {\n                        tywx.TuyooSDK.wechatLogin();\n                        return;\n                    }\n                    // 微信授权成功后使用code登录途游服务器\n                    wx.request({\n                        url: tywx.SystemInfo.loginUrl + 'open/v3/user/processSnsIdNew',\n                        data: {\n                            snsId: params.data,\n                            deviceName: 'wechatGame',\n                            clientId: tywx.SystemInfo.clientId,\n                            appId: tywx.SystemInfo.appId\n                        },\n\n                        success: function(params) {\n                            tywx.LOGD(null, 'tuyoo login success, params:' + JSON.stringify(params));\n                        },\n\n                        fail: function(params) {\n                            tywx.LOGD(null, 'tuyoo login fail, params:' + JSON.stringify(params));\n                        },\n\n                        complete: function(params) {\n\n                        }\n                    });\n                },\n                fail: function(params) {\n                    tywx.TuyooSDK.wechatLogin();\n                },\n                complete:function(params) {\n\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.loginTuyooWith3rdSession——\" + JSON.stringify(err));\n        }\n    },\n\n    // 微信授权成功后，使用\n    /* {\n        \"data\": {\n            \"result\": {\n                \"code\": 0,\n                \"userId\": 10116,\n                \"exception_report\": 0,\n                \"userType\": 4,\n                \"authInfo\": \"{\\\"authcode\\\": \\\"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\\\", \\\"account\\\": \\\"\\\", \\\"uid\\\": 10116, \\\"usercode\\\": \\\"\\\"}\",\n                \"tcpsrv\": {\n                    \"ip\": \"192.168.10.88\",\n                    \"port\": 8041\n                },\n                \"isCreate\": 1,\n                \"changePwdCount\": 0,\n                \"360.vip\": 0,\n                \"logclient\": {\n                    \"loguploadurl\": \"\",\n                    \"logreporturl\": \"\"\n                },\n                \"userPwd\": \"ty817142\",\n                \"purl\": \"http://ddz.image.tuyoo.com/avatar/head_female_0.png\",\n                \"snsId\": \"wxapp:071Nehqt0Z4XEe1jN6qt007Cqt0Nehqz\",\n                \"userEmail\": \"\",\n                \"connectTimeOut\": 35,\n                \"appId\": 9999,\n                \"heartBeat\": 6,\n                \"userName\": \"来宾0074AibsT\",\n                \"mobile\": \"\",\n                \"token\": \"cce362d6-68a8-485e-b137-86ae6828e07a\",\n                \"authorCode\": \"eyJ1aWQiOiAxMDExNiwgInVuYW1lIjogIlx1Njc2NVx1NWJiZTAwNzRBaWJzVCIsICJ1dG9rZW4iOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzEzMzgiLCAiY29pbiI6IDAsICJlbWFpbCI6ICIiLCAidXRpbWUiOiAiMjAxOC0wMS0yOSAxNDoxMzoxMi40NzA0NzEifQ==\",\n                \"log_report\": 0,\n                \"showAd\": 1\n            }\n        },\n        \"header\": {\n            \"Server\": \"nginx/1.4.1\",\n            \"Date\": \"Mon, 29 Jan 2018 06:13:12 GMT\",\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            \"Transfer-Encoding\": \"chunked\",\n            \"Connection\": \"keep-alive\",\n            \"Content-Encoding\": \"gzip\"\n        },\n        \"statusCode\": 200,\n        \"errMsg\": \"request:ok\"\n    }\n    */\n    loginTuyooWithCode: function(code, userInfo) {\n        try {\n            if (!tywx.IsWechatPlatform()) {\n                return;\n            }\n            // 微信授权成功后使用code登录途游服务器\n            wx.showShareMenu({\n                withShareTicket: true\n            });\n\n\n            //咱们后端 0 是男 1 是女,要转换\n            var gender = userInfo.gender || 0;\n\n            var local_uuid = tywx.Util.getLocalUUID();\n            tywx.LOGD(\"local_uuid:\", local_uuid);\n            var sdkPath = tywx.SystemInfo.loginUrl;\n            var dataObj = {\n                appId: tywx.SystemInfo.appId,\n                wxAppId: tywx.SystemInfo.wxAppId,\n                clientId: tywx.SystemInfo.clientId,\n                snsId: 'wxapp:' + code,\n                uuid: local_uuid,\n                //以下为上传玩家的微信用户信息\n                //nickName: userInfo.nickName,\n                //avatarUrl: userInfo.avatarUrl,\n                gender: gender,\n                scene_id: tywx.UserInfo.scene_id || \"\",\n                scene_param: tywx.UserInfo.scene_param || \"\",\n                invite_id: tywx.UserInfo.invite_id || 0\n            };\n            if (userInfo && userInfo.nickName) {\n                dataObj.nickName = userInfo.nickName;\n            }\n\n            if (userInfo && userInfo.avatarUrl) {\n                dataObj.avatarUrl = userInfo.avatarUrl;\n            }\n            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeLoginSDKStart, [code, local_uuid, userInfo.nickName]);\n            wx.request({\n                url: sdkPath + 'open/v6/user/LoginBySnsIdNoVerify',\n                header: {\n                    'content-type': 'application/x-www-form-urlencoded'\n                },\n                data: dataObj,\n                method: 'POST',\n\n                success: function (params) {\n                    tywx.LOGD(null, 'tuyoo login success, params:' + JSON.stringify(params));\n                    var checkData = params.data;\n                    if ((checkData.error && checkData.error.code == 1) || !(checkData.result && checkData.result.userId)) {\n                        tywx.LOGE(\"TUYOO_SDK_LOGIN_FAIL\", JSON.stringify(params));\n                        return;\n                    }\n\n                    // 保存用户名/用户ID/用户头像\n                    var result = checkData.result;\n                    tywx.UserInfo.userId = result.userId;\n                    tywx.UserInfo.userName = result.userName;\n                    tywx.UserInfo.userPic = result.purl;\n                    tywx.UserInfo.authorCode = result.authorCode;\n                    tywx.UserInfo.wxgame_session_key = result.wxgame_session_key;\n                    tywx.LOGD(null, 'userId:' + tywx.UserInfo.userId + ' userName:' + tywx.UserInfo.userName + ' userPic:' + tywx.UserInfo.userPic);\n\n                    if (tywx.UserInfo.userId && tywx.UserInfo.userName) {\n                        tywx.LOGE(\"TUYOO_SDK_LOGIN_SUCCESS\", JSON.stringify(params));\n                    } else {\n                        tywx.LOGE(\"TUYOO_SDK_LOGIN_FAIL\", JSON.stringify(params));\n                    }\n\n                    var token = result.token;\n                    tywx.LOGD(null, 'token:' + token);\n                    wx.setStorage({\n                        key: tywx.TuyooSDK.SESSION_KEY,\n                        data: token\n                    });\n\n\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeLoginSDKSuccess, [code, local_uuid, userInfo.nickName, result.userId]);\n                    if (tywx.showScene && tywx.showQuery && tywx.showQuery.sourceCode) {\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom, [tywx.showScene, tywx.showQuery.inviteCode, tywx.showQuery.sourceCode, tywx.showQuery.imageType, \"GameStart\"]);\n                    }\n                    tywx.TuyooSDK.initWebSocketUrl(result);\n\n                    // tywx.PropagateInterface.processRawShareConfigInfo();    //处理分享数据\n                    tywx.AdManager.processRawConfigInfo();                  //处理交叉导流数据\n                    // 发送登录成功事件\n                    tywx.NotificationCenter.trigger(tywx.EventType.SDK_LOGIN_SUCCESS);\n                },\n\n                fail: function (params) {\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeLoginSDKFailed, [code, local_uuid, userInfo.nickName]);\n                    tywx.LOGD(null, 'tuyoo login fail, params:' + JSON.stringify(params));\n                    tywx.LOGE(\"TUYOO_SDK_LOGIN_FAIL\", JSON.stringify(params));\n                    tywx.NotificationCenter.trigger(tywx.EventType.SDK_LOGIN_FAIL);\n                },\n\n                complete: function (params) {\n\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.loginTuyooWithCode——\" + JSON.stringify(err));\n        }\n    },\n\n    /**\n     * 使用sdk登陆返回信息解析得到服务器连接地址,对于单机游戏来说无效\n     * @param loginResult\n     */\n    initWebSocketUrl: function(loginResult) {\n        if(loginResult && loginResult.tcpsrv) {\n            var ip = loginResult.tcpsrv.ip;\n            var port = loginResult.tcpsrv.wsport || loginResult.tcpsrv.port; //优先使用wsport\n            var webSocketUrl;\n            if (tywx.SystemInfo.loginUrl.indexOf(\"https://\") > -1){\n                webSocketUrl = 'wss://' + ip + '/';\n            }\n            else{\n                webSocketUrl = 'ws://' + ip + ':' + port.toString() + '/';\n            }\n            tywx.LOGD(null, 'webSocketUrl:' + webSocketUrl);\n            tywx.SystemInfo.webSocketUrl = webSocketUrl;\n        }\n    },\n\n\n    getSystemInfo : function () {\n        // {\n        // \t\"0\":{\n        // \t\"errMsg\":\"getSystemInfo:ok\",\n        // \t\t\"model\":\"iPhone X\",\n        // \t\t\"pixelRatio\":3,\n        // \t\t\"windowWidth\":375,\n        // \t\t\"windowHeight\":812,\n        // \t\t\"system\":\"iOS 10.0.1\",\n        // \t\t\"language\":\"zh_CN\",\n        // \t\t\"version\":\"6.6.3\",\n        // \t\t\"batteryLevel\":100,\n        // \t\t\"screenWidth\":375,\n        // \t\t\"screenHeight\":812,\n        // \t\t\"SDKVersion\":\"1.8.0\",\n        // \t\t\"brand\":\"devtools\",\n        // \t\t\"fontSizeSetting\":16,\n        // \t\t\"statusbarHeight\":44,\n        // \t\t\"platform\":\"devtools\"\n        // }\n        // }\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n            wx.getSystemInfo({\n                success : function (result) {\n                    var model = result.model;\n                    var isiPhone = model.indexOf(\"iPhone\") >= 0;\n                    var windowHeight = result.windowHeight;\n                    var resultType = 0;\n                    if (isiPhone){\n                        if(windowHeight == 812){   //iPhoneX\n                            resultType = 2;\n                        }else if (windowHeight == 736){ // 7p 8p\n                            resultType = 4;\n                        }else {  //其他iPhone\n                            resultType = 1;\n                        }\n                    }else { //cc.sys.OS_ANDROID\n                        resultType = 3;\n                    }\n                    tywx.UserInfo.systemType = resultType;\n                    tywx.UserInfo.wechatType = result.version;\n                    tywx.UserInfo.model = result.model;\n                    tywx.UserInfo.system = result.system;\n                    tywx.UserInfo.sdkVersion = result.SDKVersion;\n                    console.error(\"基础库版本为:\" + tywx.UserInfo.sdkVersion);\n                    //上报顺序为微信版本 基础库版本 平台 操作系统版本\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeSubmitVersionInfo,\n                        [result.version, result.SDKVersion, result.platform, result.system]);\n                },\n                fail : function () {\n                },\n                complete : function () {\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.getSystemInfo——\" + JSON.stringify(err));\n        }\n    },\n\n    wechatAuthorize: function() {\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n            wx.getSetting({\n                success:function(res) {\n                    if (!res.authSetting['scope.userInfo']) {\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeAuthorizationStart, []);\n                        wx.authorize({\n                            scope : \"scope.userInfo\",\n                            success : function () {\n                                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeAuthorizationSuccess, []);\n                                tywx.NotificationCenter.trigger(tywx.EventType.START_AUTHORIZATION_SUCCESS);\n                            },\n                            fail:function () {\n                                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeAuthorizationFailed, []);\n                                tywx.NotificationCenter.trigger(tywx.EventType.START_AUTHORIZATION_FAILED);\n                            },\n                            complete:function () {\n                            }\n                        });\n                    }\n                    else{\n                        tywx.NotificationCenter.trigger(tywx.EventType.START_AUTHORIZATION_SUCCESS);\n                    }\n                }\n            })\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.wechatAuthorize——\" + JSON.stringify(err));\n        }\n    },\n\n    /***************************以下为支付相关接口*********************************/\n\n    createOrder:function(id, prodPrice, name, prodCount, extraProdId, extraAppInfo){\n        /*\n         params  id:商品ID,prodPrice:价格  单位元, name:商品名称\n         prodCount:购买数量,默认为1\n\n         prodId:商品ID, prodName:商品名称, prodCount:购买数量\n         prodPrice:价格  单位元,\n         chargeType:支付方式 wxapp.iap,\n         gameId:子游戏id,\n         appInfo:透传参数,\n         mustcharge:是否支付 默认填 1\n         */\n        var data = {};\n        data.prodId = id;\n        data.prodPrice = prodPrice;\n        data.chargeType = \"wxapp.iap\";\n        data.gameId = tywx.SystemInfo.gameId;\n        data.prodName = name;\n        data.prodCount = prodCount;\n        data.appInfo = extraAppInfo ? extraAppInfo :{};\n        data.extraProdId = extraProdId ? extraProdId : '';\n        tywx.TuyooSDK.rechargeOrder(data);\n    },\n\n    orderCallFunc:function(url, platformOrderId, chargeCoin){\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n            var local_uuid = tywx.Util.getLocalUUID();\n            var _chargeCoin = chargeCoin;\n            wx.request({\n                url: url,\n                header: {\n                    'content-type': 'application/x-www-form-urlencoded'\n                },\n                data: {\n                    userId:tywx.UserInfo.userId,\n                    appId: tywx.SystemInfo.appId,\n                    wxAppId: tywx.SystemInfo.wxAppId,\n                    clientId: tywx.SystemInfo.clientId,\n                    imei: 'null',\n                    uuid : local_uuid,\n                    platformOrderId: platformOrderId,\n                },\n\n                method:'POST',\n\n                success: function(results) {\n                    var tips = \"购买成功\";\n                },\n                fail: function(params) {\n                    tywx.LOGE(null, 'file = [Recharge] fun = [OrderCallFun] 充值失败 params = ' + JSON.stringify(params));\n                },\n                complete: function(params) {\n\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.orderCallFunc——\" + JSON.stringify(err));\n        }\n    },\n\n    /*\n     params prodId:商品ID, prodName:商品名称, prodCount:购买数量\n     prodPrice:价格  单位元,\n     chargeType:支付方式 wxapp.iap,\n     gameId:子游戏id,\n     appInfo:透传参数,\n     mustcharge:是否支付 默认填 1\n     */\n    rechargeOrder: function (params){\n        try {\n            if(!tywx.IsWechatPlatform()) {\n                return;\n            }\n            var local_uuid = tywx.Util.getLocalUUID();\n            var sdkPath = tywx.SystemInfo.loginUrl;\n            var reqUrl = tywx.SystemInfo.hall_version == 'hall37' ? sdkPath + 'open/v4/pay/order': sdkPath + 'open/v5/pay/order';\n            wx.request({\n                url: reqUrl,\n                header: {\n                    'content-type': 'application/x-www-form-urlencoded'\n                },\n                data: {\n                    userId:tywx.UserInfo.userId,\n                    appId: tywx.SystemInfo.appId,\n                    wxAppId: tywx.SystemInfo.wxAppId,\n                    clientId: tywx.SystemInfo.clientId,\n                    imei: 'null',\n                    uuid : local_uuid,\n                    //商品信息\n                    prodId: params.prodId,\n                    prodName: params.prodName,\n                    prodCount: params.prodCount || 1,\n                    prodPrice: params.prodPrice,\n                    chargeType: params.chargeType,\n                    gameId : params.gameId,\n                    appInfo : params.appInfo,\n                    mustcharge : params.mustcharge || 1,\n                    prodOrderId: params.extraProdId,\n                },\n\n                method:'POST',\n\n                success: function(params) {\n                    tywx.LOGE(null, 'tuyoo rechargeOrder success, params:' + JSON.stringify(params));\n                    var results = params.data.result;\n                    if (results.code == 0) {\n                        var chargeInfo = results.chargeInfo;\n                        var chargeData = chargeInfo.chargeData;\n                        var notifyUrl = chargeData.notifyUrl;\n                        var platformOrderId = chargeData.platformOrderId;\n                        tywx.LOGE(null, 'tuyoo rechargeOrder success 创建订单成功, chargeData.mustcharge =' + chargeData.mustcharge);\n                        if (chargeData && chargeData.mustcharge == 1) {\n                            // wx.requestMidasPayment  购买微信币\n                            wx.requestMidasPayment({\n                                mode: chargeData.mode,\n                                env: chargeData.env,\n                                offerId: chargeData.offerId,\n                                buyQuantity: 10 * chargeInfo.chargeTotal,\n                                platform:chargeData.platform,\n                                currencyType:\"CNY\",\n                                zoneId: chargeData.zoneId,\n                                success:function(params) {\n                                    // 支付成功\n                                    tywx.TuyooSDK.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                                },\n                                fail:function(res) {\n                                    tywx.LOGE(null, '米大师支付 fail params = ' + JSON.stringify(params));\n                                    if(res.errCode && res.errCode == 1) {\n                                        //支付取消\n                                        tywx.TuyooSDK.cancelOrder(platformOrderId);\n                                    }\n                                }\n                            });\n                        }else if (chargeData && chargeData.mustcharge == 0){\n                            tywx.TuyooSDK.orderCallFunc(notifyUrl,platformOrderId,chargeInfo.chargeCoin);\n                        }\n                    }else if (results.code == 1) {\n                        //hall.MsgBoxManager.showToast({title : results.info});\n                    }else if (results.code == 3) {\n                        //hall.MsgBoxManager.showToast({title : '微信小程序登陆验证失败!'});\n                    }\n                },\n                fail: function(params) {\n                    //hall.MsgBoxManager.showToast({title : '购买失败!'});\n                },\n                complete: function(params) {\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.rechargeOrder——\" + JSON.stringify(err));\n        }\n    },\n\n    cancelOrder: function(orderId) {\n        try {\n            var sendUrl = tywx.SystemInfo.loginUrl + 'open/v4/pay/cancelorder';\n            var postData = {\n                platformOrderId: orderId,\n                appId: tywx.SystemInfo.appId,\n                userId: tywx.UserInfo.userId,\n                clientId: tywx.SystemInfo.clientId,\n                payType:  \"wxapp.iap\"\n            };\n            wx.request({\n                url: sendUrl,\n                header: {\n                    'content-type': 'application/x-www-form-urlencoded'\n                },\n                data: postData,\n                method:'POST',\n                success: function(params) {\n                    tywx.LOGE(null, 'tuyoo cancelOrder success, params:' + JSON.stringify(params));\n                },\n                fail: function(params) {\n                    tywx.LOGE(null, 'tuyoo cancelOrder fail, params:' + JSON.stringify(params));\n                },\n                complete: function(params) {\n                }\n            });\n        }\n        catch(err) {\n            tywx.LOGE(\"error:\", \"tywx.TuyooSDK.cancelOrder——\" + JSON.stringify(err));\n        }\n    },\n\n    //-------------------处理本地数据缓存并发送至BI-------------------\n\n    freshLocalShareTimes : function () {      //分享成功后才能调用\n        try {\n            var localSTimesRecord = wx.getStorageSync(tywx.TuyooSDK.LOCAL_SHARE_TIMES_RECORD) || {};\n\n            var _localDate = (new Date()).toLocaleDateString();\n\n            if (localSTimesRecord[_localDate] && localSTimesRecord[_localDate].count) {\n                localSTimesRecord[_localDate].count = parseInt(localSTimesRecord[_localDate].count) + 1;\n            } else {\n\n                var _sObj = {\n                    count: 1,           //当日分享次数\n                    status : 0,         //1已发送 0未发送\n                };\n\n                localSTimesRecord[_localDate] = _sObj;\n            }\n\n            wx.setStorage({\n                key:  tywx.TuyooSDK.LOCAL_SHARE_TIMES_RECORD,\n                data: localSTimesRecord\n            });\n        }catch (e){\n            console.error(\"error:\", \"tywx.TuyooSDK.freshLocalShareTimes ===>\" + JSON.stringify(e));\n        }\n\n    },\n\n    //本地缓存的数据格式\n    /*\n        {\n\n            '2018/08/23':{\n                count: 1,\n                status : 0\n            },\n            '2018/08/24':{\n                count: 1,\n                status : 0\n            }\n        }\n    */\n\n    processLocalRecord : function () {      //onShow时候调用\n\n        try {\n\n            tywx.TuyooSDK.onShowTimeStamp = (new Date()).getTime();\n            \n            if(!tywx.UserInfo.userId){\n                return;\n            }\n\n            //读取\n            var _cDate = new Date();\n            var _localDate = _cDate.toLocaleDateString();\n\n\n            var localGTimeRecord = wx.getStorageSync(tywx.TuyooSDK.LOCAL_GAME_TIME_RECORD) || {};\n\n            if (localGTimeRecord) {\n                for (var k in localGTimeRecord) {\n\n                    if (k != _localDate && 0 == localGTimeRecord[k].status) {\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeOnReportGameTime, [localGTimeRecord[k].count, k]);\n                        localGTimeRecord[k].status = 1;\n                    }\n                }\n            }\n\n            //本地只保留30天的每日游戏次数日志，超过30条的，按照记录时间进行删除\n            var dateKeys = Object.keys(localGTimeRecord);\n            var _tmpGTRecord = {};\n            if(dateKeys.length && 30 < dateKeys.length){\n                dateKeys.reverse();\n                for(var i = 0; i < 30; i++){\n                    if(dateKeys[i] && localGTimeRecord[dateKeys[i]]){\n                        _tmpGTRecord[dateKeys[i]] = localGTimeRecord[dateKeys[i]];\n                    }\n                }\n            }else{\n                _tmpGTRecord = localGTimeRecord;\n            }\n            //回写\n            wx.setStorage({\n                key:  tywx.TuyooSDK.LOCAL_GAME_TIME_RECORD,\n                data: _tmpGTRecord\n            });\n\n\n            var localSTimeRecord = wx.getStorageSync(tywx.TuyooSDK.LOCAL_SHARE_TIMES_RECORD) || {};\n            if (localSTimeRecord) {\n                for (var k in localSTimeRecord) {\n\n                    if (k != _localDate && 0 == localSTimeRecord[k].status) {\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeOnReportShareTimes, [localSTimeRecord[k].count, k]);\n                        localSTimeRecord[k].status = 1;\n                    }\n                }\n            }\n            //本地只保留30天的每日分享总次数日志，超过30条的，按照记录时间进行删除\n            var shareKeys = Object.keys(localSTimeRecord);\n            var _tmpSTRecord = {};\n            if(shareKeys.length && 30 < shareKeys.length){\n                shareKeys.reverse();\n                for(var i = 0; i < 30; i++){\n                    if(shareKeys[i] && localSTimeRecord[shareKeys[i]]){\n                        _tmpSTRecord[shareKeys[i]] = localSTimeRecord[shareKeys[i]];\n                    }\n                }\n            }else{\n                _tmpSTRecord = localSTimeRecord;\n            }\n            //回写\n            wx.setStorage({\n                key:  tywx.TuyooSDK.LOCAL_SHARE_TIMES_RECORD,\n                data: _tmpSTRecord\n            });\n\n        }catch (e){\n            console.error(\"error:\", \"tywx.TuyooSDK.processLocalRecord ===>\" + JSON.stringify(e));\n        }\n\n    },\n\n    writeBackLocolRecord : function () {   //onHide时候调用\n        try {\n\n            if(tywx.TuyooSDK.onShowTimeStamp < 0){\n                return;\n            }\n\n            var localGTimeRecord = wx.getStorageSync(tywx.TuyooSDK.LOCAL_GAME_TIME_RECORD) || {};\n\n            var _curDate = new Date();\n            var _curTimeStamps = _curDate.getTime();\n            var _playTimeOffset = _curTimeStamps - tywx.TuyooSDK.onShowTimeStamp;\n\n            //判读是否跨天\n            var _startTimeStamps = Date.parse(_curDate.toLocaleDateString());\n\n            if (_startTimeStamps > tywx.TuyooSDK.onShowTimeStamp) {\n\n                var _preDateGameTime = _startTimeStamps - tywx.TuyooSDK.onShowTimeStamp;\n                var _curDateGameTime = _playTimeOffset - _preDateGameTime;\n\n                var _preDateString = (new Date(tywx.TuyooSDK.onShowTimeStamp)).toLocaleDateString(); // 2018/08/19\n                var _curDateString = _curDate.toLocaleDateString();                                  // 2018/08/20\n\n                if (localGTimeRecord[_preDateString] && localGTimeRecord[_preDateString].count) {\n                    localGTimeRecord[_preDateString].count = parseInt(localGTimeRecord[_preDateString].count) + _preDateGameTime;\n                } else {\n\n                    var _gtObj = {\n                        count: _preDateGameTime,           //当日总游戏时长\n                        status : 0,         //1已发送 0未发送\n                    };\n\n                    localGTimeRecord[_preDateString] = _gtObj;\n                }\n\n                if (localGTimeRecord[_curDateString] && localGTimeRecord[_curDateString].count) {\n                    localGTimeRecord[_curDateString].count = parseInt(localGTimeRecord[_curDateString].count) + _curDateGameTime;\n                } else {\n\n                    var _gtObj = {\n                        count: _curDateGameTime,           //当日总游戏时长\n                        status : 0,         //1已发送 0未发送\n                    };\n\n                    localGTimeRecord[_curDateString] = _gtObj;\n                }\n            } else {\n\n                var _curDateString = _curDate.toLocaleDateString();                                 // 2018/08/20\n\n                if (localGTimeRecord[_curDateString] && localGTimeRecord[_curDateString].count) {\n                    localGTimeRecord[_curDateString].count = parseInt(localGTimeRecord[_curDateString].count) + _playTimeOffset;\n                } else {\n                    var _gtObj = {\n                        count: _playTimeOffset,           //当日总游戏时长\n                        status : 0,                       //1已发送 0未发送\n                    };\n                    localGTimeRecord[_curDateString] = _gtObj;\n                }\n            }\n            wx.setStorage({\n                key:  tywx.TuyooSDK.LOCAL_GAME_TIME_RECORD,\n                data: localGTimeRecord\n            });\n\n            tywx.TuyooSDK.onShowTimeStamp = -1;\n\n        }catch (e){\n            console.error(\"error:\", \"tywx.TuyooSDK.writeBackLocolRecord ===>\" + JSON.stringify(e));\n        }\n    },\n\n    /**\n     * 获取每日游戏时长的本地记录（本地只对最近30日时长进行记录）\n     */\n    getLocalGameTimeRecord : function () {\n\n        try{\n            return wx.getStorageSync(tywx.TuyooSDK.LOCAL_GAME_TIME_RECORD) || {};\n        }catch (e){\n            return {};\n        }\n\n    },\n\n    /**\n     * 获取每日分享次数的本地记录（本地只对最近30日的分享次数进行记录）\n     */\n    getLocalShareTimesRecord : function () {\n\n        try{\n            return wx.getStorageSync(tywx.TuyooSDK.LOCAL_SHARE_TIMES_RECORD) || {};\n        }catch (e){\n            return {};\n        }\n\n    },\n\n    /**\n     * 上传激励视频日志\n     * @param sceneName  场景名称（必须为非空字符串）\n     * @param StatusCode 状态码  （1代表拉起激励视频，2代表观看结束，3代表观看取消，4代表获取激励视频失败）\n     */\n    postRVideoAdLog : function (sceneName, StatusCode) {\n\n        if(typeof sceneName != 'string' || !sceneName) {\n            console.error('Error sceneName! Please Check!');\n            return;\n        }\n\n        if(1 != StatusCode && 2 != StatusCode && 3 != StatusCode&& 4 != StatusCode){\n            console.error('Error StatusCode! Please Check!');\n            return;\n        }\n\n        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeOnReportVideoAdsInfo, [sceneName, StatusCode]);\n\n    },\n\n    //获取用户特征库信息\n    getUserFeature : function (gameid, cloudid, userid, successCallback, failCallBack) {\n\n        if(!gameid || !cloudid || !userid){\n\n            tywx.LOGE('getUserFeature', 'Error: Params Error, Please Check!');\n        }\n        var _url = 'https://analy.ywdier.com/';\n\n        var reqObj = {};\n        var timeStamp = new Date().getTime();\n        reqObj.act = 'api.getUserFeature';\n        reqObj.time = timeStamp;\n        reqObj.cloud_id = cloudid;\n        reqObj.game_id = gameid;\n        reqObj.user_id = userid;\n\n        var signStr = this.getConfigSignStr(reqObj);\n        var paramStrList = [];\n        for(var key in reqObj) {\n            paramStrList.push(key + '=' + reqObj[key]);\n        }\n        paramStrList.push('sign=' + signStr);\n        var finalUrl = _url + '?' + paramStrList.join('&');\n        var that = this;\n\n        wx.request({\n            url : finalUrl,\n            method : 'GET',\n            success : function (res) {\n\n                if(200 == res.status) {\n                    tywx.NotificationCenter.trigger(tywx.EventType.GET_USERFEATURE_INFO_SUCCESS, res.data);\n                    successCallback && successCallback(res.data);\n                }else{\n                    tywx.NotificationCenter.trigger(tywx.EventType.GET_USERFEATURE_INFO_FAIL);\n                    failCallBack && failCallBack();\n                }\n            },\n            fail : function (res) {\n                tywx.NotificationCenter.trigger(tywx.EventType.GET_USERFEATURE_INFO_FAIL);\n                failCallBack && failCallBack();\n            }\n        });\n\n    },\n\n    //-------------------------------------------------------------\n}\n\ntywx.WechatInterfaceInit = function() {\n    try {\n        if(tywx.IsWechatPlatform()) {\n            /**\n             * 小程序回到前台,具体逻辑自己实现\n             */\n            wx.onShow(function (result) {\n                // {\"0\":{\"scene\":1044,\"shareTicket\":\"beecdf9e-e881-492c-8a3f-a7d8c54dfcdb\",\"query\":{}}}  (从后台切到前台才有shareTicket,启动时没有)\n                tywx.LOGE('', \"+++++++++++++++++onShow+++++++++++++++++\"+JSON.stringify(result));\n                //取相关参数\n                var scene = result.scene;\n                var query = result.query;\n                var scenePath = '';\n                tywx.showScene = scene;\n                tywx.showQuery = query;\n                //来源处理\n                tywx.UserInfo.scene_id = scene;\n                tywx.UserInfo.scene_param = query.from || \"\";\n                tywx.UserInfo.invite_id = query.inviteCode || 0;\n                tywx.StateInfo.isOnForeground = true;\n                tywx.NotificationCenter.trigger(tywx.EventType.GAME_SHOW, result);\n                var hasUUID = tywx.Util.checkLocalUUID();\n                var oldUserFlag = hasUUID ? 1 : 0;\n                if (query && query.gdt_vid && query.weixinadinfo) {\n                    //从广点通广告跳过来的，from的开头加入gdt标识区分\n                    var from = \"gdt.\" + query.weixinadinfo;\n                    tywx.UserInfo.scene_param = from;\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, from, oldUserFlag]);\n                }\n                else if(query && query.sourceCode) {\n                    //从小程序消息卡片中点入,该场景为\"点击用户分享卡片进入游戏注册时，分享用户的user_id直接当做场景参数放在param02，param03和param04分别代表分享点id和分享图文id\"\n                    //var query = \"inviteCode=\"+ty.UserInfo.userId+\"&sourceCode=\"+type +\"&imageType=\"+imageMap.imageType+\"&inviteName=\"+ty.UserInfo.userName;\n                    tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, query.inviteCode, query.sourceCode, query.imageType, \"CardActive\", oldUserFlag]);\n                } else {\n                    if(tywx.Util.isSceneQrCode(scene)) {\n                        //从小程序码进入,相关见文档https://developers.weixin.qq.com/minigame/dev/tutorial/open-ability/qrcode.html\n                        if (query.hasOwnProperty('scene')){\n                            scenePath = query.scene;\n                        } else if(result.hasOwnProperty('path')) {\n                            scenePath = result.path;\n                        }\n                        scenePath.replace(\".html\", \"\");     //生成时可能会在path后面添加.html\n                        scenePath = decodeURIComponent(scenePath);\n                        tywx.UserInfo.scene_param = scenePath;\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, scenePath, oldUserFlag]);\n                    } else {\n                        //场景值和场景参数分别记录到可选参数param01和param02当中，如param01=1058，param02=tuyouqipai\n                        //场景参数由项目组接入推广渠道时配置，如公众号dacihua、tuyouqipai，二维码填写企业或个人标识\n                        tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserFrom,[scene, query.from, oldUserFlag]);\n                    }\n                }\n                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeOnShowTimeStampSubmit,[tywx.SystemInfo.tywxVersion]);\n                tywx.TuyooSDK.login();\n                if(tywx.SystemInfo.openLocalRecord){\n                    setTimeout(tywx.TuyooSDK.processLocalRecord, 2000);\n                }\n\n                tywx.AdManager && tywx.AdManager.onForeGround && tywx.AdManager.onForeGround();\n\n                tywx.tt.onShow(result);\n            });\n\n            /**\n             * 小程序进入后台\n             */\n            wx.onHide(function () {\n                tywx.LOGE('',\"+++++++++++++++++onHide+++++++++++++++++\");\n                tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeOnHideTimeStampSubmit,[]);\n                tywx.UserInfo.scene_id = 0;\n                tywx.StateInfo.isOnForeground = false;\n                tywx.NotificationCenter.trigger(tywx.EventType.GAME_HIDE);\n                tywx.TCPClient.close();\n\n                if(tywx.SystemInfo.openLocalRecord){\n                    tywx.TuyooSDK.writeBackLocolRecord();\n                }\n                tywx.tt.onHide();\n            });\n\n            var getNetSuccess = function (res) {\n                if (res.hasOwnProperty('isConnected')){\n                    tywx.StateInfo.networkConnected = res.isConnected;\n                }\n                else if (res.hasOwnProperty('errMsg')){\n                    tywx.StateInfo.networkConnected = res.errMsg == 'getNetworkType:ok'\n                }\n                else{\n                    tywx.StateInfo.networkConnected = res.networkType != 'none';\n                }\n\n                tywx.StateInfo.networkType = res.networkType;//wifi,2g,3g,4g,none,unknown\n            };\n\n            wx.getNetworkType({\n                success:getNetSuccess\n            });\n\n            wx.onNetworkStatusChange(getNetSuccess);\n\n            wx.onError(function (res) {\n                var d = new Date();\n                var errMsg = 'userId:' + tywx.UserInfo.userId + 'time:'+ d.toDateString() + ' ' + d.toTimeString() +';' + res.message;\n                tywx.BiLog.uploadLogTimely(errMsg);\n            });\n        };\n    }\n    catch(err) {\n        tywx.LOGE(\"error:\", \"tywx.WechatInterfaceInit——\" + JSON.stringify(err));\n    }\n};\n\ntywx.WechatInterfaceInit();\n\n"]}