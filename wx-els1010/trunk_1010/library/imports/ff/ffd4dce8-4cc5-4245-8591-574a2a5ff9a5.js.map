{"version":3,"sources":["../../../../../../assets/scripts/game/gameover/assets/scripts/game/gameover/gameover_view.js"],"names":["gameover_view_path","gameover_rank","require","gameover_view","cc","Class","extends","Component","properties","scoreLabel","Label","restartBtn","Node","jcdlNode","maxScoreLabel","phbnode","restartGame","closeCall","tywx","tt","Utils","sendWXMsg","method","friend","setStop","showWXBanner","curnode","removeFromParent","onLoad","curgamescene","storeScore","fuhuoScript","getComponent","setButtonCallType","share","calltype","config","constants","ShareConfig","GAMEOVER_FUHUO_SHARE","GAMEOVER_FUHUO_VIDEO","setShareConfig","setSuccessCall","self","fuHuoCall","canadd","ads","addAdsNode","v2","addIcon","string","parseInt","loadItem","TT_SCORE","setData","data","score","start","statics","show","loader","loadRes","err","prefab","gameovernode","instantiate","ads_script","director","getScene","addChild","module","exports"],"mappings":"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","file":"gameover_view.js","sourceRoot":"../../../../../../assets/scripts/game/gameover","sourcesContent":[" const gameover_view_path = \"prefabs/gameover_view\";\n let gameover_rank = require('../gameover/gameover_rank.js');\n const gameover_view = cc.Class({\n     extends: cc.Component,\n     properties: {\n         scoreLabel: cc.Label,\n         restartBtn: cc.Node,\n         jcdlNode: cc.Node,\n         maxScoreLabel: cc.Label,\n         phbnode: cc.Node,\n     },\n\n\n     restartGame: function () {\n         this.closeCall();\n     },\n\n     closeCall: function () {\n         tywx.tt.Utils.sendWXMsg({\n             method: 9,\n         });\n         tywx.tt.friend.setStop(false);\n         tywx.tt.Utils.showWXBanner();\n         gameover_view.curnode.removeFromParent(true);\n         gameover_view.curnode = null;\n     },\n\n     onLoad() {\n         // 存储分数\n         tywx.tt.curgamescene.storeScore();\n         // 初始化复活按钮的相关设置\n         this.fuhuoScript = this.restartBtn.getComponent(\"ShareButton\")\n         this.fuhuoScript.setButtonCallType(1);\n         let share = false;\n         let calltype = share ? 1 : 2;\n         const config = calltype == 1 ? tywx.tt.constants.ShareConfig.GAMEOVER_FUHUO_SHARE : tywx.tt.constants.ShareConfig.GAMEOVER_FUHUO_VIDEO;\n         this.fuhuoScript.setShareConfig(config);\n         this.fuhuoScript.setSuccessCall(function () {\n             self.fuHuoCall();\n         });\n         // 添加交叉倒流节点\n         var canadd = true;\n         canadd && tywx.tt.ads.addAdsNode(\"blink_play\", this.jcdlNode, cc.v2(0, 0));\n         // 开始倒计时\n         // 添加好友排行的界面\n         gameover_rank.addIcon(this.phbnode);\n         this.maxScoreLabel.string = parseInt(tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0)) + \"\";\n     },\n\n\n\n     fuHuoCall: function () {\n\n         this.closeCall();\n     },\n\n     setData(data) {\n         this.data = data;\n         this.scoreLabel.string = data.score;\n     },\n\n     start() {\n\n     },\n\n     statics: {\n         curnode: null,\n         /**\n          * @description 显示gameOver的视图\n          * @param {Object} data gameover的显示数据\n          */\n         show: function (data) {\n             cc.loader.loadRes(gameover_view_path, (err, prefab) => {\n                 if (!err) {\n                     let gameovernode = cc.instantiate(prefab);\n                     let ads_script = gameovernode.getComponent('gameover_view');\n                     ads_script.setData(data);\n                     gameover_view.curnode = gameovernode;\n                     cc.director.getScene().addChild(gameovernode);\n                 }\n             });\n         }\n     },\n });\n\n\n module.exports = gameover_view;"]}