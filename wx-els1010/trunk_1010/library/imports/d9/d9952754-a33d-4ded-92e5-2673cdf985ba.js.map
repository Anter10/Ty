{"version":3,"sources":["../../../../../../assets/scripts/game/rank/assets/scripts/game/rank/rank_view.js"],"names":["cc","Class","extends","Component","properties","phbSprite","Sprite","rankShareButton","Node","onLoad","self","tex","Texture2D","window","sharedCanvas","width","height","tywx","Timer","setTimer","_updateSubDomainCanvas","wx","postMessage","method","MAIN_MENU_NUM","tt","constants","TT_SCORE","rankBtnScript","getComponent","setButtonCallType","setShareConfig","ShareConfig","HOME_RANK_SHARE","setSuccessCall","shareSuc","closeRankView","rank_manager","friendsRankView","removeFromParent","start","openDataContext","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame"],"mappings":";;;;;;AAACA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAWL,GAAGM,MADN;AAERC,yBAAiBP,GAAGQ;AAFZ,KAHP;;AASLC,UATK,oBASI;;AAEL,YAAIC,OAAO,IAAX;AACA,aAAKC,GAAL,GAAW,IAAIX,GAAGY,SAAP,EAAX;AACAC,eAAOC,YAAP,CAAoBC,KAApB,GAA4B,GAA5B;AACAF,eAAOC,YAAP,CAAoBE,MAApB,GAA6B,KAAK,EAAlC;AACAC,aAAKC,KAAL,CAAWC,QAAX,CAAoB,IAApB,EAA0B,YAAY;AAClCT,iBAAKU,sBAAL;AACH,SAFD,EAEG,CAFH,EAEM,EAFN,EAEU,CAFV;AAGAC,WAAGC,WAAH,CAAe;AACZC,oBAAQ,CADI;AAEZC,2BAAeP,KAAKQ,EAAL,CAAQC,SAAR,CAAkBC;AAFrB,SAAf;AAIA,YAAMC,gBAAgB,KAAKrB,eAAL,CAAqBsB,YAArB,CAAkC,aAAlC,CAAtB;AACAD,sBAAcE,iBAAd,CAAgC,CAAhC;AACAF,sBAAcG,cAAd,CAA6Bd,KAAKQ,EAAL,CAAQC,SAAR,CAAkBM,WAAlB,CAA8BC,eAA3D;AACAL,sBAAcM,cAAd,CAA6B,YAAY;AACrCxB,iBAAKyB,QAAL;AACH,SAFD;AAIH,KA7BI;;;AA+BL;AACAA,cAAU,oBAAY,CAErB,CAlCI;;AAoCLC,mBAAe,yBAAY;AACvBnB,aAAKQ,EAAL,CAAQY,YAAR,CAAqBC,eAArB,CAAqCC,gBAArC,CAAsD,IAAtD;AACAtB,aAAKQ,EAAL,CAAQY,YAAR,CAAqBC,eAArB,GAAuC,IAAvC;AACH,KAvCI;;AAyCLE,SAzCK,mBAyCG,CAEP,CA3CI;;;AA6CL;;;AAGApB,4BAAwB,kCAAY;AAChC,YAAI,CAAC,KAAKT,GAAV,EAAe;AACX;AACH;AACD,YAAI8B,kBAAkBpB,GAAGqB,kBAAH,EAAtB;AACA,YAAI5B,eAAe2B,gBAAgBE,MAAnC;AACA,aAAKhC,GAAL,CAASiC,eAAT,CAAyB9B,YAAzB;AACA,aAAKH,GAAL,CAASkC,mBAAT;AACA,aAAKxC,SAAL,CAAeyC,WAAf,GAA6B,IAAI9C,GAAG+C,WAAP,CAAmB,KAAKpC,GAAxB,CAA7B;AACH;;AAGD;AA5DK,CAAT","file":"rank_view.js","sourceRoot":"../../../../../../assets/scripts/game/rank","sourcesContent":[" cc.Class({\n     extends: cc.Component,\n\n     properties: {\n         phbSprite: cc.Sprite,\n         rankShareButton: cc.Node,\n     },\n\n\n     onLoad() {\n       \n         var self = this;\n         this.tex = new cc.Texture2D();\n         window.sharedCanvas.width = 635;\n         window.sharedCanvas.height = 60 * 30;\n         tywx.Timer.setTimer(this, function () {\n             self._updateSubDomainCanvas();\n         }, 1, 11, 0);\n         wx.postMessage({\n            method: 1,\n            MAIN_MENU_NUM: tywx.tt.constants.TT_SCORE,\n         });\n         const rankBtnScript = this.rankShareButton.getComponent(\"ShareButton\")\n         rankBtnScript.setButtonCallType(1);\n         rankBtnScript.setShareConfig(tywx.tt.constants.ShareConfig.HOME_RANK_SHARE);\n         rankBtnScript.setSuccessCall(function () {\n             self.shareSuc();\n         });\n\n     },\n\n     // 分享成功\n     shareSuc: function () {\n\n     },\n\n     closeRankView: function () {\n         tywx.tt.rank_manager.friendsRankView.removeFromParent(true);\n         tywx.tt.rank_manager.friendsRankView = null;\n     },\n\n     start() {\n        \n     },\n\n     /**\n      * 刷新子域的canvas\n      */\n     _updateSubDomainCanvas: function () {\n         if (!this.tex) {\n             return;\n         }\n         var openDataContext = wx.getOpenDataContext();\n         var sharedCanvas = openDataContext.canvas;\n         this.tex.initWithElement(sharedCanvas);\n         this.tex.handleLoadedTexture();\n         this.phbSprite.spriteFrame = new cc.SpriteFrame(this.tex);\n     },\n\n\n     // update (dt) {},\n });"]}