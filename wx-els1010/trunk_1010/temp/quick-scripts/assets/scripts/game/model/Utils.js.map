{"version":3,"sources":["Utils.js"],"names":["crypto","require","GameClubBtn","WXBannerAD","IsHideBanner","WXVedioAD","WXVedioCallback","success","fail","err_cb","TAG","Utils","params","canvas","toTempFilePath","x","y","width","w","height","h","destWidth","destHeight","res","tywx","tt","log","saveImage2PhoneByUrl","tempFilePath","url","cb_success","cb_fail","saveImg2Phone","wx","saveImageToPhotosAlbum","filePath","getSetting","authSetting","authorize","scope","openSetting","complete","key","cc","sys","localStorage","removeItem","isInWXChat","removeUserCloudStorage","keyList","msg","time","Date","err_obj","SystemInfo","cloudId","toDateString","clientId","UserInfo","userId","system","model","wechatType","version","StateInfo","networkType","ip","header","configObj","errorTxtServer","HttpUtil","httpPost","value","only_local","setItem","setUserCloudStorage","KVDataList","default_value","v","getItem","i","tmp_v","tag","result","success_cb","fail_cb","shareTickets","call_succ","call_fail","ff","getShareInfo","shareTicket","iv","encryptedData","resultStr","decrypt","wxgame_session_key","resultObj","JSON","parse","id","openGId","t0","parseInt","loadItem","tc","getTime","saveItem","e","share_tag","config","tmp_arr","PropagateInterface","ShareConfig","hasOwnProperty","rand_idx","Math","random","length","crypted","decoded","Buffer","decipher","createDecipheriv","setAutoPadding","update","final","err","duration","showToast","title","icon","error","content","show_cancel","sure_cb","cancle_cb","confirm_txt","cancle_txt","showModal","showCancel","confirmText","cancelText","confirm","cancel","createGameClubButton","style","left","top","show","hide","window","createBannerAd","destroyWXBanner","sys_info","getSystemInfoSync","s_w","screenWidth","s_h","screenHeight","is_ipx","isIpx","is_pad","isPad","adUnitId","constants","WXAdConfig","bannerId","onResize","destroy","createRewardedVideoAd","vedioId","onClose","toast_str","isEnded","undefined","showWXBanner","error_callback","load","then","catch","lucky_rate","configManager","getInstance","LuckyUserRate","showWXModal","hideWXBanner","node","runAction","sequence","scaleTo","easing","easeIn","ret","indexOf","windowHeight","windowWidth","sprite","size","loader","texture","new_sprite_frame","SpriteFrame","spriteFrame","setContentSize","btn_sure_cb","loadRes","prefab","winSize","prefabNode","instantiate","game","addPersistRootNode","position","v2","getComponent","init","request","loginUrl","data","authorCode","deviceInfo","deviceId","name","userName","rand","stringify","red_packet","current","formatCashFen2Yuan","nextAmount","max","totalAmount","times","needShare","is_share","RedPacketInfo","uploadErrorMsg","message","addAmount","NotificationCenter","trigger","events","TT_EVENT_RED_PACKET_CHANGE","WXTransferRedPacketError","code","EveryDataLoginInfo","double","amounts","count","Events","ADO_EVENT_RED_PACKET_CHANGE","inviteId","InviteInfo","reward","hpvalue","cash","current_cash","pop","parent","director","getScene","scene","pop_root","getChildByName","end","end_callback","moveTo","easeSineIn","callFunc","wx_app_id","list","AdManager","rawAdInfoList","tmp_c","toappid","skip_type","icon_skip_type","togame","topath","path","second_toappid","that","icon_id","config_id","webpage_url","webpage_id","bi_paramlist","adType","BiLog","clickStat","clickStatEventType","clickStatEventTypeClickAdBtn","navigateToMiniProgram","appId","envVersion","extraData","from","clickStatEventTypeClickDirectToMiniGameSuccess","clickStatEventTypeClickDirectToMiniGameFail","console","ip_info","loc","MinGanIpInfo","MinGanIp","info","lock_city","postMessage","share_control","calltype","isMinGanIP","isCanWatchVideo","local","text","addChild","setText","popView","module","exports"],"mappings":"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","file":"Utils.js","sourceRoot":"../../../../../../assets/scripts/game/model","sourcesContent":["let crypto = require('crypto');\nlet GameClubBtn = null; // * 游戏圈按钮\nlet WXBannerAD = null; // * 微信banner广告\nlet IsHideBanner = false; // * 是否显示Banner\nlet WXVedioAD = null; // * 微信Vedio广告\nlet WXVedioCallback = {\n    success: null,\n    fail: null,\n    err_cb: null,\n}; // * 微信vedio回调\n\nlet TAG = \"[model.Utils.js]\";\nlet Utils = class {\n    /**\n     * @param params Object\n     *        params.wisper_ming string 悄悄话 明文\n     *        params.wisper_an string 悄悄话 暗文\n     *        params.heard_url string 玩家头像\n     *        params.size cc.size 尺寸\n     *        params.bg string 背景图片\n     *        params.success function 成功回调\n     *        params.fail function 失败回调\n     * 流程:\n     * 1. 创建离屏canvas\n     * 2. 绘制背景\n     * 3. 绘制头像\n     * 4. 绘制文本\n     * 5. 截屏保存到本地\n     * 6. 将本地图片保存到相册\n     * @author lu ning\n     * @date 11:31 2018/7/5\n     * @return {Object} 返回值描述\n     */\n    static createAndSaveImg2WXAlbum(params) {\n        canvas.toTempFilePath({\n            x: params.x,\n            y: params.y,\n            width: params.w,\n            height: params.h,\n            destWidth: params.w,\n            destHeight: params.h,\n            success: function success(res) {\n                tywx.tt.log(res);\n\n                Utils.saveImage2PhoneByUrl(res.tempFilePath, params.success, params.fail);\n            },\n            fail: function fail(res) {\n                // self.title.active = true;\n                params.fail && params.fail();\n            }\n        });\n    }\n\n    static saveImage2PhoneByUrl(url, cb_success, cb_fail) {\n        let saveImg2Phone = () => {\n            if (!wx.saveImageToPhotosAlbum) {\n                cb_fail();\n                return;\n            }\n\n            wx.saveImageToPhotosAlbum({\n                filePath: url,\n                success: (res) => {\n                    cb_success();\n                },\n                fail: (res) => {\n                    cb_fail();\n                }\n            });\n        };\n        wx.getSetting({\n            success: (res) => {\n                if (!res.authSetting['scope.writePhotosAlbum']) {\n                    wx.authorize({\n                        scope: \"scope.writePhotosAlbum\",\n                        success: function () {\n                            saveImg2Phone();\n                        },\n                        fail: function () {\n                            if (wx.openSetting) {\n                                wx.openSetting({\n                                    success: (res) => {\n                                        tywx.tt.log('success', res);\n                                        if (res.authSetting['scope.writePhotosAlbum']) {\n                                            saveImg2Phone();\n                                        } else {\n                                            cb_fail();\n                                        }\n                                    },\n                                    fail: (res) => {\n                                        tywx.tt.log('fail', res);\n                                        cb_fail();\n                                    }\n                                });\n                            } else {\n                                cb_fail();\n                            }\n                        },\n                        complete: function () {}\n                    });\n                } else {\n                    saveImg2Phone();\n                }\n            },\n            fail: (res) => {\n                cb_fail();\n            }\n        });\n    }\n    /**\n     * * 删除存储在本地的指定数据\n     *\n     * @static\n     * @param {String} key 标识\n     * @returns\n     */\n    static delItem(key) {\n        cc.sys.localStorage.removeItem(key);\n        //localValues.delete(key);\n        if (!tywx.isInWXChat)\n            return;\n        wx.removeUserCloudStorage({\n            keyList: [key],\n            success: (msg) => {\n                tywx.tt.log('removeObjectCloud  ' + key + ' succeeds', msg);\n            },\n            fail: (msg) => {\n                tywx.tt.log('removeObjectCloud  ' + key + ' fails', msg);\n            },\n        });\n    }\n\n    static uploadErrorMsg(msg) {\n        let time = new Date();\n        let err_obj = {\n            \"cloud_id\": tywx.SystemInfo.cloudId,\n            \"time\": time.toDateString(),\n            \"client_id\": tywx.SystemInfo.clientId,\n            \"user_id\": tywx.UserInfo.userId,\n            \"sys_version\": tywx.UserInfo.system,\n            \"mobile_models\": tywx.UserInfo.model,\n            \"baseVersion\": \"0\",\n            \"wxVersion\": tywx.UserInfo.wechatType,\n            \"clientVersion\": tywx.SystemInfo.version,\n            \"Nettype\": tywx.StateInfo.networkType,\n            \"ip\": tywx.UserInfo.ip,\n            \"errMsg\": msg\n        };\n        //let err_str = String(err_obj);\n        if (err_obj) {\n            var header = {\n                'Content-Type': 'text/plain'\n            };\n            var configObj = {\n                'url': tywx.SystemInfo.errorTxtServer,\n                'header': header,\n                'postData': err_obj,\n                'callback': (params) => {\n                    tywx.tt.log('uploadErrorMsg===>', params);\n                }\n            };\n            tywx.HttpUtil.httpPost(configObj, 'POST');\n        }\n    }\n\n    /**\n     * * 保存数据到本地\n     *\n     * @static\n     * @param {String} key 标识\n     * @param {any} value\n     * @param {boolean} only_local 是否只保存在本地,false的情况，上传到腾讯云\n     * @returns\n     */\n    static saveItem(key, value, only_local) {\n        value = value + '';\n        cc.sys.localStorage.setItem(key, value);\n        //localValues.set(key, value);\n        if (!tywx.isInWXChat)\n            return;\n        if (!only_local) {\n            //FIXED: 做版本检测，版本低的会有黑屏\n            if (wx.setUserCloudStorage) {\n                wx.setUserCloudStorage({\n                    KVDataList: [{\n                        key: key,\n                        value: value\n                    }],\n                    success: (msg) => {\n                        tywx.tt.log('saveObjectToCloud  ' + key + ' succeeds', msg);\n                    },\n                    fail: (msg) => {\n                        tywx.tt.log('saveObjectToCloud  ' + key + ' fails', msg);\n                    },\n                });\n            }\n        }\n    }\n    /**\n     * * 加载保存在本地的数据\n     *\n     * @static\n     * @param {String} key 标识\n     * @param {any} default_value 默认值\n     * @returns\n     */\n    static loadItem(key, default_value) {\n        //if(localValues.has(key)) return localValues.get(key);\n        var v = cc.sys.localStorage.getItem(key);\n        if (!v) {\n            v = default_value;\n            for (let i = 0; i < 3; i++) {\n                let tmp_v = cc.sys.localStorage.getItem(key);\n                if (!tmp_v) continue;\n                v = tmp_v;\n                break;\n            }\n        }\n        return v;\n    }\n\n    /**\n     * @description 分享到不同群限制\n     * @author lu ning\n     * @date 2018-08-22\n     * @static\n     * @param {String} tag 分享tag\n     * @param {Object} result 分享返回值\n     * @param {Function} success_cb 成功回调\n     * @param {Function} fail_cb 失败回调\n     * @returns\n     */\n    static share2GroupByTicket(tag, result, success_cb, fail_cb) {\n        if (!result.shareTickets || !result.shareTickets[0]) return false;\n        let call_succ = () => {\n            if (success_cb) success_cb();\n        };\n        let call_fail = () => {\n            if (fail_cb) fail_cb();\n        };\n        let ff = Utils;\n\n        wx.getShareInfo({\n            shareTicket: result.shareTickets[0],\n            success: (res) => {\n                tywx.tt.log('isCanShare2GroupByTicket==>', res);\n                try {\n                    let iv = res.iv;\n                    let encryptedData = res.encryptedData;\n                    let resultStr = ff.decrypt(tywx.UserInfo.wxgame_session_key, iv, encryptedData);\n                    tywx.tt.log('resultStr==>', resultStr);\n                    if (resultStr && resultStr !== 0) {\n                        let resultObj = JSON.parse(resultStr);\n                        let id = `${tag}_${resultObj.openGId}`;\n                        let t0 = parseInt(ff.loadItem(id, 0));\n                        let tc = new Date().getTime();\n                        tywx.tt.log('isCanShare2GroupByTicket==>openGId', id, typeof id);\n                        if (tc - t0 >= 8 * 60 * 60 * 1000) {\n                            ff.saveItem(id, tc, true);\n                            call_succ();\n                        } else {\n                            call_fail();\n                        }\n                    } else {\n                        call_fail();\n                    }\n\n                } catch (e) {\n                    tywx.tt.log(\"share::\", e);\n                    call_fail();\n                }\n            },\n            fail: () => {\n                call_fail();\n            }\n        });\n    }\n\n    /**\n     * @description 获取随机分享数据\n     * @author lu ning\n     * @date 2018-08-23\n     * @static\n     * @param {String} share_tag\n     */\n    static getRandomShareConfigByShareTag(share_tag) {\n        let config = null;\n        let tmp_arr = [];\n        if (tywx.PropagateInterface.ShareConfig.hasOwnProperty(share_tag)) {\n            tmp_arr = tywx.PropagateInterface.ShareConfig[share_tag];\n            let rand_idx = parseInt(Math.random() * tmp_arr.length);\n            config = tmp_arr[rand_idx];\n        }\n        return config;\n    }\n\n    static decrypt(key, iv, crypted) {\n        var decoded = 0;\n        try {\n            crypted = new Buffer(crypted, 'base64');\n            iv = new Buffer(iv, 'base64');\n            key = new Buffer(key, 'base64');\n\n            var decipher = crypto.createDecipheriv('aes-128-cbc', key, iv);\n            decipher.setAutoPadding(true);\n\n            decoded = decipher.update(crypted, 'binary', 'utf8');\n            decoded += decipher.final('utf8');\n        } catch (err) {\n            tywx.tt.log(\"decrypt\", \" catch error: \" + err);\n        }\n        return decoded;\n    }\n\n    /**\n     * @description \n     * @author lu ning\n     * @date 2018-08-24\n     * @static\n     * @param {String} msg\n     * @param {number} [duration=1000]\n     */\n    static showWXToast(msg, duration = 1000) {\n        if (wx.showToast) {\n            wx.showToast({\n                title: msg,\n                icon: '',\n                duration: duration\n            });\n        } else {\n            cc.error('showWXToast error can not find function wx.showToast');\n        }\n    }\n    /**\n     * @description 显示模态窗\n     * @author lu ning\n     * @date 2018-08-24\n     * @static\n     * @param {String} content 显示内容\n     * @param {String} [title='提示'] title\n     * @param {boolean} [show_cancle=false]  是否显示取消\n     * @param {Function} [sure_cb=null] 确定按钮回调\n     * @param {Function} [cancle_cb=null] 取消按钮回调\n     * @param {string} [confirm_txt='确定']\n     * @param {string} [cancle_txt='取消']\n     */\n    static showWXModal(content, title = '提示', show_cancel = false, sure_cb = null, cancle_cb = null, confirm_txt = '确定', cancle_txt = '取消') {\n        wx.showModal({\n            title: title,\n            content: content,\n            showCancel: show_cancel,\n            confirmText: confirm_txt,\n            cancelText: cancle_txt,\n            success: function (res) {\n                if (res.confirm) {\n                    tywx.tt.log('用户点击确定');\n                    sure_cb && sure_cb();\n                } else if (res.cancel) {\n                    tywx.tt.log('用户点击取消');\n                    cancle_cb && cancle_cb();\n                }\n            }\n        });\n    }\n    /**\n     * @description 显示游戏圈\n     * @author lu ning\n     * @date 2018-09-05\n     * @static\n     */\n    static showGameClub() {\n        if (!GameClubBtn && wx.createGameClubButton) {\n            GameClubBtn = wx.createGameClubButton({\n                icon: 'green',\n                style: {\n                    left: 10,\n                    top: 30,\n                    width: 40,\n                    height: 40\n                }\n            });\n        }\n        GameClubBtn.show();\n    }\n    /**\n     * @description 隐藏游戏圈\n     * @author lu ning\n     * @date 2018-09-05\n     * @static\n     */\n    static hideGameClub() {\n        if (GameClubBtn) {\n            GameClubBtn.hide();\n        }\n    }\n\n    /**\n     * @description 创建并显示微信Banner广告, IsHideBanner=false到时候创建成功也不会显示\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @returns\n     */\n    static createAndcreateAndShowWXBanner() {\n        if (!window.wx) return; //! 防止浏览器中报错\n        if (!wx.createBannerAd) return; //! 玩家基础库不支持\n        tywx.tt.Utils.destroyWXBanner();\n        let sys_info = wx.getSystemInfoSync();\n        let s_w = sys_info.screenWidth;\n        let s_h = sys_info.screenHeight; // 220\n        // ! 强制适配,主要是ipx有问题\n        let is_ipx = tywx.tt.Utils.isIpx();\n        // ! 强制适配 pad(宽屏设备)\n        let is_pad = tywx.tt.Utils.isPad();\n        WXBannerAD = wx.createBannerAd({\n            adUnitId: tywx.tt.constants.WXAdConfig.bannerId,\n            style: {\n                left: 0,\n                top: 0,\n                width: is_ipx ? s_w * 0.88 : (is_pad ? s_w * 0.6 : s_w * 0.95)\n            }\n        });\n\n        try {\n            WXBannerAD.onResize(function (res) {\n                tywx.tt.log(IsHideBanner + !IsHideBanner + 'showBannerAd', '当前banner,width:' + res.width + \"; height:\" + res.height);\n                if (WXBannerAD) {\n                    let top = s_h - res.height - 5; //is_ipx ? s_h - res.height + 50 : s_h - res.height - 5;\n                    WXBannerAD.style.left = (s_w - res.width) / 2;\n                    WXBannerAD.style.top = top;\n                    //res.width             = is_ipx ? s_w * 0.8 : s_w * 0.9;\n                    //res.height            = s_h * 0.13;\n                }\n            });\n        } catch (e) {\n            tywx.tt.log(e);\n        }\n        // * 隐藏状态不显示banner\n        if (WXBannerAD && !IsHideBanner) WXBannerAD.show();\n    }\n    /**\n     * @description 隐藏Banner广告,隐藏后，若需要显示，必须调用showWXBanner()\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static hideWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.hide();\n        }\n        IsHideBanner = true;\n    }\n    /**\n     * @description 显示Banner广告\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static showWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.show();\n        }\n        IsHideBanner = false;\n    }\n    /**\n     * @description 销毁Banner\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     */\n    static destroyWXBanner() {\n        if (WXBannerAD) {\n            WXBannerAD.hide();\n            WXBannerAD.destroy();\n            WXBannerAD = null;\n        }\n        tywx.tt.log(\"主页退出2 \" + WXBannerAD);\n    }\n    /**\n     * @description 显示视频广告\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {Function} params.error_callback\n     */\n    static showWXVideo(params) {\n        if (!window.wx) return; //! 防止浏览器中报错\n        if (!wx.createRewardedVideoAd) return; //! 玩家基础库不支持\n        if (!WXVedioAD) {\n            WXVedioAD = wx.createRewardedVideoAd({\n                adUnitId: tywx.tt.constants.WXAdConfig.vedioId\n            });\n            WXVedioAD.onClose(res => {\n                let toast_str = '';\n                if (res && res.isEnded || res === undefined) {\n                    toast_str = '视频观看成功';\n                    WXVedioCallback.success && WXVedioCallback.success();\n                } else {\n                    toast_str = '视频观看失败';\n                    WXVedioCallback.fail && WXVedioCallback.fail();\n                }\n                // tywx.tt.Utils.showWXModal(`${toast_str}`);\n                tywx.tt.Utils.showWXBanner();\n            });\n        }\n        // * 成功和失败回调是变化的\n        WXVedioCallback.success = params.success;\n        WXVedioCallback.fail = params.fail;\n        WXVedioCallback.err_cb = params.error_callback || null;\n\n\n        WXVedioAD.load().then(() => WXVedioAD.show()).catch(e => {\n            tywx.tt.log(e);\n            let lucky_rate = tywx.tt.configManager.getInstance().LuckyUserRate || 50;\n            if (Math.random() * 100 <= lucky_rate) {\n                WXVedioCallback.err_cb && WXVedioCallback.err_cb();\n            } else {\n                tywx.tt.Utils.showWXModal(\"获取视频失败\");\n            }\n        });\n        tywx.tt.Utils.hideWXBanner();\n    }\n    /**\n     * @description 通用缩放动画\n     * @author lu ning\n     * @date 2018-09-06\n     * @static\n     * @param {cc.Node} node\n     */\n    static commonScaleIn(node) {\n        if (!node) return;\n        node.runAction(\n            cc.sequence(\n                cc.scaleTo(0.08, 0.95).easing(cc.easeIn(3.0)),\n                cc.scaleTo(0.12, 1.1).easing(cc.easeIn(3.0)),\n                cc.scaleTo(0.08, 1).easing(cc.easeIn(3.0))\n            )\n        );\n    }\n    /**\n     * @description 是否是iphoneX\n     * @author lu ning\n     * @date 2018-09-07\n     * @static\n     * @returns\n     */\n    static isIpx() {\n        if (!window.wx) {\n            return false;\n        }\n        let ret = false;\n        let sys_info = wx.getSystemInfoSync();\n        if (sys_info.model.indexOf('iPhone X') >= 0 || (sys_info.system.indexOf('iOS') >= 0 && sys_info.windowHeight / sys_info.windowWidth > 1.9)) {\n            return true;\n        }\n        return ret;\n    }\n    static is2To1() {\n        if (!window.wx) {\n            return false;\n        }\n        let sys_info = wx.getSystemInfoSync();\n        return sys_info.windowHeight / sys_info.windowWidth > 1.9;\n    }\n    /**\n     * @description 根据url刷新sprite\n     * @author lu ning\n     * @date 2018-09-08\n     * @static\n     * @param {cc.Sprite} sprite\n     * @param {String} url\n     */\n    static refreshSpriteByUrl(sprite, url, size) {\n        cc.loader.load(url, (err, texture) => {\n            if (!err) {\n                let new_sprite_frame = new cc.SpriteFrame(texture);\n                sprite.spriteFrame = new_sprite_frame;\n                if (size) {\n                    sprite.node.setContentSize(size);\n                }\n                tywx.tt.log(\"刷新CDN图片成功\");\n            }\n        });\n    }\n    /**\n     * @description\n     * @author lu ning\n     * @date 2018-09-17\n     * @static\n     * @param {Function} btn_sure_cb\n     * @param {string} content\n     */\n    static showErrorGfitPop(btn_sure_cb, content) {\n        cc.loader.loadRes('prefabs/ado_view_error_gift', function (err, prefab) {\n            if (!err) {\n                let size = cc.winSize;\n                var prefabNode = cc.instantiate(prefab);\n                cc.game.addPersistRootNode(prefabNode);\n                prefabNode.position = cc.v2(size.width / 2, size.height / 2);\n                prefabNode.getComponent('ado_view_error_gift').init(btn_sure_cb, content);\n            }\n        });\n    }\n    /**\n     * @description 获取红包,获取本次加红包的信息，\n     *     调用requestAddRedPacket接口后才能真正的加上\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     */\n    static requestRedPacket(params) {\n        tywx.tt.log('redpacket', 'requestRedPacket start');\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                //method:\"POST\",\n                success: (res) => {\n                    tywx.tt.log('redpacket', 'requestRedPacket==success', JSON.stringify(res));\n                    if (res.data) {\n                        let red_packet = {\n                            current: tywx.tt.Utils.formatCashFen2Yuan(res.data.nextAmount), // 本次获取的金额\n                            max: tywx.tt.Utils.formatCashFen2Yuan(res.data.totalAmount), // 总共金额\n                            times: res.data.needShare ? 3 : 1, // 1,2 ==> 确定，直接领取，>= 3分享或看视频领取\n                            is_share: res.data.needShare,\n                        };\n                        tywx.tt.RedPacketInfo = res.data;\n                        params.success && params.success(red_packet);\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket==success;' + JSON.stringify(res));\n                    } else {\n                        if (res.data && res.data.nextAmount === 0) {\n                            tywx.tt.RedPacketInfo = res.data;\n                        }\n                        params.fail && params.fail(-1);\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket==success---fail;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    params.fail && params.fail(-1);\n                    tywx.tt.log('redpacket', 'requestRedPacket==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket==fail;' + JSON.stringify(res));\n                }\n            });\n        } catch (e) {\n            params.fail && params.fail(-1);\n            tywx.tt.log('redpacket', 'requestRedPacket==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket==error;' + e.message);\n\n        }\n    }\n    /**\n     * @description 请求加红包\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     */\n    static requestAddRedPacket(params) {\n        tywx.tt.log('redpacket', 'requestAddRedPacket start');\n\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/add`,\n                data: {\n                    userId: tywx.UserInfo.userId, // tywx.UserInfo.userId\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                //method:\"POST\",\n                success: (res) => {\n                    // * 加红包成功\n                    tywx.tt.log('redpacket', 'requestAddRedPacket==success', JSON.stringify(res));\n                    if (res.data && res.data.addAmount > 0) {\n                        let addAmount = tywx.tt.Utils.formatCashFen2Yuan(res.data.addAmount);\n                        tywx.tt.RedPacketInfo.totalAmount += res.data.addAmount;\n                        params.success && params.success(addAmount);\n                        tywx.NotificationCenter.trigger(tywx.tt.events.TT_EVENT_RED_PACKET_CHANGE, res);\n                    } else {\n                        tywx.tt.Utils.showWXModal(\n                            '加红包失败',\n                            '提示',\n                            false);\n                        params.fail && params.fail();\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==success---fail;' + JSON.stringify(res));\n\n                    }\n\n                },\n                fail: (res) => {\n                    // * 加红包失败\n                    tywx.tt.log('redpacket', 'requestAddRedPacket==fail', JSON.stringify(res));\n                    tywx.tt.Utils.showWXModal(\n                        '加红包失败',\n                        '提示',\n                        false);\n                    params.fail && params.fail();\n                    tywx.tt.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 加红包报错\n            tywx.tt.log('redpacket', 'requestAddRedPacket==error', JSON.stringify(e));\n            tywx.tt.Utils.showWXModal(\n                '加红包失败',\n                '提示',\n                false);\n            tywx.tt.Utils.uploadErrorMsg('redpacket;requestAddRedPacket==error;' + e.message);\n\n        }\n    }\n    /**\n     * @description 请求提现\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     */\n    static requestRedPacket2Cash() {\n        tywx.tt.log('redpacket', 'requestRedPacket2Cash start');\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/redenvelop/transfer`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 提现成功\n                    tywx.tt.log('redpacket', 'requestRedPacket2Cash==success', JSON.stringify(res));\n                    if (res.data) {\n                        tywx.tt.Utils.showWXModal(\n                            tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                            '提示',\n                            false);\n                        if (res.data.code !== 0) {\n                            tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.tt.RedPacketInfo.totalAmount = 0;\n                            tywx.NotificationCenter.trigger(tywx.tt.events.TT_EVENT_RED_PACKET_CHANGE, res);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 提现失败\n                    //params.fail && params.fail(0);\n                    tywx.tt.Utils.showWXModal(\n                        '提现请求失败，请稍后再试',\n                        '提示',\n                        false);\n                    tywx.tt.log('redpacket', 'requestRedPacket2Cash==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 提现失败\n            //params.fail && params.fail(0);\n            tywx.tt.Utils.showWXModal(\n                '提现请求失败，请稍后再试',\n                '提示',\n                false);\n            tywx.tt.log('redpacket', 'requestRedPacket2Cash==fail', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('redpacket;requestRedPacket2Cash==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求每日登陆信息\n     * @author lu ning\n     * @date 2018-09-24\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {Function} params.error\n     * @static\n     */\n    static requestEveryLoginInfo(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/everydaylogin/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 获取每日登陆信息成功\n                    tywx.tt.log('redpacket', 'requestEveryLoginInfo==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.tt.Utils.showWXModal(\n                                tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.tt.EveryDataLoginInfo = res.data;\n                            params.success && params.success();\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 获取每日登陆信息失败\n                    params.fail && params.fail();\n                    tywx.tt.log('redpacket', 'requestEveryLoginInfo==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 提现失败\n            tywx.tt.log('redpacket', 'requestEveryLoginInfo==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求获得每日登陆奖励\n     * @author lu ning\n     * @date 2018-09-24\n     * @static\n     * @param {Object} params\n     * @param {Function} params.success\n     * @param {Function} params.fail\n     * @param {boolean} params.double\n     */\n    static requestEveryLoginReward(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/everydaylogin/reward`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    double: params.double ? 1 : 0,\n                    rand: Math.random() * 1000000\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 请求每日登陆奖励成功\n                    tywx.tt.log('redpacket', 'requestEveryLoginReward==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.tt.Utils.showWXModal(\n                                tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            //tywx.tt.EveryDataLoginInfo = res.data;\n                            let addAmount = tywx.tt.EveryDataLoginInfo.amounts[tywx.tt.EveryDataLoginInfo.count - 1];\n                            addAmount = params.double ? addAmount * 2 : addAmount;\n                            tywx.tt.RedPacketInfo.totalAmount += addAmount;\n                            tywx.NotificationCenter.trigger(tywx.tt.Events.ADO_EVENT_RED_PACKET_CHANGE, null);\n                            params.success && params.success(addAmount);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    params.fail && params.fail();\n                    tywx.tt.log('redpacket', 'requestEveryLoginReward==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginReward==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            tywx.tt.log('redpacket', 'requestEveryLoginInfo==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('redpacket;requestEveryLoginInfo==error;' + e.message);\n        }\n    }\n    /**\n     * @description 上报邀请信息\n     * @author lu ning\n     * @date 2018-09-26\n     * @param {Number} inviteId\n     * @static\n     */\n    static requestInviteLogin(inviteId) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/login`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                    inviteId: inviteId\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    tywx.tt.log('invite', 'requestInviteLogin==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            // tywx.tt.Utils.showWXModal(\n                            //     tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                            //     '提示',\n                            //     false);\n                            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteLogin==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.tt.log('invite requestInviteLogin success');\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('invite;requestInviteLogin==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    tywx.tt.log('invite', 'requestInviteLogin==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('invite;requestInviteLogin==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            tywx.tt.log('invite', 'requestInviteLogin==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteLogin==error;' + e.message);\n        }\n    }\n    /**\n     * @description 请求邀请信息\n     * @author lu ning\n     * @date 2018-09-26\n     * @static\n     */\n    static requestInviteGetInfo(params) {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/getinfo`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    tywx.tt.log('invite', 'requestInviteGetInfo==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.tt.Utils.showWXModal(\n                                tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteGetInfo==success--error-0;' + JSON.stringify(res));\n                            params.fail && params.fail();\n                        } else {\n                            tywx.tt.log('invite requestInviteGetInfo success');\n                            tywx.tt.InviteInfo = res.data;\n                            params.success && params.success();\n                            if (tywx.tt.InviteInfo.reward) tywx.tt.hpvalue = 6;\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('invite;requestInviteGetInfo==success--error-1;' + JSON.stringify(res));\n                        params.fail && params.fail();\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    tywx.tt.log('invite', 'requestInviteGetInfo==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('invite;requestInviteGetInfo==fail;' + JSON.stringify(res));\n                    params.fail && params.fail();\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            tywx.tt.log('invite', 'requestInviteGetInfo==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteGetInfo==error;' + e.message);\n            params.fail && params.fail();\n        }\n    }\n    /**\n     * @description 请求邀请奖励\n     * @author lu ning\n     * @date 2018-09-26\n     * @static\n     */\n    static requestInviteReward() {\n        try {\n            wx.request({\n                url: `${tywx.SystemInfo.loginUrl}api/huanlejiayi/invite/reward`,\n                data: {\n                    userId: tywx.UserInfo.userId,\n                    clientId: tywx.SystemInfo.clientId,\n                    authorCode: tywx.UserInfo.authorCode,\n                    deviceInfo: tywx.SystemInfo.deviceId,\n                    name: tywx.UserInfo.userName,\n                    rand: Math.random() * 1000000,\n                },\n                // method:\"POST\",\n                success: (res) => {\n                    // * 上报邀请信息\n                    tywx.tt.log('invite', 'requestInviteReward==success', JSON.stringify(res));\n                    if (res.data) {\n                        if (res.data.code !== 0) {\n                            tywx.tt.Utils.showWXModal(\n                                tywx.tt.constants.WXTransferRedPacketError[res.data.code],\n                                '提示',\n                                false);\n                            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteReward==success--error-0;' + JSON.stringify(res));\n                        } else {\n                            tywx.tt.log('invite requestInviteReward success');\n                            tywx.tt.InviteInfo.reward = true;\n                            tywx.tt.hpvalue = 6;\n                            tywx.tt.Utils.showWXModal(\n                                \"领取成功\",\n                                '提示',\n                                false);\n                        }\n                    } else {\n                        // * 未知错误\n                        tywx.tt.Utils.uploadErrorMsg('invite;requestInviteReward==success--error-1;' + JSON.stringify(res));\n                    }\n                },\n                fail: (res) => {\n                    // * 请求每日登陆奖励失败\n                    tywx.tt.log('invite', 'requestInviteReward==fail', JSON.stringify(res));\n                    tywx.tt.Utils.uploadErrorMsg('invite;requestInviteReward==fail;' + JSON.stringify(res));\n\n                }\n            });\n        } catch (e) {\n            // * 请求每日登陆奖励失败\n            tywx.tt.log('invite', 'requestInviteReward==error', JSON.stringify(e));\n            tywx.tt.Utils.uploadErrorMsg('invite;requestInviteReward==error;' + e.message);\n        }\n    }\n\n    /**\n     * @description 现金转换==>分 to 元\n     * @author lu ning\n     * @date 2018-09-18\n     * @static\n     * @param {Number} cash 分为单位\n     * @returns {Number}\n     */\n    static formatCashFen2Yuan(cash) {\n        let ret = 0;\n        ret = cash / 100;\n        return ret;\n    }\n    /**\n     * @description 显示提现弹窗\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @param {string} [current_cash=null]\n     */\n    static showRedPacketTransferPop(current_cash = null) {\n        cc.loader.loadRes('prefabs/red_packet_tansfer', (err, prefab) => {\n            if (!err) {\n                let pop = cc.instantiate(prefab);\n                pop.parent = cc.director.getScene();\n                pop.getComponent('red_packet_transfer').init(current_cash);\n            }\n        });\n    }\n    /**\n     * @description 获取弹窗根节点\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @returns\n     */\n    static getPopRoot() {\n        let scene = cc.director.getScene();\n        let pop_root = scene.getChildByName('Canvas').getChildByName('pop');\n        return pop_root;\n    }\n    /**\n     * @description 简单的贝塞尔曲线\n     * @author lu ning\n     * @date 2018-09-19\n     * @static\n     * @param {cc.Node} node\n     * @param {cc.Vec2} end\n     * @param {Function} end_callback\n     */\n    static simpleBezierAction(node, end, end_callback) {\n        //let sp        = node.position;\n        //let ep        = end;\n        // let dist      = Math.sqrt((sp.x - ep.x) * (sp.x - ep.x) + (sp.y - ep.y) * (sp.y - ep.y));//cc.pDistance(sp,ep);\n        // //cc.pSub();\n        // let normalPos = eq.sub(sp).normalizeSelf();//cc.pSub(ep,sp).normalizeSelf();\n        // let cfg = [cc.v2(sp.x + 30, sp.y + normalPos.y * dist / 2),\n        //            cc.v2(sp.x + normalPos.x * dist / 4 * 3, sp.y + normalPos.y * dist / 4 * 3),\n        //            ep];\n        if (node) {\n            node.runAction(\n                cc.sequence(\n                    cc.moveTo(0.8, end).easing(cc.easeSineIn()),\n                    cc.callFunc(() => {\n                        end_callback && end_callback();\n                    })\n                )\n            );\n        }\n    }\n    /**\n     * @description 是否是平板\n     * @author lu ning\n     * @date 2018-09-20\n     * @static\n     */\n    static isPad() {\n        let ret = false;\n        let sys_info = wx.getSystemInfoSync();\n        if (sys_info.windowHeight / sys_info.windowWidth < 1.777) {\n            return true;\n        }\n        return ret;\n    }\n    /**\n     * @description 通过appid获取游戏交叉导流信息\n     * @author lu ning\n     * @date 2018-09-29\n     * @static\n     * @param {String} wx_app_id\n     */\n    static getCrossAdConfigByAppId(wx_app_id) {\n        let ret = null;\n        let list = tywx.AdManager.rawAdInfoList;\n        \n        for (let i = 0; i < list.length; ++i) {\n            let tmp_c = list[i];\n            if (tmp_c.toappid === wx_app_id) {\n                ret = tmp_c;\n                break;\n            }\n        }\n        return ret;\n    }\n    /**\n     * @description 游戏跳转\n     * @author lu ning\n     * @date 2018-09-29\n     * @static\n     * @param {*} config\n     * @returns\n     */\n    static jump2MiniProgramByConfig(config) {\n        \n        try {\n\n            // this.genRandomSecondAdInfo();\n\n            //先尝试直接跳转\n            var skip_type = config.icon_skip_type;\n            var toappid = config.toappid;\n            var togame = config.togame;\n            var topath = config.path;\n            var second_toappid = config.second_toappid;\n\n            tywx.tt.log('topath ====>' + topath);\n\n            var that = this;\n\n            var icon_id = config.icon_id;\n            var config_id = '0';\n            var webpage_url = '';\n            var webpage_id = '0';\n\n            var bi_paramlist = [icon_id, config_id, webpage_url, toappid, togame, webpage_id, that.adType];\n\n            tywx.tt.log('bi_paramlist ====> ' + JSON.stringify(bi_paramlist));\n\n            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickAdBtn, bi_paramlist);\n\n            //! 先尝试直接跳转\n            if (wx && wx.navigateToMiniProgram) {\n\n                if (1 === skip_type) {\n\n                    wx.navigateToMiniProgram({\n                        appId: toappid,\n                        path: topath ? topath : '?from=adcross',\n                        envVersion: 'release',\n                        extraData: {\n                            from: topath ? topath : '?from=adcross',\n                        },\n                        success: function (res) {\n\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess, bi_paramlist);\n\n                            tywx.tt.log('wx.navigateToMiniProgram success');\n                            tywx.tt.log(res);\n                        },\n                        fail: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail, bi_paramlist);\n                            tywx.tt.log('wx.navigateToMiniProgram fail');\n                            tywx.tt.log(res);\n                        },\n                        complete: function (res) {\n                            tywx.tt.log('navigateToMiniProgram ==== complete');\n                            //that.resetBtnIcon();\n                        }\n                    });\n\n                    return;\n                } else if (2 === skip_type) {\n                    wx.navigateToMiniProgram({\n                        appId: second_toappid,\n                        path: topath ? topath : '?from=adcross',\n                        envVersion: 'release',\n                        extraData: {\n                            from: topath ? topath : '?from=adcross',\n                        },\n                        success: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameSuccess, bi_paramlist);\n                            tywx.tt.log('wx.navigateToMiniProgram success');\n                            tywx.tt.log(res);\n                        },\n                        fail: function (res) {\n                            tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeClickDirectToMiniGameFail, bi_paramlist);\n                            tywx.tt.log('wx.navigateToMiniProgram fail');\n                            tywx.tt.log(res);\n                        },\n                        complete: function (res) {\n                            //that.resetBtnIcon();\n                            tywx.tt.log('navigateToMiniProgram ==== complete');\n                        }\n                    });\n\n                } else {\n                    console.error('Unsupported skip type! Please Check!');\n                }\n\n                return;\n            }\n        } catch (err) {\n            tywx.tt.log(\"error:\", \"tywx.AdManager.onClickAdIconBtn——\" + JSON.stringify(err));\n        }\n    }\n    /**\n     * @description 是否是敏感ip\n     * @author lu ning\n     * @date 2018-09-30\n     * @static\n     * @param {Object} ip_info\n     * @returns\n     */\n    static isMinGanIp(ip_info) {\n        let ret = false;\n        console.log(ip_info.loc.length + \"敏感IP信息 = \" + JSON.stringify(ip_info));\n        let MinGanIpInfo = tywx.tt.configManager.getInstance().MinGanIp || tywx.tt.constants.MinGanIp;\n        if (ip_info.loc && ip_info.loc.length > 0) {\n            for (let i = 0; i < MinGanIpInfo.length; ++i) {\n                let info = MinGanIpInfo[i];\n                if (ip_info.loc[1] === info[0]) {\n                    if (info[1].length === 0) {\n                        // * 没有指定城市，只指定了省份，那么就是屏蔽整个省\n                        ret = true;\n                    } else {\n                        let lock_city = info[1];\n                        if (lock_city.indexOf(ip_info.loc[2]) >= 0) {\n                            ret = true;\n                            break;\n                        }\n                    }\n\n                }\n            }\n        }\n        tywx.tt.log('MINGAN_IP...' + ret);\n        return ret;\n    }\n\n\n    static sendWXMsg(msg) {\n        if (!window.wx) {\n            return;\n        }\n        wx.postMessage(msg);\n    }\n\n    static shareVideoCtr(share_control) {\n        var random = parseInt(Math.random() * 100);\n        // 看视频的情况 默认是视频或者敏感IP 并且能看视频\n        var calltype = 1;\n        if ((share_control[0] === \"video\" || tywx.tt.isMinGanIP) && tywx.tt.isCanWatchVideo) {\n            calltype = 2;\n            if (random > share_control[1]) {\n                calltype = 1;\n            }\n        } else if (share_control[0] === \"share\") {\n            calltype = 1;\n            if (random > share_control[1] && tywx.tt.isCanWatchVideo) {\n                calltype = 2;\n            }\n        }\n        return calltype;\n    }\n    /**\n     * @description 得到玩家的记录数据\n     * @param {String} key 存储玩家记录的键\n     */\n    static getPlayDataByKey(key) {\n        let data = tywx.tt.Utils.loadItem(key, -1);\n        return data;\n    }\n\n    /**\n     * 清空某个键值\n     * @param {String} key 键\n     * @param {Object} value 值\n     */\n    static clearPlayDataByKey(key, value = -1, local = true) {\n        tywx.tt.Utils.saveItem(key, value, local)\n    }\n\n    /** \n     * @description 显示提示框\n     */\n    static showAlert(text) {\n        cc.loader.loadRes('prefabs/AlertView', (err, prefab) => {\n            if (!err) {\n                console.log(\"show text\" + text);\n                let pop = cc.instantiate(prefab);\n                cc.director.getScene().addChild(pop, 99999);\n                pop.getComponent('AlertView').setText(text);\n                pop.getComponent('AlertView').popView();\n            } else {\n                tywx.tt.log(TAG, \"显示提示框失败\");\n            }\n        });\n    }\n\n};\n\nmodule.exports = Utils;"]}