{"version":3,"sources":["ads_list.js"],"names":["TAG","node_path","ads_node","cc","Class","extends","Component","properties","adnode","Prefab","listBackbtn","Button","contentnode","Node","background","scrollNode","setData","data","tywx","tt","log","JSON","stringify","initUI","showOrHide","state","show","hide","tnode","width","height","addChild","tindex","trow","t","ads_data","length","anchorX","anchorY","x","y","instantiate","ads_script","getComponent","vpos","v2","error","position","onLoad","node","game","canvas","active","Math","abs","update","scaleX"],"mappings":"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","file":"ads_list.js","sourceRoot":"../../../../../../assets/scripts/game/cross_ad","sourcesContent":["/** \n * @description \n * created by gyc on 20181012\n */\n\nlet TAG = \"[game/cross_ad/ads_node.js]\";\nlet node_path = \"prefabs/ads_node\";\n\nlet ads_node = cc.Class({\n    extends: cc.Component,\n    properties: {\n        adnode: cc.Prefab,\n        listBackbtn:cc.Button,\n        contentnode: cc.Node,\n        background:cc.Node,\n        scrollNode:cc.Node,\n    },\n\n    /**\n     * @description 设置交叉倒流的数据\n     * @param {Object} data 交叉倒流的数据\n     */\n    setData: function (data) {\n        this.data = data;\n        tywx.tt.log(TAG, \"广告设置了数据 \" + JSON.stringify(data));\n        this.initUI();\n    },\n\n\n    showOrHide:function(){\n         if (this.state == 0){\n             this.show();\n         }else{\n             this.hide();\n         }\n    },\n\n    hide:function(){\n       this.state = 0;\n    },\n    \n\n    show: function () {\n        this.state = 1;\n    },\n\n    /**\n     * @description 初始化UI\n     */\n    initUI: function () {\n        var tnode = new cc.Node();\n        tnode.width = 560;\n        tnode.height = 120;\n        this.contentnode.addChild(tnode);\n        var tindex = 0;\n        var trow = 1;\n        for (var t = 0; t < this.data.ads_data.length; t++) {\n            if((t + 1) % 3 == 1){\n               tnode = new cc.Node();\n               tnode.width = 560;\n               tnode.height = 120;\n               tnode.anchorX = 0;\n               tnode.anchorY = 0;\n               tindex = 0;\n               trow ++;\n               this.contentnode.addChild(tnode);\n            }\n            tnode.x = 0;\n            tnode.y = (trow - 2) * -160;\n            let data = this.data.ads_data[t];\n            let adnode = cc.instantiate(this.adnode);\n            let ads_script = adnode.getComponent('ad_node');\n            ads_script.setData(data);\n            let vpos = cc.v2(90 + (tindex * 160) - 280, -70);\n            tywx.tt.error(TAG, \"vpos = \" + JSON.stringify(vpos));\n            adnode.position = vpos;\n            tnode.addChild(adnode)\n            tindex ++;\n            \n        }\n    },\n\n\n\n    // use this for initialization\n    onLoad: function () {\n           this.node.width = cc.game.canvas.width;\n           this.node.height = cc.game.canvas.height;\n           this.scrollNode.position.x = -this.scrollNode.width;\n           this.background.active = false;\n           this.state = 0;\n           this.scrollNode.x = -Math.abs(this.scrollNode.width + 360);\n          \n    },\n\n    update:function(){\n        if(this.state == 0){\n           if (Math.abs(this.scrollNode.x - 30) < Math.abs(this.scrollNode.width + 360)) {\n               this.scrollNode.x = this.scrollNode.x - 30;\n           }else{\n               this.background.active = false;\n               this.listBackbtn.node.scaleX = 1;\n               this.scrollNode.x = -Math.abs(this.scrollNode.width + 360);\n           }\n        } else if(this.state == 1) {\n           if (this.scrollNode.x + 25 < -360) {\n               this.scrollNode.x = this.scrollNode.x + 25;\n           }else{\n               this.background.active = true;\n               this.listBackbtn.node.scaleX = -1;\n               this.scrollNode.x = -360;\n           }\n        }\n    }\n    \n\n});\n\n"]}