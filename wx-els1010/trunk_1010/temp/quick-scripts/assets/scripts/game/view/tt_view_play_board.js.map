{"version":3,"sources":["tt_view_play_board.js"],"names":["TAG","Board","require","cc","Class","extends","Component","properties","prefabBlock","Prefab","prefabPreview","addscoreLabelPrefab","labelScore","Label","czNumberLabel","repNumberLabel","friendnode","Node","helpTip","helpts","Sprite","allblock","helpTipLabel","maxScoreLabel","lotteryNode","shouzhiNode","blinkNode","alertNode","chuiziNoneNode","chuiziNode","onLoad","playdata","getPlayHistoryData","node","width","game","canvas","height","root","getChildByName","hammerTouch","active","hammerIcon","board","previews","lotteryboxnumber","previewsPos","touchIdx","useRepeateNumber","touchHeight","isTouchLocked","isUsingHammer","reset","tywx","tt","BoardView","initLayout","initBoardView","initTouch","initHammerTouch","initChuiZiAndRepeate","onRefreshScore","storescorevalue","Utils","loadItem","constants","TT_SCORE","flushMaxScore","initPreviewBlocks","getHelp","showHelp","NotificationCenter","listen","events","TT_FILL_BOARD","onFillBoard","TT_RESET_PREVIEWS","onResetPreviews","TT_CLEAR_ROW","onClearRow","TT_REFRESH_SCORE","TT_CLEAR_HAMMER","onClearHammer","TT_REFRESH_PREVIEW_STAT","refreshPreStatue","HELP_ADD","helpAdd","initHistoryPlayData","hideHarmer","hide","checkPreviewActives","canputnumber","i","length","previewscr","getComponent","console","log","isCanPut","parseInt","score","string","curgamescene","start","onDestroy","ignoreScope","layout","nodeTop","nodeBoard","nodeBoardBottom","nodeBottom","cw","ch","top_y","board_y","board_bottom_y","bottom_y","isIpx","is2To1","getBoundingBox","position","v2","BoardWidth","w","h","c_s","BlockSize","size","scalebl","theight","ttheight","padding_left","bpos","padding_bottom","y","tpos2","convertToWorldSpace","tpos","convertToWorldSpaceAR","tpy","hc","blockViews","x","lb_x","lb_y","rt_x","rt_y","idx","j","tmp_block","instantiate","parent","setStat","setBgColor","lbPos","rtPos","self","is_ipx","ch2","previewConfigs","getPreviewConfigs","tmp_preview","init","push","on","EventType","TOUCH_START","pos","event","getLocation","qzShowBase","pretouchpos","preview","previewStat","helpindex","AudioManager","getInstance","playSound","SOUNDS","COMBO","touch","showAlert","TOUCH_MOVE","Math","abs","refreshShadowFrame","TOUCH_END","is_put_success","preview_sc","touchCancle","config","fillBoard","put","resetPreviews","refreshPreviewStat","checkClear","getConfig","hideAllBlockFrames","showHammerSelectFrameByPosition","useHammerByPosition","hideAllBlockMask","select_preview","select_pos","select_config","c_r","c_c","BoardHeight","m_r","m_c","row","r","col","c","tmp_block_view","tmp_block_sc","BlockMap","debug_infos","line","dis","b_r","b_c","warn","ret","view_data","getBlockViewByPosition","blockView","isCanFill","centerRow","centerCol","fillBaordByConfig","block_view","params","fillblocks","JSON","stringify","forEach","e","view","resetByConfig","gameover","setScore","mr","mc","repeateRepeatNumberCall","clear_rows","clearRows","clear_cols","clearCols","clear_blocks","lotteryboxs","indexOf","ani_time","delay_time","tcleartypes","showAddScore","rows","cols","getAddScoreByClear","SHUIXIAQIPAO","is_last","display","runAction","sequence","delayTime","spawn","scaleTo","fadeOut","callFunc","scale","opacity","clearBlocks","onBtnResetPreviews","repeatNumber","useRepeateCall","forseResetPreviews","share_control","configManager","gethuanyihuan","calltype","shareVideoCtr","hideWXBanner","tipview","show","success","tip","ShareConfig","GET_HUNAYIHUAN_NUMBER_SHARE","GET_HUNAYIHUAN_NUMBER_VIEDO","onBtnUseHammer","czInitNumber","lqHarmmer","getchuizi","addCZCallBack","GET_CHUIZI_NUMBER_SHARE","GET_CHUIZI_NUMBER_VIEDO","tmp_view","somedata","showLottery","b_w","b_h","showHammerShadowByRowAndCol","hideMask","shadow_blocks","data","tmp_col","tmp_row","showMask","hammerClearByRowAndCol","useCZNumber","blocks","items","parse","czNumber","tiIndex","titem","id","num","add","hadcut","saveItem","error","repnum","hadadd","item","name","flushPreviewStatueUI","stats","haszeorstate","ti1","setGrey","hideGrey","play","hadrefresh","time","hasclear","doGameOver","deal","tg","tgameover","closecall","friend","setStop","fuhuo","bordI","tdata","canadd","emptyBlocks","delete","p4pos","scale1","scale2","delay","seq","zIndex","repeatForever","rep","getHelpPreviewBlockData","showzhiAction","stopAllActions","Animation","move","moveTo","move2","seq2","Timer","setTimer","Blocks","hadhelp","recoverGame","clears","columns","ti","column","param","lottery","boxs","removeLotteryView","cjIndex","scoreIndex","rate","max","random","tbord","tgz","sbord","addLotteryBox","getPlayDataByKey","PlayDataKeys","ttplaydata","huanyihuan","alle","tr","bord","tc","cdata","fillBord","previewdata","previewsdata","previewIndex","clearPlayDataByKey","allcell","rowindex","filleindex","colindex","addscoreLabel","addChild","randomshowIndex","poscell","hideAllBlocks","blocksAni","allcellsanis","allcells","dir","outnumber","right","up","left","down","tindex","showcall","block","totaltime","trepeate","repeat"],"mappings":"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","file":"tt_view_play_board.js","sourceRoot":"../../../../../../assets/scripts/game/view","sourcesContent":["let TAG = '[tt_view_play_board]';\nlet Board = require('../model/tt_model_board.js');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        prefabBlock: cc.Prefab,\n        prefabPreview: cc.Prefab,\n        addscoreLabelPrefab: cc.Prefab,\n        labelScore: cc.Label,\n        czNumberLabel: cc.Label,\n        repNumberLabel: cc.Label,\n        friendnode: cc.Node,\n        helpTip: cc.Node,\n        helpts: cc.Sprite,\n        allblock: [],\n        helpTipLabel: cc.Label,\n        maxScoreLabel: cc.Label,\n        lotteryNode: cc.Node,\n        shouzhiNode: cc.Node,\n        blinkNode: cc.Node,\n        alertNode: cc.Node,\n        chuiziNoneNode: cc.Node,\n        chuiziNode: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.playdata = this.getPlayHistoryData();\n        this.node.width = cc.game.canvas.width;\n        this.node.height = cc.game.canvas.height;\n        this.root = this.node.getChildByName('root');\n        this.root.width = cc.game.canvas.width;\n        this.root.height = cc.game.canvas.height;\n        this.hammerTouch = this.node.getChildByName('hammer_touch');\n        this.hammerTouch.active = false;\n        this.hammerIcon = this.hammerTouch.getChildByName('hammer_icon');\n        this.hammerIcon.active = false;\n        this.board = new Board();\n        this.previews = [];\n        this.lotteryboxnumber = 0;\n        this.previewsPos = [];\n        this.touchIdx = -1;\n        this.useRepeateNumber = 0;\n        this.touchHeight = 240;\n        this.isTouchLocked = false; // *  点击是否被锁住\n        this.isUsingHammer = false; // * 是否在使用 锤子道具\n        this.board.reset();\n        tywx.tt.BoardView = this;\n        tywx.tt.Board = this.board;\n\n        this.initLayout();\n        this.initBoardView();\n\n        this.initTouch();\n        this.initHammerTouch();\n        this.initChuiZiAndRepeate();\n        this.onRefreshScore();\n\n        this.storescorevalue = tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0);\n        this.flushMaxScore();\n\n        this.initPreviewBlocks();\n        if (this.getHelp() == 1) {\n            this.showHelp();\n            this.helpTip.active = true;\n        }\n\n\n        // this.addCZCallBack(1);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_FILL_BOARD, this.onFillBoard, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_RESET_PREVIEWS, this.onResetPreviews, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_ROW, this.onClearRow, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_SCORE, this.onRefreshScore, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_CLEAR_HAMMER, this.onClearHammer, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_REFRESH_PREVIEW_STAT, this.refreshPreStatue, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.HELP_ADD, this.helpAdd, this);\n        this.initHistoryPlayData();\n    },\n\n    // 初始化是否有锤子\n    hideHarmer:function(hide){\n        if (hide){\n            this.chuiziNoneNode.active = true;\n            this.chuiziNode.active = false;\n        } else{\n            this.chuiziNoneNode.active = false;\n            this.chuiziNode.active = true;\n        }\n        \n    },\n\n    // 判断当前是否需要检测已经全部拖完preview\n    checkPreviewActives:function(){\n        let canputnumber = 0;\n        for (let i = 0; i < this.previews.length; i++) {\n            let previewscr = this.previews[i].getComponent('tt_view_priview_blocks');\n            console.log(previewscr.node.active ,\"当前的拖动快是否能PUT = \", previewscr.isCanPut());\n            if (previewscr.node.active == true){\n               canputnumber ++;\n            }\n        }\n        return canputnumber;\n    },\n\n    /**\n     * @description 刷新最高分\n     */\n    flushMaxScore: function () {\n        if (parseInt(this.storescorevalue) < this.board.score) {\n            this.maxScoreLabel.string = \"历史最佳:\" + this.board.score;\n            tywx.tt.curgamescene.flushMaxScore(this.board.score);\n        } else {\n            tywx.tt.curgamescene.flushMaxScore(this.storescorevalue)\n        }\n    },\n\n    start() {\n\n    },\n    onDestroy() {\n        tywx.NotificationCenter.ignoreScope(this);\n    },\n\n    // update (dt) {},\n    initLayout() {\n        this.layout = this.root.getChildByName('layout');\n        this.nodeTop = this.layout.getChildByName('node_top'); //1085\n        this.nodeBoard = this.layout.getChildByName('node_board'); //452\n        this.nodeBoardBottom = this.layout.getChildByName('node_board_bottom'); //261\n        this.nodeBottom = this.layout.getChildByName('node_bottom'); // 0\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n\n\n        let top_y = (1085 / 1280) * ch;\n        let board_y = (410 / 1280) * ch;\n        let board_bottom_y = (190 / 1280) * ch;\n        let bottom_y = 0;\n\n        if (tywx.tt.Utils.isIpx()) {\n            top_y -= 30;\n            board_y += 50;\n        } else if (tywx.tt.Utils.is2To1()) {\n            top_y -= 150;\n        }\n\n        if (ch < 1280) {\n            top_y = this.nodeBoard.getBoundingBox().height + board_y;\n        }\n\n        if (cw / ch >= 0.7) {\n            // * pad\n            board_bottom_y = 0;\n            board_y = board_bottom_y + this.nodeBoardBottom.getBoundingBox().height;\n            top_y = board_y + this.nodeBoard.getBoundingBox().height;\n        }\n\n        this.nodeTop.position = cc.v2(0, top_y);\n        this.nodeBoard.position = cc.v2(0, board_y);\n        this.nodeBoardBottom.position = cc.v2(0, board_bottom_y);\n        this.nodeBottom.position = cc.v2(0, bottom_y);\n\n        // let is_ipx = ch / cw >= 1.9; // *\n        // if (is_ipx) {\n        //     this.nodeTop.getChildByName(\"toproot\").y = this.nodeTop.getChildByName(\"toproot\").y - 80;\n        //     this.nodeBoard.y = this.nodeBoard.y - 90;\n        //     this.nodeBoard.getChildByName(\"bg\").y = this.nodeBoard.getChildByName(\"bg\").y - 90;\n        // }\n    },\n\n\n\n    initBoardView() {\n        // * init board view\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let c_s = tywx.tt.constants.BlockSize;\n        let size = this.root.getBoundingBox();\n        // let block_scale = size.width / 720;\n        // c_s.width = c_s.width * block_scale;\n        // c_s.height = c_s.height * block_scale;\n\n        let scalebl = 720 / this.root.width;\n        let theight = 1280 / this.root.height;\n        let ttheight = theight / 2;\n        let padding_left = (this.root.width * scalebl - w * c_s.width) / 2;\n        var bpos = this.nodeBoard.position;\n        let padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        let tpos2 = this.nodeBoard.convertToWorldSpace(cc.v2(this.nodeBoard.width / 2, this.nodeBoard.height / 2));\n        let tpos = this.nodeBoard.convertToWorldSpaceAR(cc.v2(this.nodeBoard.width / 2, 0));\n        let tpy = tpos.y - tpos2.y;\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let hc = 1280 / cc.game.canvas.height;\n        // let is_ipx = ch / cw >= 1.9; // *\n        // if (is_ipx) {\n        //     padding_bottom = tpos.y - this.nodeBoard.height / 2 - 220 + ((220 - (220 * hc)) / 2);\n        // }\n\n        this.blockViews = [];\n\n        let [x, y] = [0, 0];\n        let [lb_x, lb_y, rt_x, rt_y] = [0, 0, 0, 0];\n        let idx = true;\n        for (let i = 0; i < h; ++i) {\n            y = padding_bottom + i * c_s.height;\n            this.blockViews[i] = [];\n            idx = i % 2 === 0 ? true : false;\n            for (let j = 0; j < w; ++j) {\n                x = padding_left + j * c_s.width;\n                let tmp_block = cc.instantiate(this.prefabBlock);\n                tmp_block.parent = this.root;\n                tmp_block.getComponent('tt_view_block').setStat(-2);\n                tmp_block.getComponent('tt_view_block').setBgColor(idx ? 1 : 2);\n                idx = !idx;\n                tmp_block.position = cc.v2(x, y);\n                this.blockViews[i][j] = tmp_block;\n                lb_x = x <= lb_x ? x : lb_x;\n                rt_x = x >= rt_x ? x : rt_x;\n            }\n            lb_y = y <= lb_y ? y : lb_y;\n            rt_y = y >= rt_y ? y : rt_y;\n        }\n        this.lbPos = cc.v2(lb_x, lb_y);\n        this.rtPos = cc.v2(rt_x + c_s.width, rt_y + c_s.height);\n    },\n\n    initPreviewBlocks() {\n        this.previews = [];\n        let self = this;\n        let [x, y] = [0, this.nodeBoardBottom.y];\n        let bpos = this.nodeBoardBottom.position;\n        let padding_bottom = bpos.y; //size.height * 0.35; //(size.height - h * c_s.height) / 2;\n        let tpos = this.nodeBoardBottom.convertToWorldSpaceAR(cc.v2(0, 0));\n        let [cw, ch] = [cc.game.canvas.width, cc.game.canvas.height];\n        let is_ipx = ch / cw >= 1.9; // *\n        let ch2 = 1280 / cc.game.canvas.height;\n        // if (is_ipx) {\n        //     padding_bottom = tpos.y - 261 - 452 + 20;\n        // } else {\n        //     padding_bottom = padding_bottom + this.nodeBoardBottom.height / 2;\n        // }\n        padding_bottom = padding_bottom + this.nodeBoardBottom.height / 2;\n        let previewConfigs = this.board.getPreviewConfigs();\n        for (let i = 0; i < previewConfigs.length; i++) {\n            if (previewConfigs[i]) {\n                let tmp_preview = cc.instantiate(this.prefabPreview);\n                tmp_preview.parent = this.root;\n                tmp_preview.getComponent('tt_view_priview_blocks').init(previewConfigs[i]);\n                self.previews.push(tmp_preview);\n                x = (i + 1) * 144 + 144 / 2;\n                tmp_preview.position = cc.v2(x, padding_bottom);\n                this.previewsPos.push(cc.v2(x, padding_bottom));\n            }\n        }\n    },\n    initTouch() {\n        let self = this;\n        this.root.on(cc.Node.EventType.TOUCH_START, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch start');\n            let pos = event.getLocation();\n            tywx.tt.curgamescene.qzShowBase();\n            self.pretouchpos = pos;\n            self.touchIdx = -1;\n            for (let i = 0; i < self.previews.length; i++) {\n                let preview = self.previews[i];\n                let [x, y] = [preview.x, preview.y];\n                let [w, h] = [130, 130]; //[preview.width,preview.height];\n                let [lb_x, lb_y] = [x - w / 2, y - h / 2];\n                let [rt_x, rt_y] = [x + w / 2, y + h / 2];\n                if (pos.x >= lb_x && pos.x <= rt_x && pos.y >= lb_y && pos.y <= rt_y) {\n                    if (tywx.tt.Board.previewStat[i] == 1 || (this.helpindex && this.helpindex < 3 && this.helpindex != -1)) {\n                        self.touchIdx = i;\n                        preview.position = cc.v2(pos.x, pos.y);\n                        tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.COMBO[0]);\n                        preview.getComponent('tt_view_priview_blocks').touch();\n                        tywx.tt.log(TAG, `x[${lb_x},${pos.x},${rt_x}],y[${lb_y},${pos.y},${rt_y}]`);\n                    } else {\n                        tywx.tt.Utils.showAlert(\"点击使用换一换\");\n                    }\n\n                }\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            if (self.isTouchLocked) return;\n            let pos = event.getLocation();\n            if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                return;\n            }\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let preview = self.previews[self.touchIdx];\n                preview.position = cc.v2(pos.x, pos.y + this.touchHeight);\n                self.refreshShadowFrame();\n            }\n        });\n        this.root.on(cc.Node.EventType.TOUCH_END, event => {\n            if (self.isTouchLocked) return;\n            tywx.tt.log(TAG, 'touch end');\n\n            let pos = event.getLocation();\n\n\n            if (self.touchIdx !== -1 && self.touchIdx < self.previews.length) {\n                let is_put_success = false;\n                if (pos.x >= self.lbPos.x &&\n                    pos.x <= self.rtPos.x &&\n                    pos.y + this.touchHeight >= self.lbPos.y &&\n                    pos.y + this.touchHeight <= self.rtPos.y) {\n                    is_put_success = true;\n                }\n                let preview = self.previews[self.touchIdx];\n\n                preview.position = self.previewsPos[self.touchIdx];\n                let preview_sc = preview.getComponent('tt_view_priview_blocks');\n                if (Math.abs(self.pretouchpos.x - pos.x) < 10 && Math.abs(self.pretouchpos.y - pos.y) < 10) {\n                    preview_sc.touchCancle();\n                    return;\n                }\n                if (is_put_success) {\n                    let config = preview_sc.config;\n                    if (self.fillBoard(cc.v2(pos.x, pos.y + this.touchHeight), config)) {\n                        preview_sc.put();\n                         console.log(\"当前什么情况333 refreshPreviewStat\");\n                        self.board.resetPreviews(true);\n                        console.log(\"当前什么情况4444 refreshPreviewStat\");\n                        self.board.refreshPreviewStat(true);\n                         console.log(\"当前什么情况5555 refreshPreviewStat\");\n                        self.board.checkClear();\n                    } else {\n                        self.board.refreshPreviewStat();\n                        preview_sc.touchCancle();\n                    }\n                } else {\n                    preview_sc.touchCancle();\n                    tywx.tt.log(TAG, \"getConfig2 = \" + preview_sc.getConfig())\n                }\n            }\n            self.hideAllBlockFrames();\n            self.touchIdx = -1;\n        });\n    },\n\n    initHammerTouch() {\n        let self = this;\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_START, event => {\n            self.hammerIcon.active = true;\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            let pos = event.getLocation();\n            self.showHammerSelectFrameByPosition(pos);\n        });\n        this.hammerTouch.on(cc.Node.EventType.TOUCH_END, event => {\n            let pos = event.getLocation();\n            self.hammerTouch.active = false;\n            self.hammerIcon.active = false;\n            self.useHammerByPosition(pos);\n            self.hideAllBlockMask();\n        });\n    },\n    refreshShadowFrame() {\n        if (this.touchIdx < 0 || this.touchIdx >= this.previews.length) {\n            // tywx.tt.warn(TAG, `wrong touch index when call refreshShadowFrame , touchIdx=${this.touchIdx}`);\n            return;\n        }\n        //tywx.tt.log(TAG,`refreshShadowFrame touchIdx=${this.touchIdx}`);\n        let select_preview = this.previews[this.touchIdx];\n        let select_pos = select_preview.position;\n        let select_config = select_preview.getComponent('tt_view_priview_blocks').getConfig();\n        let [c_r, c_c] = [-1, -1];\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n      \n        let row = this.blockViews.length;\n        for (let r = 0; r < row; ++r) {\n            let col = this.blockViews[r].length;\n            for (let c = 0; c < col; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (select_pos.x >= lb_x &&\n                    select_pos.x <= rt_x &&\n                    select_pos.y >= lb_y &&\n                    select_pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                }\n                tmp_block_sc.setStat(-2);\n            }\n        }\n\n        if (c_r !== -1 && c_c !== -1) {\n            let BlockMap = tywx.tt.constants.BlockMap;\n            let debug_infos = [];\n            for (let r = 0; r < select_config.length; ++r) {\n                let line = select_config[r];\n                for (let c = 0; c < line.length; ++c) {\n                    let dis = BlockMap[r][c];\n                    if (select_config[r][c] !== 0) {\n                        let [b_r, b_c] = [c_r + dis[1], c_c + dis[0]];\n                        if (b_r >= 0 && b_r < m_r &&\n                            b_c >= 0 && b_c < m_c) {\n                            let tmp_block_view = this.blockViews[b_r][b_c];\n                            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n                            tmp_block_sc.setStat(-1);\n                            debug_infos.push(`{c=${b_c},r=${b_r}}`);\n                        }\n                    }\n                }\n            }\n            if (debug_infos.length < 4) {\n                tywx.tt.warn(TAG, `{cr=${c_r},cc=${c_c}}`, [...debug_infos]);\n            }\n        }\n    },\n    fillBoard(pos, config) {\n        let ret = false;\n        let view_data = this.getBlockViewByPosition(pos);\n        // console.log(\"viewData = \" + view_data.centerRow, view_data.centerCol);\n        if (view_data.blockView) {\n            if (this.board.isCanFill(view_data.centerRow, view_data.centerCol, config)) {\n                ret = true;\n                tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.COMBO[1]);\n                this.board.fillBaordByConfig(view_data.centerRow, view_data.centerCol, config, this.touchIdx);\n            } else {\n                ret = false;\n            }\n        }\n        return ret;\n    },\n    /**\n     * @description\n     * @author lu ning\n     * @date 2018-10-09\n     * @param {cc.Vec2} pos 指定坐标\n     * @returns {Object} ret \n     *    ret.blockView\n     *    ret.centerRow\n     *    ret.centerCol\n     */\n    getBlockViewByPosition(pos) {\n        let ret = null;\n        let [m_r, m_c] = [tywx.tt.constants.BoardHeight, tywx.tt.constants.BoardWidth];\n        let [c_r, c_c] = [-1, -1];\n        let block_view = null;\n        for (let r = 0; r < m_r; ++r) {\n            for (let c = 0; c < m_c; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, w, h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + w, y + h];\n                if (pos.x >= lb_x &&\n                    pos.x <= rt_x &&\n                    pos.y >= lb_y &&\n                    pos.y <= rt_y) {\n                    [c_r, c_c] = [r, c];\n                    block_view = tmp_block_view;\n                    break;\n                }\n            }\n        }\n        ret = {\n            blockView: block_view,\n            centerRow: c_r,\n            centerCol: c_c\n        };\n        return ret;\n    },\n    onFillBoard(params) {\n        this.fillblocks = params;\n        tywx.tt.log(TAG, 'onFillBoard' + JSON.stringify(params));\n        let self = this;\n        params.forEach(e => {\n            let tmp_block_view = self.blockViews[e[0]][e[1]];\n            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n            tmp_block_sc.setStat(e[2]);\n        });\n\n    },\n    onResetPreviews() {\n        let previewConfigs = this.board.getPreviewConfigs();\n        tywx.tt.log(TAG, 'onResetPreviews==>' + previewConfigs.length);\n        for (let i = 0; i < previewConfigs.length; i++) {\n            let config = previewConfigs[i];\n            let view = this.previews[i];\n            tywx.tt.log(TAG, 'onResetPreviews==>' + i);\n            view.getComponent('tt_view_priview_blocks').resetByConfig(config);\n        }\n    },\n\n    reset() {\n        this.board.reset();\n        this.gameover = false;\n        this.board.setScore(0);\n        let [mr, mc] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardHeight];\n        for (let r = 0; r < mr; ++r) {\n            for (let c = 0; c < mc; ++c) {\n                this.blockViews[r][c].getComponent('tt_view_block').setStat(0);\n            }\n        }\n        this.onResetPreviews();\n        this.onRefreshScore();\n        this.lotteryboxnumber = 0;\n        this.repeateRepeatNumberCall();\n        this.storescorevalue = tywx.tt.Utils.loadItem(tywx.tt.constants.TT_SCORE, 0);\n        this.flushMaxScore();\n    },\n    onClearRow() {\n        let clear_rows = this.board.clearRows;\n        let clear_cols = this.board.clearCols;\n        let clear_blocks = [];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        let self = this;\n        this.lotteryboxs = [];\n        clear_rows.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = self.blockViews[e][c];\n                if (this.board.board[e][c] == 12) {\n                    this.lotteryboxs.push(12);\n                }\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        clear_cols.forEach(e => {\n            tywx.tt.log(TAG, `onClearRow:==${e}`);\n            for (let r = 0; r < h; ++r) {\n                let tmp_block_view = self.blockViews[r][e];\n                if (this.board.board[r][e] == 12) {\n                    this.lotteryboxs.push(12);\n                }\n                if (clear_blocks.indexOf(tmp_block_view) < 0) {\n                    clear_blocks.push(tmp_block_view);\n                }\n            }\n        });\n        let ani_time = 0.2;\n        let delay_time = 0.05;\n        let tcleartypes = [];\n        this.showAddScore({\n            rows: this.board.clearRows,\n            cols: this.board.clearCols,\n        }, this.board.getAddScoreByClear(this.board.clearRows, this.board.clearCols));\n        if (clear_blocks.length > 0) {\n            tywx.tt.AudioManager.getInstance().playSound(tywx.tt.constants.SOUNDS.SHUIXIAQIPAO);\n            \n            this.isTouchLocked = true;\n            for (let i = 0; i < clear_blocks.length; ++i) {\n                let tmp_block_view = clear_blocks[i];\n                let is_last = i === (clear_blocks.length - 1);\n\n                let display = tmp_block_view.getChildByName('display');\n                display.runAction(\n                    cc.sequence(\n                        cc.delayTime(i * delay_time),\n                        cc.spawn(\n                            cc.scaleTo(ani_time, 0.1),\n                            cc.fadeOut(ani_time)\n                        ),\n                        cc.callFunc(() => {\n                            display.scale = 1.0;\n                            display.opacity = 255;\n                            tmp_block_view.getComponent('tt_view_block').setStat(0);\n                            if (is_last) {\n                                self.board.clearBlocks();\n                                self.isTouchLocked = false;\n                            }\n                        })\n                    )\n                );\n            }\n        }\n\n\n    },\n    onBtnResetPreviews() {\n        if (this.isTouchLocked) return;\n        tywx.tt.log(TAG, 'onBtnResetPreviews');\n        if (this.helpindex && this.helpindex > 0) {\n            return;\n        }\n        if (this.repeatNumber > 0) {\n            this.useRepeateCall();\n            this.board.forseResetPreviews();\n        } else {\n            const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.gethuanyihuan : [\"share\", 50];\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            const self = this;\n            tywx.tt.Utils.hideWXBanner();\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.repeateRepeatNumberCall();\n                },\n                tip: \"免费获得3次换一换！可以在危险的时候使用。\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_VIEDO,\n                calltype: calltype,\n\n            });\n\n        }\n    },\n    onBtnUseHammer() {\n        if (this.isTouchLocked) return;\n        if (this.helpindex && this.helpindex > 0) {\n            return;\n        }\n        tywx.tt.log(TAG, 'onBtnUseHammer');\n        if (this.czInitNumber > 0) {\n            this.hideHarmer(false);\n            this.hammerTouch.active = true;\n        } else {\n            this.hideHarmer(true);\n            this.lqHarmmer();\n        }\n    },\n\n    lqHarmmer:function(){\n        const self = this;\n        const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.getchuizi : [\"share\", 50];\n        const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n        tywx.tt.Utils.hideWXBanner();\n        tywx.tt.tipview.show({\n            success: function () {\n                self.addCZCallBack(1);\n                self.hideHarmer(false);\n            },\n            tip: \"免费获得1个锤子！可以用来点击消除3*3范围的方块.\",\n            config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_CHUIZI_NUMBER_VIEDO,\n            calltype: calltype,\n        });\n    },\n    \n    hideAllBlockFrames() {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_view = this.blockViews[r][c];\n                let tmp_block_sc = tmp_view.getComponent('tt_view_block');\n                tmp_block_sc.setStat(-2);\n            }\n        }\n    },\n\n    /**\n     * @description 刷分\n     * @param {Object} somedata 刷分的时候自带刷新数据\n     */\n    onRefreshScore(somedata) {\n        console.log(\"当前的分数 = \", this.board.score);\n        tywx.tt.curgamescene.setScore(this.board.score);\n        if (somedata) {\n            this.showLottery(somedata);\n        }\n    },\n    showHammerSelectFrameByPosition(pos) {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_block_view = this.blockViews[r][c];\n                let [x, y, b_w, b_h] = [tmp_block_view.x, tmp_block_view.y, tmp_block_view.width, tmp_block_view.height];\n                let [lb_x, lb_y, rt_x, rt_y] = [x, y, x + b_w, y + b_h];\n                if (pos.x >= lb_x && pos.x <= rt_x &&\n                    pos.y >= lb_y && pos.y <= rt_y) {\n                    tywx.tt.log(TAG, `showHammerSelectFrameByPosition==>${r},${c}`);\n                    this.showHammerShadowByRowAndCol(r, c);\n                    this.hammerIcon.position = tmp_block_view.position;\n                    break;\n                }\n            }\n        }\n    },\n    hideAllBlockMask() {\n        for (let r = 0; r < this.blockViews.length; ++r) {\n            for (let c = 0; c < this.blockViews[r].length; ++c) {\n                this.blockViews[r][c].getComponent('tt_view_block').hideMask();\n            }\n        }\n    },\n    showHammerShadowByRowAndCol(row, col) {\n        let shadow_blocks = [\n            [\n                [-1, 1],\n                [0, 1],\n                [1, 1]\n            ],\n            [\n                [-1, 0],\n                [0, 0],\n                [1, 0]\n            ],\n            [\n                [-1, -1],\n                [0, -1],\n                [1, -1]\n            ]\n        ];\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        this.hideAllBlockMask();\n        for (let r = 0; r < 3; ++r) {\n            for (let c = 0; c < 3; ++c) {\n                let data = shadow_blocks[r][c];\n                let tmp_col = col + data[0];\n                let tmp_row = row + data[1];\n                if (tmp_col >= 0 && tmp_row >= 0 && tmp_col < w && tmp_row < h) {\n                    let tmp_block = this.blockViews[tmp_row][tmp_col];\n                    let tmp_block_sc = tmp_block.getComponent('tt_view_block');\n                    tmp_block_sc.showMask();\n                }\n            }\n        }\n    },\n    useHammerByPosition(pos) {\n        let data = this.getBlockViewByPosition(pos);\n        tywx.tt.log(TAG, `usehammerByPosition>>>row:${data.centerRow},col:${data.centerCol}`);\n        if (data.blockView) {\n            this.board.hammerClearByRowAndCol(data.centerRow, data.centerCol);\n            // 刷新锤子的显示\n            this.useCZNumber(-1);\n        }\n    },\n    onClearHammer(blocks) {\n        if (blocks.length > 0) this.isTouchLocked = true;\n        else return;\n        let self = this;\n        let delay_time = 0.05;\n        let ani_time = 0.2;\n        for (let i = 0; i < blocks.length; i++) {\n            let is_last = i === (blocks.length - 1);\n            let tmp_row = blocks[i][0];\n            let tmp_col = blocks[i][1];\n            let tmp_block_view = this.blockViews[tmp_row][tmp_col];\n            let display = tmp_block_view.getChildByName('display');\n            display.runAction(\n                cc.sequence(\n                    cc.delayTime(i * delay_time),\n                    cc.spawn(\n                        cc.scaleTo(ani_time, 0.1),\n                        cc.fadeOut(ani_time)\n                    ),\n                    cc.callFunc(() => {\n                        display.scale = 1.0;\n                        display.opacity = 255;\n                        tmp_block_view.getComponent('tt_view_block').setStat(0);\n                        if (is_last) {\n                            self.isTouchLocked = false;\n                            tywx.tt.Board.refreshPreviewStat();\n                        }\n                    })\n                )\n            );\n        }\n    },\n\n    /**\n     * @description 初始化锤子数量和重置次数\n     */\n    initChuiZiAndRepeate: function () {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n            const titem = items[tiIndex];\n            tywx.tt.log(\"cz item = \" + JSON.stringify(titem));\n            if (titem.id == 2 || titem.id == 4 || titem.id == 6) {\n                czNumber = czNumber + titem.num;\n            }\n        }\n        this.czInitNumber = czNumber;\n        if (czNumber == 0) {\n            // this.czNumberLabel.string = \"点我获取\";\n            this.hideHarmer(true);\n        } else {\n            this.hideHarmer(false);\n            // this.czNumberLabel.string = czNumber + \"\";\n        }\n\n        // 重置次数\n        this.repeatNumber = 3;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n\n    /**\n     * @description 使用锤子回调\n     * @param {Number} add 负数为减少锤子数量 正数添加锤子数量\n     */\n    useCZNumber: function (add) {\n        const items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadcut = false;\n        for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n            if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6) && items[tiIndex].num > 0) {\n                if (!hadcut) {\n                    hadcut = true;\n                    items[tiIndex].num = items[tiIndex].num + add;\n                }\n                if (items[tiIndex].num > 0) {\n                    czNumber = czNumber + items[tiIndex].num;\n                }\n            }\n        }\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n\n        this.czInitNumber = czNumber;\n        if (czNumber == 0) {\n            this.hideHarmer(true);\n            // this.czNumberLabel.string = \"点我获取\";\n        } else {\n            this.hideHarmer(true);\n            // this.czNumberLabel.string = czNumber + \"\";\n        }\n    },\n\n    /**\n     * @description 使用换一换的刷新回调\n     */\n    useRepeateCall: function () {\n        if (this.repeatNumber > 0) {\n            this.repeatNumber--;\n            this.repNumberLabel.string = this.repeatNumber + \"/3\";\n        } else {\n            tywx.tt.error(TAG, \"换一换的使用次数为 \" + this.repeatNumber)\n        }\n    },\n\n    /**\n     * 重置换一换的次数\n     */\n    repeateRepeatNumberCall: function (repnum) {\n        this.gameover = false;\n        this.repeatNumber = 3;\n        this.useRepeateNumber = this.useRepeateNumber + 1;\n        this.repNumberLabel.string = this.repeatNumber + \"/3\";\n    },\n\n    /**\n     * @添加锤子\n     * @param {Number} num 添加锤子的数量\n     */\n    addCZCallBack: function (num) {\n        var items = JSON.parse(tywx.tt.Utils.loadItem(\"tt-items\", \"[]\"));\n        var czNumber = 0;\n        var hadadd = false;\n        if (items.length == 0) {\n            items = [];\n            var item = {};\n            item.id = 2;\n            item.num = num;\n            item.name = \"锤子\";\n            items[0] = item;\n            czNumber = num;\n        } else {\n            for (var tiIndex = 0; tiIndex < items.length; tiIndex++) {\n                if ((items[tiIndex].id == 2 || items[tiIndex].id == 4 || items[tiIndex].id == 6)) {\n                    if (!hadadd) {\n                        hadadd = true;\n                        items[tiIndex].num = items[tiIndex].num + num;\n                    }\n                    if (items[tiIndex].num > 0) {\n                        czNumber = czNumber + items[tiIndex].num;\n                    }\n                }\n            }\n        }\n        tywx.tt.log(\"锤子的数量  = \" + czNumber);\n        tywx.tt.Utils.saveItem(\"tt-items\", JSON.stringify(items), false);\n        this.czInitNumber = czNumber;\n        // this.czNumberLabel.string = czNumber + \"\";\n    },\n\n    /**\n     * @description 刷新显示\n     */\n    flushPreviewStatueUI: function () {\n        let stats = this.board.previewStat;\n        console.log(\" 设置的状态 =  \" + stats[0]);\n        console.log(stats.length + \" 当前的所有状态 = \" + stats);\n        let haszeorstate = false;\n\n        for (let ti1 = 0; ti1 < stats.length; ti1++) {\n            if (stats[ti1] == 0 && tywx.tt.Board.previewConfigs[ti1] != null) {\n                this.previews[ti1].getComponent(\"tt_view_priview_blocks\").setGrey();\n                haszeorstate = true;\n            } else {\n                this.previews[ti1].getComponent(\"tt_view_priview_blocks\").hideGrey();\n            }\n        }\n\n        if (haszeorstate == true) {\n            this.alertNode.active = true;\n            this.alertNode.getComponent(\"cc.Animation\").play(\"dangertip\");\n        } else {\n            this.alertNode.active = false;\n        }\n    },\n\n       refreshPreStatue: function () {\n        //    if (this.hadrefresh) {\n        //        return;\n        //    }\n           let self = this;\n           this.hadrefresh = true;\n           let time = tywx.tt.Board.hasclear == true? 0.5 : 0.2;\n           this.doGameOver(); \n       },\n    \n    /** \n     * @description 处理游戏是否结束\n     */\n    doGameOver: function () {\n        this.hadrefresh = false;\n        let self = this;\n        let deal = false;\n        for (let tg = 0; tg < 3; tg++) {\n            if (tywx.tt.Board.previewConfigs[tg] != null) {\n                deal = true;\n                break;\n            }\n        }\n        console.log(\"gameover p判断的preview = \" + JSON.stringify(tywx.tt.Board.previewConfigs));\n        // if (!deal) {\n        //     return;\n        // }\n        this.flushPreviewStatueUI();\n        // tywx.Timer.setTimer(this, self.flushPreviewStatueUI, 0.25, 0, 0);\n        // console.log(this.board.previewStat.length + \"this.bord = \" + JSON.stringify(this.board.previewStat));\n        let stats = this.board.previewStat\n        tywx.tt.log(TAG, stats.length + \"this.bord = \" + stats);\n        let gameover = true;\n\n        for (let ti1 = 0; ti1 < stats.length; ti1++) {\n            if (stats[ti1] == 1) {\n                gameover = false;\n            }\n\n        }\n\n        const tgameover = gameover && this.repeatNumber == 0;\n        tywx.tt.log(\"tgameover \" + tgameover);\n        if (tgameover) {\n            this.alertNode.active = false;\n            this.gameover = true;\n            tywx.tt.Utils.hideWXBanner();\n            const share_control = tywx.tt.configManager.getInstance().share_control ? tywx.tt.configManager.getInstance().share_control.gethuanyihuan : [\"share\", 50];\n            const calltype = tywx.tt.Utils.shareVideoCtr(share_control);\n            tywx.tt.tipview.show({\n                success: function () {\n                    self.repeateRepeatNumberCall();\n                },\n                tip: \"免费获得3次换一换！可以复活!\",\n                config: calltype == 1 ? tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_SHARE : tywx.tt.constants.ShareConfig.GET_HUNAYIHUAN_NUMBER_VIEDO,\n                calltype: calltype,\n                closecall: function () {\n                    // 停止刷新即将超越的好友\n                    tywx.tt.friend.setStop(true);\n                    // 显示复活界面\n                    tywx.tt.fuhuo.show({\n                        score: self.board.score,\n                    })\n                }\n            });\n\n        }\n    },\n\n    /**\n     * @description 显示帮助界面\n     */\n    showHelp: function () {\n        this.helpindex = 1;\n        let data = [];\n        for (var row = 0; row < 8; row++) {\n            for (let bordI = 0; bordI < 8; bordI++) {\n                var tdata = [];\n                tdata[0] = row;\n                tdata[1] = bordI;\n                tdata[2] = 3;\n                if ((row >= 3 && row < 5 && (bordI != 3 && bordI != 4))) {\n                    data.push(tdata);\n                } else {\n                    let canadd = true;\n                    if ((bordI == 3 || bordI == 4) && (row == 3 || row == 4)) {\n                        canadd = false;\n                    }\n                    let [r, c] = [tdata[0], tdata[1]];\n                    if (this.board.board[r][c] === 0 && canadd) {\n                        this.board.board[r][c] = -2;\n                        this.board.emptyBlocks.delete(`${r}_${c}`);\n                    }\n                }\n            }\n        }\n        data.forEach(e => {\n            let [r, c] = [e[0], e[1]];\n            if (this.board.board[r][c] === 0) {\n                this.board.board[r][c] = e[2];\n                this.board.emptyBlocks.delete(`${r}_${c}`);\n            }\n            let tmp_block_view = this.blockViews[e[0]][e[1]];\n            let tmp_block_sc = tmp_block_view.getComponent('tt_view_block');\n            tmp_block_sc.setStat(e[2]);\n        })\n        this.board.previewStat[0] = 0;\n        this.board.previewStat[1] = 1;\n        this.board.previewStat[0] = 0;\n        // this.blockViews[3][3].opacity = 122,\n        // this.blockViews[4][3].opacity = 122,\n        let p4pos = this.blockViews[4][3].position;\n        this.blinkNode.position = cc.v2(p4pos.x + 38, p4pos.y);\n        // this.blockViews[3][3].getComponent(\"tt_view_block\").blockBlink();\n        // this.blockViews[4][3].getComponent(\"tt_view_block\").blockBlink();\n        this.helpts.node.active = true;\n        // this.helpts.node.position = this.blockViews[3][3].parent.parent.position;\n        this.previews[0].active = false;\n        this.previews[2].active = false;\n        this.helpTip.active = true;\n        let scale1 = cc.scaleTo(0.5, 1.1);\n        let scale2 = cc.scaleTo(0.5, 1);\n        let delay = cc.delayTime(0.2);\n        let seq = cc.sequence(scale1, scale2, delay);\n        this.blinkNode.zIndex = 99998;\n        this.shouzhiNode.zIndex = 99999;\n        this.blinkNode.runAction(cc.repeatForever(seq));\n        let rep = cc.repeatForever(cc.sequence(cc.scaleTo(0.5, 1.1), cc.scaleTo(0.5, 1)));\n        this.helpts.node.runAction(rep);\n        this.previews[1].getComponent(\"tt_view_priview_blocks\").resetByConfig(this.getHelpPreviewBlockData());\n        this.showzhiAction(this.blockViews[3][3].position);\n        tywx.tt.log(TAG, \"新手数据  = \" + JSON.stringify(this.helpts.node.position));\n    },\n\n    showzhiAction: function (position) {\n        this.shouzhiNode.stopAllActions();\n        this.shouzhiNode.active = true;\n        this.shouzhiNode.getComponent(cc.Animation).play(\"dragani\");\n        this.shouzhiNode.position = cc.v2(this.previews[1].position.x + 45, this.previews[1].position.y - 38);\n        let move = cc.moveTo(0.5, cc.v2(position.x + 76, position.y + 38));\n        let delay = cc.delayTime(0.5);\n        let move2 = cc.moveTo(0.5, cc.v2(this.previews[1].position.x + 45, this.previews[1].position.y - 38));\n        let seq2 = cc.sequence(move, delay, move2);\n        this.shouzhiNode.runAction(cc.repeatForever(seq2));\n    },\n\n    /**\n     * @description 完成第一步帮助后的回调\n     */\n    helpAdd: function () {\n        if (this.helpindex > 0) {\n            this.helpindex++;\n            if (this.helpindex == 2) {\n                var self = this;\n                this.helpTipLabel.string = \"再拖动块到目标位置,就可以消除这两行了。\"\n                this.previews[1].active = true;\n                tywx.Timer.setTimer(this, function () {\n                    this.showzhiAction(this.blockViews[3][4].position);\n                    // this.blockViews[3][3].getComponent(\"tt_view_block\").blockHide();\n                    // this.blockViews[4][3].getComponent(\"tt_view_block\").blockHide();\n                    // this.blockViews[3][4].getComponent(\"tt_view_block\").blockBlink();\n                    // this.blockViews[4][4].getComponent(\"tt_view_block\").blockBlink();\n                    let p4pos = this.blockViews[4][4].position;\n                    this.blinkNode.position = cc.v2(p4pos.x + 38, p4pos.y);\n                    self.previews[1].getComponent(\"tt_view_priview_blocks\").resetByConfig(self.getHelpPreviewBlockData())\n                }, 1, 0, 0.3);\n            } else {\n                // 清空棋盘重新开始\n                this.helpindex = -1;\n                this.helpts.node.stopAllActions();\n                this.helpts.node.active = false;\n                this.helpTipLabel.string = \"恭喜您，祝您玩得愉快。\"\n                var self = this;\n                // this.blockViews[3][4].getComponent(\"tt_view_block\").blockHide();\n                // this.blockViews[4][4].getComponent(\"tt_view_block\").blockHide();\n                // this.board.forseResetPreviews();\n                this.shouzhiNode.active = false;\n                this.blinkNode.stopAllActions();\n\n                this.shouzhiNode.stopAllActions();\n                this.blinkNode.active = false;\n                tywx.Timer.setTimer(this, function () {\n                    tywx.tt.log(TAG, \"新手引导结束\");\n                    tywx.tt.Utils.saveItem(\"hadhelp\", 2, true);\n                    this.previews[0].active = true;\n                    this.previews[1].active = true;\n                    this.previews[2].active = true;\n                    this.helpTip.active = false;\n                    tywx.tt.BoardView.reset();\n                }, 1, 0, 2);\n            }\n        }\n    },\n\n    /** \n     * @description 得到给定的帮助的格子数据\n     */\n    getHelpPreviewBlockData: function () {\n        const config = tywx.tt.constants.Blocks[1];\n        return config;\n    },\n\n    /** \n     * @description 得到是否需要帮助\n     */\n    getHelp: function () {\n        const hadhelp = tywx.tt.Utils.loadItem(\"hadhelp\", 1);\n        return hadhelp;\n    },\n\n    /**\n     * @description 复活游戏\n     */\n    recoverGame: function () {\n        this.gameover = false;\n        let clears = [];\n        let rows = [0, 1, 2, 3, 4, 5, 6, 7];\n        let columns = [0, 1, 2, 3, 4, 5, 6, 7];\n        for (let ti = 0; ti < 8; ti++) {\n            let data = {};\n            data.row = rows[ti];\n            data.column = columns[7 - ti];\n            clears.push(data);\n            data = {};\n            data.row = rows[7 - ti];\n            data.column = columns[ti];\n            clears.push(data);\n        }\n        tywx.tt.log(TAG, \"data clear = \" + JSON.stringify(clears));\n        clears.forEach(data => {\n            this.board.hammerClearByRowAndCol(data.row, data.column);\n        });\n        tywx.tt.Board.refreshPreviewStat();\n    },\n\n    /**\n     * @description 显示抽奖\n     * @param {Object} param 消除行列的位置信息\n     */\n    showLottery: function (param) {\n        if (this.helpindex && this.helpindex < 3) {\n            return\n        }\n        if (this.gameover) {\n            return;\n        }\n\n        if (!tywx.tt.configManager.getInstance().lottery) {\n            return;\n        }\n        // 产看当前是否有宝箱可以弹出\n        let boxs = this.lotteryboxs;\n        this.lotteryboxs = [];\n        // 显示宝箱\n        var self = this;\n        if (boxs.length > 0) {\n            this.lotteryboxnumber = this.lotteryboxnumber - boxs.length;\n            tywx.tt.lottery.showLottery(\"game\", function () {\n                self.addCZCallBack(0);\n                tywx.tt.lottery.removeLotteryView();\n            });\n\n        }\n        tywx.tt.log(TAG, \"当前宝箱个数 = \" + this.lotteryboxnumber);\n        // 处理显示的宝箱\n        var cjIndex = 0;\n        for (let scoreIndex = 0; scoreIndex < tywx.tt.configManager.getInstance().lottery.score.length; scoreIndex++) {\n            if (this.board.score <= tywx.tt.configManager.getInstance().lottery.score[scoreIndex]) {\n                cjIndex = scoreIndex;\n                break;\n            }\n        }\n        let rate = tywx.tt.configManager.getInstance().lottery.rate[cjIndex];\n        let max = tywx.tt.configManager.getInstance().lottery.max[cjIndex];\n        let random = Math.random();\n        // 产生抽奖\n        tywx.tt.log(TAG, \"score = \" + this.board.score + \" max = \" + max + \"random = \" + random + \" rate =  \" + rate + \" cjIndex = \" + cjIndex);\n        if (random <= rate && this.lotteryboxnumber < max) {\n            this.lotteryboxnumber++;\n            // 1 row 2 col\n            let tbord = [];\n            for (let r = 0; r < this.board.board.length; r++) {\n                let tdata = this.board.board[r];\n                for (let c = 0; c < tdata.length; c++) {\n                    if (this.board.board[r][c] > 0) {\n                        let tgz = {};\n                        tgz.row = r;\n                        tgz.column = c;\n                        tbord.push(tgz);\n                    }\n                }\n            }\n            let sbord = tbord[parseInt(Math.random() * tbord.length)];\n            tywx.tt.log(\"展示的位置2  = \" + JSON.stringify(sbord));\n            if (sbord.row && sbord.column) {\n                this.blockViews[sbord.row][sbord.column].getComponent(\"tt_view_block\").setStat(12);\n                this.board.board[sbord.row][sbord.column] = 12;\n                this.board.emptyBlocks.delete(`${ sbord.row}_${sbord.column}`);\n            }\n        } else {\n\n        }\n    },\n\n\n\n    /**\n     * @description 添加宝箱\n     * @param 添加宝箱的位置信息\n     */\n    addLotteryBox: function (param) {\n\n    },\n\n    /**\n     * @description 得到玩家数据\n     */\n    getPlayHistoryData: function () {\n        let data = tywx.tt.Utils.getPlayDataByKey(tywx.tt.constants.PlayDataKeys.ttplaydata);\n        tywx.tt.log(\"玩家记录数据 = \" + data);\n        if (data != -1) {\n            data = JSON.parse(data);\n        }\n        return data\n    },\n\n    /**\n     * @description 初始化游戏进度的数据\n     */\n    initHistoryPlayData: function () {\n        if (this.playdata != -1) {\n            // 设置score\n            // this.board.setScore(this.playdata.score);\n            this.repeatNumber = this.playdata.huanyihuan;\n            // 设置刷新次数\n            this.repNumberLabel.string = this.repeatNumber + \"/3\";\n            // 刷新棋盘数据\n            let alle = [];\n            for (let tr = 0; tr < this.playdata.bord.length; tr++) {\n                let tdata = this.playdata.bord[tr];\n                for (let tc = 0; tc < tdata.length; tc++) {\n                    let cdata = [];\n                    cdata[0] = tr;\n                    cdata[1] = tc;\n                    cdata[2] = tdata[tc];\n                    alle.push(cdata);\n                }\n            }\n            this.board.fillBord(alle);\n            // 刷新拖动数据\n            let previewdata = this.playdata.previewsdata;\n            let previewIndex = this.playdata.previewIndex;\n            tywx.tt.Board.previewConfigs = previewdata;\n            tywx.tt.Board.previewIndex = previewIndex;\n            console.log(\"borddata = \" + JSON.stringify(previewIndex));\n            for (let ti = 0; ti < previewdata.length; ti++) {\n                let config = previewdata[ti];\n                let preview_sc = this.previews[ti].getComponent(\"tt_view_priview_blocks\");\n                if (config) {\n                    preview_sc.resetByConfig(config);\n                } else {\n                    preview_sc.put();\n                }\n            }\n            tywx.tt.Board.refreshPreviewStat();\n            tywx.tt.Utils.clearPlayDataByKey(tywx.tt.constants.PlayDataKeys.ttplaydata, -1);\n        }\n    },\n\n\n    /**\n     * @description 显示添加的分数\n     * @param {Number} score 分数\n     * @param {cc.v2} pos 显示的位置\n     */\n    showAddScore: function (somedata, score) {\n        // console.log(\"当前清除数据 = \" + JSON.stringify(somedata));\n        // console.log(\"当前填充数据 = \" + JSON.stringify(this.fillblocks));\n        if ((somedata.rows.length > 0 || somedata.cols.length > 0) && this.fillblocks.length > 0) {\n            let pos = cc.v2(0, 0)\n            let allcell = [];\n            if (somedata.rows.length > 0) {\n                for (let rowindex = 0; rowindex < somedata.rows.length; rowindex++) {\n                    for (let filleindex = 0; filleindex < this.fillblocks.length; filleindex++) {\n                        if (somedata.rows[rowindex] == this.fillblocks[filleindex][0]) {\n                            allcell.push(this.fillblocks[filleindex]);\n                        }\n                    }\n                }\n            }\n            if (somedata.cols.length > 0) {\n                for (let colindex = 0; colindex < somedata.cols.length; colindex++) {\n                    for (let filleindex = 0; filleindex < this.fillblocks.length; filleindex++) {\n                        if (somedata.cols[colindex] == this.fillblocks[filleindex][1]) {\n                            allcell.push(this.fillblocks[filleindex]);\n                        }\n                    }\n                }\n            }\n            // console.log(\"当前可以显示分数的位置 \" + JSON.stringify(allcell));\n            if (allcell.length > 0) {\n                if (!this.addscoreLabel) {\n                    this.addscoreLabel = cc.instantiate(this.addscoreLabelPrefab);\n                    this.root.addChild(this.addscoreLabel, 120000);\n                }\n                let randomshowIndex = parseInt(Math.random() * allcell.length);\n                // console.log(\"randomshowIndex = \" + randomshowIndex);\n                let poscell = allcell[randomshowIndex];\n                if (poscell) {\n                    pos = this.blockViews[poscell[0]][poscell[1]].position;\n                    pos = cc.v2(pos.x + this.blockViews[poscell[0]][poscell[1]].width / 2, pos.y + this.blockViews[poscell[0]][poscell[1]].height / 2)\n                    this.addscoreLabel.position = pos;\n                    this.addscoreLabel.getComponent(\"AddScoreLabel\").setScore(score);\n                    this.addscoreLabel.getComponent(\"AddScoreLabel\").show();\n                }\n            } else {\n                tywx.tt.log(TAG, \"当前没有显示分数的位置 计算可能出错了\");\n            }\n        }\n    },\n\n    /**\n     * @description 隐藏底板所有的块\n     */\n    hideAllBlocks: function () {\n        let [w, h] = [tywx.tt.constants.BoardWidth, tywx.tt.constants.BoardWidth];\n        for (let r = 0; r < h; ++r) {\n            for (let c = 0; c < w; ++c) {\n                let tmp_view = this.blockViews[r][c];\n                tmp_view.active = false;\n            }\n        }\n    },\n    /**\n     * @description 动画显示底板所有的块\n     */\n    blocksAni: function () {\n        this.isTouchLocked = true;\n        this.hideAllBlocks();\n        if (!this.allcellsanis) {\n            let allcells = [];\n            let dir = 0;\n            let outnumber = 8;\n            for (let row = 0; row < 4; row++) {\n                if (dir == 0) {\n                    for (let right = row; right < outnumber; right++) {\n                        let data = {};\n                        data.row = row;\n                        data.column = right;\n                        allcells.push(data);\n                    }\n                    dir = 1;\n                }\n                if (dir == 1) {\n                    for (let up = row + 1; up < outnumber; up++) {\n                        let data = {};\n                        data.row = up;\n                        data.column = outnumber - 1;\n                        allcells.push(data);\n                    }\n                    dir = 2;\n                }\n                if (dir == 2) {\n                    for (let left = outnumber - 2; left >= 0; left--) {\n                        let data = {};\n                        data.row = outnumber - 1;\n                        data.column = left;\n                        allcells.push(data);\n                    }\n                    dir = 3;\n                }\n                if (dir == 3) {\n                    for (let down = outnumber - 2; down > 0; down--) {\n                        let data = {};\n                        data.row = down;\n                        data.column = row;\n                        allcells.push(data);\n                    }\n                    dir = 0;\n                }\n                outnumber--;\n            }\n            this.allcellsanis = allcells;\n        }\n\n        let tindex = 0;\n        var self = this;\n        let showcall = cc.callFunc(function () {\n            let data = self.allcellsanis[tindex];\n            let block = self.blockViews[data.row][data.column];\n            block.active = true;\n            tindex++;\n            if (tindex == self.allcellsanis.length) {\n                self.isTouchLocked = false;\n            }\n        });\n        let totaltime = 1.2;\n        let delay = cc.delayTime(totaltime / this.allcellsanis.length);\n        let seq = cc.sequence(showcall, delay);\n        let trepeate = cc.repeat(seq, this.allcellsanis.length)\n        this.node.stopAllActions();\n        this.node.runAction(trepeate);\n        //  console.log(allcells.length + \" zongchangdu  = \" + JSON.stringify(allcells));\n    },\n});"]}