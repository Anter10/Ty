{"version":3,"sources":["loadingscene.js"],"names":["TAG","cc","Class","extends","Component","properties","loadingProgress","ProgressBar","loadingLabel","Label","onLoad","tywx","tt","Utils","sendWXMsg","method","MAIN_MENU_NUM","constants","TT_SCORE","boot","PropagateInterface","getShareConfigInfo","self","progressNumber","caninto","NotificationCenter","listen","events","LOGIN_SUCCESS","loginSuccess","TT_GET_CONFIG_FAIL","dealConfig","TT_GET_CONFIG_SUCCESS","dealFailConfig","console","log","isMinGanIP","isMinGanIp","AdManager","ipLocInfo","getIPSuccess","res","JSON","stringify","configManager","getInstance","auditing","requestRedPacket","success","fail","startGame","e","director","loadScene","update","dt","progress","string","hadinto"],"mappings":"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","file":"loadingscene.js","sourceRoot":"../../../../../../assets/scripts/game/view","sourcesContent":["let TAG = \"[view/tt_scene_menu]\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        loadingProgress: cc.ProgressBar,\n        loadingLabel: cc.Label,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        tywx.tt.Utils.sendWXMsg({\n            method: \"load_data\",\n            MAIN_MENU_NUM: tywx.tt.constants.TT_SCORE,\n        })\n        tywx.tt.boot();\n        tywx.PropagateInterface.getShareConfigInfo(); //! 获取所有分享点信息\n        // 当前最大分数\n        var self = this;\n        this.progressNumber = 0;\n        this.caninto = false;\n        tywx.NotificationCenter.listen(tywx.tt.events.LOGIN_SUCCESS, this.loginSuccess, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_GET_CONFIG_FAIL, this.dealConfig, this);\n        tywx.NotificationCenter.listen(tywx.tt.events.TT_GET_CONFIG_SUCCESS, this.dealFailConfig, this);\n    },\n\n    dealConfig: function () {\n        this.caninto = true;\n        console.log(\"得到配置 开始游戏 \");\n        tywx.tt.isMinGanIP = tywx.tt.Utils.isMinGanIp(tywx.AdManager.ipLocInfo);\n        // this.startGame();\n    },\n\n    dealFailConfig: function () {\n        this.caninto = true;\n        console.log(\"没有得到配置 开始游戏 \");\n        // this.startGame();\n    },\n\n    /**\n     * @param {Object} res 得到IP的回调\n     */\n    getIPSuccess: function (res) {\n        tywx.tt.log(TAG, \"IP信息 = \" + JSON.stringify(res));\n    },\n\n    /**\n     * @description 延迟加载初始化某些数据\n     */\n    loginSuccess() {\n        // ! 显示红包\n        let self = this;\n        if (tywx.tt.configManager.getInstance().auditing) return;\n        // ! 登陆游戏后第一次进入菜单特殊处理\n        tywx.tt.Utils.requestRedPacket({\n            success: (res) => {\n                tywx.tt.log(TAG, \"审核状态 = \" + tywx.tt.configManager.getInstance().auditing + \"玩家红包数据= \" + JSON.stringify(res));\n            },\n            fail: (res) => {\n            }\n        });\n    },\n\n\n    /**\n     * @description 点击开始游戏的时候调用\n     * @param {Object} e 回调的对象\n     */\n    startGame: function (e) {\n        console.log(\"开始游戏了\");\n        cc.director.loadScene(\"scene_play\");\n\n    },\n    update(dt) {\n        if (this.progressNumber < 1) {\n            this.progressNumber = this.progressNumber + (dt / 1.6);\n            this.loadingProgress.progress = this.progressNumber;\n            if (this.progressNumber >= 1) {\n                this.loadingLabel.string = \"稍等...\";\n            }\n        } else if (!this.hadinto && this.caninto) {\n            this.hadinto = true;\n            this.startGame();\n        }\n    },\n});"]}