{"version":3,"sources":["../../../../../assets/script/CommonFrame/assets/script/CommonFrame/TY_MSG.js"],"names":["ElsUtils","require","ELSEvent","tywx","MSG","_sendCmd","jsonData","params","userId","UserInfo","gameId","SystemInfo","version","clientId","intClientId","apiVersion","namespace","TCPClient","sendMsg","bindUser","EventType","CMD_BIND_USER","appId","authorCode","bindGame","CMD_BIND_GAME","getUserInfo","CMD_USER_INFO","hallInfo","CMD_HALL_INFO","hallItem5","_sourceItem","_targetItem","_amount","CMD_ITEM","transformProduct","_sourceProductId","_targetProductId","getBagInfo","getELSBag","getRewardInfo","CMD_ELSWX","CMD_ACTION_REWARD_INFO","addRewardDiamond","_reason","_friendUserId","CMD_ACTION_ADD_DIAMOND","enterGame","_shareUserId","CMD_ACTION_ENTER_GAME","getNextAdreward","CMD_ACTION_NEXT_ADREWARD","syncItems","_items","CMD_ACTION_SYNC_ITEMS","consumeItem","_kindId","_count","_kc","undefined","setItemCount","NotificationCenter","trigger","ELS_EVENT_UPDATE_BAG","bag","CMD_ACTION_CONSUME_ITEMS","getRewardItems","CMD_ACTION_REWARD_ITEMS","getItemId","map","ret","mp","Map","rand","parseInt","Math","random","k","v","addItems","_index","_itemId","_map","CMD_ACTION_ADD_ITEMS","getStoreList","CMD_STORE","CMD_STORE_LIST","whisperStart","_uuid","CMD_ACTION_WHISPER_START","whisperPass","_sendUser","CMD_ACTION_WHISPER_PASS","whisperPassInfo","CMD_ACTION_WHISPER_INFO","requestDailyLogin","CMD_ACTION_DAILY_LOGIN","CMD_ACTION_ELS_BAG"],"mappings":"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","file":"TY_MSG.js","sourceRoot":"../../../../../assets/script/CommonFrame","sourcesContent":["var ElsUtils = require(\"../core/ElsUtils.js\");\nvar ELSEvent = require(\"../core/ElsEvents.js\");\n\ntywx.MSG = {\n\n    _sendCmd: function (jsonData) {\n        jsonData.params = jsonData.params || {};\n        jsonData.params.userId = jsonData.params.userId || tywx.UserInfo.userId;//ty.UserInfo.userId;\n        jsonData.params.gameId = jsonData.params.gameId || tywx.SystemInfo.gameId;\n        jsonData.params.version = jsonData.params.version || tywx.SystemInfo.version;\n        jsonData.params.clientId = tywx.SystemInfo.clientId;\n        jsonData.params.intClientId = tywx.SystemInfo.intClientId;\n        jsonData.apiVersion = jsonData.apiVersion || 5;\n        jsonData.namespace = \"hall5\";\n        tywx.TCPClient.sendMsg(jsonData);\n    },\n\n    /**\n     * 用户绑定\n     */\n    bindUser: function() {\n        let params = {\n            'cmd': tywx.EventType.CMD_BIND_USER,\n            'params': {\n                'gameId': tywx.SystemInfo.appId,\n                'authorCode': tywx.UserInfo.authorCode\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    /**\n     * 插件绑定\n     */\n    bindGame: function(gameId) {\n        let params = {\n            'cmd': tywx.EventType.CMD_BIND_GAME,\n            'params': {\n                'gameId': gameId || tywx.SystemInfo.gameId,\n                'authorCode': tywx.UserInfo.authorCode\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    /**\n     * 获取UserInfo，大厅获取9999的UserInfo，单版获取6的\n     */\n    getUserInfo: function() {\n        let params = {\n            'cmd': tywx.EventType.CMD_USER_INFO,\n            'params' : {\n                'gameId': tywx.SystemInfo.appId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    hallInfo: function() {\n        let params = {\n            'cmd': tywx.EventType.CMD_HALL_INFO,\n            'params' : {\n                'gameId': tywx.SystemInfo.appId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n//    {\"cmd\":\"item5\",\"apiVersion\":5.0,\"namespace\":\"hall5\",\"params\":{\"action\":\"transform\",\"userId\":10018,\"intClientId\":23834,\"gameId\":9999,\"sourceItemKindId\":1014,\"targetItemKindId\":1015,\"amount\":3}}\n\n    // 消耗钻石兑换商品\n    hallItem5: function (_sourceItem, _targetItem, _amount) {\n        let params = {\n            'cmd' : tywx.EventType.CMD_ITEM,\n            'params' : {\n                'action' : 'transform',\n                \"sourceItemKindId\" : _sourceItem || 1014,\n                \"targetItemKindId\" : _targetItem,\n                \"amount\" : _amount,\n                'gameId': tywx.SystemInfo.appId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 消耗钻石兑换商品\n    transformProduct: function (_sourceProductId, _targetProductId, _amount) {\n        let params = {\n            'cmd' : tywx.EventType.CMD_ITEM,\n            'params' : {\n                'action' : 'product',\n                \"sourceProductId\" : _sourceProductId || \"TY20016D0000001\",\n                \"targetProductId\" : _targetProductId,\n                \"amount\" : _amount,\n                'gameId': tywx.SystemInfo.appId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 获取背包\n    getBagInfo: function () {\n        this.getELSBag();\n        // let params = {\n        //     \"apiVersion\": 5.2,\n        //     \"cmd\": tywx.EventType.CMD_ITEM,\n        //     \"params\": {\n        //         \"action\": \"list\",\n        //         'gameId': tywx.SystemInfo.appId\n        //     }\n        // };\n        // this._sendCmd(params);\n    },\n\n    getRewardInfo: function () {\n        let params = {\n            \"apiVersion\": 5.2,\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_REWARD_INFO,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    addRewardDiamond:function (_reason, _friendUserId) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_ADD_DIAMOND,\n                \"reason\": _reason || 3,\n                \"friendUserId\": _friendUserId || 0\n            }\n        };\n        this._sendCmd(params);\n    },\n    \n    enterGame: function (_shareUserId) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_ENTER_GAME,\n                \"shareUserId\": _shareUserId\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getNextAdreward: function () {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_NEXT_ADREWARD,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 同步道具\n    syncItems: function (_items) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_SYNC_ITEMS,\n                \"items\":_items || []\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 消耗道具\n    consumeItem: function (_kindId, _count) {\n        let _kc = _count !== undefined ? -1 * _count : -1;\n        if (!tywx.UserInfo.setItemCount(_kindId, _kc)) {\n            return false;\n        }\n        tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_UPDATE_BAG, tywx.UserInfo.bag);\n        let _items = [{\n            \"itemId\":_kindId,\n            \"count\":_count || 1\n        }];\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_CONSUME_ITEMS,\n                \"items\":_items\n            }\n        };\n        this._sendCmd(params);\n        return true;\n    },\n\n    // 获取每日解锁道具信息\n    getRewardItems: function () {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_REWARD_ITEMS,\n            }\n        };\n        this._sendCmd(params);\n    },\n    /**\n     * * 随机获取道具\n     * @param {Map} map 道具概率， 默认为空\n     * \n     * @return {Number} 获得的道具ID\n     */\n    getItemId: function(map = null){\n        let ret = -1;\n        // 根据概率随机道具 [道具_id,[min,max]] 范围[0,100),计算的时候[min,max)\n        //new Map([[1017,[0,50]],[1018,[51,60]],[1019,[61,100]]])\n        let mp = map || new Map([[1017,[0,50]],[1018,[51,60]],[1019,[61,100]]]);\n        let rand = parseInt(Math.random() * 100); // 随机范围 [0,100)\n        for( let [k,v] of mp){\n            //[min,max)\n            if(rand >= v[0] && rand < v[1]){\n                ret = k;\n                break;\n            }\n        }\n        return ret;\n    },\n\n    // 添加道具 6:过关瓶子满 7 每日解锁道具\n    addItems:function (_reason, _index, _itemId, _map = null) {\n        if (_reason === 6 && !_itemId) {\n            _itemId = this.getItemId(_map);\n            tywx.UserInfo.setItemCount(_itemId, 1);\n            tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_UPDATE_BAG, tywx.UserInfo.bag);\n        }\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_ADD_ITEMS,\n                \"reason\": _reason || 7,\n                \"itemId\": _itemId || 0,\n                \"itemIndex\":_index || 0\n            }\n        };\n        this._sendCmd(params);\n        return _itemId;\n    },\n\n    // 获取道具配置\n    getStoreList:function (_reason, _index, _itemId) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_STORE,\n            \"params\": {\n                'gameId': tywx.SystemInfo.appId,\n                \"action\": tywx.EventType.CMD_STORE_LIST,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // elswx#whisper_start， userId,whisperId,itemId,amount\n    whisperStart:function (_uuid, _itemId, _amount) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_WHISPER_START,\n                \"whisperId\": _uuid || \"\",\n                \"itemId\": _itemId || [],\n                \"amount\": _amount || 1,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 悄悄话通关\n    /**\n     * @param  {[type]} _sendUser [发送者]\n     * @param  {[type]} _uuid     [悄悄话唯一标示]\n     */\n    // elswx#whisper_pass,   userId,shareUserId,whisperId\n    whisperPass:function (_sendUser, _uuid) {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_WHISPER_PASS,\n                \"shareUserId\": _sendUser || 0,\n                \"whisperId\": _uuid || \"\"\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    // 悄悄话被通关信息\n    whisperPassInfo:function () {\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_WHISPER_INFO,\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    requestDailyLogin:function(){\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_DAILY_LOGIN\n            }\n        };\n        this._sendCmd(params);\n    },\n\n    getELSBag:function(){\n        let params = {\n            \"cmd\": tywx.EventType.CMD_ELSWX,\n            \"params\": {\n                \"action\": tywx.EventType.CMD_ACTION_ELS_BAG\n            }\n        };\n        this._sendCmd(params);\n    },\n\n};"]}