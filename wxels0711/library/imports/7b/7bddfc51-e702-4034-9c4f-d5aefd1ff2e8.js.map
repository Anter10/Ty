{"version":3,"sources":["../../../../../../assets/script/ui/unlock/assets/script/ui/unlock/unlock.js"],"names":["cc","Class","extends","Component","properties","unlock_content","Node","item_prefab","Prefab","onLoad","addNodes","self","wx","showToast","title","icon","duration","tywx","NotificationCenter","listen","EventType","CMD_ELSWX","_MsgELSWX","MSG","getRewardItems","items","i","c","instantiate","_x","_y","position","v2","getComponent","init","undefined","parent","push","params","result","action","CMD_ACTION_REWARD_ITEMS","_data","rewardItems","show_with_data","CMD_ACTION_ADD_ITEMS","hideToast","dismiss_unlock_node","AdManager","destroyBannerAd","node","active","removeFromParent","destroyAllChildren","destroy","fromHome","UIManager","game","continueGame","onDestroy","ignoreScope"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAgBL,GAAGM,IADX;AAERC,qBAAcP,GAAGQ;AAFT,KAHP;;AAQL;;AAEAC,UAVK,oBAUK;AACN;AACA,aAAKC,QAAL;AACA,YAAIC,OAAO,IAAX;AACAC,WAAGC,SAAH,CAAa;AACTC,mBAAO,OADE;AAETC,kBAAM,SAFG;AAGTC,sBAAU;AAHD,SAAb;AAKA;AACAC,aAAKC,kBAAL,CAAwBC,MAAxB,CAA+BF,KAAKG,SAAL,CAAeC,SAA9C,EAAyD,KAAKC,SAA9D,EAAyE,IAAzE;AACA;AACAL,aAAKM,GAAL,CAASC,cAAT;AACH,KAvBI;AAyBLd,YAzBK,sBAyBK;AACN,aAAKe,KAAL,GAAa,EAAb;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA6B;AAAC;AAC1B,gBAAIC,IAAI3B,GAAG4B,WAAH,CAAe,KAAKrB,WAApB,CAAR;AACA,gBAAIsB,KAAKH,IAAI,CAAJ,KAAU,CAAV,GAAc,CAAC,GAAf,GAAqB,GAA9B;AACA,gBAAII,KAAKJ,KAAK,CAAL,GAAS,CAAC,GAAV,GAAgB,GAAzB;AACAC,cAAEI,QAAF,GAAa/B,GAAGgC,EAAH,CAAMH,EAAN,EAAUC,EAAV,CAAb;AACAH,cAAEM,YAAF,CAAe,aAAf,EAA8BC,IAA9B,CAAmCC,SAAnC,EAA8CT,CAA9C;AACAC,cAAES,MAAF,GAAW,KAAK/B,cAAhB;AACA,iBAAKoB,KAAL,CAAWY,IAAX,CAAgBV,CAAhB;AACH;AACJ,KApCI;AAsCLL,aAtCK,qBAsCKgB,MAtCL,EAsCa;AACd,YAAIA,OAAOC,MAAP,CAAcC,MAAd,KAAyBvB,KAAKG,SAAL,CAAeqB,uBAA5C,EAAqE;AACjE,gBAAIC,QAAQJ,OAAOC,MAAP,CAAcI,WAA1B;AACA,iBAAKC,cAAL,CAAoBF,KAApB;AACH;AACD,YAAIJ,OAAOC,MAAP,CAAcC,MAAd,KAAyBvB,KAAKG,SAAL,CAAeyB,oBAA5C,EAAkE;AAC9D5B,iBAAKM,GAAL,CAASC,cAAT;AACH;AACH,KA9CG;AAgDLoB,kBAhDK,0BAgDUF,KAhDV,EAgDiB;AAClB;AACA9B,WAAGkC,SAAH;AACA;AACA,aAAK,IAAIpB,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA6B;AAAC;AAC1B,iBAAKD,KAAL,CAAWC,CAAX,EAAcO,YAAd,CAA2B,aAA3B,EAA0CC,IAA1C,CAA+CQ,MAAMhB,CAAN,CAA/C,EAAyDA,CAAzD;AACH;AACJ,KAvDI;AAyDLqB,uBAzDK,iCAyDgB;AACjB9B,aAAK+B,SAAL,CAAeC,eAAf;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,aAAKD,IAAL,CAAUE,gBAAV;AACA,aAAKF,IAAL,CAAUG,kBAAV;AACA,aAAKH,IAAL,CAAUI,OAAV;AACA,YAAI,CAAC,KAAKC,QAAV,EAAoB;AAChB,iBAAKA,QAAL,GAAgB,KAAhB;AACAtC,iBAAKuC,SAAL,CAAeC,IAAf,CAAoBC,YAApB;AACH;AACJ,KAnEI;AAqELC,aArEK,uBAqEM;AACP1C,aAAKC,kBAAL,CAAwB0C,WAAxB,CAAoC,IAApC;AACH;;AAED;;AAzEK,CAAT","file":"unlock.js","sourceRoot":"../../../../../../assets/script/ui/unlock","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        unlock_content: cc.Node,\n        item_prefab : cc.Prefab\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        // this.node.active = false;\n        this.addNodes();\n        let self = this;\n        wx.showToast({\n            title: '加载中..',\n            icon: 'loading',\n            duration: 2000,\n        });\n        // 添加监听\n        tywx.NotificationCenter.listen(tywx.EventType.CMD_ELSWX, this._MsgELSWX, this);\n        // 获取数据\n        tywx.MSG.getRewardItems();\n    },\n\n    addNodes(){\n        this.items = [];\n        for (let i = 0; i < 4; i ++) {// 创建 4 个\n            let c = cc.instantiate(this.item_prefab);\n            let _x = i % 2 === 0 ? -130 : 130;\n            let _y = i >= 2 ? -178 : 190;\n            c.position = cc.v2(_x, _y);\n            c.getComponent(\"unlock_item\").init(undefined, i);\n            c.parent = this.unlock_content;\n            this.items.push(c);\n        }\n    },\n\n    _MsgELSWX(params) {\n        if (params.result.action === tywx.EventType.CMD_ACTION_REWARD_ITEMS) {\n            let _data = params.result.rewardItems;\n            this.show_with_data(_data);\n        }\n        if (params.result.action === tywx.EventType.CMD_ACTION_ADD_ITEMS) {\n            tywx.MSG.getRewardItems();\n        }\n     },\n\n    show_with_data(_data) {\n        // 获取数据\n        wx.hideToast();\n        // this.node.active = true;\n        for (let i = 0; i < 4; i ++) {// 创建 4 个\n            this.items[i].getComponent(\"unlock_item\").init(_data[i], i);\n        }\n    },\n\n    dismiss_unlock_node(){\n        tywx.AdManager.destroyBannerAd();\n        this.node.active = false;\n        this.node.removeFromParent();\n        this.node.destroyAllChildren();\n        this.node.destroy();\n        if (!this.fromHome) {\n            this.fromHome = false;\n            tywx.UIManager.game.continueGame();\n        }\n    },\n\n    onDestroy(){\n        tywx.NotificationCenter.ignoreScope(this);\n    }\n\n    // update (dt) {},\n});\n"]}