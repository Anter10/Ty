{"version":3,"sources":["../../../../../assets/script/ui/assets/script/ui/AnimationMagicProgressCtrl.js"],"names":["ELSEvent","require","cc","Class","extends","Component","properties","onLoad","pauseFrameIdx","start","progressTo","num","console","log","main","game","gameNode","getComponent","yanhua","active","pauseGame","tywx","NotificationCenter","trigger","ELS_EVENT_MAGIC_BOTTLE_FULL","ani","node","Animation","pause","ELS_EVENT_MAGIC_BOTTLE_ADD","ELS_EVENT_MAGIC_RESET_BOTTLE","setEndFrame","frame_idx","resume","setGame"],"mappings":";;;;;;AAAA,IAAIA,WAAWC,QAAQ,sBAAR,CAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOL;;AAEAC,UATK,oBASK;AACN,aAAKC,aAAL,GAAqB,CAArB;AACH,KAXI;AAaLC,SAbK,mBAaI,CAER,CAfI;;;AAiBL;AACAC,cAlBK,sBAkBMC,GAlBN,EAkBU;AACXC,gBAAQC,GAAR,CAAY,aAAZ,EAA0BF,GAA1B,EAA+B,KAAKH,aAApC;AACA,YAAGG,QAAQ,CAAX,EAAa;AACT,gBAAIG,OAAO,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,YAAnB,CAAgC,MAAhC,CAAX;AACA,gBAAG,CAACH,KAAKI,MAAL,CAAYC,MAAhB,EAAuB;AACnB,qBAAKJ,IAAL,CAAUK,SAAV;AACA,qBAAKZ,aAAL,GAAqB,CAArB;AACAa,qBAAKC,kBAAL,CAAwBC,OAAxB,CAAgCvB,SAASwB,2BAAzC,EAAqEb,GAArE;AACH,aAJD,MAKI;AACA,oBAAIc,MAAM,KAAKC,IAAL,CAAUT,YAAV,CAAuBf,GAAGyB,SAA1B,CAAV;AACAF,oBAAIG,KAAJ;AACA;AACH;AACJ,SAZD,MAaK,IAAIjB,QAAQ,KAAKH,aAAjB,EAA+B;AAChC,gBAAIiB,OAAM,KAAKC,IAAL,CAAUT,YAAV,CAAuBf,GAAGyB,SAA1B,CAAV;AACAF,iBAAIG,KAAJ;AACAP,iBAAKC,kBAAL,CAAwBC,OAAxB,CAAgCvB,SAAS6B,0BAAzC,EAAoElB,GAApE;AACH,SAJI,MAKA,IAAGA,MAAM,KAAKH,aAAd,EAA4B;AAC7B,iBAAKA,aAAL,GAAqB,CAArB;AACA,gBAAIiB,QAAM,KAAKC,IAAL,CAAUT,YAAV,CAAuBf,GAAGyB,SAA1B,CAAV;AACAF,kBAAIG,KAAJ;AACAP,iBAAKC,kBAAL,CAAwBC,OAAxB,CAAgCvB,SAAS8B,4BAAzC,EAAsE,CAAtE;AACH;AACJ,KA5CI;AA6CLC,eA7CK,uBA6COC,SA7CP,EA6CiB;AAClBpB,gBAAQC,GAAR,CAAY,eAAZ,EAA6BmB,SAA7B,EAAwC,KAAKxB,aAA7C;AACA,YAAGwB,cAAc,KAAKxB,aAAnB,IAAoC,KAAKA,aAAL,KAAuB,CAA9D,EAAgE;AAC5D,iBAAKA,aAAL,GAAqB,CAArB;AACA,gBAAIM,OAAO,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,YAAnB,CAAgC,MAAhC,CAAX;AACA,gBAAG,CAACH,KAAKI,MAAL,CAAYC,MAAhB,EAAuB;AACnB,qBAAKJ,IAAL,CAAUK,SAAV;AACAC,qBAAKC,kBAAL,CAAwBC,OAAxB,CAAgCvB,SAASwB,2BAAzC,EAAqEQ,SAArE;AACH;AACD;AACH;AACD,YAAGA,YAAY,KAAKxB,aAApB,EAAkC;AAC9B,gBAAIiB,MAAM,KAAKC,IAAL,CAAUT,YAAV,CAAuBf,GAAGyB,SAA1B,CAAV;AACAF,gBAAIQ,MAAJ;AACH;AACD,aAAKzB,aAAL,GAAqBwB,SAArB;AACH,KA7DI;AA8DLE,WA9DK,mBA8DGnB,IA9DH,EA8DQ;AACT,aAAKA,IAAL,GAAYA,IAAZ;AACH;AAhEI,CAAT","file":"AnimationMagicProgressCtrl.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["let ELSEvent = require('../core/ElsEvents.js');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.pauseFrameIdx = 0;\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    progressTo(num){\n        console.log('progressTo1',num, this.pauseFrameIdx);\n        if(num === 9){  \n            let main = this.game.gameNode.getComponent('main');\n            if(!main.yanhua.active){\n                this.game.pauseGame();\n                this.pauseFrameIdx = 0;\n                tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_MAGIC_BOTTLE_FULL,num);\n            }\n            else{\n                let ani = this.node.getComponent(cc.Animation);\n                ani.pause();\n                //tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_MAGIC_RESET_BOTTLE,0);\n            }\n        }\n        else if (num === this.pauseFrameIdx){    \n            let ani = this.node.getComponent(cc.Animation);\n            ani.pause();\n            tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_MAGIC_BOTTLE_ADD,num);\n        }\n        else if(num > this.pauseFrameIdx){\n            this.pauseFrameIdx = 0;\n            let ani = this.node.getComponent(cc.Animation);\n            ani.pause();\n            tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_MAGIC_RESET_BOTTLE,0);\n        }\n    },\n    setEndFrame(frame_idx){\n        console.log('sen end frame', frame_idx, this.pauseFrameIdx);\n        if(frame_idx === this.pauseFrameIdx && this.pauseFrameIdx === 9){\n            this.pauseFrameIdx = 0;\n            let main = this.game.gameNode.getComponent('main');\n            if(!main.yanhua.active){\n                this.game.pauseGame();\n                tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_MAGIC_BOTTLE_FULL,frame_idx);\n            }\n            return;\n        }\n        if(frame_idx > this.pauseFrameIdx){\n            let ani = this.node.getComponent(cc.Animation);\n            ani.resume();\n        }\n        this.pauseFrameIdx = frame_idx;\n    },\n    setGame(game){\n        this.game = game;\n    },\n});\n"]}