{"version":3,"sources":["searchAIPage.js"],"names":["els","require","cc","Class","extends","Component","properties","gameNode","Node","searchdone","searchai_msg","mogu","onLoad","start","game","tywx","UIManager","model","showMe","active","string","that","setTimeout","_searchResult","hideAllUI","showUI","ELS_GAME_LAYER","GAME_VS","setGameStatus","ELS_GAME_STATE","PLAYING","startTimerCountdown","ELS_TIMER_COUNT","random","Math","floor","headSpri","getChildByName","getComponent","Sprite","info","Label","gameview","headAtlas","frame","getSpriteFrame","spriteFrame","console","log","ailevel","aipl","parseInt","abs","pkstar_level","maxti","ELS_PLAYER_TITLE2","length"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,gBAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAWL,GAAGM,IADN;AAERC,oBAAYP,GAAGM,IAFP;AAGRE,sBAAaR,GAAGM,IAHR;AAIRG,cAAKT,GAAGM;AAJA,KAHP;;AAUL;;AAEAI,UAZK,oBAYK,CAAE,CAZP;AAcLC,SAdK,mBAcI;AACL,aAAKC,IAAL,GAAYC,KAAKC,SAAL,CAAeF,IAA3B;AACA,aAAKG,KAAL,GAAa,KAAKH,IAAL,CAAUG,KAAvB;AACH,KAjBI;;;AAmBLC,YAAS,kBAAY;AACjB,aAAKP,IAAL,CAAUQ,MAAV,GAAmB,IAAnB;AACA,aAAKT,YAAL,CAAkBS,MAAlB,GAA2B,IAA3B;AACA,aAAKV,UAAL,CAAgBU,MAAhB,GAAyB,KAAzB;AACA,aAAKT,YAAL,CAAkBU,MAAlB,GAA2B,WAA3B;;AAEA,YAAIC,OAAO,IAAX;AACAC,mBAAW,YAAY;AACnBD,iBAAKE,aAAL;AACAD,uBAAW,YAAY;AACnBP,qBAAKC,SAAL,CAAeQ,SAAf;AACAT,qBAAKC,SAAL,CAAeS,MAAf,CAAsBzB,IAAI0B,cAAJ,CAAmBC,OAAzC;AACAN,qBAAKJ,KAAL,CAAWW,aAAX,CAAyB5B,IAAI6B,cAAJ,CAAmBC,OAA5C;AACAT,qBAAKP,IAAL,CAAUiB,mBAAV,CAA8B/B,IAAIgC,eAAlC;AACH,aALD,EAKG,IALH;AAMH,SARD,EAQG,IARH;AASH,KAnCI;;AAqCLT,mBAAe,yBAAY;AACvB,aAAKZ,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACA,aAAKT,YAAL,CAAkBS,MAAlB,GAA2B,KAA3B;AACA,aAAKV,UAAL,CAAgBU,MAAhB,GAAyB,IAAzB;;AAEA,YAAIc,SAASC,KAAKC,KAAL,CAAWD,KAAKD,MAAL,KAAgB,EAA3B,CAAb;;AAEA,YAAIG,WAAW,KAAK3B,UAAL,CAAgB4B,cAAhB,CAA+B,YAA/B,EAA6CC,YAA7C,CAA0DpC,GAAGqC,MAA7D,CAAf;AACA,YAAIC,OAAO,KAAK/B,UAAL,CAAgB4B,cAAhB,CAA+B,gBAA/B,EAAiDC,YAAjD,CAA8DpC,GAAGuC,KAAjE,CAAX;;AAEA,YAAIC,WAAW,KAAKnC,QAAL,CAAc+B,YAAd,CAA2B,MAA3B,CAAf;AACA,YAAII,SAASC,SAAb,EAAwB;AACpB,gBAAIC,QAAQF,SAASC,SAAT,CAAmBE,cAAnB,CAAkCZ,SAAS,CAA3C,CAAZ;AACAG,qBAASU,WAAT,GAAuBF,KAAvB;AACH;;AAEDG,gBAAQC,GAAR,CAAY,YAAY,KAAK/B,KAAL,CAAWgC,OAAnC;AACA,YAAIC,OAAOC,SAASjB,KAAKkB,GAAL,CAAS,KAAKnC,KAAL,CAAWoC,YAAX,GAAwB,GAAxB,GAA4BnB,KAAKD,MAAL,KAAc,CAAnD,CAAT,CAAX;AACA,YAAIqB,QAAQtD,IAAIuD,iBAAJ,CAAsBC,MAAtB,GAA6B,CAAzC;AACA,YAAGN,OAAOI,KAAV,EAAiBJ,OAAOI,KAAP;AACjBd,aAAKpB,MAAL,GAAcpB,IAAIuD,iBAAJ,CAAsBL,IAAtB,EAA4B,CAA5B,CAAd;AACH;AACD;AA3DK,CAAT","file":"searchAIPage.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["var els = require(\"../core/els.js\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gameNode : cc.Node,\n        searchdone: cc.Node,\n        searchai_msg:cc.Node,\n        mogu:cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {},\n\n    start () {\n        this.game = tywx.UIManager.game;\n        this.model = this.game.model;\n    },\n\n    showMe : function () {\n        this.mogu.active = true;\n        this.searchai_msg.active = true;\n        this.searchdone.active = false;\n        this.searchai_msg.string = '正在匹配对手...';\n\n        var that = this;\n        setTimeout(function () {\n            that._searchResult();\n            setTimeout(function () {\n                tywx.UIManager.hideAllUI();\n                tywx.UIManager.showUI(els.ELS_GAME_LAYER.GAME_VS);\n                that.model.setGameStatus(els.ELS_GAME_STATE.PLAYING);\n                that.game.startTimerCountdown(els.ELS_TIMER_COUNT);\n            }, 2000);\n        }, 1500);\n    },\n\n    _searchResult: function () {\n        this.mogu.active = false;\n        this.searchai_msg.active = false;\n        this.searchdone.active = true;\n\n        var random = Math.floor(Math.random() * 13);\n\n        var headSpri = this.searchdone.getChildByName(\"headsprite\").getComponent(cc.Sprite);\n        var info = this.searchdone.getChildByName(\"info_level_msg\").getComponent(cc.Label);\n\n        var gameview = this.gameNode.getComponent('main');\n        if (gameview.headAtlas) {\n            var frame = gameview.headAtlas.getSpriteFrame(random + 1);\n            headSpri.spriteFrame = frame;\n        };\n\n        console.log(\"AILEVEL\" + this.model.ailevel);\n        var aipl = parseInt(Math.abs(this.model.pkstar_level+1.5-Math.random()*3));\n        var maxti = els.ELS_PLAYER_TITLE2.length-1;\n        if(aipl > maxti) aipl = maxti;\n        info.string = els.ELS_PLAYER_TITLE2[aipl][1];\n    },\n    // update (dt) {},\n});\n"]}