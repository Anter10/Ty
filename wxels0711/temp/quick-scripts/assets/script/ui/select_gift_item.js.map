{"version":3,"sources":["select_gift_item.js"],"names":["ELSEvent","require","cc","Class","extends","Component","properties","product_icon","Sprite","product_price","Label","product_name_node","product_name","product_select_tag","onLoad","node","active","init","data","index","string","_data","_index","_select","displayName","name","priceDiamond","itemId","content","items","setImage","updateSelect","isS","_node","_itemId","ELS_PRODUCT_CONFIG","url","scale","y","_item","console","log","purl","rotation","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","select_item","tywx","NotificationCenter","trigger","ELS_EVENT_SELECT_GIFT","item","select"],"mappings":"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","file":"select_gift_item.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["var ELSEvent = require(\"../core/ElsEvents.js\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        product_icon:cc.Sprite,\n        product_price:cc.Label,\n        product_name_node:cc.Sprite,\n        product_name:cc.Label,\n        product_select_tag:cc.Sprite,\n    },\n\n    onLoad() {\n\n        this.product_select_tag.node.active = false;\n    },\n\n    init(data, index) {\n        this.product_price.string = \"\";\n        this._data = data;\n        this._index = index;\n        this._select = false;\n        this.product_name_node.node.active = false;\n        this.product_price.node.active = false;\n        if (!data) {\n            return;\n        }\n\n        if (this._data[\"showName\"]) {\n            this.product_name_node.node.active = true;\n            this.product_name.string = this._data.displayName;\n        }\n\n        let name = data.priceDiamond + \"\";\n        this.itemId = data.content.items[0].itemId;\n        this.setImage(this.product_icon, this.itemId);\n        this.product_price.string = name;\n        this.product_price.node.active = true;\n    },\n\n    updateSelect(isS) {\n        this._select = isS;\n        this.product_select_tag.node.active = isS;\n    },\n\n    setImage: function setImage(_node, _itemId) {\n        var ELS_PRODUCT_CONFIG = {\n          \"item:1301\": {\n            url: \"image/prop_icons/daoju01\",\n            scale: .35,\n            y: 5.65\n          },\n          \"item:1302\": {\n            url: \"image/prop_icons/daoju04\",\n            scale: .39,\n            y: 5.65\n          },\n          \"item:1303\": {\n            url: \"image/prop_icons/daoju03\",\n            scale: .3,\n            y: 14.2\n          },\n          \"item:1304\": {\n            url: \"image/prop_icons/daoju02\",\n            scale: .39,\n            y: 7\n          },\n          \"item:1305\": {\n            url: \"image/prop_icons/daoju05\",\n            scale: .4,\n            y: 2.3\n          },\n          \"item:1306\": {\n            url: \"image/prop_icons/daoju06\",\n            scale: .34,\n            y: 1.95\n          },\n          \"item:1307\": {\n            url: \"image/prop_icons/daoju001\",\n            scale: 1,\n            y: 5.9\n          }\n        };\n        var _item = ELS_PRODUCT_CONFIG[_itemId + \"\"];\n        if (!_item) {\n          console.log(\"local config not exist!!\");\n          return;\n        }\n        var purl = _item[\"url\"];\n        _node.node.rotation = _item[\"rotation\"];\n        _node.node.scale = _item[\"scale\"];\n        _node.node.y = _item[\"y\"];\n        cc.loader.loadRes(purl, cc.SpriteFrame, function (err, spriteFrame) {\n            if (!err) {\n                _node.getComponent('cc.Sprite').spriteFrame = spriteFrame;\n            }\n            else{\n                console.log('loadResError',err);\n            }\n        });\n      },\n\n    select_item() {\n        console.log(\"select_item\");\n        if (!this._data) {\n            return;\n        }\n        // TODO: 发送礼物选中事件 播放动画\n        tywx.NotificationCenter.trigger(ELSEvent.ELS_EVENT_SELECT_GIFT, {item:this._data, index:this._index, select: this._select});\n    },\n\n    // update (dt) {},\n});\n"]}