{"version":3,"sources":["ComboAnimation.js"],"names":["cc","Class","extends","Component","properties","nodeGood","Node","nodeCombo","nodeAwesome","onLoad","comboNum","playAnimationCount","is_combo","active","start","play","init","combo","console","log","tmp_node","getChildByName","combo_label","getComponent","Label","string","showCombo","showGood","showAwesome","node","removeFromParent","ani","Animation","self","on","num","animationEnd"],"mappings":"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","file":"ComboAnimation.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nodeGood: cc.Node,\n        nodeCombo: cc.Node,\n        nodeAwesome: cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.comboNum = 0;\n        this.playAnimationCount = 0;\n        this.is_combo = false;\n        this.nodeGood.active = false;\n        this.nodeCombo.active = false;\n        this.nodeAwesome.active = false;\n    },\n\n    start () {\n        this.play();\n    },\n\n    // update (dt) {},\n\n    init(is_combo,combo){\n        console.log('combo animation init',is_combo,combo);\n        this.comboNum = combo;\n        this.is_combo = is_combo;\n        if(is_combo){\n            let tmp_node = this.nodeCombo.getChildByName('heji');\n            let combo_label = tmp_node.getChildByName('label').getComponent(cc.Label);\n            if(combo_label){\n                combo_label.string = combo + '';\n            }\n        }\n        \n    },\n    play(){\n        console.log('combo animation play');\n        this.playAnimationCount = 0;\n        if(this.is_combo){\n            if(this.comboNum >= 3){\n                //! show combo\n                this.showCombo();\n            }\n        }\n        else{\n            if(this.comboNum === 3){\n                //! show good\n                this.showGood();\n            }\n            else if(this.comboNum >= 4){\n                //! show awesome\n                this.showAwesome();\n            }\n            else{\n                this.node.removeFromParent();\n            }\n        }\n    },\n    showGood(){\n        console.log('play good');\n        this.nodeGood.active = true;\n        let ani = this.nodeGood.getComponent(cc.Animation);\n        ani.play();\n        this.playAnimationCount++;\n\n        let self = this;\n        ani.on('finished', (num, string)=>{\n            console.log('good finished',num, string);\n            self.animationEnd();\n        }, this);\n    },\n    showAwesome(){\n        console.log('play awesome');\n        this.nodeAwesome.active = true;\n        let ani = this.nodeAwesome.getComponent(cc.Animation);\n        ani.play();\n        this.playAnimationCount++;\n\n        let self = this;\n        ani.on('finished', (num, string)=>{\n            console.log('awesome finished',num, string);\n            self.animationEnd();\n        }, this);\n    },\n    showCombo(){\n        console.log('play combo');\n        this.nodeCombo.active = true;\n        let ani = this.nodeCombo.getComponent(cc.Animation);\n        ani.play();\n        this.playAnimationCount++;\n\n        let self = this;\n        ani.on('finished', (num, string)=>{\n            console.log('combo finished',num, string);\n            self.animationEnd();\n        }, this);\n    },\n    animationEnd(){\n        this.playAnimationCount--;\n        if(this.playAnimationCount <= 0){\n            this.node.removeFromParent();\n        }\n    }\n});\n"]}