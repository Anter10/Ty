{"version":3,"sources":["gameVSmode.js"],"names":["els","require","cc","Class","extends","Component","properties","gameNode","default","type","Node","displayName","keepstarOK","keepstar","lose","win","prefabMTAnima","Prefab","nodeAdapterBgHome","nodeAdapterGame","onLoad","gameview","getComponent","node","getChildByName","start","showMe","game","tywx","UIManager","model","active","stopAllParticleSys","openData","self","loader","loadRes","err","prefab","preFabNode","instantiate","parent","showBeyond","showWin","console","log","StarControl","createStars","ELS_PLAYER_TITLE2","pkstar_level","pkstar_level_get","bc","string","setTimeout","playAddStarAni","succ","Animation","play","pcs","ParticleSystem","resetSystem","showLose","playDelStarAni","shibai","pcs1","stopSystem","pcs2","showKeepStar","btn","time","Label","runAction","repeat","sequence","scaleTo","delayTime","callFunc","label","parseInt","btnKeepStarOk","emergencyShare","btnLoseBack","loseBackToHome","btnRestarGame","reStartGame","btnNextStage","nextStage","btnKeepStarCancel","cancelKeepStar","btnKeepStarShare","stopAllActions","keepStarShare","btnShare","ShareInterface","shareMsg","ELS_SHRAE_TYPE","GAME_VS_WIN"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,gBAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,kBAAU;AACNC,qBAAS,IADH;AAENC,kBAAMP,GAAGQ,IAFH;AAGNC,yBAAa;AAHP,SAFF;AAORC,oBAAYV,GAAGQ,IAPP;AAQRG,kBAAUX,GAAGQ,IARL;AASRI,cAAMZ,GAAGQ,IATD;AAURK,aAAKb,GAAGQ,IAVA;AAWRM,uBAAed,GAAGe,MAXV,EAWkB;AAC1BC,2BAAmBhB,GAAGQ,IAZd;AAaRS,yBAAiBjB,GAAGQ;AAbZ,KAHP;;AAmBL;;AAEAU,UArBK,oBAqBI;AACL,aAAKC,QAAL,GAAgB,KAAKd,QAAL,CAAce,YAAd,CAA2B,MAA3B,CAAhB;AACA,aAAKR,IAAL,GAAY,KAAKS,IAAL,CAAUC,cAAV,CAAyB,MAAzB,CAAZ;AACA,aAAKT,GAAL,GAAW,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,KAAzB,CAAX;AACH,KAzBI;AA2BLC,SA3BK,mBA2BG;AACJ;AACA;AACR;AACK,KA/BI;;;AAiCLC,YAAQ,kBAAY;AAChB,aAAKC,IAAL,GAAYC,KAAKC,SAAL,CAAeF,IAA3B;AACA,aAAKG,KAAL,GAAa,KAAKH,IAAL,CAAUG,KAAvB;;AAEA,aAAKhB,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACA,aAAKhB,GAAL,CAASgB,MAAT,GAAkB,KAAlB;AACA,aAAKnB,UAAL,CAAgBmB,MAAhB,GAAyB,KAAzB;AACA,aAAKlB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACA,aAAKC,kBAAL;AACA,aAAKd,iBAAL,CAAuBa,MAAvB,GAAgC,KAAhC;AACA,aAAKZ,eAAL,CAAqBY,MAArB,GAA8B,IAA9B;AACA,YAAI,CAAC,KAAKE,QAAV,EAAoB;AAChB,gBAAIC,OAAO,IAAX;AACAhC,eAAGiC,MAAH,CAAUC,OAAV,CAAkB,iBAAlB,EAAqC,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACxD,oBAAIC,aAAarC,GAAGsC,WAAH,CAAeF,MAAf,CAAjB;AACAC,2BAAWE,MAAX,GAAoBP,KAAKX,IAAzB;AACAW,qBAAKD,QAAL,GAAgBM,UAAhB;AACAL,qBAAKD,QAAL,CAAcX,YAAd,CAA2B,UAA3B,EAAuCoB,UAAvC,CAAkD,YAAlD;AACH,aALD;AAMH;AACJ,KArDI;;AAuDLC,aAAS,mBAAY;AACjB,aAAK7B,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACA,aAAKhB,GAAL,CAASgB,MAAT,GAAkB,IAAlB;;AAEA,YAAIR,OAAO,KAAKR,GAAL,CAASS,cAAT,CAAwB,eAAxB,CAAX;AACAoB,gBAAQC,GAAR,CAAY,UAAZ,EAAwB,6BAA6B,KAAKf,KAA1D,EAAiEP,IAAjE;;AAEAK,aAAKkB,WAAL,CAAiBC,WAAjB,CAA6BxB,IAA7B,EAAmCvB,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAAnC,EAAsF,KAAKnB,KAAL,CAAWoB,gBAAjG,EAAmH,CAAnH;AACA,YAAIC,KAAK,KAAKpC,GAAL,CAASS,cAAT,CAAwB,WAAxB,CAAT;AACA2B,WAAG7B,YAAH,CAAgB,UAAhB,EAA4B8B,MAA5B,GAAqCpD,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAArC;;AAEAI,mBAAW,YAAY;AACnBzB,iBAAKkB,WAAL,CAAiBQ,cAAjB;AACH,SAFD,EAEG,GAFH;;AAIA;AACA,YAAIC,OAAO,KAAKxC,GAAL,CAASS,cAAT,CAAwB,kBAAxB,CAAX;AACA+B,aAAKjC,YAAL,CAAkBpB,GAAGsD,SAArB,EAAgCC,IAAhC,CAAqC,kBAArC;AACA;AACA,YAAIC,MAAMH,KAAK/B,cAAL,CAAoB,kBAApB,EAAwCF,YAAxC,CAAqDpB,GAAGyD,cAAxD,CAAV;AACAD,YAAIE,WAAJ;AACA;AAEH,KA9EI;;AAgFLC,cAAU,oBAAY;AAClBjB,gBAAQC,GAAR,CAAY,gBAAZ;AACA,aAAK/B,IAAL,CAAUiB,MAAV,GAAmB,IAAnB;AACA,aAAKhB,GAAL,CAASgB,MAAT,GAAkB,KAAlB;AACA,aAAKlB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACA,aAAKnB,UAAL,CAAgBmB,MAAhB,GAAyB,KAAzB;;AAEA,YAAI,CAAC,KAAKD,KAAL,CAAWjB,QAAhB,EAA0B;;AAEtB+B,oBAAQC,GAAR,CAAY,gBAAZ,EAA6B7C,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAA7B,EAA+EjD,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAA/E;AACA,iBAAKnC,IAAL,CAAUiB,MAAV,GAAmB,IAAnB;;AAEA,gBAAIR,OAAO,KAAKT,IAAL,CAAUU,cAAV,CAAyB,eAAzB,CAAX;AACAI,iBAAKkB,WAAL,CAAiBC,WAAjB,CAA6BxB,IAA7B,EAAmCvB,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAAnC,EAAsF,KAAKnB,KAAL,CAAWoB,gBAAjG,EAAmH,CAAnH;AACA;AACA,gBAAIC,KAAK,KAAKrC,IAAL,CAAUU,cAAV,CAAyB,WAAzB,CAAT;AACA2B,eAAG7B,YAAH,CAAgB,UAAhB,EAA4B8B,MAA5B,GAAqCpD,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAArC;AACAL,oBAAQC,GAAR,CAAY,YAAZ,EAAyBM,EAAzB,EAA4B5B,IAA5B,EAAkCA,KAAKQ,MAAvC;;AAEAsB,uBAAW,YAAY;AACnBzB,qBAAKkB,WAAL,CAAiBgB,cAAjB;AACH,aAFD,EAEG,GAFH;;AAIA;AACA,gBAAIC,SAAS,KAAKjD,IAAL,CAAUU,cAAV,CAAyB,iBAAzB,CAAb;AACAuC,mBAAOzC,YAAP,CAAoBpB,GAAGsD,SAAvB,EAAkCC,IAAlC,CAAuC,iBAAvC;AACA;AACA,gBAAIC,MAAMK,OAAOvC,cAAP,CAAsB,kBAAtB,EAA0CF,YAA1C,CAAuDpB,GAAGyD,cAA1D,CAAV;AACAD,gBAAIE,WAAJ;AACH,SAtBD,MAsBO;AACHhB,oBAAQC,GAAR,CAAY,gBAAZ;AACA,iBAAKjC,UAAL,CAAgBmB,MAAhB,GAAyB,IAAzB;AACA,iBAAKjB,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;;AAEA;AACA,gBAAIgC,SAAS,KAAKnD,UAAL,CAAgBY,cAAhB,CAA+B,iBAA/B,CAAb;AACAuC,mBAAOzC,YAAP,CAAoBpB,GAAGsD,SAAvB,EAAkCC,IAAlC,CAAuC,iBAAvC;AACA,gBAAIlC,OAAO,KAAKX,UAAL,CAAgBY,cAAhB,CAA+B,eAA/B,CAAX;AACAI,iBAAKkB,WAAL,CAAiBC,WAAjB,CAA6BxB,IAA7B,EAAmCvB,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAAnC,EAAsF,KAAKnB,KAAL,CAAWoB,gBAAjG,EAAmH,CAAnH;AACA,gBAAIC,KAAK,KAAKvC,UAAL,CAAgBY,cAAhB,CAA+B,WAA/B,CAAT;AACA2B,eAAG7B,YAAH,CAAgB,UAAhB,EAA4B8B,MAA5B,GAAqCpD,IAAIgD,iBAAJ,CAAsB,KAAKlB,KAAL,CAAWmB,YAAjC,EAA+C,CAA/C,CAArC;AACAI,uBAAW,YAAY;AACnBzB,qBAAKkB,WAAL,CAAiBQ,cAAjB;AACH,aAFD,EAEG,GAFH;AAGA;AACA,gBAAII,OAAMK,OAAOvC,cAAP,CAAsB,kBAAtB,EAA0CF,YAA1C,CAAuDpB,GAAGyD,cAA1D,CAAV;AACAD,iBAAIE,WAAJ;AAEH;AACD;AACH,KAlII;;AAoIL5B,sBApIK,gCAoIe;AAChB,YAAI+B,SAAS,KAAKnD,UAAL,CAAgBY,cAAhB,CAA+B,iBAA/B,CAAb;AACAuC,eAAOzC,YAAP,CAAoBpB,GAAGsD,SAAvB,EAAkCC,IAAlC,CAAuC,iBAAvC;AACA,YAAIO,OAAOD,OAAOvC,cAAP,CAAsB,kBAAtB,EAA0CF,YAA1C,CAAuDpB,GAAGyD,cAA1D,CAAX;AACAK,aAAKC,UAAL;AACA;AACA,YAAIV,OAAO,KAAKxC,GAAL,CAASS,cAAT,CAAwB,kBAAxB,CAAX;AACA+B,aAAKjC,YAAL,CAAkBpB,GAAGsD,SAArB,EAAgCC,IAAhC,CAAqC,kBAArC;AACA;AACA,YAAIS,OAAOX,KAAK/B,cAAL,CAAoB,kBAApB,EAAwCF,YAAxC,CAAqDpB,GAAGyD,cAAxD,CAAX;AACAO,aAAKD,UAAL;AACH,KA/II;;AAgJL;;;AAGAE,kBAAc,wBAAY;AACtB,aAAKrD,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACA,aAAKhB,GAAL,CAASgB,MAAT,GAAkB,KAAlB;AACA,aAAKnB,UAAL,CAAgBmB,MAAhB,GAAyB,KAAzB;AACA,aAAKlB,QAAL,CAAckB,MAAd,GAAuB,IAAvB;AACA,YAAIqC,MAAM,KAAKvD,QAAL,CAAcW,cAAd,CAA6B,WAA7B,CAAV;AACA,YAAI6C,OAAO,KAAKxD,QAAL,CAAcW,cAAd,CAA6B,SAA7B,CAAX;AACA4C,YAAIrC,MAAJ,GAAa,KAAb;AACAsC,aAAK/C,YAAL,CAAkBpB,GAAGoE,KAArB,EAA4BlB,MAA5B,GAAqC,CAArC;AACAC,mBAAW,YAAY;AACnBe,gBAAIrC,MAAJ,GAAa,IAAb;AACH,SAFD,EAEG,IAFH;;AAIAsC,aAAKE,SAAL,CAAerE,GAAGsE,MAAH,CAAUtE,GAAGuE,QAAH,CAAYvE,GAAGwE,OAAH,CAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CAAZ,EAAuCxE,GAAGwE,OAAH,CAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,CAAvC,EACnBxE,GAAGyE,SAAH,CAAa,GAAb,CADmB,EACAzE,GAAG0E,QAAH,CAAY,YAAY;AACzC,gBAAIC,QAAQR,KAAK/C,YAAL,CAAkBpB,GAAGoE,KAArB,CAAZ;AACAO,kBAAMzB,MAAN,GAAe0B,SAASD,MAAMzB,MAAf,IAAyB,CAAxC;AACH,SAHoB,CADA,CAAV,EAIN,CAJM,CAAf;;AAOA;AACA,YAAIW,SAAS,KAAKlD,QAAL,CAAcW,cAAd,CAA6B,iBAA7B,CAAb;AACAuC,eAAOzC,YAAP,CAAoBpB,GAAGsD,SAAvB,EAAkCC,IAAlC,CAAuC,iBAAvC;AACA;AACA,YAAIC,MAAMK,OAAOvC,cAAP,CAAsB,kBAAtB,EAA0CF,YAA1C,CAAuDpB,GAAGyD,cAA1D,CAAV;AACAD,YAAIE,WAAJ;AAEH,KA9KI;;AAgLL;AACAmB,mBAAe,yBAAY;AACvB,aAAKpD,IAAL,CAAUqD,cAAV;AACH,KAnLI;;AAqLL;AACAC,eAtLK,yBAsLS;AACV,aAAKjD,kBAAL;AACAJ,aAAKC,SAAL,CAAeF,IAAf,CAAoBuD,cAApB;AACH,KAzLI;;;AA2LL;AACAC,iBA5LK,2BA4LW;AACZ,aAAKnD,kBAAL;AACA,aAAKlB,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACA,aAAKJ,IAAL,CAAUyD,WAAV;AACH,KAhMI;;;AAkML;AACAC,gBAnMK,0BAmMU;AACX,aAAKvE,IAAL,CAAUiB,MAAV,GAAmB,KAAnB;AACA,aAAKhB,GAAL,CAASgB,MAAT,GAAkB,KAAlB;AACA,aAAKC,kBAAL;AACA,aAAKL,IAAL,CAAU2D,SAAV;AACH,KAxMI;;;AA0ML;AACAC,uBAAmB,6BAAY;AAC3B,aAAK5D,IAAL,CAAU6D,cAAV;AACH,KA7MI;;AA+ML;AACAC,sBAAkB,4BAAY;AAC1B7C,gBAAQC,GAAR,CAAY,YAAZ;AACA,YAAG,KAAKlB,IAAL,CAAUG,KAAV,CAAgBjB,QAAhB,IAA4B,IAA/B,EAAqC;AACrC,YAAIwD,OAAO,KAAKxD,QAAL,CAAcW,cAAd,CAA6B,SAA7B,CAAX;AACA6C,aAAKqB,cAAL;AACA,aAAK/D,IAAL,CAAUgE,aAAV;AACA;AACD;AACF,KAxNI;;AA0NL;AACAC,YA3NK,sBA2NM;AACPhE,aAAKiE,cAAL,CAAoBC,QAApB,CAA6B;AACzBrF,kBAAKT,IAAI+F,cAAJ,CAAmBC;AADC,SAA7B;AAGH;AA/NI;;AAiOL;AAjOJ","file":"gameVSmode.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["var els = require(\"../core/els.js\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        gameNode: {\n            default: null,\n            type: cc.Node,\n            displayName: \"对[game common]的引用\"\n        },\n        keepstarOK: cc.Node,\n        keepstar: cc.Node,\n        lose: cc.Node,\n        win: cc.Node,\n        prefabMTAnima: cc.Prefab, //! 猫头鹰动画\n        nodeAdapterBgHome: cc.Node,\n        nodeAdapterGame: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.gameview = this.gameNode.getComponent(\"game\");\n        this.lose = this.node.getChildByName('lose');\n        this.win = this.node.getChildByName('win');\n    },\n\n    start() {\n        // this.lose = this.node.getChildByName('lose');\n        // this.win = this.node.getChildByName('win');\n//        this.keepstarOK.getChildByName('bx').on(cc.Node.EventType.TOUCH_END, this.btnKeepStarOk, this);\n    },\n\n    showMe: function () {\n        this.game = tywx.UIManager.game;\n        this.model = this.game.model;\n\n        this.lose.active = false;\n        this.win.active = false;\n        this.keepstarOK.active = false;\n        this.keepstar.active = false;\n        this.stopAllParticleSys();\n        this.nodeAdapterBgHome.active = false;\n        this.nodeAdapterGame.active = true;\n        if (!this.openData) {\n            let self = this;\n            cc.loader.loadRes('prefab/OpenData', function (err, prefab) {\n                var preFabNode = cc.instantiate(prefab);\n                preFabNode.parent = self.node;\n                self.openData = preFabNode;\n                self.openData.getComponent(\"OpenData\").showBeyond(\"ELS_PKSTAR\");\n            });\n        }\n    },\n\n    showWin: function () {\n        this.lose.active = false;\n        this.win.active = true;\n\n        var node = this.win.getChildByName(\"starcontainer\");\n        console.log(\"fengbing\", \"--------- pkstar_level: \" + this.model, node);\n\n        tywx.StarControl.createStars(node, els.ELS_PLAYER_TITLE2[this.model.pkstar_level][0], this.model.pkstar_level_get, 1);\n        var bc = this.win.getChildByName('starlevel');\n        bc.getComponent('cc.Label').string = els.ELS_PLAYER_TITLE2[this.model.pkstar_level][1];\n\n        setTimeout(function () {\n            tywx.StarControl.playAddStarAni();\n        }, 100);\n\n        //新的成功动画\n        var succ = this.win.getChildByName(\"FangKuai_shengli\");\n        succ.getComponent(cc.Animation).play(\"FangKuai_shengli\");\n        //播放粒子 \n        let pcs = succ.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n        pcs.resetSystem();\n        //this.model.playMusic(els.ELS_VOICE.WIN_MUSIC, false);\n\n    },\n\n    showLose: function () {\n        console.log('showLose===>01');\n        this.lose.active = true;\n        this.win.active = false;\n        this.keepstar.active = false;\n        this.keepstarOK.active = false;\n\n        if (!this.model.keepstar) {\n\n            console.log('showLose===>02',els.ELS_PLAYER_TITLE2[this.model.pkstar_level][0],els.ELS_PLAYER_TITLE2[this.model.pkstar_level][0]);\n            this.lose.active = true;\n\n            var node = this.lose.getChildByName(\"starcontainer\");\n            tywx.StarControl.createStars(node, els.ELS_PLAYER_TITLE2[this.model.pkstar_level][0], this.model.pkstar_level_get, 1);\n            //tywx.StarControl.createStars(node, 3, 3, 0);\n            var bc = this.lose.getChildByName('starlevel');\n            bc.getComponent('cc.Label').string = els.ELS_PLAYER_TITLE2[this.model.pkstar_level][1];\n            console.log('show===>03',bc,node, node.active);\n\n            setTimeout(function () {\n                tywx.StarControl.playDelStarAni();\n            }, 100);\n\n            //新的失败动画\n            var shibai = this.lose.getChildByName(\"FangKuai_shibai\");\n            shibai.getComponent(cc.Animation).play(\"FangKuai_shibai\");\n            //播放粒子\n            let pcs = shibai.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n            pcs.resetSystem();\n        } else {\n            console.log('showLose===>03');\n            this.keepstarOK.active = true;\n            this.lose.active = false;\n\n            //新的失败动画  保星成功\n            var shibai = this.keepstarOK.getChildByName(\"FangKuai_shibai\");\n            shibai.getComponent(cc.Animation).play(\"FangKuai_shibai\");\n            var node = this.keepstarOK.getChildByName(\"starcontainer\");\n            tywx.StarControl.createStars(node, els.ELS_PLAYER_TITLE2[this.model.pkstar_level][0], this.model.pkstar_level_get, 1);\n            var bc = this.keepstarOK.getChildByName('starlevel');\n            bc.getComponent('cc.Label').string = els.ELS_PLAYER_TITLE2[this.model.pkstar_level][1];\n            setTimeout(function () {\n                tywx.StarControl.playAddStarAni();\n            }, 100);\n            //播放粒子 \n            let pcs = shibai.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n            pcs.resetSystem();\n\n        }\n        //this.model.playMusic(els.ELS_VOICE.LOSE_MUSIC, false);\n    },\n\n    stopAllParticleSys(){\n        var shibai = this.keepstarOK.getChildByName(\"FangKuai_shibai\");\n        shibai.getComponent(cc.Animation).play(\"FangKuai_shibai\");\n        let pcs1 = shibai.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n        pcs1.stopSystem();\n        //新的成功动画\n        var succ = this.win.getChildByName(\"FangKuai_shengli\");\n        succ.getComponent(cc.Animation).play(\"FangKuai_shengli\");\n        //播放粒子 \n        let pcs2 = succ.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n        pcs2.stopSystem();\n    },\n    /**\n     * 保星提示\n     */\n    showKeepStar: function () {\n        this.lose.active = false;\n        this.win.active = false;\n        this.keepstarOK.active = false;\n        this.keepstar.active = true;\n        var btn = this.keepstar.getChildByName(\"btngiveup\");\n        var time = this.keepstar.getChildByName(\"timettf\");\n        btn.active = false;\n        time.getComponent(cc.Label).string = 3;\n        setTimeout(function () {\n            btn.active = true;\n        }, 3000);\n\n        time.runAction(cc.repeat(cc.sequence(cc.scaleTo(0.2, 1.2, 1.2), cc.scaleTo(0.5, 1, 1)\n            , cc.delayTime(0.3), cc.callFunc(function () {\n                var label = time.getComponent(cc.Label);\n                label.string = parseInt(label.string) - 1;\n            })), 3));\n\n\n        //新的失败动画  保星\n        var shibai = this.keepstar.getChildByName(\"FangKuai_shibai\");\n        shibai.getComponent(cc.Animation).play(\"FangKuai_shibai\");\n        //播放粒子 \n        let pcs = shibai.getChildByName(\"particlesystem01\").getComponent(cc.ParticleSystem);\n        pcs.resetSystem();\n\n    },\n\n    //保星成功\n    btnKeepStarOk: function () {\n        this.game.emergencyShare();\n    },\n\n    //失败返回主界面\n    btnLoseBack() {\n        this.stopAllParticleSys();\n        tywx.UIManager.game.loseBackToHome();\n    },\n\n    //重新开始\n    btnRestarGame() {\n        this.stopAllParticleSys();\n        this.lose.active = false;\n        this.game.reStartGame();\n    },\n\n    //下一关\n    btnNextStage() {\n        this.lose.active = false;\n        this.win.active = false;\n        this.stopAllParticleSys();\n        this.game.nextStage();\n    },\n\n    //保星取消\n    btnKeepStarCancel: function () {\n        this.game.cancelKeepStar();\n    },\n\n    //保星分享\n    btnKeepStarShare: function () {\n        console.log('EEEEEEEEEE');\n        if(this.game.model.keepstar == true) return;\n        var time = this.keepstar.getChildByName(\"timettf\");\n        time.stopAllActions();\n        this.game.keepStarShare();\n        //this.keepstarOK();\n       // this.game.emergencyShare();\n    },\n\n    //分享\n    btnShare() {\n        tywx.ShareInterface.shareMsg({\n            type:els.ELS_SHRAE_TYPE.GAME_VS_WIN\n        });\n    },\n\n    // update (dt) {},\n});\n"]}